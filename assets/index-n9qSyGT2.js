var Qm=Object.defineProperty;var Zm=(e,t,r)=>t in e?Qm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Pe=(e,t,r)=>Zm(e,typeof t!="symbol"?t+"":t,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function vf(e){const t=Object.create(null);for(const r of e.split(","))t[r]=1;return r=>r in t}const Rt={},Ci=[],Jr=()=>{},Jm=()=>!1,As=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),_f=e=>e.startsWith("onUpdate:"),Wt=Object.assign,gf=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},ev=Object.prototype.hasOwnProperty,St=(e,t)=>ev.call(e,t),Qe=Array.isArray,Li=e=>_a(e)==="[object Map]",ws=e=>_a(e)==="[object Set]",Lu=e=>_a(e)==="[object Date]",ot=e=>typeof e=="function",Xt=e=>typeof e=="string",tn=e=>typeof e=="symbol",Pt=e=>e!==null&&typeof e=="object",pc=e=>(Pt(e)||ot(e))&&ot(e.then)&&ot(e.catch),mc=Object.prototype.toString,_a=e=>mc.call(e),tv=e=>_a(e).slice(8,-1),vc=e=>_a(e)==="[object Object]",yf=e=>Xt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ia=vf(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ss=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},rv=/-(\w)/g,Pn=Ss(e=>e.replace(rv,(t,r)=>r?r.toUpperCase():"")),nv=/\B([A-Z])/g,fi=Ss(e=>e.replace(nv,"-$1").toLowerCase()),_c=Ss(e=>e.charAt(0).toUpperCase()+e.slice(1)),Bo=Ss(e=>e?`on${_c(e)}`:""),On=(e,t)=>!Object.is(e,t),os=(e,...t)=>{for(let r=0;r<e.length;r++)e[r](...t)},gc=(e,t,r,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:r})},Jo=e=>{const t=parseFloat(e);return isNaN(t)?e:t},iv=e=>{const t=Xt(e)?Number(e):NaN;return isNaN(t)?e:t};let Ru;const Cs=()=>Ru||(Ru=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ls(e){if(Qe(e)){const t={};for(let r=0;r<e.length;r++){const n=e[r],i=Xt(n)?fv(n):Ls(n);if(i)for(const a in i)t[a]=i[a]}return t}else if(Xt(e)||Pt(e))return e}const av=/;(?![^(]*\))/g,sv=/:([^]+)/,ov=/\/\*[^]*?\*\//g;function fv(e){const t={};return e.replace(ov,"").split(av).forEach(r=>{if(r){const n=r.split(sv);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function ga(e){let t="";if(Xt(e))t=e;else if(Qe(e))for(let r=0;r<e.length;r++){const n=ga(e[r]);n&&(t+=n+" ")}else if(Pt(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}const lv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",uv=vf(lv);function yc(e){return!!e||e===""}function cv(e,t){if(e.length!==t.length)return!1;let r=!0;for(let n=0;r&&n<e.length;n++)r=Rs(e[n],t[n]);return r}function Rs(e,t){if(e===t)return!0;let r=Lu(e),n=Lu(t);if(r||n)return r&&n?e.getTime()===t.getTime():!1;if(r=tn(e),n=tn(t),r||n)return e===t;if(r=Qe(e),n=Qe(t),r||n)return r&&n?cv(e,t):!1;if(r=Pt(e),n=Pt(t),r||n){if(!r||!n)return!1;const i=Object.keys(e).length,a=Object.keys(t).length;if(i!==a)return!1;for(const o in e){const f=e.hasOwnProperty(o),l=t.hasOwnProperty(o);if(f&&!l||!f&&l||!Rs(e[o],t[o]))return!1}}return String(e)===String(t)}function bc(e,t){return e.findIndex(r=>Rs(r,t))}const xc=e=>!!(e&&e.__v_isRef===!0),dt=e=>Xt(e)?e:e==null?"":Qe(e)||Pt(e)&&(e.toString===mc||!ot(e.toString))?xc(e)?dt(e.value):JSON.stringify(e,Ec,2):String(e),Ec=(e,t)=>xc(t)?Ec(e,t.value):Li(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[n,i],a)=>(r[Uo(n,a)+" =>"]=i,r),{})}:ws(t)?{[`Set(${t.size})`]:[...t.values()].map(r=>Uo(r))}:tn(t)?Uo(t):Pt(t)&&!Qe(t)&&!vc(t)?String(t):t,Uo=(e,t="")=>{var r;return tn(e)?`Symbol(${(r=e.description)!=null?r:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Cr;class dv{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Cr,!t&&Cr&&(this.index=(Cr.scopes||(Cr.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,r;if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].pause();for(t=0,r=this.effects.length;t<r;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,r;if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].resume();for(t=0,r=this.effects.length;t<r;t++)this.effects[t].resume()}}run(t){if(this._active){const r=Cr;try{return Cr=this,t()}finally{Cr=r}}}on(){Cr=this}off(){Cr=this.parent}stop(t){if(this._active){this._active=!1;let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(this.effects.length=0,r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function hv(){return Cr}let It;const $o=new WeakSet;class Tc{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Cr&&Cr.active&&Cr.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,$o.has(this)&&($o.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||wc(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ou(this),Sc(this);const t=It,r=Vr;It=this,Vr=!0;try{return this.fn()}finally{Cc(this),It=t,Vr=r,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Ef(t);this.deps=this.depsTail=void 0,Ou(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?$o.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ef(this)&&this.run()}get dirty(){return ef(this)}}let Ac=0,aa,sa;function wc(e,t=!1){if(e.flags|=8,t){e.next=sa,sa=e;return}e.next=aa,aa=e}function bf(){Ac++}function xf(){if(--Ac>0)return;if(sa){let t=sa;for(sa=void 0;t;){const r=t.next;t.next=void 0,t.flags&=-9,t=r}}let e;for(;aa;){let t=aa;for(aa=void 0;t;){const r=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=r}}if(e)throw e}function Sc(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Cc(e){let t,r=e.depsTail,n=r;for(;n;){const i=n.prevDep;n.version===-1?(n===r&&(r=i),Ef(n),pv(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}e.deps=t,e.depsTail=r}function ef(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Lc(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Lc(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===ca))return;e.globalVersion=ca;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!ef(e)){e.flags&=-3;return}const r=It,n=Vr;It=e,Vr=!0;try{Sc(e);const i=e.fn(e._value);(t.version===0||On(i,e._value))&&(e._value=i,t.version++)}catch(i){throw t.version++,i}finally{It=r,Vr=n,Cc(e),e.flags&=-3}}function Ef(e,t=!1){const{dep:r,prevSub:n,nextSub:i}=e;if(n&&(n.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=n,e.nextSub=void 0),r.subs===e&&(r.subs=n,!n&&r.computed)){r.computed.flags&=-5;for(let a=r.computed.deps;a;a=a.nextDep)Ef(a,!0)}!t&&!--r.sc&&r.map&&r.map.delete(r.key)}function pv(e){const{prevDep:t,nextDep:r}=e;t&&(t.nextDep=r,e.prevDep=void 0),r&&(r.prevDep=t,e.nextDep=void 0)}let Vr=!0;const Rc=[];function In(){Rc.push(Vr),Vr=!1}function Gn(){const e=Rc.pop();Vr=e===void 0?!0:e}function Ou(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const r=It;It=void 0;try{t()}finally{It=r}}}let ca=0;class mv{constructor(t,r){this.sub=t,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Tf{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!It||!Vr||It===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==It)r=this.activeLink=new mv(It,this),It.deps?(r.prevDep=It.depsTail,It.depsTail.nextDep=r,It.depsTail=r):It.deps=It.depsTail=r,Oc(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const n=r.nextDep;n.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=n),r.prevDep=It.depsTail,r.nextDep=void 0,It.depsTail.nextDep=r,It.depsTail=r,It.deps===r&&(It.deps=n)}return r}trigger(t){this.version++,ca++,this.notify(t)}notify(t){bf();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{xf()}}}function Oc(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)Oc(n)}const r=e.dep.subs;r!==e&&(e.prevSub=r,r&&(r.nextSub=e)),e.dep.subs=e}}const tf=new WeakMap,ni=Symbol(""),rf=Symbol(""),da=Symbol("");function cr(e,t,r){if(Vr&&It){let n=tf.get(e);n||tf.set(e,n=new Map);let i=n.get(r);i||(n.set(r,i=new Tf),i.map=n,i.key=r),i.track()}}function dn(e,t,r,n,i,a){const o=tf.get(e);if(!o){ca++;return}const f=l=>{l&&l.trigger()};if(bf(),t==="clear")o.forEach(f);else{const l=Qe(e),m=l&&yf(r);if(l&&r==="length"){const g=Number(n);o.forEach((F,V)=>{(V==="length"||V===da||!tn(V)&&V>=g)&&f(F)})}else switch((r!==void 0||o.has(void 0))&&f(o.get(r)),m&&f(o.get(da)),t){case"add":l?m&&f(o.get("length")):(f(o.get(ni)),Li(e)&&f(o.get(rf)));break;case"delete":l||(f(o.get(ni)),Li(e)&&f(o.get(rf)));break;case"set":Li(e)&&f(o.get(ni));break}}xf()}function wi(e){const t=Et(e);return t===e?t:(cr(t,"iterate",da),Nr(e)?t:t.map(dr))}function Os(e){return cr(e=Et(e),"iterate",da),e}const vv={__proto__:null,[Symbol.iterator](){return Vo(this,Symbol.iterator,dr)},concat(...e){return wi(this).concat(...e.map(t=>Qe(t)?wi(t):t))},entries(){return Vo(this,"entries",e=>(e[1]=dr(e[1]),e))},every(e,t){return un(this,"every",e,t,void 0,arguments)},filter(e,t){return un(this,"filter",e,t,r=>r.map(dr),arguments)},find(e,t){return un(this,"find",e,t,dr,arguments)},findIndex(e,t){return un(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return un(this,"findLast",e,t,dr,arguments)},findLastIndex(e,t){return un(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return un(this,"forEach",e,t,void 0,arguments)},includes(...e){return jo(this,"includes",e)},indexOf(...e){return jo(this,"indexOf",e)},join(e){return wi(this).join(e)},lastIndexOf(...e){return jo(this,"lastIndexOf",e)},map(e,t){return un(this,"map",e,t,void 0,arguments)},pop(){return ea(this,"pop")},push(...e){return ea(this,"push",e)},reduce(e,...t){return Pu(this,"reduce",e,t)},reduceRight(e,...t){return Pu(this,"reduceRight",e,t)},shift(){return ea(this,"shift")},some(e,t){return un(this,"some",e,t,void 0,arguments)},splice(...e){return ea(this,"splice",e)},toReversed(){return wi(this).toReversed()},toSorted(e){return wi(this).toSorted(e)},toSpliced(...e){return wi(this).toSpliced(...e)},unshift(...e){return ea(this,"unshift",e)},values(){return Vo(this,"values",dr)}};function Vo(e,t,r){const n=Os(e),i=n[t]();return n!==e&&!Nr(e)&&(i._next=i.next,i.next=()=>{const a=i._next();return a.value&&(a.value=r(a.value)),a}),i}const _v=Array.prototype;function un(e,t,r,n,i,a){const o=Os(e),f=o!==e&&!Nr(e),l=o[t];if(l!==_v[t]){const F=l.apply(e,a);return f?dr(F):F}let m=r;o!==e&&(f?m=function(F,V){return r.call(this,dr(F),V,e)}:r.length>2&&(m=function(F,V){return r.call(this,F,V,e)}));const g=l.call(o,m,n);return f&&i?i(g):g}function Pu(e,t,r,n){const i=Os(e);let a=r;return i!==e&&(Nr(e)?r.length>3&&(a=function(o,f,l){return r.call(this,o,f,l,e)}):a=function(o,f,l){return r.call(this,o,dr(f),l,e)}),i[t](a,...n)}function jo(e,t,r){const n=Et(e);cr(n,"iterate",da);const i=n[t](...r);return(i===-1||i===!1)&&Cf(r[0])?(r[0]=Et(r[0]),n[t](...r)):i}function ea(e,t,r=[]){In(),bf();const n=Et(e)[t].apply(e,r);return xf(),Gn(),n}const gv=vf("__proto__,__v_isRef,__isVue"),Pc=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(tn));function yv(e){tn(e)||(e=String(e));const t=Et(this);return cr(t,"has",e),t.hasOwnProperty(e)}class Dc{constructor(t=!1,r=!1){this._isReadonly=t,this._isShallow=r}get(t,r,n){if(r==="__v_skip")return t.__v_skip;const i=this._isReadonly,a=this._isShallow;if(r==="__v_isReactive")return!i;if(r==="__v_isReadonly")return i;if(r==="__v_isShallow")return a;if(r==="__v_raw")return n===(i?a?Rv:Mc:a?Gc:Ic).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const o=Qe(t);if(!i){let l;if(o&&(l=vv[r]))return l;if(r==="hasOwnProperty")return yv}const f=Reflect.get(t,r,mr(t)?t:n);return(tn(r)?Pc.has(r):gv(r))||(i||cr(t,"get",r),a)?f:mr(f)?o&&yf(r)?f:f.value:Pt(f)?i?Nc(f):Mn(f):f}}class Fc extends Dc{constructor(t=!1){super(!1,t)}set(t,r,n,i){let a=t[r];if(!this._isShallow){const l=si(a);if(!Nr(n)&&!si(n)&&(a=Et(a),n=Et(n)),!Qe(t)&&mr(a)&&!mr(n))return l?!1:(a.value=n,!0)}const o=Qe(t)&&yf(r)?Number(r)<t.length:St(t,r),f=Reflect.set(t,r,n,mr(t)?t:i);return t===Et(i)&&(o?On(n,a)&&dn(t,"set",r,n):dn(t,"add",r,n)),f}deleteProperty(t,r){const n=St(t,r);t[r];const i=Reflect.deleteProperty(t,r);return i&&n&&dn(t,"delete",r,void 0),i}has(t,r){const n=Reflect.has(t,r);return(!tn(r)||!Pc.has(r))&&cr(t,"has",r),n}ownKeys(t){return cr(t,"iterate",Qe(t)?"length":ni),Reflect.ownKeys(t)}}class bv extends Dc{constructor(t=!1){super(!0,t)}set(t,r){return!0}deleteProperty(t,r){return!0}}const xv=new Fc,Ev=new bv,Tv=new Fc(!0);const nf=e=>e,rs=e=>Reflect.getPrototypeOf(e);function Av(e,t,r){return function(...n){const i=this.__v_raw,a=Et(i),o=Li(a),f=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,m=i[e](...n),g=r?nf:t?af:dr;return!t&&cr(a,"iterate",l?rf:ni),{next(){const{value:F,done:V}=m.next();return V?{value:F,done:V}:{value:f?[g(F[0]),g(F[1])]:g(F),done:V}},[Symbol.iterator](){return this}}}}function ns(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function wv(e,t){const r={get(i){const a=this.__v_raw,o=Et(a),f=Et(i);e||(On(i,f)&&cr(o,"get",i),cr(o,"get",f));const{has:l}=rs(o),m=t?nf:e?af:dr;if(l.call(o,i))return m(a.get(i));if(l.call(o,f))return m(a.get(f));a!==o&&a.get(i)},get size(){const i=this.__v_raw;return!e&&cr(Et(i),"iterate",ni),Reflect.get(i,"size",i)},has(i){const a=this.__v_raw,o=Et(a),f=Et(i);return e||(On(i,f)&&cr(o,"has",i),cr(o,"has",f)),i===f?a.has(i):a.has(i)||a.has(f)},forEach(i,a){const o=this,f=o.__v_raw,l=Et(f),m=t?nf:e?af:dr;return!e&&cr(l,"iterate",ni),f.forEach((g,F)=>i.call(a,m(g),m(F),o))}};return Wt(r,e?{add:ns("add"),set:ns("set"),delete:ns("delete"),clear:ns("clear")}:{add(i){!t&&!Nr(i)&&!si(i)&&(i=Et(i));const a=Et(this);return rs(a).has.call(a,i)||(a.add(i),dn(a,"add",i,i)),this},set(i,a){!t&&!Nr(a)&&!si(a)&&(a=Et(a));const o=Et(this),{has:f,get:l}=rs(o);let m=f.call(o,i);m||(i=Et(i),m=f.call(o,i));const g=l.call(o,i);return o.set(i,a),m?On(a,g)&&dn(o,"set",i,a):dn(o,"add",i,a),this},delete(i){const a=Et(this),{has:o,get:f}=rs(a);let l=o.call(a,i);l||(i=Et(i),l=o.call(a,i)),f&&f.call(a,i);const m=a.delete(i);return l&&dn(a,"delete",i,void 0),m},clear(){const i=Et(this),a=i.size!==0,o=i.clear();return a&&dn(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{r[i]=Av(i,e,t)}),r}function Af(e,t){const r=wv(e,t);return(n,i,a)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(St(r,i)&&i in n?r:n,i,a)}const Sv={get:Af(!1,!1)},Cv={get:Af(!1,!0)},Lv={get:Af(!0,!1)};const Ic=new WeakMap,Gc=new WeakMap,Mc=new WeakMap,Rv=new WeakMap;function Ov(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Pv(e){return e.__v_skip||!Object.isExtensible(e)?0:Ov(tv(e))}function Mn(e){return si(e)?e:Sf(e,!1,xv,Sv,Ic)}function wf(e){return Sf(e,!1,Tv,Cv,Gc)}function Nc(e){return Sf(e,!0,Ev,Lv,Mc)}function Sf(e,t,r,n,i){if(!Pt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=i.get(e);if(a)return a;const o=Pv(e);if(o===0)return e;const f=new Proxy(e,o===2?n:r);return i.set(e,f),f}function Ri(e){return si(e)?Ri(e.__v_raw):!!(e&&e.__v_isReactive)}function si(e){return!!(e&&e.__v_isReadonly)}function Nr(e){return!!(e&&e.__v_isShallow)}function Cf(e){return e?!!e.__v_raw:!1}function Et(e){const t=e&&e.__v_raw;return t?Et(t):e}function Dv(e){return!St(e,"__v_skip")&&Object.isExtensible(e)&&gc(e,"__v_skip",!0),e}const dr=e=>Pt(e)?Mn(e):e,af=e=>Pt(e)?Nc(e):e;function mr(e){return e?e.__v_isRef===!0:!1}function Ho(e){return kc(e,!1)}function Fv(e){return kc(e,!0)}function kc(e,t){return mr(e)?e:new Iv(e,t)}class Iv{constructor(t,r){this.dep=new Tf,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?t:Et(t),this._value=r?t:dr(t),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(t){const r=this._rawValue,n=this.__v_isShallow||Nr(t)||si(t);t=n?t:Et(t),On(t,r)&&(this._rawValue=t,this._value=n?t:dr(t),this.dep.trigger())}}function Fe(e){return mr(e)?e.value:e}const Gv={get:(e,t,r)=>t==="__v_raw"?e:Fe(Reflect.get(e,t,r)),set:(e,t,r,n)=>{const i=e[t];return mr(i)&&!mr(r)?(i.value=r,!0):Reflect.set(e,t,r,n)}};function Bc(e){return Ri(e)?e:new Proxy(e,Gv)}class Mv{constructor(t,r,n){this.fn=t,this.setter=r,this._value=void 0,this.dep=new Tf(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ca-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&It!==this)return wc(this,!0),!0}get value(){const t=this.dep.track();return Lc(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function sf(e,t,r=!1){let n,i;return ot(e)?n=e:(n=e.get,i=e.set),new Mv(n,i,r)}const is={},ds=new WeakMap;let ei;function Nv(e,t=!1,r=ei){if(r){let n=ds.get(r);n||ds.set(r,n=[]),n.push(e)}}function kv(e,t,r=Rt){const{immediate:n,deep:i,once:a,scheduler:o,augmentJob:f,call:l}=r,m=xe=>i?xe:Nr(xe)||i===!1||i===0?hn(xe,1):hn(xe);let g,F,V,ne,ge=!1,ke=!1;if(mr(e)?(F=()=>e.value,ge=Nr(e)):Ri(e)?(F=()=>m(e),ge=!0):Qe(e)?(ke=!0,ge=e.some(xe=>Ri(xe)||Nr(xe)),F=()=>e.map(xe=>{if(mr(xe))return xe.value;if(Ri(xe))return m(xe);if(ot(xe))return l?l(xe,2):xe()})):ot(e)?t?F=l?()=>l(e,2):e:F=()=>{if(V){In();try{V()}finally{Gn()}}const xe=ei;ei=g;try{return l?l(e,3,[ne]):e(ne)}finally{ei=xe}}:F=Jr,t&&i){const xe=F,Be=i===!0?1/0:i;F=()=>hn(xe(),Be)}const nt=hv(),Me=()=>{g.stop(),nt&&nt.active&&gf(nt.effects,g)};if(a&&t){const xe=t;t=(...Be)=>{xe(...Be),Me()}}let Je=ke?new Array(e.length).fill(is):is;const je=xe=>{if(!(!(g.flags&1)||!g.dirty&&!xe))if(t){const Be=g.run();if(i||ge||(ke?Be.some((We,Ot)=>On(We,Je[Ot])):On(Be,Je))){V&&V();const We=ei;ei=g;try{const Ot=[Be,Je===is?void 0:ke&&Je[0]===is?[]:Je,ne];l?l(t,3,Ot):t(...Ot),Je=Be}finally{ei=We}}}else g.run()};return f&&f(je),g=new Tc(F),g.scheduler=o?()=>o(je,!1):je,ne=xe=>Nv(xe,!1,g),V=g.onStop=()=>{const xe=ds.get(g);if(xe){if(l)l(xe,4);else for(const Be of xe)Be();ds.delete(g)}},t?n?je(!0):Je=g.run():o?o(je.bind(null,!0),!0):g.run(),Me.pause=g.pause.bind(g),Me.resume=g.resume.bind(g),Me.stop=Me,Me}function hn(e,t=1/0,r){if(t<=0||!Pt(e)||e.__v_skip||(r=r||new Set,r.has(e)))return e;if(r.add(e),t--,mr(e))hn(e.value,t,r);else if(Qe(e))for(let n=0;n<e.length;n++)hn(e[n],t,r);else if(ws(e)||Li(e))e.forEach(n=>{hn(n,t,r)});else if(vc(e)){for(const n in e)hn(e[n],t,r);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&hn(e[n],t,r)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ya(e,t,r,n){try{return n?e(...n):e()}catch(i){Ps(i,t,r)}}function jr(e,t,r,n){if(ot(e)){const i=ya(e,t,r,n);return i&&pc(i)&&i.catch(a=>{Ps(a,t,r)}),i}if(Qe(e)){const i=[];for(let a=0;a<e.length;a++)i.push(jr(e[a],t,r,n));return i}}function Ps(e,t,r,n=!0){const i=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||Rt;if(t){let f=t.parent;const l=t.proxy,m=`https://vuejs.org/error-reference/#runtime-${r}`;for(;f;){const g=f.ec;if(g){for(let F=0;F<g.length;F++)if(g[F](e,l,m)===!1)return}f=f.parent}if(a){In(),ya(a,null,10,[e,l,m]),Gn();return}}Bv(e,r,i,n,o)}function Bv(e,t,r,n=!0,i=!1){if(i)throw e;console.error(e)}const gr=[];let Qr=-1;const Oi=[];let Cn=null,Si=0;const Uc=Promise.resolve();let hs=null;function of(e){const t=hs||Uc;return e?t.then(this?e.bind(this):e):t}function Uv(e){let t=Qr+1,r=gr.length;for(;t<r;){const n=t+r>>>1,i=gr[n],a=ha(i);a<e||a===e&&i.flags&2?t=n+1:r=n}return t}function Lf(e){if(!(e.flags&1)){const t=ha(e),r=gr[gr.length-1];!r||!(e.flags&2)&&t>=ha(r)?gr.push(e):gr.splice(Uv(t),0,e),e.flags|=1,$c()}}function $c(){hs||(hs=Uc.then(jc))}function $v(e){Qe(e)?Oi.push(...e):Cn&&e.id===-1?Cn.splice(Si+1,0,e):e.flags&1||(Oi.push(e),e.flags|=1),$c()}function Du(e,t,r=Qr+1){for(;r<gr.length;r++){const n=gr[r];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;gr.splice(r,1),r--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Vc(e){if(Oi.length){const t=[...new Set(Oi)].sort((r,n)=>ha(r)-ha(n));if(Oi.length=0,Cn){Cn.push(...t);return}for(Cn=t,Si=0;Si<Cn.length;Si++){const r=Cn[Si];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}Cn=null,Si=0}}const ha=e=>e.id==null?e.flags&2?-1:1/0:e.id;function jc(e){try{for(Qr=0;Qr<gr.length;Qr++){const t=gr[Qr];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),ya(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Qr<gr.length;Qr++){const t=gr[Qr];t&&(t.flags&=-2)}Qr=-1,gr.length=0,Vc(),hs=null,(gr.length||Oi.length)&&jc()}}let Or=null,Hc=null;function ps(e){const t=Or;return Or=e,Hc=e&&e.type.__scopeId||null,t}function ms(e,t=Or,r){if(!t||e._n)return e;const n=(...i)=>{n._d&&$u(-1);const a=ps(t);let o;try{o=e(...i)}finally{ps(a),n._d&&$u(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function er(e,t){if(Or===null)return e;const r=Ms(Or),n=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[a,o,f,l=Rt]=t[i];a&&(ot(a)&&(a={mounted:a,updated:a}),a.deep&&hn(o),n.push({dir:a,instance:r,value:o,oldValue:void 0,arg:f,modifiers:l}))}return e}function Qn(e,t,r,n){const i=e.dirs,a=t&&t.dirs;for(let o=0;o<i.length;o++){const f=i[o];a&&(f.oldValue=a[o].value);let l=f.dir[n];l&&(In(),jr(l,r,8,[e.el,f,e,t]),Gn())}}const Vv=Symbol("_vte"),zc=e=>e.__isTeleport,Ln=Symbol("_leaveCb"),as=Symbol("_enterCb");function Wc(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Jc(()=>{e.isMounted=!0}),td(()=>{e.isUnmounting=!0}),e}const Mr=[Function,Array],Xc={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Mr,onEnter:Mr,onAfterEnter:Mr,onEnterCancelled:Mr,onBeforeLeave:Mr,onLeave:Mr,onAfterLeave:Mr,onLeaveCancelled:Mr,onBeforeAppear:Mr,onAppear:Mr,onAfterAppear:Mr,onAppearCancelled:Mr},Yc=e=>{const t=e.subTree;return t.component?Yc(t.component):t},jv={name:"BaseTransition",props:Xc,setup(e,{slots:t}){const r=Ff(),n=Wc();return()=>{const i=t.default&&Rf(t.default(),!0);if(!i||!i.length)return;const a=Kc(i),o=Et(e),{mode:f}=o;if(n.isLeaving)return zo(a);const l=Fu(a);if(!l)return zo(a);let m=pa(l,o,n,r,F=>m=F);l.type!==xr&&oi(l,m);let g=r.subTree&&Fu(r.subTree);if(g&&g.type!==xr&&!ti(l,g)&&Yc(r).type!==xr){let F=pa(g,o,n,r);if(oi(g,F),f==="out-in"&&l.type!==xr)return n.isLeaving=!0,F.afterLeave=()=>{n.isLeaving=!1,r.job.flags&8||r.update(),delete F.afterLeave,g=void 0},zo(a);f==="in-out"&&l.type!==xr?F.delayLeave=(V,ne,ge)=>{const ke=qc(n,g);ke[String(g.key)]=g,V[Ln]=()=>{ne(),V[Ln]=void 0,delete m.delayedLeave,g=void 0},m.delayedLeave=()=>{ge(),delete m.delayedLeave,g=void 0}}:g=void 0}else g&&(g=void 0);return a}}};function Kc(e){let t=e[0];if(e.length>1){for(const r of e)if(r.type!==xr){t=r;break}}return t}const Hv=jv;function qc(e,t){const{leavingVNodes:r}=e;let n=r.get(t.type);return n||(n=Object.create(null),r.set(t.type,n)),n}function pa(e,t,r,n,i){const{appear:a,mode:o,persisted:f=!1,onBeforeEnter:l,onEnter:m,onAfterEnter:g,onEnterCancelled:F,onBeforeLeave:V,onLeave:ne,onAfterLeave:ge,onLeaveCancelled:ke,onBeforeAppear:nt,onAppear:Me,onAfterAppear:Je,onAppearCancelled:je}=t,xe=String(e.key),Be=qc(r,e),We=(Ye,ut)=>{Ye&&jr(Ye,n,9,ut)},Ot=(Ye,ut)=>{const ft=ut[1];We(Ye,ut),Qe(Ye)?Ye.every(Ge=>Ge.length<=1)&&ft():Ye.length<=1&&ft()},yt={mode:o,persisted:f,beforeEnter(Ye){let ut=l;if(!r.isMounted)if(a)ut=nt||l;else return;Ye[Ln]&&Ye[Ln](!0);const ft=Be[xe];ft&&ti(e,ft)&&ft.el[Ln]&&ft.el[Ln](),We(ut,[Ye])},enter(Ye){let ut=m,ft=g,Ge=F;if(!r.isMounted)if(a)ut=Me||m,ft=Je||g,Ge=je||F;else return;let vt=!1;const lt=Ye[as]=kr=>{vt||(vt=!0,kr?We(Ge,[Ye]):We(ft,[Ye]),yt.delayedLeave&&yt.delayedLeave(),Ye[as]=void 0)};ut?Ot(ut,[Ye,lt]):lt()},leave(Ye,ut){const ft=String(e.key);if(Ye[as]&&Ye[as](!0),r.isUnmounting)return ut();We(V,[Ye]);let Ge=!1;const vt=Ye[Ln]=lt=>{Ge||(Ge=!0,ut(),lt?We(ke,[Ye]):We(ge,[Ye]),Ye[Ln]=void 0,Be[ft]===e&&delete Be[ft])};Be[ft]=e,ne?Ot(ne,[Ye,vt]):vt()},clone(Ye){const ut=pa(Ye,t,r,n,i);return i&&i(ut),ut}};return yt}function zo(e){if(Ds(e))return e=Dn(e),e.children=null,e}function Fu(e){if(!Ds(e))return zc(e.type)&&e.children?Kc(e.children):e;const{shapeFlag:t,children:r}=e;if(r){if(t&16)return r[0];if(t&32&&ot(r.default))return r.default()}}function oi(e,t){e.shapeFlag&6&&e.component?(e.transition=t,oi(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Rf(e,t=!1,r){let n=[],i=0;for(let a=0;a<e.length;a++){let o=e[a];const f=r==null?o.key:String(r)+String(o.key!=null?o.key:a);o.type===Tt?(o.patchFlag&128&&i++,n=n.concat(Rf(o.children,t,f))):(t||o.type!==xr)&&n.push(f!=null?Dn(o,{key:f}):o)}if(i>1)for(let a=0;a<n.length;a++)n[a].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function vn(e,t){return ot(e)?Wt({name:e.name},t,{setup:e}):e}function Qc(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function zv(e){const t=Ff(),r=Fv(null);if(t){const i=t.refs===Rt?t.refs={}:t.refs;Object.defineProperty(i,e,{enumerable:!0,get:()=>r.value,set:a=>r.value=a})}return r}function vs(e,t,r,n,i=!1){if(Qe(e)){e.forEach((ge,ke)=>vs(ge,t&&(Qe(t)?t[ke]:t),r,n,i));return}if(oa(n)&&!i){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&vs(e,t,r,n.component.subTree);return}const a=n.shapeFlag&4?Ms(n.component):n.el,o=i?null:a,{i:f,r:l}=e,m=t&&t.r,g=f.refs===Rt?f.refs={}:f.refs,F=f.setupState,V=Et(F),ne=F===Rt?()=>!1:ge=>St(V,ge);if(m!=null&&m!==l&&(Xt(m)?(g[m]=null,ne(m)&&(F[m]=null)):mr(m)&&(m.value=null)),ot(l))ya(l,f,12,[o,g]);else{const ge=Xt(l),ke=mr(l);if(ge||ke){const nt=()=>{if(e.f){const Me=ge?ne(l)?F[l]:g[l]:l.value;i?Qe(Me)&&gf(Me,a):Qe(Me)?Me.includes(a)||Me.push(a):ge?(g[l]=[a],ne(l)&&(F[l]=g[l])):(l.value=[a],e.k&&(g[e.k]=l.value))}else ge?(g[l]=o,ne(l)&&(F[l]=o)):ke&&(l.value=o,e.k&&(g[e.k]=o))};o?(nt.id=-1,Sr(nt,r)):nt()}}}Cs().requestIdleCallback;Cs().cancelIdleCallback;const oa=e=>!!e.type.__asyncLoader,Ds=e=>e.type.__isKeepAlive;function Wv(e,t){Zc(e,"a",t)}function Xv(e,t){Zc(e,"da",t)}function Zc(e,t,r=pr){const n=e.__wdc||(e.__wdc=()=>{let i=r;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(Fs(t,n,r),r){let i=r.parent;for(;i&&i.parent;)Ds(i.parent.vnode)&&Yv(n,t,r,i),i=i.parent}}function Yv(e,t,r,n){const i=Fs(t,e,n,!0);rd(()=>{gf(n[t],i)},r)}function Fs(e,t,r=pr,n=!1){if(r){const i=r[e]||(r[e]=[]),a=t.__weh||(t.__weh=(...o)=>{In();const f=ba(r),l=jr(t,r,e,o);return f(),Gn(),l});return n?i.unshift(a):i.push(a),a}}const _n=e=>(t,r=pr)=>{(!va||e==="sp")&&Fs(e,(...n)=>t(...n),r)},Kv=_n("bm"),Jc=_n("m"),qv=_n("bu"),ed=_n("u"),td=_n("bum"),rd=_n("um"),Qv=_n("sp"),Zv=_n("rtg"),Jv=_n("rtc");function e0(e,t=pr){Fs("ec",e,t)}const t0=Symbol.for("v-ndc");function Rr(e,t,r,n){let i;const a=r,o=Qe(e);if(o||Xt(e)){const f=o&&Ri(e);let l=!1;f&&(l=!Nr(e),e=Os(e)),i=new Array(e.length);for(let m=0,g=e.length;m<g;m++)i[m]=t(l?dr(e[m]):e[m],m,void 0,a)}else if(typeof e=="number"){i=new Array(e);for(let f=0;f<e;f++)i[f]=t(f+1,f,void 0,a)}else if(Pt(e))if(e[Symbol.iterator])i=Array.from(e,(f,l)=>t(f,l,void 0,a));else{const f=Object.keys(e);i=new Array(f.length);for(let l=0,m=f.length;l<m;l++){const g=f[l];i[l]=t(e[g],g,l,a)}}else i=[];return i}const ff=e=>e?Ed(e)?Ms(e):ff(e.parent):null,fa=Wt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>ff(e.parent),$root:e=>ff(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Of(e),$forceUpdate:e=>e.f||(e.f=()=>{Lf(e.update)}),$nextTick:e=>e.n||(e.n=of.bind(e.proxy)),$watch:e=>T0.bind(e)}),Wo=(e,t)=>e!==Rt&&!e.__isScriptSetup&&St(e,t),r0={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:r,setupState:n,data:i,props:a,accessCache:o,type:f,appContext:l}=e;let m;if(t[0]!=="$"){const ne=o[t];if(ne!==void 0)switch(ne){case 1:return n[t];case 2:return i[t];case 4:return r[t];case 3:return a[t]}else{if(Wo(n,t))return o[t]=1,n[t];if(i!==Rt&&St(i,t))return o[t]=2,i[t];if((m=e.propsOptions[0])&&St(m,t))return o[t]=3,a[t];if(r!==Rt&&St(r,t))return o[t]=4,r[t];lf&&(o[t]=0)}}const g=fa[t];let F,V;if(g)return t==="$attrs"&&cr(e.attrs,"get",""),g(e);if((F=f.__cssModules)&&(F=F[t]))return F;if(r!==Rt&&St(r,t))return o[t]=4,r[t];if(V=l.config.globalProperties,St(V,t))return V[t]},set({_:e},t,r){const{data:n,setupState:i,ctx:a}=e;return Wo(i,t)?(i[t]=r,!0):n!==Rt&&St(n,t)?(n[t]=r,!0):St(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:n,appContext:i,propsOptions:a}},o){let f;return!!r[o]||e!==Rt&&St(e,o)||Wo(t,o)||(f=a[0])&&St(f,o)||St(n,o)||St(fa,o)||St(i.config.globalProperties,o)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:St(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};function Iu(e){return Qe(e)?e.reduce((t,r)=>(t[r]=null,t),{}):e}let lf=!0;function n0(e){const t=Of(e),r=e.proxy,n=e.ctx;lf=!1,t.beforeCreate&&Gu(t.beforeCreate,e,"bc");const{data:i,computed:a,methods:o,watch:f,provide:l,inject:m,created:g,beforeMount:F,mounted:V,beforeUpdate:ne,updated:ge,activated:ke,deactivated:nt,beforeDestroy:Me,beforeUnmount:Je,destroyed:je,unmounted:xe,render:Be,renderTracked:We,renderTriggered:Ot,errorCaptured:yt,serverPrefetch:Ye,expose:ut,inheritAttrs:ft,components:Ge,directives:vt,filters:lt}=t;if(m&&i0(m,n,null),o)for(const Dt in o){const Ct=o[Dt];ot(Ct)&&(n[Dt]=Ct.bind(r))}if(i){const Dt=i.call(r,r);Pt(Dt)&&(e.data=Mn(Dt))}if(lf=!0,a)for(const Dt in a){const Ct=a[Dt],rn=ot(Ct)?Ct.bind(r,r):ot(Ct.get)?Ct.get.bind(r,r):Jr,nn=!ot(Ct)&&ot(Ct.set)?Ct.set.bind(r):Jr,Hr=xa({get:rn,set:nn});Object.defineProperty(n,Dt,{enumerable:!0,configurable:!0,get:()=>Hr.value,set:Fr=>Hr.value=Fr})}if(f)for(const Dt in f)nd(f[Dt],n,r,Dt);if(l){const Dt=ot(l)?l.call(r):l;Reflect.ownKeys(Dt).forEach(Ct=>{u0(Ct,Dt[Ct])})}g&&Gu(g,e,"c");function Yt(Dt,Ct){Qe(Ct)?Ct.forEach(rn=>Dt(rn.bind(r))):Ct&&Dt(Ct.bind(r))}if(Yt(Kv,F),Yt(Jc,V),Yt(qv,ne),Yt(ed,ge),Yt(Wv,ke),Yt(Xv,nt),Yt(e0,yt),Yt(Jv,We),Yt(Zv,Ot),Yt(td,Je),Yt(rd,xe),Yt(Qv,Ye),Qe(ut))if(ut.length){const Dt=e.exposed||(e.exposed={});ut.forEach(Ct=>{Object.defineProperty(Dt,Ct,{get:()=>r[Ct],set:rn=>r[Ct]=rn})})}else e.exposed||(e.exposed={});Be&&e.render===Jr&&(e.render=Be),ft!=null&&(e.inheritAttrs=ft),Ge&&(e.components=Ge),vt&&(e.directives=vt),Ye&&Qc(e)}function i0(e,t,r=Jr){Qe(e)&&(e=uf(e));for(const n in e){const i=e[n];let a;Pt(i)?"default"in i?a=fs(i.from||n,i.default,!0):a=fs(i.from||n):a=fs(i),mr(a)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>a.value,set:o=>a.value=o}):t[n]=a}}function Gu(e,t,r){jr(Qe(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,r)}function nd(e,t,r,n){let i=n.includes(".")?_d(r,n):()=>r[n];if(Xt(e)){const a=t[e];ot(a)&&ls(i,a)}else if(ot(e))ls(i,e.bind(r));else if(Pt(e))if(Qe(e))e.forEach(a=>nd(a,t,r,n));else{const a=ot(e.handler)?e.handler.bind(r):t[e.handler];ot(a)&&ls(i,a,e)}}function Of(e){const t=e.type,{mixins:r,extends:n}=t,{mixins:i,optionsCache:a,config:{optionMergeStrategies:o}}=e.appContext,f=a.get(t);let l;return f?l=f:!i.length&&!r&&!n?l=t:(l={},i.length&&i.forEach(m=>_s(l,m,o,!0)),_s(l,t,o)),Pt(t)&&a.set(t,l),l}function _s(e,t,r,n=!1){const{mixins:i,extends:a}=t;a&&_s(e,a,r,!0),i&&i.forEach(o=>_s(e,o,r,!0));for(const o in t)if(!(n&&o==="expose")){const f=a0[o]||r&&r[o];e[o]=f?f(e[o],t[o]):t[o]}return e}const a0={data:Mu,props:Nu,emits:Nu,methods:na,computed:na,beforeCreate:_r,created:_r,beforeMount:_r,mounted:_r,beforeUpdate:_r,updated:_r,beforeDestroy:_r,beforeUnmount:_r,destroyed:_r,unmounted:_r,activated:_r,deactivated:_r,errorCaptured:_r,serverPrefetch:_r,components:na,directives:na,watch:o0,provide:Mu,inject:s0};function Mu(e,t){return t?e?function(){return Wt(ot(e)?e.call(this,this):e,ot(t)?t.call(this,this):t)}:t:e}function s0(e,t){return na(uf(e),uf(t))}function uf(e){if(Qe(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function _r(e,t){return e?[...new Set([].concat(e,t))]:t}function na(e,t){return e?Wt(Object.create(null),e,t):t}function Nu(e,t){return e?Qe(e)&&Qe(t)?[...new Set([...e,...t])]:Wt(Object.create(null),Iu(e),Iu(t??{})):t}function o0(e,t){if(!e)return t;if(!t)return e;const r=Wt(Object.create(null),e);for(const n in t)r[n]=_r(e[n],t[n]);return r}function id(){return{app:null,config:{isNativeTag:Jm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let f0=0;function l0(e,t){return function(n,i=null){ot(n)||(n=Wt({},n)),i!=null&&!Pt(i)&&(i=null);const a=id(),o=new WeakSet,f=[];let l=!1;const m=a.app={_uid:f0++,_component:n,_props:i,_container:null,_context:a,_instance:null,version:H0,get config(){return a.config},set config(g){},use(g,...F){return o.has(g)||(g&&ot(g.install)?(o.add(g),g.install(m,...F)):ot(g)&&(o.add(g),g(m,...F))),m},mixin(g){return a.mixins.includes(g)||a.mixins.push(g),m},component(g,F){return F?(a.components[g]=F,m):a.components[g]},directive(g,F){return F?(a.directives[g]=F,m):a.directives[g]},mount(g,F,V){if(!l){const ne=m._ceVNode||zt(n,i);return ne.appContext=a,V===!0?V="svg":V===!1&&(V=void 0),F&&t?t(ne,g):e(ne,g,V),l=!0,m._container=g,g.__vue_app__=m,Ms(ne.component)}},onUnmount(g){f.push(g)},unmount(){l&&(jr(f,m._instance,16),e(null,m._container),delete m._container.__vue_app__)},provide(g,F){return a.provides[g]=F,m},runWithContext(g){const F=Pi;Pi=m;try{return g()}finally{Pi=F}}};return m}}let Pi=null;function u0(e,t){if(pr){let r=pr.provides;const n=pr.parent&&pr.parent.provides;n===r&&(r=pr.provides=Object.create(n)),r[e]=t}}function fs(e,t,r=!1){const n=pr||Or;if(n||Pi){const i=Pi?Pi._context.provides:n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return r&&ot(t)?t.call(n&&n.proxy):t}}const ad={},sd=()=>Object.create(ad),od=e=>Object.getPrototypeOf(e)===ad;function c0(e,t,r,n=!1){const i={},a=sd();e.propsDefaults=Object.create(null),fd(e,t,i,a);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);r?e.props=n?i:wf(i):e.type.props?e.props=i:e.props=a,e.attrs=a}function d0(e,t,r,n){const{props:i,attrs:a,vnode:{patchFlag:o}}=e,f=Et(i),[l]=e.propsOptions;let m=!1;if((n||o>0)&&!(o&16)){if(o&8){const g=e.vnode.dynamicProps;for(let F=0;F<g.length;F++){let V=g[F];if(Is(e.emitsOptions,V))continue;const ne=t[V];if(l)if(St(a,V))ne!==a[V]&&(a[V]=ne,m=!0);else{const ge=Pn(V);i[ge]=cf(l,f,ge,ne,e,!1)}else ne!==a[V]&&(a[V]=ne,m=!0)}}}else{fd(e,t,i,a)&&(m=!0);let g;for(const F in f)(!t||!St(t,F)&&((g=fi(F))===F||!St(t,g)))&&(l?r&&(r[F]!==void 0||r[g]!==void 0)&&(i[F]=cf(l,f,F,void 0,e,!0)):delete i[F]);if(a!==f)for(const F in a)(!t||!St(t,F))&&(delete a[F],m=!0)}m&&dn(e.attrs,"set","")}function fd(e,t,r,n){const[i,a]=e.propsOptions;let o=!1,f;if(t)for(let l in t){if(ia(l))continue;const m=t[l];let g;i&&St(i,g=Pn(l))?!a||!a.includes(g)?r[g]=m:(f||(f={}))[g]=m:Is(e.emitsOptions,l)||(!(l in n)||m!==n[l])&&(n[l]=m,o=!0)}if(a){const l=Et(r),m=f||Rt;for(let g=0;g<a.length;g++){const F=a[g];r[F]=cf(i,l,F,m[F],e,!St(m,F))}}return o}function cf(e,t,r,n,i,a){const o=e[r];if(o!=null){const f=St(o,"default");if(f&&n===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&ot(l)){const{propsDefaults:m}=i;if(r in m)n=m[r];else{const g=ba(i);n=m[r]=l.call(null,t),g()}}else n=l;i.ce&&i.ce._setProp(r,n)}o[0]&&(a&&!f?n=!1:o[1]&&(n===""||n===fi(r))&&(n=!0))}return n}const h0=new WeakMap;function ld(e,t,r=!1){const n=r?h0:t.propsCache,i=n.get(e);if(i)return i;const a=e.props,o={},f=[];let l=!1;if(!ot(e)){const g=F=>{l=!0;const[V,ne]=ld(F,t,!0);Wt(o,V),ne&&f.push(...ne)};!r&&t.mixins.length&&t.mixins.forEach(g),e.extends&&g(e.extends),e.mixins&&e.mixins.forEach(g)}if(!a&&!l)return Pt(e)&&n.set(e,Ci),Ci;if(Qe(a))for(let g=0;g<a.length;g++){const F=Pn(a[g]);ku(F)&&(o[F]=Rt)}else if(a)for(const g in a){const F=Pn(g);if(ku(F)){const V=a[g],ne=o[F]=Qe(V)||ot(V)?{type:V}:Wt({},V),ge=ne.type;let ke=!1,nt=!0;if(Qe(ge))for(let Me=0;Me<ge.length;++Me){const Je=ge[Me],je=ot(Je)&&Je.name;if(je==="Boolean"){ke=!0;break}else je==="String"&&(nt=!1)}else ke=ot(ge)&&ge.name==="Boolean";ne[0]=ke,ne[1]=nt,(ke||St(ne,"default"))&&f.push(F)}}const m=[o,f];return Pt(e)&&n.set(e,m),m}function ku(e){return e[0]!=="$"&&!ia(e)}const ud=e=>e[0]==="_"||e==="$stable",Pf=e=>Qe(e)?e.map(Zr):[Zr(e)],p0=(e,t,r)=>{if(t._n)return t;const n=ms((...i)=>Pf(t(...i)),r);return n._c=!1,n},cd=(e,t,r)=>{const n=e._ctx;for(const i in e){if(ud(i))continue;const a=e[i];if(ot(a))t[i]=p0(i,a,n);else if(a!=null){const o=Pf(a);t[i]=()=>o}}},dd=(e,t)=>{const r=Pf(t);e.slots.default=()=>r},hd=(e,t,r)=>{for(const n in t)(r||n!=="_")&&(e[n]=t[n])},m0=(e,t,r)=>{const n=e.slots=sd();if(e.vnode.shapeFlag&32){const i=t._;i?(hd(n,t,r),r&&gc(n,"_",i,!0)):cd(t,n)}else t&&dd(e,t)},v0=(e,t,r)=>{const{vnode:n,slots:i}=e;let a=!0,o=Rt;if(n.shapeFlag&32){const f=t._;f?r&&f===1?a=!1:hd(i,t,r):(a=!t.$stable,cd(t,i)),o=t}else t&&(dd(e,t),o={default:1});if(a)for(const f in i)!ud(f)&&o[f]==null&&delete i[f]},Sr=O0;function _0(e){return g0(e)}function g0(e,t){const r=Cs();r.__VUE__=!0;const{insert:n,remove:i,patchProp:a,createElement:o,createText:f,createComment:l,setText:m,setElementText:g,parentNode:F,nextSibling:V,setScopeId:ne=Jr,insertStaticContent:ge}=e,ke=(A,R,H,le=null,ie=null,te=null,De=void 0,Te=null,Se=!!R.dynamicChildren)=>{if(A===R)return;A&&!ti(A,R)&&(le=li(A),Fr(A,ie,te,!0),A=null),R.patchFlag===-2&&(Se=!1,R.dynamicChildren=null);const{type:ce,ref:u,shapeFlag:Ie}=R;switch(ce){case Gs:nt(A,R,H,le);break;case xr:Me(A,R,H,le);break;case Ko:A==null&&Je(R,H,le,De);break;case Tt:Ge(A,R,H,le,ie,te,De,Te,Se);break;default:Ie&1?Be(A,R,H,le,ie,te,De,Te,Se):Ie&6?vt(A,R,H,le,ie,te,De,Te,Se):(Ie&64||Ie&128)&&ce.process(A,R,H,le,ie,te,De,Te,Se,Bn)}u!=null&&ie&&vs(u,A&&A.ref,te,R||A,!R)},nt=(A,R,H,le)=>{if(A==null)n(R.el=f(R.children),H,le);else{const ie=R.el=A.el;R.children!==A.children&&m(ie,R.children)}},Me=(A,R,H,le)=>{A==null?n(R.el=l(R.children||""),H,le):R.el=A.el},Je=(A,R,H,le)=>{[A.el,A.anchor]=ge(A.children,R,H,le,A.el,A.anchor)},je=({el:A,anchor:R},H,le)=>{let ie;for(;A&&A!==R;)ie=V(A),n(A,H,le),A=ie;n(R,H,le)},xe=({el:A,anchor:R})=>{let H;for(;A&&A!==R;)H=V(A),i(A),A=H;i(R)},Be=(A,R,H,le,ie,te,De,Te,Se)=>{R.type==="svg"?De="svg":R.type==="math"&&(De="mathml"),A==null?We(R,H,le,ie,te,De,Te,Se):Ye(A,R,ie,te,De,Te,Se)},We=(A,R,H,le,ie,te,De,Te)=>{let Se,ce;const{props:u,shapeFlag:Ie,transition:ze,dirs:et}=A;if(Se=A.el=o(A.type,te,u&&u.is,u),Ie&8?g(Se,A.children):Ie&16&&yt(A.children,Se,null,le,ie,Xo(A,te),De,Te),et&&Qn(A,null,le,"created"),Ot(Se,A,A.scopeId,De,le),u){for(const bt in u)bt!=="value"&&!ia(bt)&&a(Se,bt,null,u[bt],te,le);"value"in u&&a(Se,"value",null,u.value,te),(ce=u.onVnodeBeforeMount)&&Kr(ce,le,A)}et&&Qn(A,null,le,"beforeMount");const pt=y0(ie,ze);pt&&ze.beforeEnter(Se),n(Se,R,H),((ce=u&&u.onVnodeMounted)||pt||et)&&Sr(()=>{ce&&Kr(ce,le,A),pt&&ze.enter(Se),et&&Qn(A,null,le,"mounted")},ie)},Ot=(A,R,H,le,ie)=>{if(H&&ne(A,H),le)for(let te=0;te<le.length;te++)ne(A,le[te]);if(ie){let te=ie.subTree;if(R===te||yd(te.type)&&(te.ssContent===R||te.ssFallback===R)){const De=ie.vnode;Ot(A,De,De.scopeId,De.slotScopeIds,ie.parent)}}},yt=(A,R,H,le,ie,te,De,Te,Se=0)=>{for(let ce=Se;ce<A.length;ce++){const u=A[ce]=Te?Rn(A[ce]):Zr(A[ce]);ke(null,u,R,H,le,ie,te,De,Te)}},Ye=(A,R,H,le,ie,te,De)=>{const Te=R.el=A.el;let{patchFlag:Se,dynamicChildren:ce,dirs:u}=R;Se|=A.patchFlag&16;const Ie=A.props||Rt,ze=R.props||Rt;let et;if(H&&Zn(H,!1),(et=ze.onVnodeBeforeUpdate)&&Kr(et,H,R,A),u&&Qn(R,A,H,"beforeUpdate"),H&&Zn(H,!0),(Ie.innerHTML&&ze.innerHTML==null||Ie.textContent&&ze.textContent==null)&&g(Te,""),ce?ut(A.dynamicChildren,ce,Te,H,le,Xo(R,ie),te):De||Ct(A,R,Te,null,H,le,Xo(R,ie),te,!1),Se>0){if(Se&16)ft(Te,Ie,ze,H,ie);else if(Se&2&&Ie.class!==ze.class&&a(Te,"class",null,ze.class,ie),Se&4&&a(Te,"style",Ie.style,ze.style,ie),Se&8){const pt=R.dynamicProps;for(let bt=0;bt<pt.length;bt++){const xt=pt[bt],qt=Ie[xt],Qt=ze[xt];(Qt!==qt||xt==="value")&&a(Te,xt,qt,Qt,ie,H)}}Se&1&&A.children!==R.children&&g(Te,R.children)}else!De&&ce==null&&ft(Te,Ie,ze,H,ie);((et=ze.onVnodeUpdated)||u)&&Sr(()=>{et&&Kr(et,H,R,A),u&&Qn(R,A,H,"updated")},le)},ut=(A,R,H,le,ie,te,De)=>{for(let Te=0;Te<R.length;Te++){const Se=A[Te],ce=R[Te],u=Se.el&&(Se.type===Tt||!ti(Se,ce)||Se.shapeFlag&70)?F(Se.el):H;ke(Se,ce,u,null,le,ie,te,De,!0)}},ft=(A,R,H,le,ie)=>{if(R!==H){if(R!==Rt)for(const te in R)!ia(te)&&!(te in H)&&a(A,te,R[te],null,ie,le);for(const te in H){if(ia(te))continue;const De=H[te],Te=R[te];De!==Te&&te!=="value"&&a(A,te,Te,De,ie,le)}"value"in H&&a(A,"value",R.value,H.value,ie)}},Ge=(A,R,H,le,ie,te,De,Te,Se)=>{const ce=R.el=A?A.el:f(""),u=R.anchor=A?A.anchor:f("");let{patchFlag:Ie,dynamicChildren:ze,slotScopeIds:et}=R;et&&(Te=Te?Te.concat(et):et),A==null?(n(ce,H,le),n(u,H,le),yt(R.children||[],H,u,ie,te,De,Te,Se)):Ie>0&&Ie&64&&ze&&A.dynamicChildren?(ut(A.dynamicChildren,ze,H,ie,te,De,Te),(R.key!=null||ie&&R===ie.subTree)&&pd(A,R,!0)):Ct(A,R,H,u,ie,te,De,Te,Se)},vt=(A,R,H,le,ie,te,De,Te,Se)=>{R.slotScopeIds=Te,A==null?R.shapeFlag&512?ie.ctx.activate(R,H,le,De,Se):lt(R,H,le,ie,te,De,Se):kr(A,R,Se)},lt=(A,R,H,le,ie,te,De)=>{const Te=A.component=N0(A,le,ie);if(Ds(A)&&(Te.ctx.renderer=Bn),k0(Te,!1,De),Te.asyncDep){if(ie&&ie.registerDep(Te,Yt,De),!A.el){const Se=Te.subTree=zt(xr);Me(null,Se,R,H)}}else Yt(Te,A,R,H,ie,te,De)},kr=(A,R,H)=>{const le=R.component=A.component;if(L0(A,R,H))if(le.asyncDep&&!le.asyncResolved){Dt(le,R,H);return}else le.next=R,le.update();else R.el=A.el,le.vnode=R},Yt=(A,R,H,le,ie,te,De)=>{const Te=()=>{if(A.isMounted){let{next:Ie,bu:ze,u:et,parent:pt,vnode:bt}=A;{const vr=md(A);if(vr){Ie&&(Ie.el=bt.el,Dt(A,Ie,De)),vr.asyncDep.then(()=>{A.isUnmounted||Te()});return}}let xt=Ie,qt;Zn(A,!1),Ie?(Ie.el=bt.el,Dt(A,Ie,De)):Ie=bt,ze&&os(ze),(qt=Ie.props&&Ie.props.onVnodeBeforeUpdate)&&Kr(qt,pt,Ie,bt),Zn(A,!0);const Qt=Yo(A),Er=A.subTree;A.subTree=Qt,ke(Er,Qt,F(Er.el),li(Er),A,ie,te),Ie.el=Qt.el,xt===null&&R0(A,Qt.el),et&&Sr(et,ie),(qt=Ie.props&&Ie.props.onVnodeUpdated)&&Sr(()=>Kr(qt,pt,Ie,bt),ie)}else{let Ie;const{el:ze,props:et}=R,{bm:pt,m:bt,parent:xt,root:qt,type:Qt}=A,Er=oa(R);if(Zn(A,!1),pt&&os(pt),!Er&&(Ie=et&&et.onVnodeBeforeMount)&&Kr(Ie,xt,R),Zn(A,!0),ze&&Mi){const vr=()=>{A.subTree=Yo(A),Mi(ze,A.subTree,A,ie,null)};Er&&Qt.__asyncHydrate?Qt.__asyncHydrate(ze,A,vr):vr()}else{qt.ce&&qt.ce._injectChildStyle(Qt);const vr=A.subTree=Yo(A);ke(null,vr,H,le,A,ie,te),R.el=vr.el}if(bt&&Sr(bt,ie),!Er&&(Ie=et&&et.onVnodeMounted)){const vr=R;Sr(()=>Kr(Ie,xt,vr),ie)}(R.shapeFlag&256||xt&&oa(xt.vnode)&&xt.vnode.shapeFlag&256)&&A.a&&Sr(A.a,ie),A.isMounted=!0,R=H=le=null}};A.scope.on();const Se=A.effect=new Tc(Te);A.scope.off();const ce=A.update=Se.run.bind(Se),u=A.job=Se.runIfDirty.bind(Se);u.i=A,u.id=A.uid,Se.scheduler=()=>Lf(u),Zn(A,!0),ce()},Dt=(A,R,H)=>{R.component=A;const le=A.vnode.props;A.vnode=R,A.next=null,d0(A,R.props,le,H),v0(A,R.children,H),In(),Du(A),Gn()},Ct=(A,R,H,le,ie,te,De,Te,Se=!1)=>{const ce=A&&A.children,u=A?A.shapeFlag:0,Ie=R.children,{patchFlag:ze,shapeFlag:et}=R;if(ze>0){if(ze&128){nn(ce,Ie,H,le,ie,te,De,Te,Se);return}else if(ze&256){rn(ce,Ie,H,le,ie,te,De,Te,Se);return}}et&8?(u&16&&kn(ce,ie,te),Ie!==ce&&g(H,Ie)):u&16?et&16?nn(ce,Ie,H,le,ie,te,De,Te,Se):kn(ce,ie,te,!0):(u&8&&g(H,""),et&16&&yt(Ie,H,le,ie,te,De,Te,Se))},rn=(A,R,H,le,ie,te,De,Te,Se)=>{A=A||Ci,R=R||Ci;const ce=A.length,u=R.length,Ie=Math.min(ce,u);let ze;for(ze=0;ze<Ie;ze++){const et=R[ze]=Se?Rn(R[ze]):Zr(R[ze]);ke(A[ze],et,H,null,ie,te,De,Te,Se)}ce>u?kn(A,ie,te,!0,!1,Ie):yt(R,H,le,ie,te,De,Te,Se,Ie)},nn=(A,R,H,le,ie,te,De,Te,Se)=>{let ce=0;const u=R.length;let Ie=A.length-1,ze=u-1;for(;ce<=Ie&&ce<=ze;){const et=A[ce],pt=R[ce]=Se?Rn(R[ce]):Zr(R[ce]);if(ti(et,pt))ke(et,pt,H,null,ie,te,De,Te,Se);else break;ce++}for(;ce<=Ie&&ce<=ze;){const et=A[Ie],pt=R[ze]=Se?Rn(R[ze]):Zr(R[ze]);if(ti(et,pt))ke(et,pt,H,null,ie,te,De,Te,Se);else break;Ie--,ze--}if(ce>Ie){if(ce<=ze){const et=ze+1,pt=et<u?R[et].el:le;for(;ce<=ze;)ke(null,R[ce]=Se?Rn(R[ce]):Zr(R[ce]),H,pt,ie,te,De,Te,Se),ce++}}else if(ce>ze)for(;ce<=Ie;)Fr(A[ce],ie,te,!0),ce++;else{const et=ce,pt=ce,bt=new Map;for(ce=pt;ce<=ze;ce++){const ar=R[ce]=Se?Rn(R[ce]):Zr(R[ce]);ar.key!=null&&bt.set(ar.key,ce)}let xt,qt=0;const Qt=ze-pt+1;let Er=!1,vr=0;const gn=new Array(Qt);for(ce=0;ce<Qt;ce++)gn[ce]=0;for(ce=et;ce<=Ie;ce++){const ar=A[ce];if(qt>=Qt){Fr(ar,ie,te,!0);continue}let Tr;if(ar.key!=null)Tr=bt.get(ar.key);else for(xt=pt;xt<=ze;xt++)if(gn[xt-pt]===0&&ti(ar,R[xt])){Tr=xt;break}Tr===void 0?Fr(ar,ie,te,!0):(gn[Tr-pt]=ce+1,Tr>=vr?vr=Tr:Er=!0,ke(ar,R[Tr],H,null,ie,te,De,Te,Se),qt++)}const fr=Er?b0(gn):Ci;for(xt=fr.length-1,ce=Qt-1;ce>=0;ce--){const ar=pt+ce,Tr=R[ar],wa=ar+1<u?R[ar+1].el:le;gn[ce]===0?ke(null,Tr,H,wa,ie,te,De,Te,Se):Er&&(xt<0||ce!==fr[xt]?Hr(Tr,H,wa,2):xt--)}}},Hr=(A,R,H,le,ie=null)=>{const{el:te,type:De,transition:Te,children:Se,shapeFlag:ce}=A;if(ce&6){Hr(A.component.subTree,R,H,le);return}if(ce&128){A.suspense.move(R,H,le);return}if(ce&64){De.move(A,R,H,Bn);return}if(De===Tt){n(te,R,H);for(let Ie=0;Ie<Se.length;Ie++)Hr(Se[Ie],R,H,le);n(A.anchor,R,H);return}if(De===Ko){je(A,R,H);return}if(le!==2&&ce&1&&Te)if(le===0)Te.beforeEnter(te),n(te,R,H),Sr(()=>Te.enter(te),ie);else{const{leave:Ie,delayLeave:ze,afterLeave:et}=Te,pt=()=>n(te,R,H),bt=()=>{Ie(te,()=>{pt(),et&&et()})};ze?ze(te,pt,bt):bt()}else n(te,R,H)},Fr=(A,R,H,le=!1,ie=!1)=>{const{type:te,props:De,ref:Te,children:Se,dynamicChildren:ce,shapeFlag:u,patchFlag:Ie,dirs:ze,cacheIndex:et}=A;if(Ie===-2&&(ie=!1),Te!=null&&vs(Te,null,H,A,!0),et!=null&&(R.renderCache[et]=void 0),u&256){R.ctx.deactivate(A);return}const pt=u&1&&ze,bt=!oa(A);let xt;if(bt&&(xt=De&&De.onVnodeBeforeUnmount)&&Kr(xt,R,A),u&6)$s(A.component,H,le);else{if(u&128){A.suspense.unmount(H,le);return}pt&&Qn(A,null,R,"beforeUnmount"),u&64?A.type.remove(A,R,H,Bn,le):ce&&!ce.hasOnce&&(te!==Tt||Ie>0&&Ie&64)?kn(ce,R,H,!1,!0):(te===Tt&&Ie&384||!ie&&u&16)&&kn(Se,R,H),le&&Ea(A)}(bt&&(xt=De&&De.onVnodeUnmounted)||pt)&&Sr(()=>{xt&&Kr(xt,R,A),pt&&Qn(A,null,R,"unmounted")},H)},Ea=A=>{const{type:R,el:H,anchor:le,transition:ie}=A;if(R===Tt){Us(H,le);return}if(R===Ko){xe(A);return}const te=()=>{i(H),ie&&!ie.persisted&&ie.afterLeave&&ie.afterLeave()};if(A.shapeFlag&1&&ie&&!ie.persisted){const{leave:De,delayLeave:Te}=ie,Se=()=>De(H,te);Te?Te(A.el,te,Se):Se()}else te()},Us=(A,R)=>{let H;for(;A!==R;)H=V(A),i(A),A=H;i(R)},$s=(A,R,H)=>{const{bum:le,scope:ie,job:te,subTree:De,um:Te,m:Se,a:ce}=A;Bu(Se),Bu(ce),le&&os(le),ie.stop(),te&&(te.flags|=8,Fr(De,A,R,H)),Te&&Sr(Te,R),Sr(()=>{A.isUnmounted=!0},R),R&&R.pendingBranch&&!R.isUnmounted&&A.asyncDep&&!A.asyncResolved&&A.suspenseId===R.pendingId&&(R.deps--,R.deps===0&&R.resolve())},kn=(A,R,H,le=!1,ie=!1,te=0)=>{for(let De=te;De<A.length;De++)Fr(A[De],R,H,le,ie)},li=A=>{if(A.shapeFlag&6)return li(A.component.subTree);if(A.shapeFlag&128)return A.suspense.next();const R=V(A.anchor||A.el),H=R&&R[Vv];return H?V(H):R};let Gi=!1;const Ta=(A,R,H)=>{A==null?R._vnode&&Fr(R._vnode,null,null,!0):ke(R._vnode||null,A,R,null,null,null,H),R._vnode=A,Gi||(Gi=!0,Du(),Vc(),Gi=!1)},Bn={p:ke,um:Fr,m:Hr,r:Ea,mt:lt,mc:yt,pc:Ct,pbc:ut,n:li,o:e};let Aa,Mi;return{render:Ta,hydrate:Aa,createApp:l0(Ta,Aa)}}function Xo({type:e,props:t},r){return r==="svg"&&e==="foreignObject"||r==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:r}function Zn({effect:e,job:t},r){r?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function y0(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function pd(e,t,r=!1){const n=e.children,i=t.children;if(Qe(n)&&Qe(i))for(let a=0;a<n.length;a++){const o=n[a];let f=i[a];f.shapeFlag&1&&!f.dynamicChildren&&((f.patchFlag<=0||f.patchFlag===32)&&(f=i[a]=Rn(i[a]),f.el=o.el),!r&&f.patchFlag!==-2&&pd(o,f)),f.type===Gs&&(f.el=o.el)}}function b0(e){const t=e.slice(),r=[0];let n,i,a,o,f;const l=e.length;for(n=0;n<l;n++){const m=e[n];if(m!==0){if(i=r[r.length-1],e[i]<m){t[n]=i,r.push(n);continue}for(a=0,o=r.length-1;a<o;)f=a+o>>1,e[r[f]]<m?a=f+1:o=f;m<e[r[a]]&&(a>0&&(t[n]=r[a-1]),r[a]=n)}}for(a=r.length,o=r[a-1];a-- >0;)r[a]=o,o=t[o];return r}function md(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:md(t)}function Bu(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const x0=Symbol.for("v-scx"),E0=()=>fs(x0);function ls(e,t,r){return vd(e,t,r)}function vd(e,t,r=Rt){const{immediate:n,deep:i,flush:a,once:o}=r,f=Wt({},r),l=t&&n||!t&&a!=="post";let m;if(va){if(a==="sync"){const ne=E0();m=ne.__watcherHandles||(ne.__watcherHandles=[])}else if(!l){const ne=()=>{};return ne.stop=Jr,ne.resume=Jr,ne.pause=Jr,ne}}const g=pr;f.call=(ne,ge,ke)=>jr(ne,g,ge,ke);let F=!1;a==="post"?f.scheduler=ne=>{Sr(ne,g&&g.suspense)}:a!=="sync"&&(F=!0,f.scheduler=(ne,ge)=>{ge?ne():Lf(ne)}),f.augmentJob=ne=>{t&&(ne.flags|=4),F&&(ne.flags|=2,g&&(ne.id=g.uid,ne.i=g))};const V=kv(e,t,f);return va&&(m?m.push(V):l&&V()),V}function T0(e,t,r){const n=this.proxy,i=Xt(e)?e.includes(".")?_d(n,e):()=>n[e]:e.bind(n,n);let a;ot(t)?a=t:(a=t.handler,r=t);const o=ba(this),f=vd(i,a.bind(n),r);return o(),f}function _d(e,t){const r=t.split(".");return()=>{let n=e;for(let i=0;i<r.length&&n;i++)n=n[r[i]];return n}}const A0=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Pn(t)}Modifiers`]||e[`${fi(t)}Modifiers`];function w0(e,t,...r){if(e.isUnmounted)return;const n=e.vnode.props||Rt;let i=r;const a=t.startsWith("update:"),o=a&&A0(n,t.slice(7));o&&(o.trim&&(i=r.map(g=>Xt(g)?g.trim():g)),o.number&&(i=r.map(Jo)));let f,l=n[f=Bo(t)]||n[f=Bo(Pn(t))];!l&&a&&(l=n[f=Bo(fi(t))]),l&&jr(l,e,6,i);const m=n[f+"Once"];if(m){if(!e.emitted)e.emitted={};else if(e.emitted[f])return;e.emitted[f]=!0,jr(m,e,6,i)}}function gd(e,t,r=!1){const n=t.emitsCache,i=n.get(e);if(i!==void 0)return i;const a=e.emits;let o={},f=!1;if(!ot(e)){const l=m=>{const g=gd(m,t,!0);g&&(f=!0,Wt(o,g))};!r&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!a&&!f?(Pt(e)&&n.set(e,null),null):(Qe(a)?a.forEach(l=>o[l]=null):Wt(o,a),Pt(e)&&n.set(e,o),o)}function Is(e,t){return!e||!As(t)?!1:(t=t.slice(2).replace(/Once$/,""),St(e,t[0].toLowerCase()+t.slice(1))||St(e,fi(t))||St(e,t))}function Yo(e){const{type:t,vnode:r,proxy:n,withProxy:i,propsOptions:[a],slots:o,attrs:f,emit:l,render:m,renderCache:g,props:F,data:V,setupState:ne,ctx:ge,inheritAttrs:ke}=e,nt=ps(e);let Me,Je;try{if(r.shapeFlag&4){const xe=i||n,Be=xe;Me=Zr(m.call(Be,xe,g,F,ne,V,ge)),Je=f}else{const xe=t;Me=Zr(xe.length>1?xe(F,{attrs:f,slots:o,emit:l}):xe(F,null)),Je=t.props?f:S0(f)}}catch(xe){la.length=0,Ps(xe,e,1),Me=zt(xr)}let je=Me;if(Je&&ke!==!1){const xe=Object.keys(Je),{shapeFlag:Be}=je;xe.length&&Be&7&&(a&&xe.some(_f)&&(Je=C0(Je,a)),je=Dn(je,Je,!1,!0))}return r.dirs&&(je=Dn(je,null,!1,!0),je.dirs=je.dirs?je.dirs.concat(r.dirs):r.dirs),r.transition&&oi(je,r.transition),Me=je,ps(nt),Me}const S0=e=>{let t;for(const r in e)(r==="class"||r==="style"||As(r))&&((t||(t={}))[r]=e[r]);return t},C0=(e,t)=>{const r={};for(const n in e)(!_f(n)||!(n.slice(9)in t))&&(r[n]=e[n]);return r};function L0(e,t,r){const{props:n,children:i,component:a}=e,{props:o,children:f,patchFlag:l}=t,m=a.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return n?Uu(n,o,m):!!o;if(l&8){const g=t.dynamicProps;for(let F=0;F<g.length;F++){const V=g[F];if(o[V]!==n[V]&&!Is(m,V))return!0}}}else return(i||f)&&(!f||!f.$stable)?!0:n===o?!1:n?o?Uu(n,o,m):!0:!!o;return!1}function Uu(e,t,r){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const a=n[i];if(t[a]!==e[a]&&!Is(r,a))return!0}return!1}function R0({vnode:e,parent:t},r){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=r,t=t.parent;else break}}const yd=e=>e.__isSuspense;function O0(e,t){t&&t.pendingBranch?Qe(e)?t.effects.push(...e):t.effects.push(e):$v(e)}const Tt=Symbol.for("v-fgt"),Gs=Symbol.for("v-txt"),xr=Symbol.for("v-cmt"),Ko=Symbol.for("v-stc"),la=[];let Pr=null;function qe(e=!1){la.push(Pr=e?null:[])}function P0(){la.pop(),Pr=la[la.length-1]||null}let ma=1;function $u(e,t=!1){ma+=e,e<0&&Pr&&t&&(Pr.hasOnce=!0)}function bd(e){return e.dynamicChildren=ma>0?Pr||Ci:null,P0(),ma>0&&Pr&&Pr.push(e),e}function tt(e,t,r,n,i,a){return bd(Oe(e,t,r,n,i,a,!0))}function ua(e,t,r,n,i){return bd(zt(e,t,r,n,i,!0))}function gs(e){return e?e.__v_isVNode===!0:!1}function ti(e,t){return e.type===t.type&&e.key===t.key}const xd=({key:e})=>e??null,us=({ref:e,ref_key:t,ref_for:r})=>(typeof e=="number"&&(e=""+e),e!=null?Xt(e)||mr(e)||ot(e)?{i:Or,r:e,k:t,f:!!r}:e:null);function Oe(e,t=null,r=null,n=0,i=null,a=e===Tt?0:1,o=!1,f=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&xd(t),ref:t&&us(t),scopeId:Hc,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Or};return f?(Df(l,r),a&128&&e.normalize(l)):r&&(l.shapeFlag|=Xt(r)?8:16),ma>0&&!o&&Pr&&(l.patchFlag>0||a&6)&&l.patchFlag!==32&&Pr.push(l),l}const zt=D0;function D0(e,t=null,r=null,n=0,i=null,a=!1){if((!e||e===t0)&&(e=xr),gs(e)){const f=Dn(e,t,!0);return r&&Df(f,r),ma>0&&!a&&Pr&&(f.shapeFlag&6?Pr[Pr.indexOf(e)]=f:Pr.push(f)),f.patchFlag=-2,f}if(V0(e)&&(e=e.__vccOpts),t){t=F0(t);let{class:f,style:l}=t;f&&!Xt(f)&&(t.class=ga(f)),Pt(l)&&(Cf(l)&&!Qe(l)&&(l=Wt({},l)),t.style=Ls(l))}const o=Xt(e)?1:yd(e)?128:zc(e)?64:Pt(e)?4:ot(e)?2:0;return Oe(e,t,r,n,i,o,a,!0)}function F0(e){return e?Cf(e)||od(e)?Wt({},e):e:null}function Dn(e,t,r=!1,n=!1){const{props:i,ref:a,patchFlag:o,children:f,transition:l}=e,m=t?I0(i||{},t):i,g={__v_isVNode:!0,__v_skip:!0,type:e.type,props:m,key:m&&xd(m),ref:t&&t.ref?r&&a?Qe(a)?a.concat(us(t)):[a,us(t)]:us(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:f,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Tt?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Dn(e.ssContent),ssFallback:e.ssFallback&&Dn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&n&&oi(g,l.clone(g)),g}function _t(e=" ",t=0){return zt(Gs,null,e,t)}function Lr(e="",t=!1){return t?(qe(),ua(xr,null,e)):zt(xr,null,e)}function Zr(e){return e==null||typeof e=="boolean"?zt(xr):Qe(e)?zt(Tt,null,e.slice()):gs(e)?Rn(e):zt(Gs,null,String(e))}function Rn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Dn(e)}function Df(e,t){let r=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(Qe(t))r=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),Df(e,i()),i._c&&(i._d=!0));return}else{r=32;const i=t._;!i&&!od(t)?t._ctx=Or:i===3&&Or&&(Or.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ot(t)?(t={default:t,_ctx:Or},r=32):(t=String(t),n&64?(r=16,t=[_t(t)]):r=8);e.children=t,e.shapeFlag|=r}function I0(...e){const t={};for(let r=0;r<e.length;r++){const n=e[r];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=ga([t.class,n.class]));else if(i==="style")t.style=Ls([t.style,n.style]);else if(As(i)){const a=t[i],o=n[i];o&&a!==o&&!(Qe(a)&&a.includes(o))&&(t[i]=a?[].concat(a,o):o)}else i!==""&&(t[i]=n[i])}return t}function Kr(e,t,r,n=null){jr(e,t,7,[r,n])}const G0=id();let M0=0;function N0(e,t,r){const n=e.type,i=(t?t.appContext:e.appContext)||G0,a={uid:M0++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new dv(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ld(n,i),emitsOptions:gd(n,i),emit:null,emitted:null,propsDefaults:Rt,inheritAttrs:n.inheritAttrs,ctx:Rt,data:Rt,props:Rt,attrs:Rt,slots:Rt,refs:Rt,setupState:Rt,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=w0.bind(null,a),e.ce&&e.ce(a),a}let pr=null;const Ff=()=>pr||Or;let ys,df;{const e=Cs(),t=(r,n)=>{let i;return(i=e[r])||(i=e[r]=[]),i.push(n),a=>{i.length>1?i.forEach(o=>o(a)):i[0](a)}};ys=t("__VUE_INSTANCE_SETTERS__",r=>pr=r),df=t("__VUE_SSR_SETTERS__",r=>va=r)}const ba=e=>{const t=pr;return ys(e),e.scope.on(),()=>{e.scope.off(),ys(t)}},Vu=()=>{pr&&pr.scope.off(),ys(null)};function Ed(e){return e.vnode.shapeFlag&4}let va=!1;function k0(e,t=!1,r=!1){t&&df(t);const{props:n,children:i}=e.vnode,a=Ed(e);c0(e,n,a,t),m0(e,i,r);const o=a?B0(e,t):void 0;return t&&df(!1),o}function B0(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,r0);const{setup:n}=r;if(n){In();const i=e.setupContext=n.length>1?$0(e):null,a=ba(e),o=ya(n,e,0,[e.props,i]),f=pc(o);if(Gn(),a(),(f||e.sp)&&!oa(e)&&Qc(e),f){if(o.then(Vu,Vu),t)return o.then(l=>{ju(e,l,t)}).catch(l=>{Ps(l,e,0)});e.asyncDep=o}else ju(e,o,t)}else Td(e,t)}function ju(e,t,r){ot(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Pt(t)&&(e.setupState=Bc(t)),Td(e,r)}let Hu;function Td(e,t,r){const n=e.type;if(!e.render){if(!t&&Hu&&!n.render){const i=n.template||Of(e).template;if(i){const{isCustomElement:a,compilerOptions:o}=e.appContext.config,{delimiters:f,compilerOptions:l}=n,m=Wt(Wt({isCustomElement:a,delimiters:f},o),l);n.render=Hu(i,m)}}e.render=n.render||Jr}{const i=ba(e);In();try{n0(e)}finally{Gn(),i()}}}const U0={get(e,t){return cr(e,"get",""),e[t]}};function $0(e){const t=r=>{e.exposed=r||{}};return{attrs:new Proxy(e.attrs,U0),slots:e.slots,emit:e.emit,expose:t}}function Ms(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Bc(Dv(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in fa)return fa[r](e)},has(t,r){return r in t||r in fa}})):e.proxy}function V0(e){return ot(e)&&"__vccOpts"in e}const xa=(e,t)=>sf(e,t,va);function j0(e,t,r){const n=arguments.length;return n===2?Pt(t)&&!Qe(t)?gs(t)?zt(e,null,[t]):zt(e,t):zt(e,null,t):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&gs(r)&&(r=[r]),zt(e,t,r))}const H0="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let hf;const zu=typeof window<"u"&&window.trustedTypes;if(zu)try{hf=zu.createPolicy("vue",{createHTML:e=>e})}catch{}const Ad=hf?e=>hf.createHTML(e):e=>e,z0="http://www.w3.org/2000/svg",W0="http://www.w3.org/1998/Math/MathML",cn=typeof document<"u"?document:null,Wu=cn&&cn.createElement("template"),X0={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,n)=>{const i=t==="svg"?cn.createElementNS(z0,e):t==="mathml"?cn.createElementNS(W0,e):r?cn.createElement(e,{is:r}):cn.createElement(e);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>cn.createTextNode(e),createComment:e=>cn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>cn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,r,n,i,a){const o=r?r.previousSibling:t.lastChild;if(i&&(i===a||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),r),!(i===a||!(i=i.nextSibling)););else{Wu.innerHTML=Ad(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const f=Wu.content;if(n==="svg"||n==="mathml"){const l=f.firstChild;for(;l.firstChild;)f.appendChild(l.firstChild);f.removeChild(l)}t.insertBefore(f,r)}return[o?o.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}},wn="transition",ta="animation",Fi=Symbol("_vtc"),wd={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Sd=Wt({},Xc,wd),Y0=e=>(e.displayName="Transition",e.props=Sd,e),K0=Y0((e,{slots:t})=>j0(Hv,Cd(e),t)),Jn=(e,t=[])=>{Qe(e)?e.forEach(r=>r(...t)):e&&e(...t)},Xu=e=>e?Qe(e)?e.some(t=>t.length>1):e.length>1:!1;function Cd(e){const t={};for(const Ge in e)Ge in wd||(t[Ge]=e[Ge]);if(e.css===!1)return t;const{name:r="v",type:n,duration:i,enterFromClass:a=`${r}-enter-from`,enterActiveClass:o=`${r}-enter-active`,enterToClass:f=`${r}-enter-to`,appearFromClass:l=a,appearActiveClass:m=o,appearToClass:g=f,leaveFromClass:F=`${r}-leave-from`,leaveActiveClass:V=`${r}-leave-active`,leaveToClass:ne=`${r}-leave-to`}=e,ge=q0(i),ke=ge&&ge[0],nt=ge&&ge[1],{onBeforeEnter:Me,onEnter:Je,onEnterCancelled:je,onLeave:xe,onLeaveCancelled:Be,onBeforeAppear:We=Me,onAppear:Ot=Je,onAppearCancelled:yt=je}=t,Ye=(Ge,vt,lt,kr)=>{Ge._enterCancelled=kr,Sn(Ge,vt?g:f),Sn(Ge,vt?m:o),lt&&lt()},ut=(Ge,vt)=>{Ge._isLeaving=!1,Sn(Ge,F),Sn(Ge,ne),Sn(Ge,V),vt&&vt()},ft=Ge=>(vt,lt)=>{const kr=Ge?Ot:Je,Yt=()=>Ye(vt,Ge,lt);Jn(kr,[vt,Yt]),Yu(()=>{Sn(vt,Ge?l:a),qr(vt,Ge?g:f),Xu(kr)||Ku(vt,n,ke,Yt)})};return Wt(t,{onBeforeEnter(Ge){Jn(Me,[Ge]),qr(Ge,a),qr(Ge,o)},onBeforeAppear(Ge){Jn(We,[Ge]),qr(Ge,l),qr(Ge,m)},onEnter:ft(!1),onAppear:ft(!0),onLeave(Ge,vt){Ge._isLeaving=!0;const lt=()=>ut(Ge,vt);qr(Ge,F),Ge._enterCancelled?(qr(Ge,V),pf()):(pf(),qr(Ge,V)),Yu(()=>{Ge._isLeaving&&(Sn(Ge,F),qr(Ge,ne),Xu(xe)||Ku(Ge,n,nt,lt))}),Jn(xe,[Ge,lt])},onEnterCancelled(Ge){Ye(Ge,!1,void 0,!0),Jn(je,[Ge])},onAppearCancelled(Ge){Ye(Ge,!0,void 0,!0),Jn(yt,[Ge])},onLeaveCancelled(Ge){ut(Ge),Jn(Be,[Ge])}})}function q0(e){if(e==null)return null;if(Pt(e))return[qo(e.enter),qo(e.leave)];{const t=qo(e);return[t,t]}}function qo(e){return iv(e)}function qr(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.add(r)),(e[Fi]||(e[Fi]=new Set)).add(t)}function Sn(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.remove(n));const r=e[Fi];r&&(r.delete(t),r.size||(e[Fi]=void 0))}function Yu(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Q0=0;function Ku(e,t,r,n){const i=e._endId=++Q0,a=()=>{i===e._endId&&n()};if(r!=null)return setTimeout(a,r);const{type:o,timeout:f,propCount:l}=Ld(e,t);if(!o)return n();const m=o+"end";let g=0;const F=()=>{e.removeEventListener(m,V),a()},V=ne=>{ne.target===e&&++g>=l&&F()};setTimeout(()=>{g<l&&F()},f+1),e.addEventListener(m,V)}function Ld(e,t){const r=window.getComputedStyle(e),n=ge=>(r[ge]||"").split(", "),i=n(`${wn}Delay`),a=n(`${wn}Duration`),o=qu(i,a),f=n(`${ta}Delay`),l=n(`${ta}Duration`),m=qu(f,l);let g=null,F=0,V=0;t===wn?o>0&&(g=wn,F=o,V=a.length):t===ta?m>0&&(g=ta,F=m,V=l.length):(F=Math.max(o,m),g=F>0?o>m?wn:ta:null,V=g?g===wn?a.length:l.length:0);const ne=g===wn&&/\b(transform|all)(,|$)/.test(n(`${wn}Property`).toString());return{type:g,timeout:F,propCount:V,hasTransform:ne}}function qu(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((r,n)=>Qu(r)+Qu(e[n])))}function Qu(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function pf(){return document.body.offsetHeight}function Z0(e,t,r){const n=e[Fi];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}const Zu=Symbol("_vod"),J0=Symbol("_vsh"),e_=Symbol(""),t_=/(^|;)\s*display\s*:/;function r_(e,t,r){const n=e.style,i=Xt(r);let a=!1;if(r&&!i){if(t)if(Xt(t))for(const o of t.split(";")){const f=o.slice(0,o.indexOf(":")).trim();r[f]==null&&cs(n,f,"")}else for(const o in t)r[o]==null&&cs(n,o,"");for(const o in r)o==="display"&&(a=!0),cs(n,o,r[o])}else if(i){if(t!==r){const o=n[e_];o&&(r+=";"+o),n.cssText=r,a=t_.test(r)}}else t&&e.removeAttribute("style");Zu in e&&(e[Zu]=a?n.display:"",e[J0]&&(n.display="none"))}const Ju=/\s*!important$/;function cs(e,t,r){if(Qe(r))r.forEach(n=>cs(e,t,n));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const n=n_(e,t);Ju.test(r)?e.setProperty(fi(n),r.replace(Ju,""),"important"):e[n]=r}}const ec=["Webkit","Moz","ms"],Qo={};function n_(e,t){const r=Qo[t];if(r)return r;let n=Pn(t);if(n!=="filter"&&n in e)return Qo[t]=n;n=_c(n);for(let i=0;i<ec.length;i++){const a=ec[i]+n;if(a in e)return Qo[t]=a}return t}const tc="http://www.w3.org/1999/xlink";function rc(e,t,r,n,i,a=uv(t)){n&&t.startsWith("xlink:")?r==null?e.removeAttributeNS(tc,t.slice(6,t.length)):e.setAttributeNS(tc,t,r):r==null||a&&!yc(r)?e.removeAttribute(t):e.setAttribute(t,a?"":tn(r)?String(r):r)}function nc(e,t,r,n,i){if(t==="innerHTML"||t==="textContent"){r!=null&&(e[t]=t==="innerHTML"?Ad(r):r);return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const f=a==="OPTION"?e.getAttribute("value")||"":e.value,l=r==null?e.type==="checkbox"?"on":"":String(r);(f!==l||!("_value"in e))&&(e.value=l),r==null&&e.removeAttribute(t),e._value=r;return}let o=!1;if(r===""||r==null){const f=typeof e[t];f==="boolean"?r=yc(r):r==null&&f==="string"?(r="",o=!0):f==="number"&&(r=0,o=!0)}try{e[t]=r}catch{}o&&e.removeAttribute(i||t)}function ri(e,t,r,n){e.addEventListener(t,r,n)}function i_(e,t,r,n){e.removeEventListener(t,r,n)}const ic=Symbol("_vei");function a_(e,t,r,n,i=null){const a=e[ic]||(e[ic]={}),o=a[t];if(n&&o)o.value=n;else{const[f,l]=s_(t);if(n){const m=a[t]=l_(n,i);ri(e,f,m,l)}else o&&(i_(e,f,o,l),a[t]=void 0)}}const ac=/(?:Once|Passive|Capture)$/;function s_(e){let t;if(ac.test(e)){t={};let n;for(;n=e.match(ac);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):fi(e.slice(2)),t]}let Zo=0;const o_=Promise.resolve(),f_=()=>Zo||(o_.then(()=>Zo=0),Zo=Date.now());function l_(e,t){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;jr(u_(n,r.value),t,5,[n])};return r.value=e,r.attached=f_(),r}function u_(e,t){if(Qe(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const sc=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,c_=(e,t,r,n,i,a)=>{const o=i==="svg";t==="class"?Z0(e,n,o):t==="style"?r_(e,r,n):As(t)?_f(t)||a_(e,t,r,n,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):d_(e,t,n,o))?(nc(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&rc(e,t,n,o,a,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Xt(n))?nc(e,Pn(t),n,a,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),rc(e,t,n,o))};function d_(e,t,r,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&sc(t)&&ot(r));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return sc(t)&&Xt(r)?!1:t in e}const Rd=new WeakMap,Od=new WeakMap,bs=Symbol("_moveCb"),oc=Symbol("_enterCb"),h_=e=>(delete e.props.mode,e),p_=h_({name:"TransitionGroup",props:Wt({},Sd,{tag:String,moveClass:String}),setup(e,{slots:t}){const r=Ff(),n=Wc();let i,a;return ed(()=>{if(!i.length)return;const o=e.moveClass||`${e.name||"v"}-move`;if(!g_(i[0].el,r.vnode.el,o))return;i.forEach(m_),i.forEach(v_);const f=i.filter(__);pf(),f.forEach(l=>{const m=l.el,g=m.style;qr(m,o),g.transform=g.webkitTransform=g.transitionDuration="";const F=m[bs]=V=>{V&&V.target!==m||(!V||/transform$/.test(V.propertyName))&&(m.removeEventListener("transitionend",F),m[bs]=null,Sn(m,o))};m.addEventListener("transitionend",F)})}),()=>{const o=Et(e),f=Cd(o);let l=o.tag||Tt;if(i=[],a)for(let m=0;m<a.length;m++){const g=a[m];g.el&&g.el instanceof Element&&(i.push(g),oi(g,pa(g,f,n,r)),Rd.set(g,g.el.getBoundingClientRect()))}a=t.default?Rf(t.default()):[];for(let m=0;m<a.length;m++){const g=a[m];g.key!=null&&oi(g,pa(g,f,n,r))}return zt(l,null,a)}}}),Pd=p_;function m_(e){const t=e.el;t[bs]&&t[bs](),t[oc]&&t[oc]()}function v_(e){Od.set(e,e.el.getBoundingClientRect())}function __(e){const t=Rd.get(e),r=Od.get(e),n=t.left-r.left,i=t.top-r.top;if(n||i){const a=e.el.style;return a.transform=a.webkitTransform=`translate(${n}px,${i}px)`,a.transitionDuration="0s",e}}function g_(e,t,r){const n=e.cloneNode(),i=e[Fi];i&&i.forEach(f=>{f.split(/\s+/).forEach(l=>l&&n.classList.remove(l))}),r.split(/\s+/).forEach(f=>f&&n.classList.add(f)),n.style.display="none";const a=t.nodeType===1?t:t.parentNode;a.appendChild(n);const{hasTransform:o}=Ld(n);return a.removeChild(n),o}const xs=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Qe(t)?r=>os(t,r):t};function y_(e){e.target.composing=!0}function fc(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Di=Symbol("_assign"),sr={created(e,{modifiers:{lazy:t,trim:r,number:n}},i){e[Di]=xs(i);const a=n||i.props&&i.props.type==="number";ri(e,t?"change":"input",o=>{if(o.target.composing)return;let f=e.value;r&&(f=f.trim()),a&&(f=Jo(f)),e[Di](f)}),r&&ri(e,"change",()=>{e.value=e.value.trim()}),t||(ri(e,"compositionstart",y_),ri(e,"compositionend",fc),ri(e,"change",fc))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:r,modifiers:{lazy:n,trim:i,number:a}},o){if(e[Di]=xs(o),e.composing)return;const f=(a||e.type==="number")&&!/^0\d/.test(e.value)?Jo(e.value):e.value,l=t??"";f!==l&&(document.activeElement===e&&e.type!=="range"&&(n&&t===r||i&&e.value.trim()===l)||(e.value=l))}},Dd={deep:!0,created(e,t,r){e[Di]=xs(r),ri(e,"change",()=>{const n=e._modelValue,i=b_(e),a=e.checked,o=e[Di];if(Qe(n)){const f=bc(n,i),l=f!==-1;if(a&&!l)o(n.concat(i));else if(!a&&l){const m=[...n];m.splice(f,1),o(m)}}else if(ws(n)){const f=new Set(n);a?f.add(i):f.delete(i),o(f)}else o(Fd(e,a))})},mounted:lc,beforeUpdate(e,t,r){e[Di]=xs(r),lc(e,t,r)}};function lc(e,{value:t,oldValue:r},n){e._modelValue=t;let i;if(Qe(t))i=bc(t,n.props.value)>-1;else if(ws(t))i=t.has(n.props.value);else{if(t===r)return;i=Rs(t,Fd(e,!0))}e.checked!==i&&(e.checked=i)}function b_(e){return"_value"in e?e._value:e.value}function Fd(e,t){const r=t?"_trueValue":"_falseValue";return r in e?e[r]:t}const x_=["ctrl","shift","alt","meta"],E_={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>x_.some(r=>e[`${r}Key`]&&!t.includes(r))},Id=(e,t)=>{const r=e._withMods||(e._withMods={}),n=t.join(".");return r[n]||(r[n]=(i,...a)=>{for(let o=0;o<t.length;o++){const f=E_[t[o]];if(f&&f(i,t))return}return e(i,...a)})},T_=Wt({patchProp:c_},X0);let uc;function A_(){return uc||(uc=_0(T_))}const w_=(...e)=>{const t=A_().createApp(...e),{mount:r}=t;return t.mount=n=>{const i=C_(n);if(!i)return;const a=t._component;!ot(a)&&!a.render&&!a.template&&(a.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=r(i,!1,S_(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function S_(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function C_(e){return Xt(e)?document.querySelector(e):e}const Fn=()=>L_,L_=wf(new class{constructor(){Pe(this,"textures",new Map);Pe(this,"sounds",new Map);Pe(this,"loadings",0);Pe(this,"logs",[])}log(t){this.logs.push(t)}loadTexture(t,r){this.log(`Loading texture "${t}" from "${r}"`);const n=new Image;n.src=r,this.loadings++,n.onload=async()=>{this.log(`Texture "${t}" loaded`),this.textures.set(t,n),this.loadings--}}loadSound(t,r){this.log(`Loading sound "${t}" from "${r}"`);const n=new Audio(r);this.loadings++,n.oncanplaythrough=()=>{this.log(`Sound "${t}" loaded`),this.sounds.set(t,n),this.loadings--}}getTexture(t){return this.textures.get(t)}getSound(t){return this.sounds.get(t)}dropTexture(t){this.textures.has(t)&&this.textures.delete(t)}isFinished(){return this.loadings===0}}),gt=Mn({enabled:!1,x:0,y:0,z:0,angleX:0,angleY:0,angleZ:0,scaleX:1,scaleY:1,scaleZ:1,transition:!0,virtualDice:!0});let ss=class{constructor(){Pe(this,"callback");Pe(this,"accept",[]);Pe(this,"receive",!1);Pe(this,"text","")}async input(t,r=[]){return this.receive=!0,this.text=t,new Promise(n=>{this.accept=r,this.callback=n})}resolve(t){if(!this.callback)throw new Error("No callback");this.callback(t),this.callback=void 0,this.receive=!1,this.text="",this.accept=[]}};const hr=()=>R_;let R_=Mn(new class{constructor(){Pe(this,"next",new ss);Pe(this,"move",new ss);Pe(this,"confirm",new ss);Pe(this,"players",new ss)}wait(t){return gt.transition||(t=0),new Promise(r=>setTimeout(r,t))}});var ht=(e=>(e.UP="up",e.RIGHT="right",e.DOWN="down",e.LEFT="left",e))(ht||{});const At=()=>O_,O_=Mn(new class{constructor(){Pe(this,"players",new Map);Pe(this,"dices");Pe(this,"steps");Pe(this,"inning",0);Pe(this,"winner");Pe(this,"victoryScore",1e3);Pe(this,"messages",new class{constructor(){Pe(this,"inner",new Map);Pe(this,"counter",0)}push(r,n=5e3){const i=this.counter++;return this.inner.set(i,r),n!==0&&setTimeout(()=>this.inner.delete(i),n),i}remove(r){this.inner.delete(r)}length(){return this.inner.size}toArray(){return Array.from(this.inner.values())}});Pe(this,"playersLabel",[]);Pe(this,"event");Pe(this,"traps",[])}setEvent(t,r,n,i=!1){return new Promise(a=>{const[o,f,l]=n;this.event={type:r,title:o,hasFail:i,description:f.trim().replaceAll(`
`,"<br>"),callback:async m=>{this.event=void 0,await l(t,m),a()}}})}withoutPlayer(t){return Array.from(this.players.values()).filter(r=>r!==t)}async throwDice(t,r=!1,n){const i=hr(),a=r?2:1;if(gt.virtualDice)for(let m=0;m<15;m++)this.dices=Array.from({length:a},()=>Math.floor(Math.random()*6)+1),await i.wait(1500/15);else this.dices=new Array(a).fill(1);n&&(this.dices=this.dices.map(f=>n.shift()??f)),await i.next.input(t);const o=this.dices.reduce((f,l)=>f+l,0);return this.dices=void 0,o}}),P_={class:"player"},D_=vn({__name:"GameOver",setup(e){const t=At(),r=xa(()=>Array.from(t.players.values())),n=()=>location.reload();return(i,a)=>(qe(),tt(Tt,null,[a[0]||(a[0]=Oe("h1",null,"遊戲結束",-1)),_t(" 總回合數: "+dt(Fe(t).inning),1),a[1]||(a[1]=Oe("br",null,null,-1)),_t(" 最終贏家是... "+dt(Fe(t).winner.name)+"！ ",1),(qe(!0),tt(Tt,null,Rr(r.value.toSorted((o,f)=>f.score-o.score),o=>(qe(),tt("div",P_,[Oe("h3",null,[_t(dt(o.name)+" ",1),Oe("i",null,dt(o===Fe(t).winner?"👑":"👻"),1)]),Oe("span",null,"分數: "+dt(o.score),1)]))),256)),Oe("button",{onClick:n},"重新開始")],64))}}),Nn=(e,t)=>{const r=e.__vccOpts||e;for(const[n,i]of t)r[n]=i;return r},F_=Nn(D_,[["__scopeId","data-v-c9c077aa"]]);function Es(e){let t=e.length;for(;t!=0;){let r=Math.floor(Math.random()*t);t--,[e[t],e[r]]=[e[r],e[t]]}}const Ns=e=>{let t=e.slice();return()=>(t.length||(t=e.slice()),t.splice(Math.floor(Math.random()*t.length),1)[0])},I_=()=>[["吃好吃滿",`組內每個人都要裝滿半碗，並在1分鐘吃完。

成功 +80分
失敗 -20分`,ir(80,-20)],["喝好喝滿",`組內每個人都要裝滿兩杯飲料，並在30秒喝完。

成功 +50分
失敗 -20分`,ir(50,-20)],["記憶力比拚",`記住隊內至少三個人的名字並說出。

成功 +80分
失敗 -20分`,ir(80,-20)],["記憶力比拚",`播放歌曲，記住該段歌詞並唱出。

成功 +100分
失敗 -20分`,ir(100,-20)],["四不像",`團體做出指定團體動作，在1分鐘內完成。

成功 +50分
失敗 -20分`,ir(50,-20)],["有你真好",`找一位其他隊伍的人 (不可重複) 拍照，1分鐘內完成。

成功 +60分
失敗 -50分`,ir(60,-50)],["聖誕你不知",`回答聖誕節冷知識

聖誕老人住哪裡? (國家)
<span class="hide">芬蘭 羅瓦涅米</span>

成功 +50分
失敗 -20分`,ir(50,-20)],["聖誕你不知",`回答聖誕節冷知識

聖誕老人的馴鹿是公還是母?
<span class="hide">母的</span>

成功 +50分
失敗 -20分`,ir(50,-20)],["擠眉弄眼",`隊內互相使用便條紙貼在對方臉上某個部位，只能使用臉部肌肉把便條紙拿下，1分鐘內完成。

成功 +80分
失敗 -40分`,ir(80,-40)],["支援前線",`拿到主持人要求物品及數量，回到原位，1分鐘內完成。

成功 +60分
失敗 -20分`,ir(60,-20)],["比手劃腳",`指定一位並背對所有人，其他人提示直到猜到題目，3分鐘內完成。

成功 +80分
失敗 -40分`,ir(80,-40)],["誰是花栗鼠",`每位組員跟著簡易節拍唸出繞口令，1分鐘內完成。

成功 +60分
失敗 -20分`,ir(60,-20)],["Just dance",`玩家須在無音樂時跳出"APT"副歌舞蹈 或 freestyle 滿一分鐘即成功。

成功 +60分
失敗 -20分`,ir(60,-20)],["歌王大道",`玩家須唱出一首歌滿一分鐘即成功。

成功 +50分
失敗 -20分`,ir(50,-20)],["你畫我猜",`每位組員接力畫出題目，使猜題者猜，2分鐘內答對2題即成功。

成功 +50分
失敗 -20分`,ir(50,-20)],["屁屁超人",`玩家想出一句話，並依序用屁股寫出各個字，其餘玩家猜出即成功。

成功 +60分
失敗 -20分`,ir(60,-20)],["誰是老鼠屎",`玩家站成一排，利用頭或臉部把物品傳遞給下一個人，中途無掉落，2分鐘內完成即成功。

成功 +80分
失敗 -20分`,ir(80,-20)],["有你真好",`找一位工作人員 (不可重複) 拍照，1分鐘內完成。

成功 +60分
失敗 -40分`,ir(60,-40)]];function ir(e,t){return(r,n)=>{let i=1;n?(r.doubleTaskScore&&(r.doubleTaskScore--,i+=1),r.score+=e*i):r.score+=t}}const G_=Ns(I_());var ur=(e=>(e[e.Empty=0]="Empty",e[e.Spawner=1]="Spawner",e[e.Task=2]="Task",e[e.Opportunity=3]="Opportunity",e[e.Destiny=4]="Destiny",e[e.Punishment=5]="Punishment",e[e.Teleport=6]="Teleport",e[e.Prison=7]="Prison",e[e.Hospital=8]="Hospital",e))(ur||{});class ii{constructor(t,r){Pe(this,"width");Pe(this,"height");Pe(this,"tiles");Pe(this,"flatTiles");Pe(this,"teleports",[]);Pe(this,"spawners",[]);Pe(this,"prisons",[]);Pe(this,"hospitals",[]);Pe(this,"punishments",[]);this.spawnPointDirections=r,this.tiles=t,this.width=t[0].length,this.height=t.length,this.flatTiles=this.tiles.flat();for(const[n,i]of this.flatTiles.entries())switch(i){case 6:{this.teleports.push(this.indexFromFlat(n));break}case 1:{this.spawners.push(this.indexFromFlat(n));break}case 5:{this.punishments.push(this.indexFromFlat(n));break}case 7:{this.prisons.push(this.indexFromFlat(n));break}case 8:{this.hospitals.push(this.indexFromFlat(n));break}}}getTile(t,r){return this.flatTiles[r*this.width+t]}indexFromFlat(t){const r=t%this.width,n=Math.floor(t/this.width);return[r,n]}indexFromPosition(t){const[r,n]=t;return n*this.width+r}spawnPoints(){const t=this.spawners;if(this.spawnPointDirections.length!==t.length){console.group("Spawner count not match directions"),console.log(`Directions: ${t.length}`),console.log(`Spawn Points: ${this.spawnPointDirections.length}`),console.group("Spawners: ");for(const n of t){const i=Array.from(this.nextPosition(n).keys());console.log(`Spawner: ${n}, Accepts: ${i}`)}throw console.groupEnd(),console.groupEnd(),new Error("spawner count not match directions")}return this.spawnPointDirections.map((n,i)=>[t[i],n])}nextPosition(t,r){const n=new Map([[ht.UP,[0,-1]],[ht.RIGHT,[1,0]],[ht.DOWN,[0,1]],[ht.LEFT,[-1,0]]]),i={[ht.UP]:ht.DOWN,[ht.RIGHT]:ht.LEFT,[ht.DOWN]:ht.UP,[ht.LEFT]:ht.RIGHT}[r],a=new Map;for(const[o,f]of n.entries()){if(o===i)continue;const l=t[0]+f[0],m=t[1]+f[1];l<0||m<0||l>=this.width||m>=this.height||this.getTile(l,m)===0||a.set(o,f)}return a}static tileColor(t){return{0:"black",1:"green",2:"blue",3:"yellow",4:"orange",5:"red",6:"purple",7:"gray",8:"white"}[t]}static tileText(t){return{0:"空地",1:"出生點",2:"任務",3:"機會",4:"命運",5:"懲罰",6:"傳送門",7:"監獄",8:"醫院"}[t]}static tileImage(t){const r=Fn();if(t===0)return;const n="tile-"+{1:"spawner",2:"task",3:"opportunity",4:"destiny",5:"punishment",6:"teleport",7:"prison",8:"hospital"}[t];return r.getTexture(n)}static stringToTile(t){const r={空:0,出:1,任:2,機:3,命:4,懲:5,傳:6,監:7,醫:8}[t];if(r===void 0)throw new Error("Invalid tile");return r}}Pe(ii,"TILE_SIZE",64);const Dr=()=>k_,M_=`
出任機命懲出機任懲命出
懲空空空傳空懲空空空機
機空空空命空任空空空懲
命空空空懲空機空空空任
任懲命任機醫傳命任傳命
出空空空任空機空空空出
機傳懲機命監命懲機任命
任空空空懲空機空空空機
命空空空任空懲空空空懲
懲空空空機空傳空空空任
出機懲任命出懲機任命出
`.trim(),N_=[ht.RIGHT,ht.RIGHT,ht.DOWN,ht.UP,ht.DOWN,ht.UP,ht.LEFT,ht.LEFT],k_=new ii(M_.split(`
`).map(e=>e.split("").map(ii.stringToTile)),N_),B_=()=>[["暴風雪","全部人受到 1 點傷害。",e=>{const t=At();for(const r of t.players.values())r.damage(1)}],["掉錢包","遺失 25% 分數。(最高 100, 最低 20)",e=>{const t=Math.min(100,Math.max(20,Math.floor(e.score*.25)));e.score-=t}],["刑事拘留","傳送並關入監獄。",async e=>{const r=Dr().prisons;let n=1/0,i=r[0];for(const a of r){const o=e.position.x-a[0],f=e.position.y-a[1],l=o*o+f*f;l<n&&(n=l,i=a)}await e.teleport(i),await e.trigger(ur.Prison),await hr().wait(500)}],["大流感","全部玩家傳送至醫院，使所有人降低至3點血。",async e=>{const t=At(),n=Dr().hospitals,i=n[Math.floor(Math.random()*n.length)];for(const a of t.players.values())a.teleport(i),a.health=Math.min(3,a.health);await hr().wait(500)}],["海克斯科技","全部人互相傳送。",async e=>{const t=At(),r=Array.from(t.players.values()),n=r.map(i=>[i.position.x,i.position.y]);Es(n);for(const i in r){const a=r[i],o=n[i];a.teleport(o)}await hr().wait(500)}],["大聖人","向所有分享自己的金錢，但也分享給自己。",e=>{const t=At(),r=t.players.size,n=Math.floor(e.score/r);for(const i of t.players.values())e.score-=n,i.score+=n}],["監獄超收","全部玩家傳送到監獄。",async e=>{const t=At(),n=Dr().prisons,i=n[Math.floor(Math.random()*n.length)];for(const a of t.players.values())a.teleport(i),a.trigger(ur.Prison);await hr().wait(500)}],["最後的晚餐","全部人承受不足致命的傷害。(除非剩下1滴血)",e=>{const t=At();for(const r of t.players.values()){const n=Math.max(1,Math.floor(Math.random()*r.health));r.damage(n)}}],["雪球大戰","隨機攻擊玩家。",async e=>{const r=At().withoutPlayer(e),n=r[Math.floor(Math.random()*r.length)];await e.attack(n,!0)}],["平安夜","全部人回復至滿血。",e=>{const t=At();for(const r of t.players.values())r.health=Math.max(ai,r.health)}],["平安夜","全部人無敵一回合",e=>{const t=At();for(const r of t.players.values())r.immune++}],["聖誕狂歡曲","全部人下次移動時獲得雙倍骰子。",e=>{const t=At();for(const r of t.players.values())r.doubleDice++}],["北極探險","玩家前進到最近的懲罰格接受懲罰。",async e=>{const r=Dr().punishments;let n=r[0],i=1/0;for(const a of r){const o=Math.abs(e.position.x-a[0])+Math.abs(e.position.y-a[1]);o<i&&(i=o,n=a)}await e.teleport(n),await e.trigger(ur.Punishment)}],["金錢危機","須支付30%分數給其餘玩家。",e=>{const t=At(),r=e.score*.3,n=Math.floor(r/t.players.size);for(const i of t.players.values())i!==e&&(e.score-=n,i.score+=n)}],["扭轉命運","重抽一次命運事件。",e=>e.trigger(ur.Destiny)],["冰雹風暴","產生眩暈效果，暫停在原地一回合。",e=>{e.dizziness++}],["太空漫步","反轉方向。",e=>{e.reverseDirection()}],["這就是你的命","原地接受懲罰，捏鼻子模仿某個動物或角色的聲音一分鐘。",async e=>{}],["慢工出細活","下次移動時只能前進一格。",e=>{e.fixedDices.push(1)}],["木頭人","再次擲骰，但會被暈眩。",async e=>{const t=At();t.steps=await e.throwDice("再次擲骰"),e.doubleDice=Math.max(0,e.doubleDice-1),e.dizziness++}]],U_=Ns(B_()),$_=()=>[["致命節奏","重骰，繼續前進。",async e=>{const t=At();t.steps=await e.throwDice("繼續行動")}],["量子科技","與隨機一名玩家交換位置。",async e=>{const r=At().withoutPlayer(e),n=r[Math.floor(Math.random()*r.length)],i=n.position.clone();n.teleportPosition(e.position),await e.teleportPosition(i)}],["背刺","移動至分數最高(不含自己)一位玩家並攻擊他。",async e=>{const r=At().withoutPlayer(e),n=r.reduce((i,a)=>a.score>i.score?a:i,r[0]);await e.teleportPosition(n.position),await e.attack(n,!0)}],["共同富裕","與分數最高者，平分分數。(本身為最高時，與最低分者平分)",e=>{const r=At().withoutPlayer(e),n=r.reduce((f,l)=>l.score>f.score?l:f,r[0]),i=r.reduce((f,l)=>l.score<f.score?l:f,r[0]),a=e.score>=n.score?i:n,o=e.score+a.score;e.score=Math.floor(o/2),a.score=o-e.score}],["聖誕交換禮物","選擇一位玩家，接受懲罰。",async e=>{const t=At();(await hr().players.input("���擇一位玩家",t.withoutPlayer(e))).trigger(ur.Punishment)}],["聖誕交換禮物","選擇一位玩家，交換分數。",async e=>{const t=At(),r=await hr().players.input("選擇一位玩家",t.withoutPlayer(e)),n=e.score;e.score=r.score,r.score=n}],["聖誕禮物","獲得 30 分、回復一點生命值。",e=>{e.score+=30,e.health+=1}],["聖誕禮物","扣至1點生命值、獲得 60% 分數 (最高 300 分，最低 100 分)。",e=>{e.health=1;let t=Math.floor(e.score*.6);t=Math.max(100,Math.min(t,300)),e.score+=t}],["聖誕夜","除你以外所有人暈眩一回合。",e=>{At().withoutPlayer(e).forEach(n=>n.dizziness++)}],["重生而降","直接獲得 100 分。",e=>{e.score+=100}],["回家嚕","回到最近的起點。",async e=>{const r=Dr().spawners;let n=r[0],i=1/0;for(const a of r){const o=Math.abs(e.position.x-a[0])+Math.abs(e.position.y-a[1]);o<i&&(i=o,n=a)}await e.teleport(n),await e.trigger()}],["我直直撞","前進6步。",async e=>{const t=At();t.steps=6}],["滿血復活","回復至最大生命值。",e=>{e.health=ai}],["就想看你秀","抽到下一個任務時可指定其餘玩家完成。",e=>{}],["打不到我勒","免疫一回合攻擊。",e=>{e.immune++}],["Double星","下次移動時獲得雙倍骰子。",e=>{e.doubleDice++}],["Double星","下次任務獲得雙倍分數。",e=>{e.doubleTaskScore++}],["我要打鼠你","下一次攻擊時，扣兩倍血量。",e=>{e.doubleDamage++}]],V_=Ns($_()),j_=()=>[["我是青蛙","蹲下學青蛙跳，並發出呱呱呱的聲音。",e=>{}],["我是企鵝","模仿企鵝走路繞一圈。",e=>{}],["我是大猩猩","模仿大猩猩雙手捶胸跑一圈。",e=>{}],["我是雞王","模仿公雞雙手擺動繞一圈，並發出咕咕咕的聲音。",e=>{}],["臭腳ㄚ攻擊","聞自己的襪子30秒，並說真香。",e=>{}],["我最好看","絲襪套頭5秒。",e=>{}],["人體噴水秀","含水唱出兩隻老虎。",e=>{}],["人體彩繪","請下一組玩家在你的臉上畫畫。",e=>{}],["斗六火車讚","上傳自拍照到限時動態，@營建系學會並打上一句話。",e=>{}],["老香了","聞自己的胳肢窩，並說真香。",e=>{}],["要活就要動","棒式1分鐘。",e=>{}],["誰能比我騷","M字腿五次。",e=>{}],["乾淨乖寶寶","背對大家，一邊扭屁股擺動作一邊唱洗刷刷*n遍。",e=>{}]],H_=Ns(j_()),Gd=()=>z_,z_=Mn(new class{constructor(){Pe(this,"inner",new Map);Pe(this,"counter",0)}effect(t,r=1e3){const n=this.counter++;this.inner.set(n,t),setTimeout(()=>this.inner.delete(n),r)}sound(t){const n=Fn().getSound(t);if(!n)throw new Error("Sound not found");return n.currentTime=0,n.play(),n}check(t,r){return t===r.name}});var W_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function X_(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Md={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(W_,function(){var r=function(s){return s instanceof Uint8Array||s instanceof Uint16Array||s instanceof Uint32Array||s instanceof Int8Array||s instanceof Int16Array||s instanceof Int32Array||s instanceof Float32Array||s instanceof Float64Array||s instanceof Uint8ClampedArray},n=function(s,d){for(var y=Object.keys(d),G=0;G<y.length;++G)s[y[G]]=d[y[G]];return s},i=`
`;function a(s){return typeof atob<"u"?atob(s):"base64:"+s}function o(s){var d=new Error("(regl) "+s);throw console.error(d),d}function f(s,d){s||o(d)}function l(s){return s?": "+s:""}function m(s,d,y){s in d||o("unknown parameter ("+s+")"+l(y)+". possible values: "+Object.keys(d).join())}function g(s,d){r(s)||o("invalid parameter type"+l(d)+". must be a typed array")}function F(s,d){switch(d){case"number":return typeof s=="number";case"object":return typeof s=="object";case"string":return typeof s=="string";case"boolean":return typeof s=="boolean";case"function":return typeof s=="function";case"undefined":return typeof s>"u";case"symbol":return typeof s=="symbol"}}function V(s,d,y){F(s,d)||o("invalid parameter type"+l(y)+". expected "+d+", got "+typeof s)}function ne(s,d){s>=0&&(s|0)===s||o("invalid parameter type, ("+s+")"+l(d)+". must be a nonnegative integer")}function ge(s,d,y){d.indexOf(s)<0&&o("invalid value"+l(y)+". must be one of: "+d)}var ke=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function nt(s){Object.keys(s).forEach(function(d){ke.indexOf(d)<0&&o('invalid regl constructor argument "'+d+'". must be one of '+ke)})}function Me(s,d){for(s=s+"";s.length<d;)s=" "+s;return s}function Je(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function je(s,d){this.number=s,this.line=d,this.errors=[]}function xe(s,d,y){this.file=s,this.line=d,this.message=y}function Be(){var s=new Error,d=(s.stack||s).toString(),y=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(d);if(y)return y[1];var G=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(d);return G?G[1]:"unknown"}function We(){var s=new Error,d=(s.stack||s).toString(),y=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(d);if(y)return y[1];var G=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(d);return G?G[1]:"unknown"}function Ot(s,d){var y=s.split(`
`),G=1,U=0,I={unknown:new Je,0:new Je};I.unknown.name=I[0].name=d||Be(),I.unknown.lines.push(new je(0,""));for(var k=0;k<y.length;++k){var X=y[k],W=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(X);if(W)switch(W[1]){case"line":var Z=/(\d+)(\s+\d+)?/.exec(W[2]);Z&&(G=Z[1]|0,Z[2]&&(U=Z[2]|0,U in I||(I[U]=new Je)));break;case"define":var ee=/SHADER_NAME(_B64)?\s+(.*)$/.exec(W[2]);ee&&(I[U].name=ee[1]?a(ee[2]):ee[2]);break}I[U].lines.push(new je(G++,X))}return Object.keys(I).forEach(function(J){var oe=I[J];oe.lines.forEach(function(Y){oe.index[Y.number]=Y})}),I}function yt(s){var d=[];return s.split(`
`).forEach(function(y){if(!(y.length<5)){var G=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(y);G?d.push(new xe(G[1]|0,G[2]|0,G[3].trim())):y.length>0&&d.push(new xe("unknown",0,y))}}),d}function Ye(s,d){d.forEach(function(y){var G=s[y.file];if(G){var U=G.index[y.line];if(U){U.errors.push(y),G.hasErrors=!0;return}}s.unknown.hasErrors=!0,s.unknown.lines[0].errors.push(y)})}function ut(s,d,y,G,U){if(!s.getShaderParameter(d,s.COMPILE_STATUS)){var I=s.getShaderInfoLog(d),k=G===s.FRAGMENT_SHADER?"fragment":"vertex";Dt(y,"string",k+" shader source must be a string",U);var X=Ot(y,U),W=yt(I);Ye(X,W),Object.keys(X).forEach(function(Z){var ee=X[Z];if(!ee.hasErrors)return;var J=[""],oe=[""];function Y(Q,C){J.push(Q),oe.push(C||"")}Y("file number "+Z+": "+ee.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),ee.lines.forEach(function(Q){if(Q.errors.length>0){Y(Me(Q.number,4)+"|  ","background-color:yellow; font-weight:bold"),Y(Q.line+i,"color:red; background-color:yellow; font-weight:bold");var C=0;Q.errors.forEach(function(N){var q=N.message,ye=/^\s*'(.*)'\s*:\s*(.*)$/.exec(q);if(ye){var z=ye[1];switch(q=ye[2],z){case"assign":z="=";break}C=Math.max(Q.line.indexOf(z,C),0)}else C=0;Y(Me("| ",6)),Y(Me("^^^",C+3)+i,"font-weight:bold"),Y(Me("| ",6)),Y(q+i,"font-weight:bold")}),Y(Me("| ",6)+i)}else Y(Me(Q.number,4)+"|  "),Y(Q.line+i,"color:red")}),typeof document<"u"&&!window.chrome?(oe[0]=J.join("%c"),console.log.apply(console,oe)):console.log(J.join(""))}),f.raise("Error compiling "+k+" shader, "+X[0].name)}}function ft(s,d,y,G,U){if(!s.getProgramParameter(d,s.LINK_STATUS)){var I=s.getProgramInfoLog(d),k=Ot(y,U),X=Ot(G,U),W='Error linking program with vertex shader, "'+X[0].name+'", and fragment shader "'+k[0].name+'"';typeof document<"u"?console.log("%c"+W+i+"%c"+I,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(W+i+I),f.raise(W)}}function Ge(s){s._commandRef=Be()}function vt(s,d,y,G){Ge(s);function U(W){return W?G.id(W):0}s._fragId=U(s.static.frag),s._vertId=U(s.static.vert);function I(W,Z){Object.keys(Z).forEach(function(ee){W[G.id(ee)]=!0})}var k=s._uniformSet={};I(k,d.static),I(k,d.dynamic);var X=s._attributeSet={};I(X,y.static),I(X,y.dynamic),s._hasCount="count"in s.static||"count"in s.dynamic||"elements"in s.static||"elements"in s.dynamic}function lt(s,d){var y=We();o(s+" in command "+(d||Be())+(y==="unknown"?"":" called from "+y))}function kr(s,d,y){s||lt(d,y||Be())}function Yt(s,d,y,G){s in d||lt("unknown parameter ("+s+")"+l(y)+". possible values: "+Object.keys(d).join(),G||Be())}function Dt(s,d,y,G){F(s,d)||lt("invalid parameter type"+l(y)+". expected "+d+", got "+typeof s,G||Be())}function Ct(s){s()}function rn(s,d,y){s.texture?ge(s.texture._texture.internalformat,d,"unsupported texture format for attachment"):ge(s.renderbuffer._renderbuffer.format,y,"unsupported renderbuffer format for attachment")}var nn=33071,Hr=9728,Fr=9984,Ea=9985,Us=9986,$s=9987,kn=5120,li=5121,Gi=5122,Ta=5123,Bn=5124,Aa=5125,Mi=5126,A=32819,R=32820,H=33635,le=34042,ie=36193,te={};te[kn]=te[li]=1,te[Gi]=te[Ta]=te[ie]=te[H]=te[A]=te[R]=2,te[Bn]=te[Aa]=te[Mi]=te[le]=4;function De(s,d){return s===R||s===A||s===H?2:s===le?4:te[s]*d}function Te(s){return!(s&s-1)&&!!s}function Se(s,d,y){var G,U=d.width,I=d.height,k=d.channels;f(U>0&&U<=y.maxTextureSize&&I>0&&I<=y.maxTextureSize,"invalid texture shape"),(s.wrapS!==nn||s.wrapT!==nn)&&f(Te(U)&&Te(I),"incompatible wrap mode for texture, both width and height must be power of 2"),d.mipmask===1?U!==1&&I!==1&&f(s.minFilter!==Fr&&s.minFilter!==Us&&s.minFilter!==Ea&&s.minFilter!==$s,"min filter requires mipmap"):(f(Te(U)&&Te(I),"texture must be a square power of 2 to support mipmapping"),f(d.mipmask===(U<<1)-1,"missing or incomplete mipmap data")),d.type===Mi&&(y.extensions.indexOf("oes_texture_float_linear")<0&&f(s.minFilter===Hr&&s.magFilter===Hr,"filter not supported, must enable oes_texture_float_linear"),f(!s.genMipmaps,"mipmap generation not supported with float textures"));var X=d.images;for(G=0;G<16;++G)if(X[G]){var W=U>>G,Z=I>>G;f(d.mipmask&1<<G,"missing mipmap data");var ee=X[G];if(f(ee.width===W&&ee.height===Z,"invalid shape for mip images"),f(ee.format===d.format&&ee.internalformat===d.internalformat&&ee.type===d.type,"incompatible type for mip image"),!ee.compressed)if(ee.data){var J=Math.ceil(De(ee.type,k)*W/ee.unpackAlignment)*ee.unpackAlignment;f(ee.data.byteLength===J*Z,"invalid data for image, buffer size is inconsistent with image format")}else ee.element||ee.copy}else s.genMipmaps||f((d.mipmask&1<<G)===0,"extra mipmap data");d.compressed&&f(!s.genMipmaps,"mipmap generation for compressed images not supported")}function ce(s,d,y,G){var U=s.width,I=s.height,k=s.channels;f(U>0&&U<=G.maxTextureSize&&I>0&&I<=G.maxTextureSize,"invalid texture shape"),f(U===I,"cube map must be square"),f(d.wrapS===nn&&d.wrapT===nn,"wrap mode not supported by cube map");for(var X=0;X<y.length;++X){var W=y[X];f(W.width===U&&W.height===I,"inconsistent cube map face shape"),d.genMipmaps&&(f(!W.compressed,"can not generate mipmap for compressed textures"),f(W.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Z=W.images,ee=0;ee<16;++ee){var J=Z[ee];if(J){var oe=U>>ee,Y=I>>ee;f(W.mipmask&1<<ee,"missing mipmap data"),f(J.width===oe&&J.height===Y,"invalid shape for mip images"),f(J.format===s.format&&J.internalformat===s.internalformat&&J.type===s.type,"incompatible type for mip image"),J.compressed||(J.data?f(J.data.byteLength===oe*Y*Math.max(De(J.type,k),J.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):J.element||J.copy)}}}}var u=n(f,{optional:Ct,raise:o,commandRaise:lt,command:kr,parameter:m,commandParameter:Yt,constructor:nt,type:V,commandType:Dt,isTypedArray:g,nni:ne,oneOf:ge,shaderError:ut,linkError:ft,callSite:We,saveCommandRef:Ge,saveDrawInfo:vt,framebufferFormat:rn,guessCommand:Be,texture2D:Se,textureCube:ce}),Ie=0,ze=0,et=5,pt=6;function bt(s,d){this.id=Ie++,this.type=s,this.data=d}function xt(s){return s.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function qt(s){if(s.length===0)return[];var d=s.charAt(0),y=s.charAt(s.length-1);if(s.length>1&&d===y&&(d==='"'||d==="'"))return['"'+xt(s.substr(1,s.length-2))+'"'];var G=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(s);if(G)return qt(s.substr(0,G.index)).concat(qt(G[1])).concat(qt(s.substr(G.index+G[0].length)));var U=s.split(".");if(U.length===1)return['"'+xt(s)+'"'];for(var I=[],k=0;k<U.length;++k)I=I.concat(qt(U[k]));return I}function Qt(s){return"["+qt(s).join("][")+"]"}function Er(s,d){return new bt(s,Qt(d+""))}function vr(s){return typeof s=="function"&&!s._reglType||s instanceof bt}function gn(s,d){if(typeof s=="function")return new bt(ze,s);if(typeof s=="number"||typeof s=="boolean")return new bt(et,s);if(Array.isArray(s))return new bt(pt,s.map(function(y,G){return gn(y,d+"["+G+"]")}));if(s instanceof bt)return s;u(!1,"invalid option type in uniform "+d)}var fr={DynamicVariable:bt,define:Er,isDynamic:vr,unbox:gn,accessor:Qt},ar={next:typeof requestAnimationFrame=="function"?function(s){return requestAnimationFrame(s)}:function(s){return setTimeout(s,16)},cancel:typeof cancelAnimationFrame=="function"?function(s){return cancelAnimationFrame(s)}:clearTimeout},Tr=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function wa(){var s={"":0},d=[""];return{id:function(y){var G=s[y];return G||(G=s[y]=d.length,d.push(y),G)},str:function(y){return d[y]}}}function Hd(s,d,y){var G=document.createElement("canvas");n(G.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),s.appendChild(G),s===document.body&&(G.style.position="absolute",n(s.style,{margin:0,padding:0}));function U(){var X=window.innerWidth,W=window.innerHeight;if(s!==document.body){var Z=G.getBoundingClientRect();X=Z.right-Z.left,W=Z.bottom-Z.top}G.width=y*X,G.height=y*W}var I;s!==document.body&&typeof ResizeObserver=="function"?(I=new ResizeObserver(function(){setTimeout(U)}),I.observe(s)):window.addEventListener("resize",U,!1);function k(){I?I.disconnect():window.removeEventListener("resize",U),s.removeChild(G)}return U(),{canvas:G,onDestroy:k}}function zd(s,d){function y(G){try{return s.getContext(G,d)}catch{return null}}return y("webgl")||y("experimental-webgl")||y("webgl-experimental")}function Wd(s){return typeof s.nodeName=="string"&&typeof s.appendChild=="function"&&typeof s.getBoundingClientRect=="function"}function Xd(s){return typeof s.drawArrays=="function"||typeof s.drawElements=="function"}function If(s){return typeof s=="string"?s.split():(u(Array.isArray(s),"invalid extension array"),s)}function Gf(s){return typeof s=="string"?(u(typeof document<"u","not supported outside of DOM"),document.querySelector(s)):s}function Yd(s){var d=s||{},y,G,U,I,k={},X=[],W=[],Z=typeof window>"u"?1:window.devicePixelRatio,ee=!1,J=function(Q){Q&&u.raise(Q)},oe=function(){};if(typeof d=="string"?(u(typeof document<"u","selector queries only supported in DOM environments"),y=document.querySelector(d),u(y,"invalid query string for element")):typeof d=="object"?Wd(d)?y=d:Xd(d)?(I=d,U=I.canvas):(u.constructor(d),"gl"in d?I=d.gl:"canvas"in d?U=Gf(d.canvas):"container"in d&&(G=Gf(d.container)),"attributes"in d&&(k=d.attributes,u.type(k,"object","invalid context attributes")),"extensions"in d&&(X=If(d.extensions)),"optionalExtensions"in d&&(W=If(d.optionalExtensions)),"onDone"in d&&(u.type(d.onDone,"function","invalid or missing onDone callback"),J=d.onDone),"profile"in d&&(ee=!!d.profile),"pixelRatio"in d&&(Z=+d.pixelRatio,u(Z>0,"invalid pixel ratio"))):u.raise("invalid arguments to regl"),y&&(y.nodeName.toLowerCase()==="canvas"?U=y:G=y),!I){if(!U){u(typeof document<"u","must manually specify webgl context outside of DOM environments");var Y=Hd(G||document.body,J,Z);if(!Y)return null;U=Y.canvas,oe=Y.onDestroy}k.premultipliedAlpha===void 0&&(k.premultipliedAlpha=!0),I=zd(U,k)}return I?{gl:I,canvas:U,container:G,extensions:X,optionalExtensions:W,pixelRatio:Z,profile:ee,onDone:J,onDestroy:oe}:(oe(),J("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Kd(s,d){var y={};function G(k){u.type(k,"string","extension name must be string");var X=k.toLowerCase(),W;try{W=y[X]=s.getExtension(X)}catch{}return!!W}for(var U=0;U<d.extensions.length;++U){var I=d.extensions[U];if(!G(I))return d.onDestroy(),d.onDone('"'+I+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return d.optionalExtensions.forEach(G),{extensions:y,restore:function(){Object.keys(y).forEach(function(k){if(y[k]&&!G(k))throw new Error("(regl): error restoring extension "+k)})}}}function Ar(s,d){for(var y=Array(s),G=0;G<s;++G)y[G]=d(G);return y}var qd=5120,Qd=5121,Zd=5122,Jd=5123,eh=5124,th=5125,rh=5126;function nh(s){for(var d=16;d<=1<<28;d*=16)if(s<=d)return d;return 0}function Mf(s){var d,y;return d=(s>65535)<<4,s>>>=d,y=(s>255)<<3,s>>>=y,d|=y,y=(s>15)<<2,s>>>=y,d|=y,y=(s>3)<<1,s>>>=y,d|=y,d|s>>1}function Nf(){var s=Ar(8,function(){return[]});function d(I){var k=nh(I),X=s[Mf(k)>>2];return X.length>0?X.pop():new ArrayBuffer(k)}function y(I){s[Mf(I.byteLength)>>2].push(I)}function G(I,k){var X=null;switch(I){case qd:X=new Int8Array(d(k),0,k);break;case Qd:X=new Uint8Array(d(k),0,k);break;case Zd:X=new Int16Array(d(2*k),0,k);break;case Jd:X=new Uint16Array(d(2*k),0,k);break;case eh:X=new Int32Array(d(4*k),0,k);break;case th:X=new Uint32Array(d(4*k),0,k);break;case rh:X=new Float32Array(d(4*k),0,k);break;default:return null}return X.length!==k?X.subarray(0,k):X}function U(I){y(I.buffer)}return{alloc:d,free:y,allocType:G,freeType:U}}var Bt=Nf();Bt.zero=Nf();var ih=3408,ah=3410,sh=3411,oh=3412,fh=3413,lh=3414,uh=3415,ch=33901,dh=33902,hh=3379,ph=3386,mh=34921,vh=36347,_h=36348,gh=35661,yh=35660,bh=34930,xh=36349,Eh=34076,Th=34024,Ah=7936,wh=7937,Sh=7938,Ch=35724,Lh=34047,Rh=36063,Oh=34852,Sa=3553,kf=34067,Ph=34069,Dh=33984,Ni=6408,Vs=5126,Bf=5121,js=36160,Fh=36053,Ih=36064,Gh=16384,Mh=function(s,d){var y=1;d.ext_texture_filter_anisotropic&&(y=s.getParameter(Lh));var G=1,U=1;d.webgl_draw_buffers&&(G=s.getParameter(Oh),U=s.getParameter(Rh));var I=!!d.oes_texture_float;if(I){var k=s.createTexture();s.bindTexture(Sa,k),s.texImage2D(Sa,0,Ni,1,1,0,Ni,Vs,null);var X=s.createFramebuffer();if(s.bindFramebuffer(js,X),s.framebufferTexture2D(js,Ih,Sa,k,0),s.bindTexture(Sa,null),s.checkFramebufferStatus(js)!==Fh)I=!1;else{s.viewport(0,0,1,1),s.clearColor(1,0,0,1),s.clear(Gh);var W=Bt.allocType(Vs,4);s.readPixels(0,0,1,1,Ni,Vs,W),s.getError()?I=!1:(s.deleteFramebuffer(X),s.deleteTexture(k),I=W[0]===1),Bt.freeType(W)}}var Z=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),ee=!0;if(!Z){var J=s.createTexture(),oe=Bt.allocType(Bf,36);s.activeTexture(Dh),s.bindTexture(kf,J),s.texImage2D(Ph,0,Ni,3,3,0,Ni,Bf,oe),Bt.freeType(oe),s.bindTexture(kf,null),s.deleteTexture(J),ee=!s.getError()}return{colorBits:[s.getParameter(ah),s.getParameter(sh),s.getParameter(oh),s.getParameter(fh)],depthBits:s.getParameter(lh),stencilBits:s.getParameter(uh),subpixelBits:s.getParameter(ih),extensions:Object.keys(d).filter(function(Y){return!!d[Y]}),maxAnisotropic:y,maxDrawbuffers:G,maxColorAttachments:U,pointSizeDims:s.getParameter(ch),lineWidthDims:s.getParameter(dh),maxViewportDims:s.getParameter(ph),maxCombinedTextureUnits:s.getParameter(gh),maxCubeMapSize:s.getParameter(Eh),maxRenderbufferSize:s.getParameter(Th),maxTextureUnits:s.getParameter(bh),maxTextureSize:s.getParameter(hh),maxAttributes:s.getParameter(mh),maxVertexUniforms:s.getParameter(vh),maxVertexTextureUnits:s.getParameter(yh),maxVaryingVectors:s.getParameter(_h),maxFragmentUniforms:s.getParameter(xh),glsl:s.getParameter(Ch),renderer:s.getParameter(wh),vendor:s.getParameter(Ah),version:s.getParameter(Sh),readFloat:I,npotTextureCube:ee}};function Br(s){return!!s&&typeof s=="object"&&Array.isArray(s.shape)&&Array.isArray(s.stride)&&typeof s.offset=="number"&&s.shape.length===s.stride.length&&(Array.isArray(s.data)||r(s.data))}var wr=function(s){return Object.keys(s).map(function(d){return s[d]})},Ca={shape:Uh,flatten:Bh};function Nh(s,d,y){for(var G=0;G<d;++G)y[G]=s[G]}function kh(s,d,y,G){for(var U=0,I=0;I<d;++I)for(var k=s[I],X=0;X<y;++X)G[U++]=k[X]}function Uf(s,d,y,G,U,I){for(var k=I,X=0;X<d;++X)for(var W=s[X],Z=0;Z<y;++Z)for(var ee=W[Z],J=0;J<G;++J)U[k++]=ee[J]}function $f(s,d,y,G,U){for(var I=1,k=y+1;k<d.length;++k)I*=d[k];var X=d[y];if(d.length-y===4){var W=d[y+1],Z=d[y+2],ee=d[y+3];for(k=0;k<X;++k)Uf(s[k],W,Z,ee,G,U),U+=I}else for(k=0;k<X;++k)$f(s[k],d,y+1,G,U),U+=I}function Bh(s,d,y,G){var U=1;if(d.length)for(var I=0;I<d.length;++I)U*=d[I];else U=0;var k=G||Bt.allocType(y,U);switch(d.length){case 0:break;case 1:Nh(s,d[0],k);break;case 2:kh(s,d[0],d[1],k);break;case 3:Uf(s,d[0],d[1],d[2],k,0);break;default:$f(s,d,0,k,0)}return k}function Uh(s){for(var d=[],y=s;y.length;y=y[0])d.push(y.length);return d}var Hs={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},$h=5120,Vh=5122,jh=5124,Hh=5121,zh=5123,Wh=5125,Xh=5126,Yh=5126,Un={int8:$h,int16:Vh,int32:jh,uint8:Hh,uint16:zh,uint32:Wh,float:Xh,float32:Yh},Kh=35048,qh=35040,La={dynamic:Kh,stream:qh,static:35044},zs=Ca.flatten,Vf=Ca.shape,jf=35044,Qh=35040,Ws=5121,Xs=5126,yn=[];yn[5120]=1,yn[5122]=2,yn[5124]=4,yn[5121]=1,yn[5123]=2,yn[5125]=4,yn[5126]=4;function Ra(s){return Hs[Object.prototype.toString.call(s)]|0}function Hf(s,d){for(var y=0;y<d.length;++y)s[y]=d[y]}function zf(s,d,y,G,U,I,k){for(var X=0,W=0;W<y;++W)for(var Z=0;Z<G;++Z)s[X++]=d[U*W+I*Z+k]}function Zh(s,d,y,G){var U=0,I={};function k(C){this.id=U++,this.buffer=s.createBuffer(),this.type=C,this.usage=jf,this.byteLength=0,this.dimension=1,this.dtype=Ws,this.persistentData=null,y.profile&&(this.stats={size:0})}k.prototype.bind=function(){s.bindBuffer(this.type,this.buffer)},k.prototype.destroy=function(){oe(this)};var X=[];function W(C,N){var q=X.pop();return q||(q=new k(C)),q.bind(),J(q,N,Qh,0,1,!1),q}function Z(C){X.push(C)}function ee(C,N,q){C.byteLength=N.byteLength,s.bufferData(C.type,N,q)}function J(C,N,q,ye,z,ve){var he;if(C.usage=q,Array.isArray(N)){if(C.dtype=ye||Xs,N.length>0){var Ne;if(Array.isArray(N[0])){he=Vf(N);for(var $=1,B=1;B<he.length;++B)$*=he[B];C.dimension=$,Ne=zs(N,he,C.dtype),ee(C,Ne,q),ve?C.persistentData=Ne:Bt.freeType(Ne)}else if(typeof N[0]=="number"){C.dimension=z;var Ae=Bt.allocType(C.dtype,N.length);Hf(Ae,N),ee(C,Ae,q),ve?C.persistentData=Ae:Bt.freeType(Ae)}else r(N[0])?(C.dimension=N[0].length,C.dtype=ye||Ra(N[0])||Xs,Ne=zs(N,[N.length,N[0].length],C.dtype),ee(C,Ne,q),ve?C.persistentData=Ne:Bt.freeType(Ne)):u.raise("invalid buffer data")}}else if(r(N))C.dtype=ye||Ra(N),C.dimension=z,ee(C,N,q),ve&&(C.persistentData=new Uint8Array(new Uint8Array(N.buffer)));else if(Br(N)){he=N.shape;var fe=N.stride,K=N.offset,ue=0,de=0,Ke=0,He=0;he.length===1?(ue=he[0],de=1,Ke=fe[0],He=0):he.length===2?(ue=he[0],de=he[1],Ke=fe[0],He=fe[1]):u.raise("invalid shape"),C.dtype=ye||Ra(N.data)||Xs,C.dimension=de;var pe=Bt.allocType(C.dtype,ue*de);zf(pe,N.data,ue,de,Ke,He,K),ee(C,pe,q),ve?C.persistentData=pe:Bt.freeType(pe)}else N instanceof ArrayBuffer?(C.dtype=Ws,C.dimension=z,ee(C,N,q),ve&&(C.persistentData=new Uint8Array(new Uint8Array(N)))):u.raise("invalid buffer data")}function oe(C){d.bufferCount--,G(C);var N=C.buffer;u(N,"buffer must not be deleted already"),s.deleteBuffer(N),C.buffer=null,delete I[C.id]}function Y(C,N,q,ye){d.bufferCount++;var z=new k(N);I[z.id]=z;function ve($){var B=jf,Ae=null,fe=0,K=0,ue=1;return Array.isArray($)||r($)||Br($)||$ instanceof ArrayBuffer?Ae=$:typeof $=="number"?fe=$|0:$&&(u.type($,"object","buffer arguments must be an object, a number or an array"),"data"in $&&(u(Ae===null||Array.isArray(Ae)||r(Ae)||Br(Ae),"invalid data for buffer"),Ae=$.data),"usage"in $&&(u.parameter($.usage,La,"invalid buffer usage"),B=La[$.usage]),"type"in $&&(u.parameter($.type,Un,"invalid buffer type"),K=Un[$.type]),"dimension"in $&&(u.type($.dimension,"number","invalid dimension"),ue=$.dimension|0),"length"in $&&(u.nni(fe,"buffer length must be a nonnegative integer"),fe=$.length|0)),z.bind(),Ae?J(z,Ae,B,K,ue,ye):(fe&&s.bufferData(z.type,fe,B),z.dtype=K||Ws,z.usage=B,z.dimension=ue,z.byteLength=fe),y.profile&&(z.stats.size=z.byteLength*yn[z.dtype]),ve}function he($,B){u(B+$.byteLength<=z.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+$.byteLength+" starting from offset "+B+" to a buffer of size "+z.byteLength),s.bufferSubData(z.type,B,$)}function Ne($,B){var Ae=(B||0)|0,fe;if(z.bind(),r($)||$ instanceof ArrayBuffer)he($,Ae);else if(Array.isArray($)){if($.length>0)if(typeof $[0]=="number"){var K=Bt.allocType(z.dtype,$.length);Hf(K,$),he(K,Ae),Bt.freeType(K)}else if(Array.isArray($[0])||r($[0])){fe=Vf($);var ue=zs($,fe,z.dtype);he(ue,Ae),Bt.freeType(ue)}else u.raise("invalid buffer data")}else if(Br($)){fe=$.shape;var de=$.stride,Ke=0,He=0,pe=0,_e=0;fe.length===1?(Ke=fe[0],He=1,pe=de[0],_e=0):fe.length===2?(Ke=fe[0],He=fe[1],pe=de[0],_e=de[1]):u.raise("invalid shape");var $e=Array.isArray($.data)?z.dtype:Ra($.data),Xe=Bt.allocType($e,Ke*He);zf(Xe,$.data,Ke,He,pe,_e,$.offset),he(Xe,Ae),Bt.freeType(Xe)}else u.raise("invalid data for buffer subdata");return ve}return q||ve(C),ve._reglType="buffer",ve._buffer=z,ve.subdata=Ne,y.profile&&(ve.stats=z.stats),ve.destroy=function(){oe(z)},ve}function Q(){wr(I).forEach(function(C){C.buffer=s.createBuffer(),s.bindBuffer(C.type,C.buffer),s.bufferData(C.type,C.persistentData||C.byteLength,C.usage)})}return y.profile&&(d.getTotalBufferSize=function(){var C=0;return Object.keys(I).forEach(function(N){C+=I[N].stats.size}),C}),{create:Y,createStream:W,destroyStream:Z,clear:function(){wr(I).forEach(oe),X.forEach(oe)},getBuffer:function(C){return C&&C._buffer instanceof k?C._buffer:null},restore:Q,_initBuffer:J}}var Jh=0,ep=0,tp=1,rp=1,np=4,ip=4,bn={points:Jh,point:ep,lines:tp,line:rp,triangles:np,triangle:ip,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},ap=0,sp=1,ki=4,op=5120,ui=5121,Wf=5122,ci=5123,Xf=5124,$n=5125,Ys=34963,fp=35040,lp=35044;function up(s,d,y,G){var U={},I=0,k={uint8:ui,uint16:ci};d.oes_element_index_uint&&(k.uint32=$n);function X(Q){this.id=I++,U[this.id]=this,this.buffer=Q,this.primType=ki,this.vertCount=0,this.type=0}X.prototype.bind=function(){this.buffer.bind()};var W=[];function Z(Q){var C=W.pop();return C||(C=new X(y.create(null,Ys,!0,!1)._buffer)),J(C,Q,fp,-1,-1,0,0),C}function ee(Q){W.push(Q)}function J(Q,C,N,q,ye,z,ve){Q.buffer.bind();var he;if(C){var Ne=ve;!ve&&(!r(C)||Br(C)&&!r(C.data))&&(Ne=d.oes_element_index_uint?$n:ci),y._initBuffer(Q.buffer,C,N,Ne,3)}else s.bufferData(Ys,z,N),Q.buffer.dtype=he||ui,Q.buffer.usage=N,Q.buffer.dimension=3,Q.buffer.byteLength=z;if(he=ve,!ve){switch(Q.buffer.dtype){case ui:case op:he=ui;break;case ci:case Wf:he=ci;break;case $n:case Xf:he=$n;break;default:u.raise("unsupported type for element array")}Q.buffer.dtype=he}Q.type=he,u(he!==$n||!!d.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var $=ye;$<0&&($=Q.buffer.byteLength,he===ci?$>>=1:he===$n&&($>>=2)),Q.vertCount=$;var B=q;if(q<0){B=ki;var Ae=Q.buffer.dimension;Ae===1&&(B=ap),Ae===2&&(B=sp),Ae===3&&(B=ki)}Q.primType=B}function oe(Q){G.elementsCount--,u(Q.buffer!==null,"must not double destroy elements"),delete U[Q.id],Q.buffer.destroy(),Q.buffer=null}function Y(Q,C){var N=y.create(null,Ys,!0),q=new X(N._buffer);G.elementsCount++;function ye(z){if(!z)N(),q.primType=ki,q.vertCount=0,q.type=ui;else if(typeof z=="number")N(z),q.primType=ki,q.vertCount=z|0,q.type=ui;else{var ve=null,he=lp,Ne=-1,$=-1,B=0,Ae=0;Array.isArray(z)||r(z)||Br(z)?ve=z:(u.type(z,"object","invalid arguments for elements"),"data"in z&&(ve=z.data,u(Array.isArray(ve)||r(ve)||Br(ve),"invalid data for element buffer")),"usage"in z&&(u.parameter(z.usage,La,"invalid element buffer usage"),he=La[z.usage]),"primitive"in z&&(u.parameter(z.primitive,bn,"invalid element buffer primitive"),Ne=bn[z.primitive]),"count"in z&&(u(typeof z.count=="number"&&z.count>=0,"invalid vertex count for elements"),$=z.count|0),"type"in z&&(u.parameter(z.type,k,"invalid buffer type"),Ae=k[z.type]),"length"in z?B=z.length|0:(B=$,Ae===ci||Ae===Wf?B*=2:(Ae===$n||Ae===Xf)&&(B*=4))),J(q,ve,he,Ne,$,B,Ae)}return ye}return ye(Q),ye._reglType="elements",ye._elements=q,ye.subdata=function(z,ve){return N.subdata(z,ve),ye},ye.destroy=function(){oe(q)},ye}return{create:Y,createStream:Z,destroyStream:ee,getElements:function(Q){return typeof Q=="function"&&Q._elements instanceof X?Q._elements:null},clear:function(){wr(U).forEach(oe)}}}var Yf=new Float32Array(1),cp=new Uint32Array(Yf.buffer),dp=5123;function Kf(s){for(var d=Bt.allocType(dp,s.length),y=0;y<s.length;++y)if(isNaN(s[y]))d[y]=65535;else if(s[y]===1/0)d[y]=31744;else if(s[y]===-1/0)d[y]=64512;else{Yf[0]=s[y];var G=cp[0],U=G>>>31<<15,I=(G<<1>>>24)-127,k=G>>13&1023;if(I<-24)d[y]=U;else if(I<-14){var X=-14-I;d[y]=U+(k+1024>>X)}else I>15?d[y]=U+31744:d[y]=U+(I+15<<10)+k}return d}function Mt(s){return Array.isArray(s)||r(s)}var qf=function(s){return!(s&s-1)&&!!s},hp=34467,zr=3553,Ks=34067,Oa=34069,Vn=6408,qs=6406,Pa=6407,Bi=6409,Da=6410,Qf=32854,Qs=32855,Zf=36194,pp=32819,mp=32820,vp=33635,_p=34042,Zs=6402,Fa=34041,Js=35904,eo=35906,di=36193,to=33776,ro=33777,no=33778,io=33779,Jf=35986,el=35987,tl=34798,rl=35840,nl=35841,il=35842,al=35843,sl=36196,hi=5121,ao=5123,so=5125,Ui=5126,gp=10242,yp=10243,bp=10497,oo=33071,xp=33648,Ep=10240,Tp=10241,fo=9728,Ap=9729,lo=9984,ol=9985,fl=9986,uo=9987,wp=33170,Ia=4352,Sp=4353,Cp=4354,Lp=34046,Rp=3317,Op=37440,Pp=37441,Dp=37443,ll=37444,$i=33984,Fp=[lo,fl,ol,uo],Ga=[0,Bi,Da,Pa,Vn],Ir={};Ir[Bi]=Ir[qs]=Ir[Zs]=1,Ir[Fa]=Ir[Da]=2,Ir[Pa]=Ir[Js]=3,Ir[Vn]=Ir[eo]=4;function pi(s){return"[object "+s+"]"}var ul=pi("HTMLCanvasElement"),cl=pi("OffscreenCanvas"),dl=pi("CanvasRenderingContext2D"),hl=pi("ImageBitmap"),pl=pi("HTMLImageElement"),ml=pi("HTMLVideoElement"),Ip=Object.keys(Hs).concat([ul,cl,dl,hl,pl,ml]),mi=[];mi[hi]=1,mi[Ui]=4,mi[di]=2,mi[ao]=2,mi[so]=4;var tr=[];tr[Qf]=2,tr[Qs]=2,tr[Zf]=2,tr[Fa]=4,tr[to]=.5,tr[ro]=.5,tr[no]=1,tr[io]=1,tr[Jf]=.5,tr[el]=1,tr[tl]=1,tr[rl]=.5,tr[nl]=.25,tr[il]=.5,tr[al]=.25,tr[sl]=.5;function vl(s){return Array.isArray(s)&&(s.length===0||typeof s[0]=="number")}function _l(s){if(!Array.isArray(s))return!1;var d=s.length;return!(d===0||!Mt(s[0]))}function jn(s){return Object.prototype.toString.call(s)}function gl(s){return jn(s)===ul}function yl(s){return jn(s)===cl}function Gp(s){return jn(s)===dl}function Mp(s){return jn(s)===hl}function Np(s){return jn(s)===pl}function kp(s){return jn(s)===ml}function co(s){if(!s)return!1;var d=jn(s);return Ip.indexOf(d)>=0?!0:vl(s)||_l(s)||Br(s)}function bl(s){return Hs[Object.prototype.toString.call(s)]|0}function Bp(s,d){var y=d.length;switch(s.type){case hi:case ao:case so:case Ui:var G=Bt.allocType(s.type,y);G.set(d),s.data=G;break;case di:s.data=Kf(d);break;default:u.raise("unsupported texture type, must specify a typed array")}}function xl(s,d){return Bt.allocType(s.type===di?Ui:s.type,d)}function El(s,d){s.type===di?(s.data=Kf(d),Bt.freeType(d)):s.data=d}function Up(s,d,y,G,U,I){for(var k=s.width,X=s.height,W=s.channels,Z=k*X*W,ee=xl(s,Z),J=0,oe=0;oe<X;++oe)for(var Y=0;Y<k;++Y)for(var Q=0;Q<W;++Q)ee[J++]=d[y*Y+G*oe+U*Q+I];El(s,ee)}function Ma(s,d,y,G,U,I){var k;if(typeof tr[s]<"u"?k=tr[s]:k=Ir[s]*mi[d],I&&(k*=6),U){for(var X=0,W=y;W>=1;)X+=k*W*W,W/=2;return X}else return k*y*G}function $p(s,d,y,G,U,I,k){var X={"don't care":Ia,"dont care":Ia,nice:Cp,fast:Sp},W={repeat:bp,clamp:oo,mirror:xp},Z={nearest:fo,linear:Ap},ee=n({mipmap:uo,"nearest mipmap nearest":lo,"linear mipmap nearest":ol,"nearest mipmap linear":fl,"linear mipmap linear":uo},Z),J={none:0,browser:ll},oe={uint8:hi,rgba4:pp,rgb565:vp,"rgb5 a1":mp},Y={alpha:qs,luminance:Bi,"luminance alpha":Da,rgb:Pa,rgba:Vn,rgba4:Qf,"rgb5 a1":Qs,rgb565:Zf},Q={};d.ext_srgb&&(Y.srgb=Js,Y.srgba=eo),d.oes_texture_float&&(oe.float32=oe.float=Ui),d.oes_texture_half_float&&(oe.float16=oe["half float"]=di),d.webgl_depth_texture&&(n(Y,{depth:Zs,"depth stencil":Fa}),n(oe,{uint16:ao,uint32:so,"depth stencil":_p})),d.webgl_compressed_texture_s3tc&&n(Q,{"rgb s3tc dxt1":to,"rgba s3tc dxt1":ro,"rgba s3tc dxt3":no,"rgba s3tc dxt5":io}),d.webgl_compressed_texture_atc&&n(Q,{"rgb atc":Jf,"rgba atc explicit alpha":el,"rgba atc interpolated alpha":tl}),d.webgl_compressed_texture_pvrtc&&n(Q,{"rgb pvrtc 4bppv1":rl,"rgb pvrtc 2bppv1":nl,"rgba pvrtc 4bppv1":il,"rgba pvrtc 2bppv1":al}),d.webgl_compressed_texture_etc1&&(Q["rgb etc1"]=sl);var C=Array.prototype.slice.call(s.getParameter(hp));Object.keys(Q).forEach(function(_){var M=Q[_];C.indexOf(M)>=0&&(Y[_]=M)});var N=Object.keys(Y);y.textureFormats=N;var q=[];Object.keys(Y).forEach(function(_){var M=Y[_];q[M]=_});var ye=[];Object.keys(oe).forEach(function(_){var M=oe[_];ye[M]=_});var z=[];Object.keys(Z).forEach(function(_){var M=Z[_];z[M]=_});var ve=[];Object.keys(ee).forEach(function(_){var M=ee[_];ve[M]=_});var he=[];Object.keys(W).forEach(function(_){var M=W[_];he[M]=_});var Ne=N.reduce(function(_,M){var D=Y[M];return D===Bi||D===qs||D===Bi||D===Da||D===Zs||D===Fa||d.ext_srgb&&(D===Js||D===eo)?_[D]=D:D===Qs||M.indexOf("rgba")>=0?_[D]=Vn:_[D]=Pa,_},{});function $(){this.internalformat=Vn,this.format=Vn,this.type=hi,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=ll,this.width=0,this.height=0,this.channels=0}function B(_,M){_.internalformat=M.internalformat,_.format=M.format,_.type=M.type,_.compressed=M.compressed,_.premultiplyAlpha=M.premultiplyAlpha,_.flipY=M.flipY,_.unpackAlignment=M.unpackAlignment,_.colorSpace=M.colorSpace,_.width=M.width,_.height=M.height,_.channels=M.channels}function Ae(_,M){if(!(typeof M!="object"||!M)){if("premultiplyAlpha"in M&&(u.type(M.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),_.premultiplyAlpha=M.premultiplyAlpha),"flipY"in M&&(u.type(M.flipY,"boolean","invalid texture flip"),_.flipY=M.flipY),"alignment"in M&&(u.oneOf(M.alignment,[1,2,4,8],"invalid texture unpack alignment"),_.unpackAlignment=M.alignment),"colorSpace"in M&&(u.parameter(M.colorSpace,J,"invalid colorSpace"),_.colorSpace=J[M.colorSpace]),"type"in M){var D=M.type;u(d.oes_texture_float||!(D==="float"||D==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),u(d.oes_texture_half_float||!(D==="half float"||D==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),u(d.webgl_depth_texture||!(D==="uint16"||D==="uint32"||D==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),u.parameter(D,oe,"invalid texture type"),_.type=oe[D]}var Ee=_.width,rt=_.height,p=_.channels,c=!1;"shape"in M?(u(Array.isArray(M.shape)&&M.shape.length>=2,"shape must be an array"),Ee=M.shape[0],rt=M.shape[1],M.shape.length===3&&(p=M.shape[2],u(p>0&&p<=4,"invalid number of channels"),c=!0),u(Ee>=0&&Ee<=y.maxTextureSize,"invalid width"),u(rt>=0&&rt<=y.maxTextureSize,"invalid height")):("radius"in M&&(Ee=rt=M.radius,u(Ee>=0&&Ee<=y.maxTextureSize,"invalid radius")),"width"in M&&(Ee=M.width,u(Ee>=0&&Ee<=y.maxTextureSize,"invalid width")),"height"in M&&(rt=M.height,u(rt>=0&&rt<=y.maxTextureSize,"invalid height")),"channels"in M&&(p=M.channels,u(p>0&&p<=4,"invalid number of channels"),c=!0)),_.width=Ee|0,_.height=rt|0,_.channels=p|0;var x=!1;if("format"in M){var S=M.format;u(d.webgl_depth_texture||!(S==="depth"||S==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),u.parameter(S,Y,"invalid texture format");var O=_.internalformat=Y[S];_.format=Ne[O],S in oe&&("type"in M||(_.type=oe[S])),S in Q&&(_.compressed=!0),x=!0}!c&&x?_.channels=Ir[_.format]:c&&!x?_.channels!==Ga[_.format]&&(_.format=_.internalformat=Ga[_.channels]):x&&c&&u(_.channels===Ir[_.format],"number of channels inconsistent with specified format")}}function fe(_){s.pixelStorei(Op,_.flipY),s.pixelStorei(Pp,_.premultiplyAlpha),s.pixelStorei(Dp,_.colorSpace),s.pixelStorei(Rp,_.unpackAlignment)}function K(){$.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function ue(_,M){var D=null;if(co(M)?D=M:M&&(u.type(M,"object","invalid pixel data type"),Ae(_,M),"x"in M&&(_.xOffset=M.x|0),"y"in M&&(_.yOffset=M.y|0),co(M.data)&&(D=M.data)),u(!_.compressed||D instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),M.copy){u(!D,"can not specify copy and data field for the same texture");var Ee=U.viewportWidth,rt=U.viewportHeight;_.width=_.width||Ee-_.xOffset,_.height=_.height||rt-_.yOffset,_.needsCopy=!0,u(_.xOffset>=0&&_.xOffset<Ee&&_.yOffset>=0&&_.yOffset<rt&&_.width>0&&_.width<=Ee&&_.height>0&&_.height<=rt,"copy texture read out of bounds")}else if(!D)_.width=_.width||1,_.height=_.height||1,_.channels=_.channels||4;else if(r(D))_.channels=_.channels||4,_.data=D,!("type"in M)&&_.type===hi&&(_.type=bl(D));else if(vl(D))_.channels=_.channels||4,Bp(_,D),_.alignment=1,_.needsFree=!0;else if(Br(D)){var p=D.data;!Array.isArray(p)&&_.type===hi&&(_.type=bl(p));var c=D.shape,x=D.stride,S,O,T,E,w,h;c.length===3?(T=c[2],h=x[2]):(u(c.length===2,"invalid ndarray pixel data, must be 2 or 3D"),T=1,h=1),S=c[0],O=c[1],E=x[0],w=x[1],_.alignment=1,_.width=S,_.height=O,_.channels=T,_.format=_.internalformat=Ga[T],_.needsFree=!0,Up(_,p,E,w,h,D.offset)}else if(gl(D)||yl(D)||Gp(D))gl(D)||yl(D)?_.element=D:_.element=D.canvas,_.width=_.element.width,_.height=_.element.height,_.channels=4;else if(Mp(D))_.element=D,_.width=D.width,_.height=D.height,_.channels=4;else if(Np(D))_.element=D,_.width=D.naturalWidth,_.height=D.naturalHeight,_.channels=4;else if(kp(D))_.element=D,_.width=D.videoWidth,_.height=D.videoHeight,_.channels=4;else if(_l(D)){var b=_.width||D[0].length,v=_.height||D.length,L=_.channels;Mt(D[0][0])?L=L||D[0][0].length:L=L||1;for(var P=Ca.shape(D),j=1,ae=0;ae<P.length;++ae)j*=P[ae];var se=xl(_,j);Ca.flatten(D,P,"",se),El(_,se),_.alignment=1,_.width=b,_.height=v,_.channels=L,_.format=_.internalformat=Ga[L],_.needsFree=!0}_.type===Ui?u(y.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):_.type===di&&u(y.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function de(_,M,D){var Ee=_.element,rt=_.data,p=_.internalformat,c=_.format,x=_.type,S=_.width,O=_.height;fe(_),Ee?s.texImage2D(M,D,c,c,x,Ee):_.compressed?s.compressedTexImage2D(M,D,p,S,O,0,rt):_.needsCopy?(G(),s.copyTexImage2D(M,D,c,_.xOffset,_.yOffset,S,O,0)):s.texImage2D(M,D,c,S,O,0,c,x,rt||null)}function Ke(_,M,D,Ee,rt){var p=_.element,c=_.data,x=_.internalformat,S=_.format,O=_.type,T=_.width,E=_.height;fe(_),p?s.texSubImage2D(M,rt,D,Ee,S,O,p):_.compressed?s.compressedTexSubImage2D(M,rt,D,Ee,x,T,E,c):_.needsCopy?(G(),s.copyTexSubImage2D(M,rt,D,Ee,_.xOffset,_.yOffset,T,E)):s.texSubImage2D(M,rt,D,Ee,T,E,S,O,c)}var He=[];function pe(){return He.pop()||new K}function _e(_){_.needsFree&&Bt.freeType(_.data),K.call(_),He.push(_)}function $e(){$.call(this),this.genMipmaps=!1,this.mipmapHint=Ia,this.mipmask=0,this.images=Array(16)}function Xe(_,M,D){var Ee=_.images[0]=pe();_.mipmask=1,Ee.width=_.width=M,Ee.height=_.height=D,Ee.channels=_.channels=4}function it(_,M){var D=null;if(co(M))D=_.images[0]=pe(),B(D,_),ue(D,M),_.mipmask=1;else if(Ae(_,M),Array.isArray(M.mipmap))for(var Ee=M.mipmap,rt=0;rt<Ee.length;++rt)D=_.images[rt]=pe(),B(D,_),D.width>>=rt,D.height>>=rt,ue(D,Ee[rt]),_.mipmask|=1<<rt;else D=_.images[0]=pe(),B(D,_),ue(D,M),_.mipmask=1;B(_,_.images[0]),_.compressed&&(_.internalformat===to||_.internalformat===ro||_.internalformat===no||_.internalformat===io)&&u(_.width%4===0&&_.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Ft(_,M){for(var D=_.images,Ee=0;Ee<D.length;++Ee){if(!D[Ee])return;de(D[Ee],M,Ee)}}var Gt=[];function st(){var _=Gt.pop()||new $e;$.call(_),_.mipmask=0;for(var M=0;M<16;++M)_.images[M]=null;return _}function Vt(_){for(var M=_.images,D=0;D<M.length;++D)M[D]&&_e(M[D]),M[D]=null;Gt.push(_)}function Lt(){this.minFilter=fo,this.magFilter=fo,this.wrapS=oo,this.wrapT=oo,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Ia}function $t(_,M){if("min"in M){var D=M.min;u.parameter(D,ee),_.minFilter=ee[D],Fp.indexOf(_.minFilter)>=0&&!("faces"in M)&&(_.genMipmaps=!0)}if("mag"in M){var Ee=M.mag;u.parameter(Ee,Z),_.magFilter=Z[Ee]}var rt=_.wrapS,p=_.wrapT;if("wrap"in M){var c=M.wrap;typeof c=="string"?(u.parameter(c,W),rt=p=W[c]):Array.isArray(c)&&(u.parameter(c[0],W),u.parameter(c[1],W),rt=W[c[0]],p=W[c[1]])}else{if("wrapS"in M){var x=M.wrapS;u.parameter(x,W),rt=W[x]}if("wrapT"in M){var S=M.wrapT;u.parameter(S,W),p=W[S]}}if(_.wrapS=rt,_.wrapT=p,"anisotropic"in M){var O=M.anisotropic;u(typeof O=="number"&&O>=1&&O<=y.maxAnisotropic,"aniso samples must be between 1 and "),_.anisotropic=M.anisotropic}if("mipmap"in M){var T=!1;switch(typeof M.mipmap){case"string":u.parameter(M.mipmap,X,"invalid mipmap hint"),_.mipmapHint=X[M.mipmap],_.genMipmaps=!0,T=!0;break;case"boolean":T=_.genMipmaps=M.mipmap;break;case"object":u(Array.isArray(M.mipmap),"invalid mipmap type"),_.genMipmaps=!1,T=!0;break;default:u.raise("invalid mipmap type")}T&&!("min"in M)&&(_.minFilter=lo)}}function jt(_,M){s.texParameteri(M,Tp,_.minFilter),s.texParameteri(M,Ep,_.magFilter),s.texParameteri(M,gp,_.wrapS),s.texParameteri(M,yp,_.wrapT),d.ext_texture_filter_anisotropic&&s.texParameteri(M,Lp,_.anisotropic),_.genMipmaps&&(s.hint(wp,_.mipmapHint),s.generateMipmap(M))}var Ht=0,Zt={},rr=y.maxTextureUnits,Nt=Array(rr).map(function(){return null});function Ze(_){$.call(this),this.mipmask=0,this.internalformat=Vn,this.id=Ht++,this.refCount=1,this.target=_,this.texture=s.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Lt,k.profile&&(this.stats={size:0})}function nr(_){s.activeTexture($i),s.bindTexture(_.target,_.texture)}function mt(){var _=Nt[0];_?s.bindTexture(_.target,_.texture):s.bindTexture(zr,null)}function Ue(_){var M=_.texture;u(M,"must not double destroy texture");var D=_.unit,Ee=_.target;D>=0&&(s.activeTexture($i+D),s.bindTexture(Ee,null),Nt[D]=null),s.deleteTexture(M),_.texture=null,_.params=null,_.pixels=null,_.refCount=0,delete Zt[_.id],I.textureCount--}n(Ze.prototype,{bind:function(){var _=this;_.bindCount+=1;var M=_.unit;if(M<0){for(var D=0;D<rr;++D){var Ee=Nt[D];if(Ee){if(Ee.bindCount>0)continue;Ee.unit=-1}Nt[D]=_,M=D;break}M>=rr&&u.raise("insufficient number of texture units"),k.profile&&I.maxTextureUnits<M+1&&(I.maxTextureUnits=M+1),_.unit=M,s.activeTexture($i+M),s.bindTexture(_.target,_.texture)}return M},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Ue(this)}});function at(_,M){var D=new Ze(zr);Zt[D.id]=D,I.textureCount++;function Ee(c,x){var S=D.texInfo;Lt.call(S);var O=st();return typeof c=="number"?typeof x=="number"?Xe(O,c|0,x|0):Xe(O,c|0,c|0):c?(u.type(c,"object","invalid arguments to regl.texture"),$t(S,c),it(O,c)):Xe(O,1,1),S.genMipmaps&&(O.mipmask=(O.width<<1)-1),D.mipmask=O.mipmask,B(D,O),u.texture2D(S,O,y),D.internalformat=O.internalformat,Ee.width=O.width,Ee.height=O.height,nr(D),Ft(O,zr),jt(S,zr),mt(),Vt(O),k.profile&&(D.stats.size=Ma(D.internalformat,D.type,O.width,O.height,S.genMipmaps,!1)),Ee.format=q[D.internalformat],Ee.type=ye[D.type],Ee.mag=z[S.magFilter],Ee.min=ve[S.minFilter],Ee.wrapS=he[S.wrapS],Ee.wrapT=he[S.wrapT],Ee}function rt(c,x,S,O){u(!!c,"must specify image data");var T=x|0,E=S|0,w=O|0,h=pe();return B(h,D),h.width=0,h.height=0,ue(h,c),h.width=h.width||(D.width>>w)-T,h.height=h.height||(D.height>>w)-E,u(D.type===h.type&&D.format===h.format&&D.internalformat===h.internalformat,"incompatible format for texture.subimage"),u(T>=0&&E>=0&&T+h.width<=D.width&&E+h.height<=D.height,"texture.subimage write out of bounds"),u(D.mipmask&1<<w,"missing mipmap data"),u(h.data||h.element||h.needsCopy,"missing image data"),nr(D),Ke(h,zr,T,E,w),mt(),_e(h),Ee}function p(c,x){var S=c|0,O=x|0||S;if(S===D.width&&O===D.height)return Ee;Ee.width=D.width=S,Ee.height=D.height=O,nr(D);for(var T=0;D.mipmask>>T;++T){var E=S>>T,w=O>>T;if(!E||!w)break;s.texImage2D(zr,T,D.format,E,w,0,D.format,D.type,null)}return mt(),k.profile&&(D.stats.size=Ma(D.internalformat,D.type,S,O,!1,!1)),Ee}return Ee(_,M),Ee.subimage=rt,Ee.resize=p,Ee._reglType="texture2d",Ee._texture=D,k.profile&&(Ee.stats=D.stats),Ee.destroy=function(){D.decRef()},Ee}function ct(_,M,D,Ee,rt,p){var c=new Ze(Ks);Zt[c.id]=c,I.cubeCount++;var x=new Array(6);function S(E,w,h,b,v,L){var P,j=c.texInfo;for(Lt.call(j),P=0;P<6;++P)x[P]=st();if(typeof E=="number"||!E){var ae=E|0||1;for(P=0;P<6;++P)Xe(x[P],ae,ae)}else if(typeof E=="object")if(w)it(x[0],E),it(x[1],w),it(x[2],h),it(x[3],b),it(x[4],v),it(x[5],L);else if($t(j,E),Ae(c,E),"faces"in E){var se=E.faces;for(u(Array.isArray(se)&&se.length===6,"cube faces must be a length 6 array"),P=0;P<6;++P)u(typeof se[P]=="object"&&!!se[P],"invalid input for cube map face"),B(x[P],c),it(x[P],se[P])}else for(P=0;P<6;++P)it(x[P],E);else u.raise("invalid arguments to cube map");for(B(c,x[0]),u.optional(function(){y.npotTextureCube||u(qf(c.width)&&qf(c.height),"your browser does not support non power or two texture dimensions")}),j.genMipmaps?c.mipmask=(x[0].width<<1)-1:c.mipmask=x[0].mipmask,u.textureCube(c,j,x,y),c.internalformat=x[0].internalformat,S.width=x[0].width,S.height=x[0].height,nr(c),P=0;P<6;++P)Ft(x[P],Oa+P);for(jt(j,Ks),mt(),k.profile&&(c.stats.size=Ma(c.internalformat,c.type,S.width,S.height,j.genMipmaps,!0)),S.format=q[c.internalformat],S.type=ye[c.type],S.mag=z[j.magFilter],S.min=ve[j.minFilter],S.wrapS=he[j.wrapS],S.wrapT=he[j.wrapT],P=0;P<6;++P)Vt(x[P]);return S}function O(E,w,h,b,v){u(!!w,"must specify image data"),u(typeof E=="number"&&E===(E|0)&&E>=0&&E<6,"invalid face");var L=h|0,P=b|0,j=v|0,ae=pe();return B(ae,c),ae.width=0,ae.height=0,ue(ae,w),ae.width=ae.width||(c.width>>j)-L,ae.height=ae.height||(c.height>>j)-P,u(c.type===ae.type&&c.format===ae.format&&c.internalformat===ae.internalformat,"incompatible format for texture.subimage"),u(L>=0&&P>=0&&L+ae.width<=c.width&&P+ae.height<=c.height,"texture.subimage write out of bounds"),u(c.mipmask&1<<j,"missing mipmap data"),u(ae.data||ae.element||ae.needsCopy,"missing image data"),nr(c),Ke(ae,Oa+E,L,P,j),mt(),_e(ae),S}function T(E){var w=E|0;if(w!==c.width){S.width=c.width=w,S.height=c.height=w,nr(c);for(var h=0;h<6;++h)for(var b=0;c.mipmask>>b;++b)s.texImage2D(Oa+h,b,c.format,w>>b,w>>b,0,c.format,c.type,null);return mt(),k.profile&&(c.stats.size=Ma(c.internalformat,c.type,S.width,S.height,!1,!0)),S}}return S(_,M,D,Ee,rt,p),S.subimage=O,S.resize=T,S._reglType="textureCube",S._texture=c,k.profile&&(S.stats=c.stats),S.destroy=function(){c.decRef()},S}function kt(){for(var _=0;_<rr;++_)s.activeTexture($i+_),s.bindTexture(zr,null),Nt[_]=null;wr(Zt).forEach(Ue),I.cubeCount=0,I.textureCount=0}k.profile&&(I.getTotalTextureSize=function(){var _=0;return Object.keys(Zt).forEach(function(M){_+=Zt[M].stats.size}),_});function Xr(){for(var _=0;_<rr;++_){var M=Nt[_];M&&(M.bindCount=0,M.unit=-1,Nt[_]=null)}wr(Zt).forEach(function(D){D.texture=s.createTexture(),s.bindTexture(D.target,D.texture);for(var Ee=0;Ee<32;++Ee)if(D.mipmask&1<<Ee)if(D.target===zr)s.texImage2D(zr,Ee,D.internalformat,D.width>>Ee,D.height>>Ee,0,D.internalformat,D.type,null);else for(var rt=0;rt<6;++rt)s.texImage2D(Oa+rt,Ee,D.internalformat,D.width>>Ee,D.height>>Ee,0,D.internalformat,D.type,null);jt(D.texInfo,D.target)})}function qn(){for(var _=0;_<rr;++_){var M=Nt[_];M&&(M.bindCount=0,M.unit=-1,Nt[_]=null),s.activeTexture($i+_),s.bindTexture(zr,null),s.bindTexture(Ks,null)}}return{create2D:at,createCube:ct,clear:kt,getTexture:function(_){return null},restore:Xr,refresh:qn}}var xn=36161,Na=32854,Tl=32855,Al=36194,wl=33189,Sl=36168,Cl=34041,Ll=35907,Rl=34836,Ol=34842,Pl=34843,Ur=[];Ur[Na]=2,Ur[Tl]=2,Ur[Al]=2,Ur[wl]=2,Ur[Sl]=1,Ur[Cl]=4,Ur[Ll]=4,Ur[Rl]=16,Ur[Ol]=8,Ur[Pl]=6;function Dl(s,d,y){return Ur[s]*d*y}var Vp=function(s,d,y,G,U){var I={rgba4:Na,rgb565:Al,"rgb5 a1":Tl,depth:wl,stencil:Sl,"depth stencil":Cl};d.ext_srgb&&(I.srgba=Ll),d.ext_color_buffer_half_float&&(I.rgba16f=Ol,I.rgb16f=Pl),d.webgl_color_buffer_float&&(I.rgba32f=Rl);var k=[];Object.keys(I).forEach(function(Y){var Q=I[Y];k[Q]=Y});var X=0,W={};function Z(Y){this.id=X++,this.refCount=1,this.renderbuffer=Y,this.format=Na,this.width=0,this.height=0,U.profile&&(this.stats={size:0})}Z.prototype.decRef=function(){--this.refCount<=0&&ee(this)};function ee(Y){var Q=Y.renderbuffer;u(Q,"must not double destroy renderbuffer"),s.bindRenderbuffer(xn,null),s.deleteRenderbuffer(Q),Y.renderbuffer=null,Y.refCount=0,delete W[Y.id],G.renderbufferCount--}function J(Y,Q){var C=new Z(s.createRenderbuffer());W[C.id]=C,G.renderbufferCount++;function N(ye,z){var ve=0,he=0,Ne=Na;if(typeof ye=="object"&&ye){var $=ye;if("shape"in $){var B=$.shape;u(Array.isArray(B)&&B.length>=2,"invalid renderbuffer shape"),ve=B[0]|0,he=B[1]|0}else"radius"in $&&(ve=he=$.radius|0),"width"in $&&(ve=$.width|0),"height"in $&&(he=$.height|0);"format"in $&&(u.parameter($.format,I,"invalid renderbuffer format"),Ne=I[$.format])}else typeof ye=="number"?(ve=ye|0,typeof z=="number"?he=z|0:he=ve):ye?u.raise("invalid arguments to renderbuffer constructor"):ve=he=1;if(u(ve>0&&he>0&&ve<=y.maxRenderbufferSize&&he<=y.maxRenderbufferSize,"invalid renderbuffer size"),!(ve===C.width&&he===C.height&&Ne===C.format))return N.width=C.width=ve,N.height=C.height=he,C.format=Ne,s.bindRenderbuffer(xn,C.renderbuffer),s.renderbufferStorage(xn,Ne,ve,he),u(s.getError()===0,"invalid render buffer format"),U.profile&&(C.stats.size=Dl(C.format,C.width,C.height)),N.format=k[C.format],N}function q(ye,z){var ve=ye|0,he=z|0||ve;return ve===C.width&&he===C.height||(u(ve>0&&he>0&&ve<=y.maxRenderbufferSize&&he<=y.maxRenderbufferSize,"invalid renderbuffer size"),N.width=C.width=ve,N.height=C.height=he,s.bindRenderbuffer(xn,C.renderbuffer),s.renderbufferStorage(xn,C.format,ve,he),u(s.getError()===0,"invalid render buffer format"),U.profile&&(C.stats.size=Dl(C.format,C.width,C.height))),N}return N(Y,Q),N.resize=q,N._reglType="renderbuffer",N._renderbuffer=C,U.profile&&(N.stats=C.stats),N.destroy=function(){C.decRef()},N}U.profile&&(G.getTotalRenderbufferSize=function(){var Y=0;return Object.keys(W).forEach(function(Q){Y+=W[Q].stats.size}),Y});function oe(){wr(W).forEach(function(Y){Y.renderbuffer=s.createRenderbuffer(),s.bindRenderbuffer(xn,Y.renderbuffer),s.renderbufferStorage(xn,Y.format,Y.width,Y.height)}),s.bindRenderbuffer(xn,null)}return{create:J,clear:function(){wr(W).forEach(ee)},restore:oe}},an=36160,ho=36161,Hn=3553,ka=34069,Fl=36064,Il=36096,Gl=36128,Ml=33306,Nl=36053,jp=36054,Hp=36055,zp=36057,Wp=36061,Xp=36193,Yp=5121,Kp=5126,kl=6407,Bl=6408,qp=6402,Qp=[kl,Bl],po=[];po[Bl]=4,po[kl]=3;var Ba=[];Ba[Yp]=1,Ba[Kp]=4,Ba[Xp]=2;var Zp=32854,Jp=32855,em=36194,tm=33189,rm=36168,Ul=34041,nm=35907,im=34836,am=34842,sm=34843,om=[Zp,Jp,em,nm,am,sm,im],vi={};vi[Nl]="complete",vi[jp]="incomplete attachment",vi[zp]="incomplete dimensions",vi[Hp]="incomplete, missing attachment",vi[Wp]="unsupported";function fm(s,d,y,G,U,I){var k={cur:null,next:null,dirty:!1,setFBO:null},X=["rgba"],W=["rgba4","rgb565","rgb5 a1"];d.ext_srgb&&W.push("srgba"),d.ext_color_buffer_half_float&&W.push("rgba16f","rgb16f"),d.webgl_color_buffer_float&&W.push("rgba32f");var Z=["uint8"];d.oes_texture_half_float&&Z.push("half float","float16"),d.oes_texture_float&&Z.push("float","float32");function ee(K,ue,de){this.target=K,this.texture=ue,this.renderbuffer=de;var Ke=0,He=0;ue?(Ke=ue.width,He=ue.height):de&&(Ke=de.width,He=de.height),this.width=Ke,this.height=He}function J(K){K&&(K.texture&&K.texture._texture.decRef(),K.renderbuffer&&K.renderbuffer._renderbuffer.decRef())}function oe(K,ue,de){if(K)if(K.texture){var Ke=K.texture._texture,He=Math.max(1,Ke.width),pe=Math.max(1,Ke.height);u(He===ue&&pe===de,"inconsistent width/height for supplied texture"),Ke.refCount+=1}else{var _e=K.renderbuffer._renderbuffer;u(_e.width===ue&&_e.height===de,"inconsistent width/height for renderbuffer"),_e.refCount+=1}}function Y(K,ue){ue&&(ue.texture?s.framebufferTexture2D(an,K,ue.target,ue.texture._texture.texture,0):s.framebufferRenderbuffer(an,K,ho,ue.renderbuffer._renderbuffer.renderbuffer))}function Q(K){var ue=Hn,de=null,Ke=null,He=K;typeof K=="object"&&(He=K.data,"target"in K&&(ue=K.target|0)),u.type(He,"function","invalid attachment data");var pe=He._reglType;return pe==="texture2d"?(de=He,u(ue===Hn)):pe==="textureCube"?(de=He,u(ue>=ka&&ue<ka+6,"invalid cube map target")):pe==="renderbuffer"?(Ke=He,ue=ho):u.raise("invalid regl object for attachment"),new ee(ue,de,Ke)}function C(K,ue,de,Ke,He){if(de){var pe=G.create2D({width:K,height:ue,format:Ke,type:He});return pe._texture.refCount=0,new ee(Hn,pe,null)}else{var _e=U.create({width:K,height:ue,format:Ke});return _e._renderbuffer.refCount=0,new ee(ho,null,_e)}}function N(K){return K&&(K.texture||K.renderbuffer)}function q(K,ue,de){K&&(K.texture?K.texture.resize(ue,de):K.renderbuffer&&K.renderbuffer.resize(ue,de),K.width=ue,K.height=de)}var ye=0,z={};function ve(){this.id=ye++,z[this.id]=this,this.framebuffer=s.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function he(K){K.colorAttachments.forEach(J),J(K.depthAttachment),J(K.stencilAttachment),J(K.depthStencilAttachment)}function Ne(K){var ue=K.framebuffer;u(ue,"must not double destroy framebuffer"),s.deleteFramebuffer(ue),K.framebuffer=null,I.framebufferCount--,delete z[K.id]}function $(K){var ue;s.bindFramebuffer(an,K.framebuffer);var de=K.colorAttachments;for(ue=0;ue<de.length;++ue)Y(Fl+ue,de[ue]);for(ue=de.length;ue<y.maxColorAttachments;++ue)s.framebufferTexture2D(an,Fl+ue,Hn,null,0);s.framebufferTexture2D(an,Ml,Hn,null,0),s.framebufferTexture2D(an,Il,Hn,null,0),s.framebufferTexture2D(an,Gl,Hn,null,0),Y(Il,K.depthAttachment),Y(Gl,K.stencilAttachment),Y(Ml,K.depthStencilAttachment);var Ke=s.checkFramebufferStatus(an);!s.isContextLost()&&Ke!==Nl&&u.raise("framebuffer configuration not supported, status = "+vi[Ke]),s.bindFramebuffer(an,k.next?k.next.framebuffer:null),k.cur=k.next,s.getError()}function B(K,ue){var de=new ve;I.framebufferCount++;function Ke(pe,_e){var $e;u(k.next!==de,"can not update framebuffer which is currently in use");var Xe=0,it=0,Ft=!0,Gt=!0,st=null,Vt=!0,Lt="rgba",$t="uint8",jt=1,Ht=null,Zt=null,rr=null,Nt=!1;if(typeof pe=="number")Xe=pe|0,it=_e|0||Xe;else if(!pe)Xe=it=1;else{u.type(pe,"object","invalid arguments for framebuffer");var Ze=pe;if("shape"in Ze){var nr=Ze.shape;u(Array.isArray(nr)&&nr.length>=2,"invalid shape for framebuffer"),Xe=nr[0],it=nr[1]}else"radius"in Ze&&(Xe=it=Ze.radius),"width"in Ze&&(Xe=Ze.width),"height"in Ze&&(it=Ze.height);("color"in Ze||"colors"in Ze)&&(st=Ze.color||Ze.colors,Array.isArray(st)&&u(st.length===1||d.webgl_draw_buffers,"multiple render targets not supported")),st||("colorCount"in Ze&&(jt=Ze.colorCount|0,u(jt>0,"invalid color buffer count")),"colorTexture"in Ze&&(Vt=!!Ze.colorTexture,Lt="rgba4"),"colorType"in Ze&&($t=Ze.colorType,Vt?(u(d.oes_texture_float||!($t==="float"||$t==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),u(d.oes_texture_half_float||!($t==="half float"||$t==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):$t==="half float"||$t==="float16"?(u(d.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Lt="rgba16f"):($t==="float"||$t==="float32")&&(u(d.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Lt="rgba32f"),u.oneOf($t,Z,"invalid color type")),"colorFormat"in Ze&&(Lt=Ze.colorFormat,X.indexOf(Lt)>=0?Vt=!0:W.indexOf(Lt)>=0?Vt=!1:u.optional(function(){Vt?u.oneOf(Ze.colorFormat,X,"invalid color format for texture"):u.oneOf(Ze.colorFormat,W,"invalid color format for renderbuffer")}))),("depthTexture"in Ze||"depthStencilTexture"in Ze)&&(Nt=!!(Ze.depthTexture||Ze.depthStencilTexture),u(!Nt||d.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Ze&&(typeof Ze.depth=="boolean"?Ft=Ze.depth:(Ht=Ze.depth,Gt=!1)),"stencil"in Ze&&(typeof Ze.stencil=="boolean"?Gt=Ze.stencil:(Zt=Ze.stencil,Ft=!1)),"depthStencil"in Ze&&(typeof Ze.depthStencil=="boolean"?Ft=Gt=Ze.depthStencil:(rr=Ze.depthStencil,Ft=!1,Gt=!1))}var mt=null,Ue=null,at=null,ct=null;if(Array.isArray(st))mt=st.map(Q);else if(st)mt=[Q(st)];else for(mt=new Array(jt),$e=0;$e<jt;++$e)mt[$e]=C(Xe,it,Vt,Lt,$t);u(d.webgl_draw_buffers||mt.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),u(mt.length<=y.maxColorAttachments,"too many color attachments, not supported"),Xe=Xe||mt[0].width,it=it||mt[0].height,Ht?Ue=Q(Ht):Ft&&!Gt&&(Ue=C(Xe,it,Nt,"depth","uint32")),Zt?at=Q(Zt):Gt&&!Ft&&(at=C(Xe,it,!1,"stencil","uint8")),rr?ct=Q(rr):!Ht&&!Zt&&Gt&&Ft&&(ct=C(Xe,it,Nt,"depth stencil","depth stencil")),u(!!Ht+!!Zt+!!rr<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var kt=null;for($e=0;$e<mt.length;++$e)if(oe(mt[$e],Xe,it),u(!mt[$e]||mt[$e].texture&&Qp.indexOf(mt[$e].texture._texture.format)>=0||mt[$e].renderbuffer&&om.indexOf(mt[$e].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+$e+" is invalid"),mt[$e]&&mt[$e].texture){var Xr=po[mt[$e].texture._texture.format]*Ba[mt[$e].texture._texture.type];kt===null?kt=Xr:u(kt===Xr,"all color attachments much have the same number of bits per pixel.")}return oe(Ue,Xe,it),u(!Ue||Ue.texture&&Ue.texture._texture.format===qp||Ue.renderbuffer&&Ue.renderbuffer._renderbuffer.format===tm,"invalid depth attachment for framebuffer object"),oe(at,Xe,it),u(!at||at.renderbuffer&&at.renderbuffer._renderbuffer.format===rm,"invalid stencil attachment for framebuffer object"),oe(ct,Xe,it),u(!ct||ct.texture&&ct.texture._texture.format===Ul||ct.renderbuffer&&ct.renderbuffer._renderbuffer.format===Ul,"invalid depth-stencil attachment for framebuffer object"),he(de),de.width=Xe,de.height=it,de.colorAttachments=mt,de.depthAttachment=Ue,de.stencilAttachment=at,de.depthStencilAttachment=ct,Ke.color=mt.map(N),Ke.depth=N(Ue),Ke.stencil=N(at),Ke.depthStencil=N(ct),Ke.width=de.width,Ke.height=de.height,$(de),Ke}function He(pe,_e){u(k.next!==de,"can not resize a framebuffer which is currently in use");var $e=Math.max(pe|0,1),Xe=Math.max(_e|0||$e,1);if($e===de.width&&Xe===de.height)return Ke;for(var it=de.colorAttachments,Ft=0;Ft<it.length;++Ft)q(it[Ft],$e,Xe);return q(de.depthAttachment,$e,Xe),q(de.stencilAttachment,$e,Xe),q(de.depthStencilAttachment,$e,Xe),de.width=Ke.width=$e,de.height=Ke.height=Xe,$(de),Ke}return Ke(K,ue),n(Ke,{resize:He,_reglType:"framebuffer",_framebuffer:de,destroy:function(){Ne(de),he(de)},use:function(pe){k.setFBO({framebuffer:Ke},pe)}})}function Ae(K){var ue=Array(6);function de(He){var pe;u(ue.indexOf(k.next)<0,"can not update framebuffer which is currently in use");var _e={color:null},$e=0,Xe=null,it="rgba",Ft="uint8",Gt=1;if(typeof He=="number")$e=He|0;else if(!He)$e=1;else{u.type(He,"object","invalid arguments for framebuffer");var st=He;if("shape"in st){var Vt=st.shape;u(Array.isArray(Vt)&&Vt.length>=2,"invalid shape for framebuffer"),u(Vt[0]===Vt[1],"cube framebuffer must be square"),$e=Vt[0]}else"radius"in st&&($e=st.radius|0),"width"in st?($e=st.width|0,"height"in st&&u(st.height===$e,"must be square")):"height"in st&&($e=st.height|0);("color"in st||"colors"in st)&&(Xe=st.color||st.colors,Array.isArray(Xe)&&u(Xe.length===1||d.webgl_draw_buffers,"multiple render targets not supported")),Xe||("colorCount"in st&&(Gt=st.colorCount|0,u(Gt>0,"invalid color buffer count")),"colorType"in st&&(u.oneOf(st.colorType,Z,"invalid color type"),Ft=st.colorType),"colorFormat"in st&&(it=st.colorFormat,u.oneOf(st.colorFormat,X,"invalid color format for texture"))),"depth"in st&&(_e.depth=st.depth),"stencil"in st&&(_e.stencil=st.stencil),"depthStencil"in st&&(_e.depthStencil=st.depthStencil)}var Lt;if(Xe)if(Array.isArray(Xe))for(Lt=[],pe=0;pe<Xe.length;++pe)Lt[pe]=Xe[pe];else Lt=[Xe];else{Lt=Array(Gt);var $t={radius:$e,format:it,type:Ft};for(pe=0;pe<Gt;++pe)Lt[pe]=G.createCube($t)}for(_e.color=Array(Lt.length),pe=0;pe<Lt.length;++pe){var jt=Lt[pe];u(typeof jt=="function"&&jt._reglType==="textureCube","invalid cube map"),$e=$e||jt.width,u(jt.width===$e&&jt.height===$e,"invalid cube map shape"),_e.color[pe]={target:ka,data:Lt[pe]}}for(pe=0;pe<6;++pe){for(var Ht=0;Ht<Lt.length;++Ht)_e.color[Ht].target=ka+pe;pe>0&&(_e.depth=ue[0].depth,_e.stencil=ue[0].stencil,_e.depthStencil=ue[0].depthStencil),ue[pe]?ue[pe](_e):ue[pe]=B(_e)}return n(de,{width:$e,height:$e,color:Lt})}function Ke(He){var pe,_e=He|0;if(u(_e>0&&_e<=y.maxCubeMapSize,"invalid radius for cube fbo"),_e===de.width)return de;var $e=de.color;for(pe=0;pe<$e.length;++pe)$e[pe].resize(_e);for(pe=0;pe<6;++pe)ue[pe].resize(_e);return de.width=de.height=_e,de}return de(K),n(de,{faces:ue,resize:Ke,_reglType:"framebufferCube",destroy:function(){ue.forEach(function(He){He.destroy()})}})}function fe(){k.cur=null,k.next=null,k.dirty=!0,wr(z).forEach(function(K){K.framebuffer=s.createFramebuffer(),$(K)})}return n(k,{getFramebuffer:function(K){if(typeof K=="function"&&K._reglType==="framebuffer"){var ue=K._framebuffer;if(ue instanceof ve)return ue}return null},create:B,createCube:Ae,clear:function(){wr(z).forEach(Ne)},restore:fe})}var lm=5126,$l=34962,Ua=34963,Vl=["attributes","elements","offset","count","primitive","instances"];function mo(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=lm,this.offset=0,this.stride=0,this.divisor=0}function um(s,d,y,G,U,I,k){for(var X=y.maxAttributes,W=new Array(X),Z=0;Z<X;++Z)W[Z]=new mo;var ee=0,J={},oe={Record:mo,scope:{},state:W,currentVAO:null,targetVAO:null,restore:Q()?he:function(){},createVAO:Ne,getVAO:N,destroyBuffer:Y,setVAO:Q()?q:ye,clear:Q()?z:function(){}};function Y($){for(var B=0;B<W.length;++B){var Ae=W[B];Ae.buffer===$&&(s.disableVertexAttribArray(B),Ae.buffer=null)}}function Q(){return d.oes_vertex_array_object}function C(){return d.angle_instanced_arrays}function N($){return typeof $=="function"&&$._vao?$._vao:null}function q($){if($!==oe.currentVAO){var B=Q();$?B.bindVertexArrayOES($.vao):B.bindVertexArrayOES(null),oe.currentVAO=$}}function ye($){if($!==oe.currentVAO){if($)$.bindAttrs();else{for(var B=C(),Ae=0;Ae<W.length;++Ae){var fe=W[Ae];fe.buffer?(s.enableVertexAttribArray(Ae),fe.buffer.bind(),s.vertexAttribPointer(Ae,fe.size,fe.type,fe.normalized,fe.stride,fe.offfset),B&&fe.divisor&&B.vertexAttribDivisorANGLE(Ae,fe.divisor)):(s.disableVertexAttribArray(Ae),s.vertexAttrib4f(Ae,fe.x,fe.y,fe.z,fe.w))}k.elements?s.bindBuffer(Ua,k.elements.buffer.buffer):s.bindBuffer(Ua,null)}oe.currentVAO=$}}function z(){wr(J).forEach(function($){$.destroy()})}function ve(){this.id=++ee,this.attributes=[],this.elements=null,this.ownsElements=!1,this.count=0,this.offset=0,this.instances=-1,this.primitive=4;var $=Q();$?this.vao=$.createVertexArrayOES():this.vao=null,J[this.id]=this,this.buffers=[]}ve.prototype.bindAttrs=function(){for(var $=C(),B=this.attributes,Ae=0;Ae<B.length;++Ae){var fe=B[Ae];fe.buffer?(s.enableVertexAttribArray(Ae),s.bindBuffer($l,fe.buffer.buffer),s.vertexAttribPointer(Ae,fe.size,fe.type,fe.normalized,fe.stride,fe.offset),$&&fe.divisor&&$.vertexAttribDivisorANGLE(Ae,fe.divisor)):(s.disableVertexAttribArray(Ae),s.vertexAttrib4f(Ae,fe.x,fe.y,fe.z,fe.w))}for(var K=B.length;K<X;++K)s.disableVertexAttribArray(K);var ue=I.getElements(this.elements);ue?s.bindBuffer(Ua,ue.buffer.buffer):s.bindBuffer(Ua,null)},ve.prototype.refresh=function(){var $=Q();$&&($.bindVertexArrayOES(this.vao),this.bindAttrs(),oe.currentVAO=null,$.bindVertexArrayOES(null))},ve.prototype.destroy=function(){if(this.vao){var $=Q();this===oe.currentVAO&&(oe.currentVAO=null,$.bindVertexArrayOES(null)),$.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),J[this.id]&&(delete J[this.id],G.vaoCount-=1)};function he(){var $=Q();$&&wr(J).forEach(function(B){B.refresh()})}function Ne($){var B=new ve;G.vaoCount+=1;function Ae(fe){var K;if(Array.isArray(fe))K=fe,B.elements&&B.ownsElements&&B.elements.destroy(),B.elements=null,B.ownsElements=!1,B.offset=0,B.count=0,B.instances=-1,B.primitive=4;else{if(u(typeof fe=="object","invalid arguments for create vao"),u("attributes"in fe,"must specify attributes for vao"),fe.elements){var ue=fe.elements;B.ownsElements?typeof ue=="function"&&ue._reglType==="elements"?(B.elements.destroy(),B.ownsElements=!1):(B.elements(ue),B.ownsElements=!1):I.getElements(fe.elements)?(B.elements=fe.elements,B.ownsElements=!1):(B.elements=I.create(fe.elements),B.ownsElements=!0)}else B.elements=null,B.ownsElements=!1;K=fe.attributes,B.offset=0,B.count=-1,B.instances=-1,B.primitive=4,B.elements&&(B.count=B.elements._elements.vertCount,B.primitive=B.elements._elements.primType),"offset"in fe&&(B.offset=fe.offset|0),"count"in fe&&(B.count=fe.count|0),"instances"in fe&&(B.instances=fe.instances|0),"primitive"in fe&&(u(fe.primitive in bn,"bad primitive type: "+fe.primitive),B.primitive=bn[fe.primitive]),u.optional(()=>{for(var Ft=Object.keys(fe),Gt=0;Gt<Ft.length;++Gt)u(Vl.indexOf(Ft[Gt])>=0,'invalid option for vao: "'+Ft[Gt]+'" valid options are '+Vl)}),u(Array.isArray(K),"attributes must be an array")}u(K.length<X,"too many attributes"),u(K.length>0,"must specify at least one attribute");var de={},Ke=B.attributes;Ke.length=K.length;for(var He=0;He<K.length;++He){var pe=K[He],_e=Ke[He]=new mo,$e=pe.data||pe;if(Array.isArray($e)||r($e)||Br($e)){var Xe;B.buffers[He]&&(Xe=B.buffers[He],r($e)&&Xe._buffer.byteLength>=$e.byteLength?Xe.subdata($e):(Xe.destroy(),B.buffers[He]=null)),B.buffers[He]||(Xe=B.buffers[He]=U.create(pe,$l,!1,!0)),_e.buffer=U.getBuffer(Xe),_e.size=_e.buffer.dimension|0,_e.normalized=!1,_e.type=_e.buffer.dtype,_e.offset=0,_e.stride=0,_e.divisor=0,_e.state=1,de[He]=1}else U.getBuffer(pe)?(_e.buffer=U.getBuffer(pe),_e.size=_e.buffer.dimension|0,_e.normalized=!1,_e.type=_e.buffer.dtype,_e.offset=0,_e.stride=0,_e.divisor=0,_e.state=1):U.getBuffer(pe.buffer)?(_e.buffer=U.getBuffer(pe.buffer),_e.size=(+pe.size||_e.buffer.dimension)|0,_e.normalized=!!pe.normalized||!1,"type"in pe?(u.parameter(pe.type,Un,"invalid buffer type"),_e.type=Un[pe.type]):_e.type=_e.buffer.dtype,_e.offset=(pe.offset||0)|0,_e.stride=(pe.stride||0)|0,_e.divisor=(pe.divisor||0)|0,_e.state=1,u(_e.size>=1&&_e.size<=4,"size must be between 1 and 4"),u(_e.offset>=0,"invalid offset"),u(_e.stride>=0&&_e.stride<=255,"stride must be between 0 and 255"),u(_e.divisor>=0,"divisor must be positive"),u(!_e.divisor||!!d.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in pe?(u(He>0,"first attribute must not be a constant"),_e.x=+pe.x||0,_e.y=+pe.y||0,_e.z=+pe.z||0,_e.w=+pe.w||0,_e.state=2):u(!1,"invalid attribute spec for location "+He)}for(var it=0;it<B.buffers.length;++it)!de[it]&&B.buffers[it]&&(B.buffers[it].destroy(),B.buffers[it]=null);return B.refresh(),Ae}return Ae.destroy=function(){for(var fe=0;fe<B.buffers.length;++fe)B.buffers[fe]&&B.buffers[fe].destroy();B.buffers.length=0,B.ownsElements&&(B.elements.destroy(),B.elements=null,B.ownsElements=!1),B.destroy()},Ae._vao=B,Ae._reglType="vao",Ae($)}return oe}var jl=35632,cm=35633,dm=35718,hm=35721;function pm(s,d,y,G){var U={},I={};function k(C,N,q,ye){this.name=C,this.id=N,this.location=q,this.info=ye}function X(C,N){for(var q=0;q<C.length;++q)if(C[q].id===N.id){C[q].location=N.location;return}C.push(N)}function W(C,N,q){var ye=C===jl?U:I,z=ye[N];if(!z){var ve=d.str(N);z=s.createShader(C),s.shaderSource(z,ve),s.compileShader(z),u.shaderError(s,z,ve,C,q),ye[N]=z}return z}var Z={},ee=[],J=0;function oe(C,N){this.id=J++,this.fragId=C,this.vertId=N,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,G.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Y(C,N,q){var ye,z,ve=W(jl,C.fragId),he=W(cm,C.vertId),Ne=C.program=s.createProgram();if(s.attachShader(Ne,ve),s.attachShader(Ne,he),q)for(ye=0;ye<q.length;++ye){var $=q[ye];s.bindAttribLocation(Ne,$[0],$[1])}s.linkProgram(Ne),u.linkError(s,Ne,d.str(C.fragId),d.str(C.vertId),N);var B=s.getProgramParameter(Ne,dm);G.profile&&(C.stats.uniformsCount=B);var Ae=C.uniforms;for(ye=0;ye<B;++ye)if(z=s.getActiveUniform(Ne,ye),z)if(z.size>1)for(var fe=0;fe<z.size;++fe){var K=z.name.replace("[0]","["+fe+"]");X(Ae,new k(K,d.id(K),s.getUniformLocation(Ne,K),z))}else X(Ae,new k(z.name,d.id(z.name),s.getUniformLocation(Ne,z.name),z));var ue=s.getProgramParameter(Ne,hm);G.profile&&(C.stats.attributesCount=ue);var de=C.attributes;for(ye=0;ye<ue;++ye)z=s.getActiveAttrib(Ne,ye),z&&X(de,new k(z.name,d.id(z.name),s.getAttribLocation(Ne,z.name),z))}G.profile&&(y.getMaxUniformsCount=function(){var C=0;return ee.forEach(function(N){N.stats.uniformsCount>C&&(C=N.stats.uniformsCount)}),C},y.getMaxAttributesCount=function(){var C=0;return ee.forEach(function(N){N.stats.attributesCount>C&&(C=N.stats.attributesCount)}),C});function Q(){U={},I={};for(var C=0;C<ee.length;++C)Y(ee[C],null,ee[C].attributes.map(function(N){return[N.location,N.name]}))}return{clear:function(){var C=s.deleteShader.bind(s);wr(U).forEach(C),U={},wr(I).forEach(C),I={},ee.forEach(function(N){s.deleteProgram(N.program)}),ee.length=0,Z={},y.shaderCount=0},program:function(C,N,q,ye){u.command(C>=0,"missing vertex shader",q),u.command(N>=0,"missing fragment shader",q);var z=Z[N];z||(z=Z[N]={});var ve=z[C];if(ve&&(ve.refCount++,!ye))return ve;var he=new oe(N,C);return y.shaderCount++,Y(he,q,ye),ve||(z[C]=he),ee.push(he),n(he,{destroy:function(){if(he.refCount--,he.refCount<=0){s.deleteProgram(he.program);var Ne=ee.indexOf(he);ee.splice(Ne,1),y.shaderCount--}z[he.vertId].refCount<=0&&(s.deleteShader(I[he.vertId]),delete I[he.vertId],delete Z[he.fragId][he.vertId]),Object.keys(Z[he.fragId]).length||(s.deleteShader(U[he.fragId]),delete U[he.fragId],delete Z[he.fragId])}})},restore:Q,shader:W,frag:-1,vert:-1}}var mm=6408,Vi=5121,vm=3333,$a=5126;function _m(s,d,y,G,U,I,k){function X(ee){var J;d.next===null?(u(U.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),J=Vi):(u(d.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),J=d.next.colorAttachments[0].texture._texture.type,u.optional(function(){I.oes_texture_float?(u(J===Vi||J===$a,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),J===$a&&u(k.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):u(J===Vi,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var oe=0,Y=0,Q=G.framebufferWidth,C=G.framebufferHeight,N=null;r(ee)?N=ee:ee&&(u.type(ee,"object","invalid arguments to regl.read()"),oe=ee.x|0,Y=ee.y|0,u(oe>=0&&oe<G.framebufferWidth,"invalid x offset for regl.read"),u(Y>=0&&Y<G.framebufferHeight,"invalid y offset for regl.read"),Q=(ee.width||G.framebufferWidth-oe)|0,C=(ee.height||G.framebufferHeight-Y)|0,N=ee.data||null),N&&(J===Vi?u(N instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):J===$a&&u(N instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),u(Q>0&&Q+oe<=G.framebufferWidth,"invalid width for read pixels"),u(C>0&&C+Y<=G.framebufferHeight,"invalid height for read pixels"),y();var q=Q*C*4;return N||(J===Vi?N=new Uint8Array(q):J===$a&&(N=N||new Float32Array(q))),u.isTypedArray(N,"data buffer for regl.read() must be a typedarray"),u(N.byteLength>=q,"data buffer for regl.read() too small"),s.pixelStorei(vm,4),s.readPixels(oe,Y,Q,C,mm,J,N),N}function W(ee){var J;return d.setFBO({framebuffer:ee.framebuffer},function(){J=X(ee)}),J}function Z(ee){return!ee||!("framebuffer"in ee)?X(ee):W(ee)}return Z}function _i(s){return Array.prototype.slice.call(s)}function gi(s){return _i(s).join("")}function gm(){var s=0,d=[],y=[];function G(J){for(var oe=0;oe<y.length;++oe)if(y[oe]===J)return d[oe];var Y="g"+s++;return d.push(Y),y.push(J),Y}function U(){var J=[];function oe(){J.push.apply(J,_i(arguments))}var Y=[];function Q(){var C="v"+s++;return Y.push(C),arguments.length>0&&(J.push(C,"="),J.push.apply(J,_i(arguments)),J.push(";")),C}return n(oe,{def:Q,toString:function(){return gi([Y.length>0?"var "+Y.join(",")+";":"",gi(J)])}})}function I(){var J=U(),oe=U(),Y=J.toString,Q=oe.toString;function C(N,q){oe(N,q,"=",J.def(N,q),";")}return n(function(){J.apply(J,_i(arguments))},{def:J.def,entry:J,exit:oe,save:C,set:function(N,q,ye){C(N,q),J(N,q,"=",ye,";")},toString:function(){return Y()+Q()}})}function k(){var J=gi(arguments),oe=I(),Y=I(),Q=oe.toString,C=Y.toString;return n(oe,{then:function(){return oe.apply(oe,_i(arguments)),this},else:function(){return Y.apply(Y,_i(arguments)),this},toString:function(){var N=C();return N&&(N="else{"+N+"}"),gi(["if(",J,"){",Q(),"}",N])}})}var X=U(),W={};function Z(J,oe){var Y=[];function Q(){var z="a"+Y.length;return Y.push(z),z}oe=oe||0;for(var C=0;C<oe;++C)Q();var N=I(),q=N.toString,ye=W[J]=n(N,{arg:Q,toString:function(){return gi(["function(",Y.join(),"){",q(),"}"])}});return ye}function ee(){var J=['"use strict";',X,"return {"];Object.keys(W).forEach(function(Q){J.push('"',Q,'":',W[Q].toString(),",")}),J.push("}");var oe=gi(J).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Y=Function.apply(null,d.concat(oe));return Y.apply(null,y)}return{global:X,link:G,block:U,proc:Z,scope:I,cond:k,compile:ee}}var yi="xyzw".split(""),Hl=5121,bi=1,vo=2,_o=0,go=1,yo=2,bo=3,Va=4,zl=5,Wl=6,Xl="dither",Yl="blend.enable",Kl="blend.color",xo="blend.equation",Eo="blend.func",ql="depth.enable",Ql="depth.func",Zl="depth.range",Jl="depth.mask",To="colorMask",eu="cull.enable",tu="cull.face",Ao="frontFace",wo="lineWidth",ru="polygonOffset.enable",So="polygonOffset.offset",nu="sample.alpha",iu="sample.enable",Co="sample.coverage",au="stencil.enable",su="stencil.mask",Lo="stencil.func",Ro="stencil.opFront",ji="stencil.opBack",ou="scissor.enable",ja="scissor.box",sn="viewport",Hi="profile",zn="framebuffer",zi="vert",Wi="frag",Wn="elements",Xn="primitive",Yn="count",Ha="offset",za="instances",Xi="vao",Oo="Width",Po="Height",xi=zn+Oo,Ei=zn+Po,ym=sn+Oo,bm=sn+Po,fu="drawingBuffer",lu=fu+Oo,uu=fu+Po,xm=[Eo,xo,Lo,Ro,ji,Co,sn,ja,So],Ti=34962,Do=34963,Em=35632,Tm=35633,cu=3553,Am=34067,wm=2884,Sm=3042,Cm=3024,Lm=2960,Rm=2929,Om=3089,Pm=32823,Dm=32926,Fm=32928,Fo=5126,Wa=35664,Xa=35665,Ya=35666,Io=5124,Ka=35667,qa=35668,Qa=35669,Go=35670,Za=35671,Ja=35672,es=35673,Yi=35674,Ki=35675,qi=35676,Qi=35678,Zi=35680,Mo=4,Ji=1028,Kn=1029,du=2304,No=2305,Im=32775,Gm=32776,Mm=519,En=7680,hu=0,pu=1,mu=32774,Nm=513,vu=36160,km=36064,Wr={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},_u=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Ai={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Tn={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},gu={frag:Em,vert:Tm},ko={cw:du,ccw:No};function ts(s){return Array.isArray(s)||r(s)||Br(s)}function yu(s){return s.sort(function(d,y){return d===sn?-1:y===sn?1:d<y?-1:1})}function Kt(s,d,y,G){this.thisDep=s,this.contextDep=d,this.propDep=y,this.append=G}function An(s){return s&&!(s.thisDep||s.contextDep||s.propDep)}function Ut(s){return new Kt(!1,!1,!1,s)}function yr(s,d){var y=s.type;if(y===_o){var G=s.data.length;return new Kt(!0,G>=1,G>=2,d)}else if(y===Va){var U=s.data;return new Kt(U.thisDep,U.contextDep,U.propDep,d)}else{if(y===zl)return new Kt(!1,!1,!1,d);if(y===Wl){for(var I=!1,k=!1,X=!1,W=0;W<s.data.length;++W){var Z=s.data[W];if(Z.type===go)X=!0;else if(Z.type===yo)k=!0;else if(Z.type===bo)I=!0;else if(Z.type===_o){I=!0;var ee=Z.data;ee>=1&&(k=!0),ee>=2&&(X=!0)}else Z.type===Va&&(I=I||Z.data.thisDep,k=k||Z.data.contextDep,X=X||Z.data.propDep)}return new Kt(I,k,X,d)}else return new Kt(y===bo,y===yo,y===go,d)}}var bu=new Kt(!1,!1,!1,function(){});function Bm(s,d,y,G,U,I,k,X,W,Z,ee,J,oe,Y,Q){var C=Z.Record,N={add:32774,subtract:32778,"reverse subtract":32779};y.ext_blend_minmax&&(N.min=Im,N.max=Gm);var q=y.angle_instanced_arrays,ye=y.webgl_draw_buffers,z=y.oes_vertex_array_object,ve={dirty:!0,profile:Q.profile},he={},Ne=[],$={},B={};function Ae(p){return p.replace(".","_")}function fe(p,c,x){var S=Ae(p);Ne.push(p),he[S]=ve[S]=!!x,$[S]=c}function K(p,c,x){var S=Ae(p);Ne.push(p),Array.isArray(x)?(ve[S]=x.slice(),he[S]=x.slice()):ve[S]=he[S]=x,B[S]=c}fe(Xl,Cm),fe(Yl,Sm),K(Kl,"blendColor",[0,0,0,0]),K(xo,"blendEquationSeparate",[mu,mu]),K(Eo,"blendFuncSeparate",[pu,hu,pu,hu]),fe(ql,Rm,!0),K(Ql,"depthFunc",Nm),K(Zl,"depthRange",[0,1]),K(Jl,"depthMask",!0),K(To,To,[!0,!0,!0,!0]),fe(eu,wm),K(tu,"cullFace",Kn),K(Ao,Ao,No),K(wo,wo,1),fe(ru,Pm),K(So,"polygonOffset",[0,0]),fe(nu,Dm),fe(iu,Fm),K(Co,"sampleCoverage",[1,!1]),fe(au,Lm),K(su,"stencilMask",-1),K(Lo,"stencilFunc",[Mm,0,-1]),K(Ro,"stencilOpSeparate",[Ji,En,En,En]),K(ji,"stencilOpSeparate",[Kn,En,En,En]),fe(ou,Om),K(ja,"scissor",[0,0,s.drawingBufferWidth,s.drawingBufferHeight]),K(sn,sn,[0,0,s.drawingBufferWidth,s.drawingBufferHeight]);var ue={gl:s,context:oe,strings:d,next:he,current:ve,draw:J,elements:I,buffer:U,shader:ee,attributes:Z.state,vao:Z,uniforms:W,framebuffer:X,extensions:y,timer:Y,isBufferArgs:ts},de={primTypes:bn,compareFuncs:Ai,blendFuncs:Wr,blendEquations:N,stencilOps:Tn,glTypes:Un,orientationType:ko};u.optional(function(){ue.isArrayLike=Mt}),ye&&(de.backBuffer=[Kn],de.drawBuffer=Ar(G.maxDrawbuffers,function(p){return p===0?[0]:Ar(p,function(c){return km+c})}));var Ke=0;function He(){var p=gm(),c=p.link,x=p.global;p.id=Ke++,p.batchId="0";var S=c(ue),O=p.shared={props:"a0"};Object.keys(ue).forEach(function(b){O[b]=x.def(S,".",b)}),u.optional(function(){p.CHECK=c(u),p.commandStr=u.guessCommand(),p.command=c(p.commandStr),p.assert=function(b,v,L){b("if(!(",v,"))",this.CHECK,".commandRaise(",c(L),",",this.command,");")},de.invalidBlendCombinations=_u});var T=p.next={},E=p.current={};Object.keys(B).forEach(function(b){Array.isArray(ve[b])&&(T[b]=x.def(O.next,".",b),E[b]=x.def(O.current,".",b))});var w=p.constants={};Object.keys(de).forEach(function(b){w[b]=x.def(JSON.stringify(de[b]))}),p.invoke=function(b,v){switch(v.type){case _o:var L=["this",O.context,O.props,p.batchId];return b.def(c(v.data),".call(",L.slice(0,Math.max(v.data.length+1,4)),")");case go:return b.def(O.props,v.data);case yo:return b.def(O.context,v.data);case bo:return b.def("this",v.data);case Va:return v.data.append(p,b),v.data.ref;case zl:return v.data.toString();case Wl:return v.data.map(function(P){return p.invoke(b,P)})}},p.attribCache={};var h={};return p.scopeAttrib=function(b){var v=d.id(b);if(v in h)return h[v];var L=Z.scope[v];L||(L=Z.scope[v]=new C);var P=h[v]=c(L);return P},p}function pe(p){var c=p.static,x=p.dynamic,S;if(Hi in c){var O=!!c[Hi];S=Ut(function(E,w){return O}),S.enable=O}else if(Hi in x){var T=x[Hi];S=yr(T,function(E,w){return E.invoke(w,T)})}return S}function _e(p,c){var x=p.static,S=p.dynamic;if(zn in x){var O=x[zn];return O?(O=X.getFramebuffer(O),u.command(O,"invalid framebuffer object"),Ut(function(E,w){var h=E.link(O),b=E.shared;w.set(b.framebuffer,".next",h);var v=b.context;return w.set(v,"."+xi,h+".width"),w.set(v,"."+Ei,h+".height"),h})):Ut(function(E,w){var h=E.shared;w.set(h.framebuffer,".next","null");var b=h.context;return w.set(b,"."+xi,b+"."+lu),w.set(b,"."+Ei,b+"."+uu),"null"})}else if(zn in S){var T=S[zn];return yr(T,function(E,w){var h=E.invoke(w,T),b=E.shared,v=b.framebuffer,L=w.def(v,".getFramebuffer(",h,")");u.optional(function(){E.assert(w,"!"+h+"||"+L,"invalid framebuffer object")}),w.set(v,".next",L);var P=b.context;return w.set(P,"."+xi,L+"?"+L+".width:"+P+"."+lu),w.set(P,"."+Ei,L+"?"+L+".height:"+P+"."+uu),L})}else return null}function $e(p,c,x){var S=p.static,O=p.dynamic;function T(h){if(h in S){var b=S[h];u.commandType(b,"object","invalid "+h,x.commandStr);var v=!0,L=b.x|0,P=b.y|0,j,ae;return"width"in b?(j=b.width|0,u.command(j>=0,"invalid "+h,x.commandStr)):v=!1,"height"in b?(ae=b.height|0,u.command(ae>=0,"invalid "+h,x.commandStr)):v=!1,new Kt(!v&&c&&c.thisDep,!v&&c&&c.contextDep,!v&&c&&c.propDep,function(re,Le){var be=re.shared.context,we=j;"width"in b||(we=Le.def(be,".",xi,"-",L));var Ce=ae;return"height"in b||(Ce=Le.def(be,".",Ei,"-",P)),[L,P,we,Ce]})}else if(h in O){var se=O[h],me=yr(se,function(re,Le){var be=re.invoke(Le,se);u.optional(function(){re.assert(Le,be+"&&typeof "+be+'==="object"',"invalid "+h)});var we=re.shared.context,Ce=Le.def(be,".x|0"),Re=Le.def(be,".y|0"),Ve=Le.def('"width" in ',be,"?",be,".width|0:","(",we,".",xi,"-",Ce,")"),wt=Le.def('"height" in ',be,"?",be,".height|0:","(",we,".",Ei,"-",Re,")");return u.optional(function(){re.assert(Le,Ve+">=0&&"+wt+">=0","invalid "+h)}),[Ce,Re,Ve,wt]});return c&&(me.thisDep=me.thisDep||c.thisDep,me.contextDep=me.contextDep||c.contextDep,me.propDep=me.propDep||c.propDep),me}else return c?new Kt(c.thisDep,c.contextDep,c.propDep,function(re,Le){var be=re.shared.context;return[0,0,Le.def(be,".",xi),Le.def(be,".",Ei)]}):null}var E=T(sn);if(E){var w=E;E=new Kt(E.thisDep,E.contextDep,E.propDep,function(h,b){var v=w.append(h,b),L=h.shared.context;return b.set(L,"."+ym,v[2]),b.set(L,"."+bm,v[3]),v})}return{viewport:E,scissor_box:T(ja)}}function Xe(p,c){var x=p.static,S=typeof x[Wi]=="string"&&typeof x[zi]=="string";if(S){if(Object.keys(c.dynamic).length>0)return null;var O=c.static,T=Object.keys(O);if(T.length>0&&typeof O[T[0]]=="number"){for(var E=[],w=0;w<T.length;++w)u(typeof O[T[w]]=="number","must specify all vertex attribute locations when using vaos"),E.push([O[T[w]]|0,T[w]]);return E}}return null}function it(p,c,x){var S=p.static,O=p.dynamic;function T(v){if(v in S){var L=d.id(S[v]);u.optional(function(){ee.shader(gu[v],L,u.guessCommand())});var P=Ut(function(){return L});return P.id=L,P}else if(v in O){var j=O[v];return yr(j,function(ae,se){var me=ae.invoke(se,j),re=se.def(ae.shared.strings,".id(",me,")");return u.optional(function(){se(ae.shared.shader,".shader(",gu[v],",",re,",",ae.command,");")}),re})}return null}var E=T(Wi),w=T(zi),h=null,b;return An(E)&&An(w)?(h=ee.program(w.id,E.id,null,x),b=Ut(function(v,L){return v.link(h)})):b=new Kt(E&&E.thisDep||w&&w.thisDep,E&&E.contextDep||w&&w.contextDep,E&&E.propDep||w&&w.propDep,function(v,L){var P=v.shared.shader,j;E?j=E.append(v,L):j=L.def(P,".",Wi);var ae;w?ae=w.append(v,L):ae=L.def(P,".",zi);var se=P+".program("+ae+","+j;return u.optional(function(){se+=","+v.command}),L.def(se+")")}),{frag:E,vert:w,progVar:b,program:h}}function Ft(p,c){var x=p.static,S=p.dynamic,O={},T=!1;function E(){if(Xi in x){var Le=x[Xi];return Le!==null&&Z.getVAO(Le)===null&&(Le=Z.createVAO(Le)),T=!0,O.vao=Le,Ut(function(we){var Ce=Z.getVAO(Le);return Ce?we.link(Ce):"null"})}else if(Xi in S){T=!0;var be=S[Xi];return yr(be,function(we,Ce){var Re=we.invoke(Ce,be);return Ce.def(we.shared.vao+".getVAO("+Re+")")})}return null}var w=E(),h=!1;function b(){if(Wn in x){var Le=x[Wn];if(O.elements=Le,ts(Le)){var be=O.elements=I.create(Le,!0);Le=I.getElements(be),h=!0}else Le&&(Le=I.getElements(Le),h=!0,u.command(Le,"invalid elements",c.commandStr));var we=Ut(function(Re,Ve){if(Le){var wt=Re.link(Le);return Re.ELEMENTS=wt,wt}return Re.ELEMENTS=null,null});return we.value=Le,we}else if(Wn in S){h=!0;var Ce=S[Wn];return yr(Ce,function(Re,Ve){var wt=Re.shared,Jt=wt.isBufferArgs,on=wt.elements,fn=Re.invoke(Ve,Ce),ln=Ve.def("null"),lr=Ve.def(Jt,"(",fn,")"),Yr=Re.cond(lr).then(ln,"=",on,".createStream(",fn,");").else(ln,"=",on,".getElements(",fn,");");return u.optional(function(){Re.assert(Yr.else,"!"+fn+"||"+ln,"invalid elements")}),Ve.entry(Yr),Ve.exit(Re.cond(lr).then(on,".destroyStream(",ln,");")),Re.ELEMENTS=ln,ln})}else if(T)return new Kt(w.thisDep,w.contextDep,w.propDep,function(Re,Ve){return Ve.def(Re.shared.vao+".currentVAO?"+Re.shared.elements+".getElements("+Re.shared.vao+".currentVAO.elements):null")});return null}var v=b();function L(){if(Xn in x){var Le=x[Xn];return O.primitive=Le,u.commandParameter(Le,bn,"invalid primitve",c.commandStr),Ut(function(we,Ce){return bn[Le]})}else if(Xn in S){var be=S[Xn];return yr(be,function(we,Ce){var Re=we.constants.primTypes,Ve=we.invoke(Ce,be);return u.optional(function(){we.assert(Ce,Ve+" in "+Re,"invalid primitive, must be one of "+Object.keys(bn))}),Ce.def(Re,"[",Ve,"]")})}else{if(h)return An(v)?v.value?Ut(function(we,Ce){return Ce.def(we.ELEMENTS,".primType")}):Ut(function(){return Mo}):new Kt(v.thisDep,v.contextDep,v.propDep,function(we,Ce){var Re=we.ELEMENTS;return Ce.def(Re,"?",Re,".primType:",Mo)});if(T)return new Kt(w.thisDep,w.contextDep,w.propDep,function(we,Ce){return Ce.def(we.shared.vao+".currentVAO?"+we.shared.vao+".currentVAO.primitive:"+Mo)})}return null}function P(Le,be){if(Le in x){var we=x[Le]|0;return be?O.offset=we:O.instances=we,u.command(!be||we>=0,"invalid "+Le,c.commandStr),Ut(function(Re,Ve){return be&&(Re.OFFSET=we),we})}else if(Le in S){var Ce=S[Le];return yr(Ce,function(Re,Ve){var wt=Re.invoke(Ve,Ce);return be&&(Re.OFFSET=wt,u.optional(function(){Re.assert(Ve,wt+">=0","invalid "+Le)})),wt})}else if(be){if(h)return Ut(function(Re,Ve){return Re.OFFSET=0,0});if(T)return new Kt(w.thisDep,w.contextDep,w.propDep,function(Re,Ve){return Ve.def(Re.shared.vao+".currentVAO?"+Re.shared.vao+".currentVAO.offset:0")})}else if(T)return new Kt(w.thisDep,w.contextDep,w.propDep,function(Re,Ve){return Ve.def(Re.shared.vao+".currentVAO?"+Re.shared.vao+".currentVAO.instances:-1")});return null}var j=P(Ha,!0);function ae(){if(Yn in x){var Le=x[Yn]|0;return O.count=Le,u.command(typeof Le=="number"&&Le>=0,"invalid vertex count",c.commandStr),Ut(function(){return Le})}else if(Yn in S){var be=S[Yn];return yr(be,function(Ve,wt){var Jt=Ve.invoke(wt,be);return u.optional(function(){Ve.assert(wt,"typeof "+Jt+'==="number"&&'+Jt+">=0&&"+Jt+"===("+Jt+"|0)","invalid vertex count")}),Jt})}else if(h)if(An(v)){if(v)return j?new Kt(j.thisDep,j.contextDep,j.propDep,function(Ve,wt){var Jt=wt.def(Ve.ELEMENTS,".vertCount-",Ve.OFFSET);return u.optional(function(){Ve.assert(wt,Jt+">=0","invalid vertex offset/element buffer too small")}),Jt}):Ut(function(Ve,wt){return wt.def(Ve.ELEMENTS,".vertCount")});var we=Ut(function(){return-1});return u.optional(function(){we.MISSING=!0}),we}else{var Ce=new Kt(v.thisDep||j.thisDep,v.contextDep||j.contextDep,v.propDep||j.propDep,function(Ve,wt){var Jt=Ve.ELEMENTS;return Ve.OFFSET?wt.def(Jt,"?",Jt,".vertCount-",Ve.OFFSET,":-1"):wt.def(Jt,"?",Jt,".vertCount:-1")});return u.optional(function(){Ce.DYNAMIC=!0}),Ce}else if(T){var Re=new Kt(w.thisDep,w.contextDep,w.propDep,function(Ve,wt){return wt.def(Ve.shared.vao,".currentVAO?",Ve.shared.vao,".currentVAO.count:-1")});return Re}return null}var se=L(),me=ae(),re=P(za,!1);return{elements:v,primitive:se,count:me,instances:re,offset:j,vao:w,vaoActive:T,elementsActive:h,static:O}}function Gt(p,c){var x=p.static,S=p.dynamic,O={};return Ne.forEach(function(T){var E=Ae(T);function w(h,b){if(T in x){var v=h(x[T]);O[E]=Ut(function(){return v})}else if(T in S){var L=S[T];O[E]=yr(L,function(P,j){return b(P,j,P.invoke(j,L))})}}switch(T){case eu:case Yl:case Xl:case au:case ql:case ou:case ru:case nu:case iu:case Jl:return w(function(h){return u.commandType(h,"boolean",T,c.commandStr),h},function(h,b,v){return u.optional(function(){h.assert(b,"typeof "+v+'==="boolean"',"invalid flag "+T,h.commandStr)}),v});case Ql:return w(function(h){return u.commandParameter(h,Ai,"invalid "+T,c.commandStr),Ai[h]},function(h,b,v){var L=h.constants.compareFuncs;return u.optional(function(){h.assert(b,v+" in "+L,"invalid "+T+", must be one of "+Object.keys(Ai))}),b.def(L,"[",v,"]")});case Zl:return w(function(h){return u.command(Mt(h)&&h.length===2&&typeof h[0]=="number"&&typeof h[1]=="number"&&h[0]<=h[1],"depth range is 2d array",c.commandStr),h},function(h,b,v){u.optional(function(){h.assert(b,h.shared.isArrayLike+"("+v+")&&"+v+".length===2&&typeof "+v+'[0]==="number"&&typeof '+v+'[1]==="number"&&'+v+"[0]<="+v+"[1]","depth range must be a 2d array")});var L=b.def("+",v,"[0]"),P=b.def("+",v,"[1]");return[L,P]});case Eo:return w(function(h){u.commandType(h,"object","blend.func",c.commandStr);var b="srcRGB"in h?h.srcRGB:h.src,v="srcAlpha"in h?h.srcAlpha:h.src,L="dstRGB"in h?h.dstRGB:h.dst,P="dstAlpha"in h?h.dstAlpha:h.dst;return u.commandParameter(b,Wr,E+".srcRGB",c.commandStr),u.commandParameter(v,Wr,E+".srcAlpha",c.commandStr),u.commandParameter(L,Wr,E+".dstRGB",c.commandStr),u.commandParameter(P,Wr,E+".dstAlpha",c.commandStr),u.command(_u.indexOf(b+", "+L)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+b+", "+L+")",c.commandStr),[Wr[b],Wr[L],Wr[v],Wr[P]]},function(h,b,v){var L=h.constants.blendFuncs;u.optional(function(){h.assert(b,v+"&&typeof "+v+'==="object"',"invalid blend func, must be an object")});function P(be,we){var Ce=b.def('"',be,we,'" in ',v,"?",v,".",be,we,":",v,".",be);return u.optional(function(){h.assert(b,Ce+" in "+L,"invalid "+T+"."+be+we+", must be one of "+Object.keys(Wr))}),Ce}var j=P("src","RGB"),ae=P("dst","RGB");u.optional(function(){var be=h.constants.invalidBlendCombinations;h.assert(b,be+".indexOf("+j+'+", "+'+ae+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var se=b.def(L,"[",j,"]"),me=b.def(L,"[",P("src","Alpha"),"]"),re=b.def(L,"[",ae,"]"),Le=b.def(L,"[",P("dst","Alpha"),"]");return[se,re,me,Le]});case xo:return w(function(h){if(typeof h=="string")return u.commandParameter(h,N,"invalid "+T,c.commandStr),[N[h],N[h]];if(typeof h=="object")return u.commandParameter(h.rgb,N,T+".rgb",c.commandStr),u.commandParameter(h.alpha,N,T+".alpha",c.commandStr),[N[h.rgb],N[h.alpha]];u.commandRaise("invalid blend.equation",c.commandStr)},function(h,b,v){var L=h.constants.blendEquations,P=b.def(),j=b.def(),ae=h.cond("typeof ",v,'==="string"');return u.optional(function(){function se(me,re,Le){h.assert(me,Le+" in "+L,"invalid "+re+", must be one of "+Object.keys(N))}se(ae.then,T,v),h.assert(ae.else,v+"&&typeof "+v+'==="object"',"invalid "+T),se(ae.else,T+".rgb",v+".rgb"),se(ae.else,T+".alpha",v+".alpha")}),ae.then(P,"=",j,"=",L,"[",v,"];"),ae.else(P,"=",L,"[",v,".rgb];",j,"=",L,"[",v,".alpha];"),b(ae),[P,j]});case Kl:return w(function(h){return u.command(Mt(h)&&h.length===4,"blend.color must be a 4d array",c.commandStr),Ar(4,function(b){return+h[b]})},function(h,b,v){return u.optional(function(){h.assert(b,h.shared.isArrayLike+"("+v+")&&"+v+".length===4","blend.color must be a 4d array")}),Ar(4,function(L){return b.def("+",v,"[",L,"]")})});case su:return w(function(h){return u.commandType(h,"number",E,c.commandStr),h|0},function(h,b,v){return u.optional(function(){h.assert(b,"typeof "+v+'==="number"',"invalid stencil.mask")}),b.def(v,"|0")});case Lo:return w(function(h){u.commandType(h,"object",E,c.commandStr);var b=h.cmp||"keep",v=h.ref||0,L="mask"in h?h.mask:-1;return u.commandParameter(b,Ai,T+".cmp",c.commandStr),u.commandType(v,"number",T+".ref",c.commandStr),u.commandType(L,"number",T+".mask",c.commandStr),[Ai[b],v,L]},function(h,b,v){var L=h.constants.compareFuncs;u.optional(function(){function se(){h.assert(b,Array.prototype.join.call(arguments,""),"invalid stencil.func")}se(v+"&&typeof ",v,'==="object"'),se('!("cmp" in ',v,")||(",v,".cmp in ",L,")")});var P=b.def('"cmp" in ',v,"?",L,"[",v,".cmp]",":",En),j=b.def(v,".ref|0"),ae=b.def('"mask" in ',v,"?",v,".mask|0:-1");return[P,j,ae]});case Ro:case ji:return w(function(h){u.commandType(h,"object",E,c.commandStr);var b=h.fail||"keep",v=h.zfail||"keep",L=h.zpass||"keep";return u.commandParameter(b,Tn,T+".fail",c.commandStr),u.commandParameter(v,Tn,T+".zfail",c.commandStr),u.commandParameter(L,Tn,T+".zpass",c.commandStr),[T===ji?Kn:Ji,Tn[b],Tn[v],Tn[L]]},function(h,b,v){var L=h.constants.stencilOps;u.optional(function(){h.assert(b,v+"&&typeof "+v+'==="object"',"invalid "+T)});function P(j){return u.optional(function(){h.assert(b,'!("'+j+'" in '+v+")||("+v+"."+j+" in "+L+")","invalid "+T+"."+j+", must be one of "+Object.keys(Tn))}),b.def('"',j,'" in ',v,"?",L,"[",v,".",j,"]:",En)}return[T===ji?Kn:Ji,P("fail"),P("zfail"),P("zpass")]});case So:return w(function(h){u.commandType(h,"object",E,c.commandStr);var b=h.factor|0,v=h.units|0;return u.commandType(b,"number",E+".factor",c.commandStr),u.commandType(v,"number",E+".units",c.commandStr),[b,v]},function(h,b,v){u.optional(function(){h.assert(b,v+"&&typeof "+v+'==="object"',"invalid "+T)});var L=b.def(v,".factor|0"),P=b.def(v,".units|0");return[L,P]});case tu:return w(function(h){var b=0;return h==="front"?b=Ji:h==="back"&&(b=Kn),u.command(!!b,E,c.commandStr),b},function(h,b,v){return u.optional(function(){h.assert(b,v+'==="front"||'+v+'==="back"',"invalid cull.face")}),b.def(v,'==="front"?',Ji,":",Kn)});case wo:return w(function(h){return u.command(typeof h=="number"&&h>=G.lineWidthDims[0]&&h<=G.lineWidthDims[1],"invalid line width, must be a positive number between "+G.lineWidthDims[0]+" and "+G.lineWidthDims[1],c.commandStr),h},function(h,b,v){return u.optional(function(){h.assert(b,"typeof "+v+'==="number"&&'+v+">="+G.lineWidthDims[0]+"&&"+v+"<="+G.lineWidthDims[1],"invalid line width")}),v});case Ao:return w(function(h){return u.commandParameter(h,ko,E,c.commandStr),ko[h]},function(h,b,v){return u.optional(function(){h.assert(b,v+'==="cw"||'+v+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),b.def(v+'==="cw"?'+du+":"+No)});case To:return w(function(h){return u.command(Mt(h)&&h.length===4,"color.mask must be length 4 array",c.commandStr),h.map(function(b){return!!b})},function(h,b,v){return u.optional(function(){h.assert(b,h.shared.isArrayLike+"("+v+")&&"+v+".length===4","invalid color.mask")}),Ar(4,function(L){return"!!"+v+"["+L+"]"})});case Co:return w(function(h){u.command(typeof h=="object"&&h,E,c.commandStr);var b="value"in h?h.value:1,v=!!h.invert;return u.command(typeof b=="number"&&b>=0&&b<=1,"sample.coverage.value must be a number between 0 and 1",c.commandStr),[b,v]},function(h,b,v){u.optional(function(){h.assert(b,v+"&&typeof "+v+'==="object"',"invalid sample.coverage")});var L=b.def('"value" in ',v,"?+",v,".value:1"),P=b.def("!!",v,".invert");return[L,P]})}}),O}function st(p,c){var x=p.static,S=p.dynamic,O={};return Object.keys(x).forEach(function(T){var E=x[T],w;if(typeof E=="number"||typeof E=="boolean")w=Ut(function(){return E});else if(typeof E=="function"){var h=E._reglType;h==="texture2d"||h==="textureCube"?w=Ut(function(b){return b.link(E)}):h==="framebuffer"||h==="framebufferCube"?(u.command(E.color.length>0,'missing color attachment for framebuffer sent to uniform "'+T+'"',c.commandStr),w=Ut(function(b){return b.link(E.color[0])})):u.commandRaise('invalid data for uniform "'+T+'"',c.commandStr)}else Mt(E)?w=Ut(function(b){var v=b.global.def("[",Ar(E.length,function(L){return u.command(typeof E[L]=="number"||typeof E[L]=="boolean","invalid uniform "+T,b.commandStr),E[L]}),"]");return v}):u.commandRaise('invalid or missing data for uniform "'+T+'"',c.commandStr);w.value=E,O[T]=w}),Object.keys(S).forEach(function(T){var E=S[T];O[T]=yr(E,function(w,h){return w.invoke(h,E)})}),O}function Vt(p,c){var x=p.static,S=p.dynamic,O={};return Object.keys(x).forEach(function(T){var E=x[T],w=d.id(T),h=new C;if(ts(E))h.state=bi,h.buffer=U.getBuffer(U.create(E,Ti,!1,!0)),h.type=0;else{var b=U.getBuffer(E);if(b)h.state=bi,h.buffer=b,h.type=0;else if(u.command(typeof E=="object"&&E,"invalid data for attribute "+T,c.commandStr),"constant"in E){var v=E.constant;h.buffer="null",h.state=vo,typeof v=="number"?h.x=v:(u.command(Mt(v)&&v.length>0&&v.length<=4,"invalid constant for attribute "+T,c.commandStr),yi.forEach(function(re,Le){Le<v.length&&(h[re]=v[Le])}))}else{ts(E.buffer)?b=U.getBuffer(U.create(E.buffer,Ti,!1,!0)):b=U.getBuffer(E.buffer),u.command(!!b,'missing buffer for attribute "'+T+'"',c.commandStr);var L=E.offset|0;u.command(L>=0,'invalid offset for attribute "'+T+'"',c.commandStr);var P=E.stride|0;u.command(P>=0&&P<256,'invalid stride for attribute "'+T+'", must be integer betweeen [0, 255]',c.commandStr);var j=E.size|0;u.command(!("size"in E)||j>0&&j<=4,'invalid size for attribute "'+T+'", must be 1,2,3,4',c.commandStr);var ae=!!E.normalized,se=0;"type"in E&&(u.commandParameter(E.type,Un,"invalid type for attribute "+T,c.commandStr),se=Un[E.type]);var me=E.divisor|0;u.optional(function(){"divisor"in E&&(u.command(me===0||q,'cannot specify divisor for attribute "'+T+'", instancing not supported',c.commandStr),u.command(me>=0,'invalid divisor for attribute "'+T+'"',c.commandStr));var re=c.commandStr,Le=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(E).forEach(function(be){u.command(Le.indexOf(be)>=0,'unknown parameter "'+be+'" for attribute pointer "'+T+'" (valid parameters are '+Le+")",re)})}),h.buffer=b,h.state=bi,h.size=j,h.normalized=ae,h.type=se||b.dtype,h.offset=L,h.stride=P,h.divisor=me}}O[T]=Ut(function(re,Le){var be=re.attribCache;if(w in be)return be[w];var we={isStream:!1};return Object.keys(h).forEach(function(Ce){we[Ce]=h[Ce]}),h.buffer&&(we.buffer=re.link(h.buffer),we.type=we.type||we.buffer+".dtype"),be[w]=we,we})}),Object.keys(S).forEach(function(T){var E=S[T];function w(h,b){var v=h.invoke(b,E),L=h.shared,P=h.constants,j=L.isBufferArgs,ae=L.buffer;u.optional(function(){h.assert(b,v+"&&(typeof "+v+'==="object"||typeof '+v+'==="function")&&('+j+"("+v+")||"+ae+".getBuffer("+v+")||"+ae+".getBuffer("+v+".buffer)||"+j+"("+v+'.buffer)||("constant" in '+v+"&&(typeof "+v+'.constant==="number"||'+L.isArrayLike+"("+v+".constant))))",'invalid dynamic attribute "'+T+'"')});var se={isStream:b.def(!1)},me=new C;me.state=bi,Object.keys(me).forEach(function(we){se[we]=b.def(""+me[we])});var re=se.buffer,Le=se.type;b("if(",j,"(",v,")){",se.isStream,"=true;",re,"=",ae,".createStream(",Ti,",",v,");",Le,"=",re,".dtype;","}else{",re,"=",ae,".getBuffer(",v,");","if(",re,"){",Le,"=",re,".dtype;",'}else if("constant" in ',v,"){",se.state,"=",vo,";","if(typeof "+v+'.constant === "number"){',se[yi[0]],"=",v,".constant;",yi.slice(1).map(function(we){return se[we]}).join("="),"=0;","}else{",yi.map(function(we,Ce){return se[we]+"="+v+".constant.length>"+Ce+"?"+v+".constant["+Ce+"]:0;"}).join(""),"}}else{","if(",j,"(",v,".buffer)){",re,"=",ae,".createStream(",Ti,",",v,".buffer);","}else{",re,"=",ae,".getBuffer(",v,".buffer);","}",Le,'="type" in ',v,"?",P.glTypes,"[",v,".type]:",re,".dtype;",se.normalized,"=!!",v,".normalized;");function be(we){b(se[we],"=",v,".",we,"|0;")}return be("size"),be("offset"),be("stride"),be("divisor"),b("}}"),b.exit("if(",se.isStream,"){",ae,".destroyStream(",re,");","}"),se}O[T]=yr(E,w)}),O}function Lt(p){var c=p.static,x=p.dynamic,S={};return Object.keys(c).forEach(function(O){var T=c[O];S[O]=Ut(function(E,w){return typeof T=="number"||typeof T=="boolean"?""+T:E.link(T)})}),Object.keys(x).forEach(function(O){var T=x[O];S[O]=yr(T,function(E,w){return E.invoke(w,T)})}),S}function $t(p,c,x,S,O){var T=p.static,E=p.dynamic;u.optional(function(){var be=[zn,zi,Wi,Wn,Xn,Ha,Yn,za,Hi,Xi].concat(Ne);function we(Ce){Object.keys(Ce).forEach(function(Re){u.command(be.indexOf(Re)>=0,'unknown parameter "'+Re+'"',O.commandStr)})}we(T),we(E)});var w=Xe(p,c),h=_e(p),b=$e(p,h,O),v=Ft(p,O),L=Gt(p,O),P=it(p,O,w);function j(be){var we=b[be];we&&(L[be]=we)}j(sn),j(Ae(ja));var ae=Object.keys(L).length>0,se={framebuffer:h,draw:v,shader:P,state:L,dirty:ae,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(se.profile=pe(p),se.uniforms=st(x,O),se.drawVAO=se.scopeVAO=v.vao,!se.drawVAO&&P.program&&!w&&y.angle_instanced_arrays&&v.static.elements){var me=!0,re=P.program.attributes.map(function(be){var we=c.static[be];return me=me&&!!we,we});if(me&&re.length>0){var Le=Z.getVAO(Z.createVAO({attributes:re,elements:v.static.elements}));se.drawVAO=new Kt(null,null,null,function(be,we){return be.link(Le)}),se.useVAO=!0}}return w?se.useVAO=!0:se.attributes=Vt(c,O),se.context=Lt(S),se}function jt(p,c,x){var S=p.shared,O=S.context,T=p.scope();Object.keys(x).forEach(function(E){c.save(O,"."+E);var w=x[E],h=w.append(p,c);Array.isArray(h)?T(O,".",E,"=[",h.join(),"];"):T(O,".",E,"=",h,";")}),c(T)}function Ht(p,c,x,S){var O=p.shared,T=O.gl,E=O.framebuffer,w;ye&&(w=c.def(O.extensions,".webgl_draw_buffers"));var h=p.constants,b=h.drawBuffer,v=h.backBuffer,L;x?L=x.append(p,c):L=c.def(E,".next"),S||c("if(",L,"!==",E,".cur){"),c("if(",L,"){",T,".bindFramebuffer(",vu,",",L,".framebuffer);"),ye&&c(w,".drawBuffersWEBGL(",b,"[",L,".colorAttachments.length]);"),c("}else{",T,".bindFramebuffer(",vu,",null);"),ye&&c(w,".drawBuffersWEBGL(",v,");"),c("}",E,".cur=",L,";"),S||c("}")}function Zt(p,c,x){var S=p.shared,O=S.gl,T=p.current,E=p.next,w=S.current,h=S.next,b=p.cond(w,".dirty");Ne.forEach(function(v){var L=Ae(v);if(!(L in x.state)){var P,j;if(L in E){P=E[L],j=T[L];var ae=Ar(ve[L].length,function(me){return b.def(P,"[",me,"]")});b(p.cond(ae.map(function(me,re){return me+"!=="+j+"["+re+"]"}).join("||")).then(O,".",B[L],"(",ae,");",ae.map(function(me,re){return j+"["+re+"]="+me}).join(";"),";"))}else{P=b.def(h,".",L);var se=p.cond(P,"!==",w,".",L);b(se),L in $?se(p.cond(P).then(O,".enable(",$[L],");").else(O,".disable(",$[L],");"),w,".",L,"=",P,";"):se(O,".",B[L],"(",P,");",w,".",L,"=",P,";")}}}),Object.keys(x.state).length===0&&b(w,".dirty=false;"),c(b)}function rr(p,c,x,S){var O=p.shared,T=p.current,E=O.current,w=O.gl;yu(Object.keys(x)).forEach(function(h){var b=x[h];if(!(S&&!S(b))){var v=b.append(p,c);if($[h]){var L=$[h];An(b)?v?c(w,".enable(",L,");"):c(w,".disable(",L,");"):c(p.cond(v).then(w,".enable(",L,");").else(w,".disable(",L,");")),c(E,".",h,"=",v,";")}else if(Mt(v)){var P=T[h];c(w,".",B[h],"(",v,");",v.map(function(j,ae){return P+"["+ae+"]="+j}).join(";"),";")}else c(w,".",B[h],"(",v,");",E,".",h,"=",v,";")}})}function Nt(p,c){q&&(p.instancing=c.def(p.shared.extensions,".angle_instanced_arrays"))}function Ze(p,c,x,S,O){var T=p.shared,E=p.stats,w=T.current,h=T.timer,b=x.profile;function v(){return typeof performance>"u"?"Date.now()":"performance.now()"}var L,P;function j(be){L=c.def(),be(L,"=",v(),";"),typeof O=="string"?be(E,".count+=",O,";"):be(E,".count++;"),Y&&(S?(P=c.def(),be(P,"=",h,".getNumPendingQueries();")):be(h,".beginQuery(",E,");"))}function ae(be){be(E,".cpuTime+=",v(),"-",L,";"),Y&&(S?be(h,".pushScopeStats(",P,",",h,".getNumPendingQueries(),",E,");"):be(h,".endQuery();"))}function se(be){var we=c.def(w,".profile");c(w,".profile=",be,";"),c.exit(w,".profile=",we,";")}var me;if(b){if(An(b)){b.enable?(j(c),ae(c.exit),se("true")):se("false");return}me=b.append(p,c),se(me)}else me=c.def(w,".profile");var re=p.block();j(re),c("if(",me,"){",re,"}");var Le=p.block();ae(Le),c.exit("if(",me,"){",Le,"}")}function nr(p,c,x,S,O){var T=p.shared;function E(h){switch(h){case Wa:case Ka:case Za:return 2;case Xa:case qa:case Ja:return 3;case Ya:case Qa:case es:return 4;default:return 1}}function w(h,b,v){var L=T.gl,P=c.def(h,".location"),j=c.def(T.attributes,"[",P,"]"),ae=v.state,se=v.buffer,me=[v.x,v.y,v.z,v.w],re=["buffer","normalized","offset","stride"];function Le(){c("if(!",j,".buffer){",L,".enableVertexAttribArray(",P,");}");var we=v.type,Ce;if(v.size?Ce=c.def(v.size,"||",b):Ce=b,c("if(",j,".type!==",we,"||",j,".size!==",Ce,"||",re.map(function(Ve){return j+"."+Ve+"!=="+v[Ve]}).join("||"),"){",L,".bindBuffer(",Ti,",",se,".buffer);",L,".vertexAttribPointer(",[P,Ce,we,v.normalized,v.stride,v.offset],");",j,".type=",we,";",j,".size=",Ce,";",re.map(function(Ve){return j+"."+Ve+"="+v[Ve]+";"}).join(""),"}"),q){var Re=v.divisor;c("if(",j,".divisor!==",Re,"){",p.instancing,".vertexAttribDivisorANGLE(",[P,Re],");",j,".divisor=",Re,";}")}}function be(){c("if(",j,".buffer){",L,".disableVertexAttribArray(",P,");",j,".buffer=null;","}if(",yi.map(function(we,Ce){return j+"."+we+"!=="+me[Ce]}).join("||"),"){",L,".vertexAttrib4f(",P,",",me,");",yi.map(function(we,Ce){return j+"."+we+"="+me[Ce]+";"}).join(""),"}")}ae===bi?Le():ae===vo?be():(c("if(",ae,"===",bi,"){"),Le(),c("}else{"),be(),c("}"))}S.forEach(function(h){var b=h.name,v=x.attributes[b],L;if(v){if(!O(v))return;L=v.append(p,c)}else{if(!O(bu))return;var P=p.scopeAttrib(b);u.optional(function(){p.assert(c,P+".state","missing attribute "+b)}),L={},Object.keys(new C).forEach(function(j){L[j]=c.def(P,".",j)})}w(p.link(h),E(h.info.type),L)})}function mt(p,c,x,S,O,T){for(var E=p.shared,w=E.gl,h,b=0;b<S.length;++b){var v=S[b],L=v.name,P=v.info.type,j=x.uniforms[L],ae=p.link(v),se=ae+".location",me;if(j){if(!O(j))continue;if(An(j)){var re=j.value;if(u.command(re!==null&&typeof re<"u",'missing uniform "'+L+'"',p.commandStr),P===Qi||P===Zi){u.command(typeof re=="function"&&(P===Qi&&(re._reglType==="texture2d"||re._reglType==="framebuffer")||P===Zi&&(re._reglType==="textureCube"||re._reglType==="framebufferCube")),"invalid texture for uniform "+L,p.commandStr);var Le=p.link(re._texture||re.color[0]._texture);c(w,".uniform1i(",se,",",Le+".bind());"),c.exit(Le,".unbind();")}else if(P===Yi||P===Ki||P===qi){u.optional(function(){u.command(Mt(re),"invalid matrix for uniform "+L,p.commandStr),u.command(P===Yi&&re.length===4||P===Ki&&re.length===9||P===qi&&re.length===16,"invalid length for matrix uniform "+L,p.commandStr)});var be=p.global.def("new Float32Array(["+Array.prototype.slice.call(re)+"])"),we=2;P===Ki?we=3:P===qi&&(we=4),c(w,".uniformMatrix",we,"fv(",se,",false,",be,");")}else{switch(P){case Fo:u.commandType(re,"number","uniform "+L,p.commandStr),h="1f";break;case Wa:u.command(Mt(re)&&re.length===2,"uniform "+L,p.commandStr),h="2f";break;case Xa:u.command(Mt(re)&&re.length===3,"uniform "+L,p.commandStr),h="3f";break;case Ya:u.command(Mt(re)&&re.length===4,"uniform "+L,p.commandStr),h="4f";break;case Go:u.commandType(re,"boolean","uniform "+L,p.commandStr),h="1i";break;case Io:u.commandType(re,"number","uniform "+L,p.commandStr),h="1i";break;case Za:u.command(Mt(re)&&re.length===2,"uniform "+L,p.commandStr),h="2i";break;case Ka:u.command(Mt(re)&&re.length===2,"uniform "+L,p.commandStr),h="2i";break;case Ja:u.command(Mt(re)&&re.length===3,"uniform "+L,p.commandStr),h="3i";break;case qa:u.command(Mt(re)&&re.length===3,"uniform "+L,p.commandStr),h="3i";break;case es:u.command(Mt(re)&&re.length===4,"uniform "+L,p.commandStr),h="4i";break;case Qa:u.command(Mt(re)&&re.length===4,"uniform "+L,p.commandStr),h="4i";break}c(w,".uniform",h,"(",se,",",Mt(re)?Array.prototype.slice.call(re):re,");")}continue}else me=j.append(p,c)}else{if(!O(bu))continue;me=c.def(E.uniforms,"[",d.id(L),"]")}P===Qi?(u(!Array.isArray(me),"must specify a scalar prop for textures"),c("if(",me,"&&",me,'._reglType==="framebuffer"){',me,"=",me,".color[0];","}")):P===Zi&&(u(!Array.isArray(me),"must specify a scalar prop for cube maps"),c("if(",me,"&&",me,'._reglType==="framebufferCube"){',me,"=",me,".color[0];","}")),u.optional(function(){function lr($r,Cu){p.assert(c,$r,'bad data or missing for uniform "'+L+'".  '+Cu)}function Yr($r){u(!Array.isArray(me),"must not specify an array type for uniform"),lr("typeof "+me+'==="'+$r+'"',"invalid type, expected "+$r)}function Gr($r,Cu){Array.isArray(me)?u(me.length===$r,"must have length "+$r):lr(E.isArrayLike+"("+me+")&&"+me+".length==="+$r,"invalid vector, should have length "+$r,p.commandStr)}function Su($r){u(!Array.isArray(me),"must not specify a value type"),lr("typeof "+me+'==="function"&&'+me+'._reglType==="texture'+($r===cu?"2d":"Cube")+'"',"invalid texture type",p.commandStr)}switch(P){case Io:Yr("number");break;case Ka:Gr(2);break;case qa:Gr(3);break;case Qa:Gr(4);break;case Fo:Yr("number");break;case Wa:Gr(2);break;case Xa:Gr(3);break;case Ya:Gr(4);break;case Go:Yr("boolean");break;case Za:Gr(2);break;case Ja:Gr(3);break;case es:Gr(4);break;case Yi:Gr(4);break;case Ki:Gr(9);break;case qi:Gr(16);break;case Qi:Su(cu);break;case Zi:Su(Am);break}});var Ce=1;switch(P){case Qi:case Zi:var Re=c.def(me,"._texture");c(w,".uniform1i(",se,",",Re,".bind());"),c.exit(Re,".unbind();");continue;case Io:case Go:h="1i";break;case Ka:case Za:h="2i",Ce=2;break;case qa:case Ja:h="3i",Ce=3;break;case Qa:case es:h="4i",Ce=4;break;case Fo:h="1f";break;case Wa:h="2f",Ce=2;break;case Xa:h="3f",Ce=3;break;case Ya:h="4f",Ce=4;break;case Yi:h="Matrix2fv";break;case Ki:h="Matrix3fv";break;case qi:h="Matrix4fv";break}if(h.charAt(0)==="M"){c(w,".uniform",h,"(",se,",");var Ve=Math.pow(P-Yi+2,2),wt=p.global.def("new Float32Array(",Ve,")");Array.isArray(me)?c("false,(",Ar(Ve,function(lr){return wt+"["+lr+"]="+me[lr]}),",",wt,")"):c("false,(Array.isArray(",me,")||",me," instanceof Float32Array)?",me,":(",Ar(Ve,function(lr){return wt+"["+lr+"]="+me+"["+lr+"]"}),",",wt,")"),c(");")}else if(Ce>1){for(var Jt=[],on=[],fn=0;fn<Ce;++fn)Array.isArray(me)?on.push(me[fn]):on.push(c.def(me+"["+fn+"]")),T&&Jt.push(c.def());T&&c("if(!",p.batchId,"||",Jt.map(function(lr,Yr){return lr+"!=="+on[Yr]}).join("||"),"){",Jt.map(function(lr,Yr){return lr+"="+on[Yr]+";"}).join("")),c(w,".uniform",h,"(",se,",",on.join(","),");"),T&&c("}")}else{if(u(!Array.isArray(me),"uniform value must not be an array"),T){var ln=c.def();c("if(!",p.batchId,"||",ln,"!==",me,"){",ln,"=",me,";")}c(w,".uniform",h,"(",se,",",me,");"),T&&c("}")}}}function Ue(p,c,x,S){var O=p.shared,T=O.gl,E=O.draw,w=S.draw;function h(){var Ce=w.elements,Re,Ve=c;return Ce?((Ce.contextDep&&S.contextDynamic||Ce.propDep)&&(Ve=x),Re=Ce.append(p,Ve),w.elementsActive&&Ve("if("+Re+")"+T+".bindBuffer("+Do+","+Re+".buffer.buffer);")):(Re=Ve.def(),Ve(Re,"=",E,".",Wn,";","if(",Re,"){",T,".bindBuffer(",Do,",",Re,".buffer.buffer);}","else if(",O.vao,".currentVAO){",Re,"=",p.shared.elements+".getElements("+O.vao,".currentVAO.elements);",z?"":"if("+Re+")"+T+".bindBuffer("+Do+","+Re+".buffer.buffer);","}")),Re}function b(){var Ce=w.count,Re,Ve=c;return Ce?((Ce.contextDep&&S.contextDynamic||Ce.propDep)&&(Ve=x),Re=Ce.append(p,Ve),u.optional(function(){Ce.MISSING&&p.assert(c,"false","missing vertex count"),Ce.DYNAMIC&&p.assert(Ve,Re+">=0","missing vertex count")})):(Re=Ve.def(E,".",Yn),u.optional(function(){p.assert(Ve,Re+">=0","missing vertex count")})),Re}var v=h();function L(Ce){var Re=w[Ce];return Re?Re.contextDep&&S.contextDynamic||Re.propDep?Re.append(p,x):Re.append(p,c):c.def(E,".",Ce)}var P=L(Xn),j=L(Ha),ae=b();if(typeof ae=="number"){if(ae===0)return}else x("if(",ae,"){"),x.exit("}");var se,me;q&&(se=L(za),me=p.instancing);var re=v+".type",Le=w.elements&&An(w.elements)&&!w.vaoActive;function be(){function Ce(){x(me,".drawElementsInstancedANGLE(",[P,ae,re,j+"<<(("+re+"-"+Hl+")>>1)",se],");")}function Re(){x(me,".drawArraysInstancedANGLE(",[P,j,ae,se],");")}v&&v!=="null"?Le?Ce():(x("if(",v,"){"),Ce(),x("}else{"),Re(),x("}")):Re()}function we(){function Ce(){x(T+".drawElements("+[P,ae,re,j+"<<(("+re+"-"+Hl+")>>1)"]+");")}function Re(){x(T+".drawArrays("+[P,j,ae]+");")}v&&v!=="null"?Le?Ce():(x("if(",v,"){"),Ce(),x("}else{"),Re(),x("}")):Re()}q&&(typeof se!="number"||se>=0)?typeof se=="string"?(x("if(",se,">0){"),be(),x("}else if(",se,"<0){"),we(),x("}")):be():we()}function at(p,c,x,S,O){var T=He(),E=T.proc("body",O);return u.optional(function(){T.commandStr=c.commandStr,T.command=T.link(c.commandStr)}),q&&(T.instancing=E.def(T.shared.extensions,".angle_instanced_arrays")),p(T,E,x,S),T.compile().body}function ct(p,c,x,S){Nt(p,c),x.useVAO?x.drawVAO?c(p.shared.vao,".setVAO(",x.drawVAO.append(p,c),");"):c(p.shared.vao,".setVAO(",p.shared.vao,".targetVAO);"):(c(p.shared.vao,".setVAO(null);"),nr(p,c,x,S.attributes,function(){return!0})),mt(p,c,x,S.uniforms,function(){return!0},!1),Ue(p,c,c,x)}function kt(p,c){var x=p.proc("draw",1);Nt(p,x),jt(p,x,c.context),Ht(p,x,c.framebuffer),Zt(p,x,c),rr(p,x,c.state),Ze(p,x,c,!1,!0);var S=c.shader.progVar.append(p,x);if(x(p.shared.gl,".useProgram(",S,".program);"),c.shader.program)ct(p,x,c,c.shader.program);else{x(p.shared.vao,".setVAO(null);");var O=p.global.def("{}"),T=x.def(S,".id"),E=x.def(O,"[",T,"]");x(p.cond(E).then(E,".call(this,a0);").else(E,"=",O,"[",T,"]=",p.link(function(w){return at(ct,p,c,w,1)}),"(",S,");",E,".call(this,a0);"))}Object.keys(c.state).length>0&&x(p.shared.current,".dirty=true;"),p.shared.vao&&x(p.shared.vao,".setVAO(null);")}function Xr(p,c,x,S){p.batchId="a1",Nt(p,c);function O(){return!0}nr(p,c,x,S.attributes,O),mt(p,c,x,S.uniforms,O,!1),Ue(p,c,c,x)}function qn(p,c,x,S){Nt(p,c);var O=x.contextDep,T=c.def(),E="a0",w="a1",h=c.def();p.shared.props=h,p.batchId=T;var b=p.scope(),v=p.scope();c(b.entry,"for(",T,"=0;",T,"<",w,";++",T,"){",h,"=",E,"[",T,"];",v,"}",b.exit);function L(re){return re.contextDep&&O||re.propDep}function P(re){return!L(re)}if(x.needsContext&&jt(p,v,x.context),x.needsFramebuffer&&Ht(p,v,x.framebuffer),rr(p,v,x.state,L),x.profile&&L(x.profile)&&Ze(p,v,x,!1,!0),S)x.useVAO?x.drawVAO?L(x.drawVAO)?v(p.shared.vao,".setVAO(",x.drawVAO.append(p,v),");"):b(p.shared.vao,".setVAO(",x.drawVAO.append(p,b),");"):b(p.shared.vao,".setVAO(",p.shared.vao,".targetVAO);"):(b(p.shared.vao,".setVAO(null);"),nr(p,b,x,S.attributes,P),nr(p,v,x,S.attributes,L)),mt(p,b,x,S.uniforms,P,!1),mt(p,v,x,S.uniforms,L,!0),Ue(p,b,v,x);else{var j=p.global.def("{}"),ae=x.shader.progVar.append(p,v),se=v.def(ae,".id"),me=v.def(j,"[",se,"]");v(p.shared.gl,".useProgram(",ae,".program);","if(!",me,"){",me,"=",j,"[",se,"]=",p.link(function(re){return at(Xr,p,x,re,2)}),"(",ae,");}",me,".call(this,a0[",T,"],",T,");")}}function _(p,c){var x=p.proc("batch",2);p.batchId="0",Nt(p,x);var S=!1,O=!0;Object.keys(c.context).forEach(function(j){S=S||c.context[j].propDep}),S||(jt(p,x,c.context),O=!1);var T=c.framebuffer,E=!1;T?(T.propDep?S=E=!0:T.contextDep&&S&&(E=!0),E||Ht(p,x,T)):Ht(p,x,null),c.state.viewport&&c.state.viewport.propDep&&(S=!0);function w(j){return j.contextDep&&S||j.propDep}Zt(p,x,c),rr(p,x,c.state,function(j){return!w(j)}),(!c.profile||!w(c.profile))&&Ze(p,x,c,!1,"a1"),c.contextDep=S,c.needsContext=O,c.needsFramebuffer=E;var h=c.shader.progVar;if(h.contextDep&&S||h.propDep)qn(p,x,c,null);else{var b=h.append(p,x);if(x(p.shared.gl,".useProgram(",b,".program);"),c.shader.program)qn(p,x,c,c.shader.program);else{x(p.shared.vao,".setVAO(null);");var v=p.global.def("{}"),L=x.def(b,".id"),P=x.def(v,"[",L,"]");x(p.cond(P).then(P,".call(this,a0,a1);").else(P,"=",v,"[",L,"]=",p.link(function(j){return at(qn,p,c,j,2)}),"(",b,");",P,".call(this,a0,a1);"))}}Object.keys(c.state).length>0&&x(p.shared.current,".dirty=true;"),p.shared.vao&&x(p.shared.vao,".setVAO(null);")}function M(p,c){var x=p.proc("scope",3);p.batchId="a2";var S=p.shared,O=S.current;jt(p,x,c.context),c.framebuffer&&c.framebuffer.append(p,x),yu(Object.keys(c.state)).forEach(function(E){var w=c.state[E],h=w.append(p,x);Mt(h)?h.forEach(function(b,v){x.set(p.next[E],"["+v+"]",b)}):x.set(S.next,"."+E,h)}),Ze(p,x,c,!0,!0),[Wn,Ha,Yn,za,Xn].forEach(function(E){var w=c.draw[E];w&&x.set(S.draw,"."+E,""+w.append(p,x))}),Object.keys(c.uniforms).forEach(function(E){var w=c.uniforms[E].append(p,x);Array.isArray(w)&&(w="["+w.join()+"]"),x.set(S.uniforms,"["+d.id(E)+"]",w)}),Object.keys(c.attributes).forEach(function(E){var w=c.attributes[E].append(p,x),h=p.scopeAttrib(E);Object.keys(new C).forEach(function(b){x.set(h,"."+b,w[b])})}),c.scopeVAO&&x.set(S.vao,".targetVAO",c.scopeVAO.append(p,x));function T(E){var w=c.shader[E];w&&x.set(S.shader,"."+E,w.append(p,x))}T(zi),T(Wi),Object.keys(c.state).length>0&&(x(O,".dirty=true;"),x.exit(O,".dirty=true;")),x("a1(",p.shared.context,",a0,",p.batchId,");")}function D(p){if(!(typeof p!="object"||Mt(p))){for(var c=Object.keys(p),x=0;x<c.length;++x)if(fr.isDynamic(p[c[x]]))return!0;return!1}}function Ee(p,c,x){var S=c.static[x];if(!S||!D(S))return;var O=p.global,T=Object.keys(S),E=!1,w=!1,h=!1,b=p.global.def("{}");T.forEach(function(L){var P=S[L];if(fr.isDynamic(P)){typeof P=="function"&&(P=S[L]=fr.unbox(P));var j=yr(P,null);E=E||j.thisDep,h=h||j.propDep,w=w||j.contextDep}else{switch(O(b,".",L,"="),typeof P){case"number":O(P);break;case"string":O('"',P,'"');break;case"object":Array.isArray(P)&&O("[",P.join(),"]");break;default:O(p.link(P));break}O(";")}});function v(L,P){T.forEach(function(j){var ae=S[j];if(fr.isDynamic(ae)){var se=L.invoke(P,ae);P(b,".",j,"=",se,";")}})}c.dynamic[x]=new fr.DynamicVariable(Va,{thisDep:E,contextDep:w,propDep:h,ref:b,append:v}),delete c.static[x]}function rt(p,c,x,S,O){var T=He();T.stats=T.link(O),Object.keys(c.static).forEach(function(w){Ee(T,c,w)}),xm.forEach(function(w){Ee(T,p,w)});var E=$t(p,c,x,S,T);return kt(T,E),M(T,E),_(T,E),n(T.compile(),{destroy:function(){E.shader.program.destroy()}})}return{next:he,current:ve,procs:function(){var p=He(),c=p.proc("poll"),x=p.proc("refresh"),S=p.block();c(S),x(S);var O=p.shared,T=O.gl,E=O.next,w=O.current;S(w,".dirty=false;"),Ht(p,c),Ht(p,x,null,!0);var h;q&&(h=p.link(q)),y.oes_vertex_array_object&&x(p.link(y.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var b=0;b<G.maxAttributes;++b){var v=x.def(O.attributes,"[",b,"]"),L=p.cond(v,".buffer");L.then(T,".enableVertexAttribArray(",b,");",T,".bindBuffer(",Ti,",",v,".buffer.buffer);",T,".vertexAttribPointer(",b,",",v,".size,",v,".type,",v,".normalized,",v,".stride,",v,".offset);").else(T,".disableVertexAttribArray(",b,");",T,".vertexAttrib4f(",b,",",v,".x,",v,".y,",v,".z,",v,".w);",v,".buffer=null;"),x(L),q&&x(h,".vertexAttribDivisorANGLE(",b,",",v,".divisor);")}return x(p.shared.vao,".currentVAO=null;",p.shared.vao,".setVAO(",p.shared.vao,".targetVAO);"),Object.keys($).forEach(function(P){var j=$[P],ae=S.def(E,".",P),se=p.block();se("if(",ae,"){",T,".enable(",j,")}else{",T,".disable(",j,")}",w,".",P,"=",ae,";"),x(se),c("if(",ae,"!==",w,".",P,"){",se,"}")}),Object.keys(B).forEach(function(P){var j=B[P],ae=ve[P],se,me,re=p.block();if(re(T,".",j,"("),Mt(ae)){var Le=ae.length;se=p.global.def(E,".",P),me=p.global.def(w,".",P),re(Ar(Le,function(be){return se+"["+be+"]"}),");",Ar(Le,function(be){return me+"["+be+"]="+se+"["+be+"];"}).join("")),c("if(",Ar(Le,function(be){return se+"["+be+"]!=="+me+"["+be+"]"}).join("||"),"){",re,"}")}else se=S.def(E,".",P),me=S.def(w,".",P),re(se,");",w,".",P,"=",se,";"),c("if(",se,"!==",me,"){",re,"}");x(re)}),p.compile()}(),compile:rt}}function Um(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var $m=34918,Vm=34919,xu=35007,jm=function(s,d){if(!d.ext_disjoint_timer_query)return null;var y=[];function G(){return y.pop()||d.ext_disjoint_timer_query.createQueryEXT()}function U(q){y.push(q)}var I=[];function k(q){var ye=G();d.ext_disjoint_timer_query.beginQueryEXT(xu,ye),I.push(ye),Y(I.length-1,I.length,q)}function X(){d.ext_disjoint_timer_query.endQueryEXT(xu)}function W(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Z=[];function ee(){return Z.pop()||new W}function J(q){Z.push(q)}var oe=[];function Y(q,ye,z){var ve=ee();ve.startQueryIndex=q,ve.endQueryIndex=ye,ve.sum=0,ve.stats=z,oe.push(ve)}var Q=[],C=[];function N(){var q,ye,z=I.length;if(z!==0){C.length=Math.max(C.length,z+1),Q.length=Math.max(Q.length,z+1),Q[0]=0,C[0]=0;var ve=0;for(q=0,ye=0;ye<I.length;++ye){var he=I[ye];d.ext_disjoint_timer_query.getQueryObjectEXT(he,Vm)?(ve+=d.ext_disjoint_timer_query.getQueryObjectEXT(he,$m),U(he)):I[q++]=he,Q[ye+1]=ve,C[ye+1]=q}for(I.length=q,q=0,ye=0;ye<oe.length;++ye){var Ne=oe[ye],$=Ne.startQueryIndex,B=Ne.endQueryIndex;Ne.sum+=Q[B]-Q[$];var Ae=C[$],fe=C[B];fe===Ae?(Ne.stats.gpuTime+=Ne.sum/1e6,J(Ne)):(Ne.startQueryIndex=Ae,Ne.endQueryIndex=fe,oe[q++]=Ne)}oe.length=q}}return{beginQuery:k,endQuery:X,pushScopeStats:Y,update:N,getNumPendingQueries:function(){return I.length},clear:function(){y.push.apply(y,I);for(var q=0;q<y.length;q++)d.ext_disjoint_timer_query.deleteQueryEXT(y[q]);I.length=0,y.length=0},restore:function(){I.length=0,y.length=0}}},Hm=16384,zm=256,Wm=1024,Xm=34962,Eu="webglcontextlost",Tu="webglcontextrestored",Au=1,Ym=2,Km=3;function wu(s,d){for(var y=0;y<s.length;++y)if(s[y]===d)return y;return-1}function qm(s){var d=Yd(s);if(!d)return null;var y=d.gl,G=y.getContextAttributes(),U=y.isContextLost(),I=Kd(y,d);if(!I)return null;var k=wa(),X=Um(),W=I.extensions,Z=jm(y,W),ee=Tr(),J=y.drawingBufferWidth,oe=y.drawingBufferHeight,Y={tick:0,time:0,viewportWidth:J,viewportHeight:oe,framebufferWidth:J,framebufferHeight:oe,drawingBufferWidth:J,drawingBufferHeight:oe,pixelRatio:d.pixelRatio},Q={},C={elements:null,primitive:4,count:-1,offset:0,instances:-1},N=Mh(y,W),q=Zh(y,X,d,ve),ye=up(y,W,q,X),z=um(y,W,N,X,q,ye,C);function ve(Ue){return z.destroyBuffer(Ue)}var he=pm(y,k,X,d),Ne=$p(y,W,N,function(){Ae.procs.poll()},Y,X,d),$=Vp(y,W,N,X,d),B=fm(y,W,N,Ne,$,X),Ae=Bm(y,k,W,N,q,ye,Ne,B,Q,z,he,C,Y,Z,d),fe=_m(y,B,Ae.procs.poll,Y,G,W,N),K=Ae.next,ue=y.canvas,de=[],Ke=[],He=[],pe=[d.onDestroy],_e=null;function $e(){if(de.length===0){Z&&Z.update(),_e=null;return}_e=ar.next($e),rr();for(var Ue=de.length-1;Ue>=0;--Ue){var at=de[Ue];at&&at(Y,null,0)}y.flush(),Z&&Z.update()}function Xe(){!_e&&de.length>0&&(_e=ar.next($e))}function it(){_e&&(ar.cancel($e),_e=null)}function Ft(Ue){Ue.preventDefault(),U=!0,it(),Ke.forEach(function(at){at()})}function Gt(Ue){y.getError(),U=!1,I.restore(),he.restore(),q.restore(),Ne.restore(),$.restore(),B.restore(),z.restore(),Z&&Z.restore(),Ae.procs.refresh(),Xe(),He.forEach(function(at){at()})}ue&&(ue.addEventListener(Eu,Ft,!1),ue.addEventListener(Tu,Gt,!1));function st(){de.length=0,it(),ue&&(ue.removeEventListener(Eu,Ft),ue.removeEventListener(Tu,Gt)),he.clear(),B.clear(),$.clear(),z.clear(),Ne.clear(),ye.clear(),q.clear(),Z&&Z.clear(),pe.forEach(function(Ue){Ue()})}function Vt(Ue){u(!!Ue,"invalid args to regl({...})"),u.type(Ue,"object","invalid args to regl({...})");function at(O){var T=n({},O);delete T.uniforms,delete T.attributes,delete T.context,delete T.vao,"stencil"in T&&T.stencil.op&&(T.stencil.opBack=T.stencil.opFront=T.stencil.op,delete T.stencil.op);function E(w){if(w in T){var h=T[w];delete T[w],Object.keys(h).forEach(function(b){T[w+"."+b]=h[b]})}}return E("blend"),E("depth"),E("cull"),E("stencil"),E("polygonOffset"),E("scissor"),E("sample"),"vao"in O&&(T.vao=O.vao),T}function ct(O,T){var E={},w={};return Object.keys(O).forEach(function(h){var b=O[h];if(fr.isDynamic(b)){w[h]=fr.unbox(b,h);return}else if(T&&Array.isArray(b)){for(var v=0;v<b.length;++v)if(fr.isDynamic(b[v])){w[h]=fr.unbox(b,h);return}}E[h]=b}),{dynamic:w,static:E}}var kt=ct(Ue.context||{},!0),Xr=ct(Ue.uniforms||{},!0),qn=ct(Ue.attributes||{},!1),_=ct(at(Ue),!1),M={gpuTime:0,cpuTime:0,count:0},D=Ae.compile(_,qn,Xr,kt,M),Ee=D.draw,rt=D.batch,p=D.scope,c=[];function x(O){for(;c.length<O;)c.push(null);return c}function S(O,T){var E;if(U&&u.raise("context lost"),typeof O=="function")return p.call(this,null,O,0);if(typeof T=="function")if(typeof O=="number")for(E=0;E<O;++E)p.call(this,null,T,E);else if(Array.isArray(O))for(E=0;E<O.length;++E)p.call(this,O[E],T,E);else return p.call(this,O,T,0);else if(typeof O=="number"){if(O>0)return rt.call(this,x(O|0),O|0)}else if(Array.isArray(O)){if(O.length)return rt.call(this,O,O.length)}else return Ee.call(this,O)}return n(S,{stats:M,destroy:function(){D.destroy()}})}var Lt=B.setFBO=Vt({framebuffer:fr.define.call(null,Au,"framebuffer")});function $t(Ue,at){var ct=0;Ae.procs.poll();var kt=at.color;kt&&(y.clearColor(+kt[0]||0,+kt[1]||0,+kt[2]||0,+kt[3]||0),ct|=Hm),"depth"in at&&(y.clearDepth(+at.depth),ct|=zm),"stencil"in at&&(y.clearStencil(at.stencil|0),ct|=Wm),u(!!ct,"called regl.clear with no buffer specified"),y.clear(ct)}function jt(Ue){if(u(typeof Ue=="object"&&Ue,"regl.clear() takes an object as input"),"framebuffer"in Ue)if(Ue.framebuffer&&Ue.framebuffer_reglType==="framebufferCube")for(var at=0;at<6;++at)Lt(n({framebuffer:Ue.framebuffer.faces[at]},Ue),$t);else Lt(Ue,$t);else $t(null,Ue)}function Ht(Ue){u.type(Ue,"function","regl.frame() callback must be a function"),de.push(Ue);function at(){var ct=wu(de,Ue);u(ct>=0,"cannot cancel a frame twice");function kt(){var Xr=wu(de,kt);de[Xr]=de[de.length-1],de.length-=1,de.length<=0&&it()}de[ct]=kt}return Xe(),{cancel:at}}function Zt(){var Ue=K.viewport,at=K.scissor_box;Ue[0]=Ue[1]=at[0]=at[1]=0,Y.viewportWidth=Y.framebufferWidth=Y.drawingBufferWidth=Ue[2]=at[2]=y.drawingBufferWidth,Y.viewportHeight=Y.framebufferHeight=Y.drawingBufferHeight=Ue[3]=at[3]=y.drawingBufferHeight}function rr(){Y.tick+=1,Y.time=Ze(),Zt(),Ae.procs.poll()}function Nt(){Ne.refresh(),Zt(),Ae.procs.refresh(),Z&&Z.update()}function Ze(){return(Tr()-ee)/1e3}Nt();function nr(Ue,at){u.type(at,"function","listener callback must be a function");var ct;switch(Ue){case"frame":return Ht(at);case"lost":ct=Ke;break;case"restore":ct=He;break;case"destroy":ct=pe;break;default:u.raise("invalid event, must be one of frame,lost,restore,destroy")}return ct.push(at),{cancel:function(){for(var kt=0;kt<ct.length;++kt)if(ct[kt]===at){ct[kt]=ct[ct.length-1],ct.pop();return}}}}var mt=n(Vt,{clear:jt,prop:fr.define.bind(null,Au),context:fr.define.bind(null,Ym),this:fr.define.bind(null,Km),draw:Vt({}),buffer:function(Ue){return q.create(Ue,Xm,!1,!1)},elements:function(Ue){return ye.create(Ue,!1)},texture:Ne.create2D,cube:Ne.createCube,renderbuffer:$.create,framebuffer:B.create,framebufferCube:B.createCube,vao:z.createVAO,attributes:G,frame:Ht,on:nr,limits:N,hasExtension:function(Ue){return N.extensions.indexOf(Ue.toLowerCase())>=0},read:fe,destroy:st,_gl:y,_refresh:Nt,poll:function(){rr(),Z&&Z.update()},now:Ze,stats:X});return d.onDone(null,mt),mt}return qm})})(Md);var Y_=Md.exports;const K_=X_(Y_);class ks{constructor(t,r){Pe(this,"x");Pe(this,"y");Pe(this,"current",[0,0]);Pe(this,"transition");this.x=t,this.y=r,this.current=[t,r]}set(t,r,n=0){const i=this.x,a=this.y;this.x=t,this.y=r,n===0||!gt.transition?(this.current=[t,r],this.transition=void 0):(this.current=[i,a],this.transition={from:[i,a],target:[t,r],duration:[0,n]})}move(t,r,n=0){this.set(this.x+t,this.y+r,n)}tick(t){if(!this.transition)return;const r=this.transition;if(r.duration[0]+=t,r.duration[0]>=r.duration[1])this.current=r.target,this.transition=void 0;else{const n=r.duration[0]/r.duration[1],i=-(Math.cos(Math.PI*n)-1)/2,a=r.from[0]+(r.target[0]-r.from[0])*i,o=r.from[1]+(r.target[1]-r.from[1])*i;this.current=[a,o]}}distance(t){return Math.sqrt((this.x-t.x)**2+(this.y-t.y)**2)}equals(t){return this.x===t.x&&this.y===t.y}clone(){return Object.assign(Object.create(Object.getPrototypeOf(this)),this)}static from(t){return new ks(t[0],t[1])}}var Ii=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function pn(){var e=new Ii(16);return Ii!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function ra(e){var t=new Ii(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function q_(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],f=t[5],l=t[6],m=t[7],g=t[8],F=t[9],V=t[10],ne=t[11],ge=t[12],ke=t[13],nt=t[14],Me=t[15],Je=r*f-n*o,je=r*l-i*o,xe=r*m-a*o,Be=n*l-i*f,We=n*m-a*f,Ot=i*m-a*l,yt=g*ke-F*ge,Ye=g*nt-V*ge,ut=g*Me-ne*ge,ft=F*nt-V*ke,Ge=F*Me-ne*ke,vt=V*Me-ne*nt,lt=Je*vt-je*Ge+xe*ft+Be*ut-We*Ye+Ot*yt;return lt?(lt=1/lt,e[0]=(f*vt-l*Ge+m*ft)*lt,e[1]=(i*Ge-n*vt-a*ft)*lt,e[2]=(ke*Ot-nt*We+Me*Be)*lt,e[3]=(V*We-F*Ot-ne*Be)*lt,e[4]=(l*ut-o*vt-m*Ye)*lt,e[5]=(r*vt-i*ut+a*Ye)*lt,e[6]=(nt*xe-ge*Ot-Me*je)*lt,e[7]=(g*Ot-V*xe+ne*je)*lt,e[8]=(o*Ge-f*ut+m*yt)*lt,e[9]=(n*ut-r*Ge-a*yt)*lt,e[10]=(ge*We-ke*xe+Me*Je)*lt,e[11]=(F*xe-g*We-ne*Je)*lt,e[12]=(f*Ye-o*ft-l*yt)*lt,e[13]=(r*ft-n*Ye+i*yt)*lt,e[14]=(ke*je-ge*Be-nt*Je)*lt,e[15]=(g*Be-F*je+V*Je)*lt,e):null}function Q_(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],f=t[4],l=t[5],m=t[6],g=t[7],F=t[8],V=t[9],ne=t[10],ge=t[11],ke=t[12],nt=t[13],Me=t[14],Je=t[15],je=r[0],xe=r[1],Be=r[2],We=r[3];return e[0]=je*n+xe*f+Be*F+We*ke,e[1]=je*i+xe*l+Be*V+We*nt,e[2]=je*a+xe*m+Be*ne+We*Me,e[3]=je*o+xe*g+Be*ge+We*Je,je=r[4],xe=r[5],Be=r[6],We=r[7],e[4]=je*n+xe*f+Be*F+We*ke,e[5]=je*i+xe*l+Be*V+We*nt,e[6]=je*a+xe*m+Be*ne+We*Me,e[7]=je*o+xe*g+Be*ge+We*Je,je=r[8],xe=r[9],Be=r[10],We=r[11],e[8]=je*n+xe*f+Be*F+We*ke,e[9]=je*i+xe*l+Be*V+We*nt,e[10]=je*a+xe*m+Be*ne+We*Me,e[11]=je*o+xe*g+Be*ge+We*Je,je=r[12],xe=r[13],Be=r[14],We=r[15],e[12]=je*n+xe*f+Be*F+We*ke,e[13]=je*i+xe*l+Be*V+We*nt,e[14]=je*a+xe*m+Be*ne+We*Me,e[15]=je*o+xe*g+Be*ge+We*Je,e}function br(e,t,r){var n=r[0],i=r[1],a=r[2],o,f,l,m,g,F,V,ne,ge,ke,nt,Me;return t===e?(e[12]=t[0]*n+t[4]*i+t[8]*a+t[12],e[13]=t[1]*n+t[5]*i+t[9]*a+t[13],e[14]=t[2]*n+t[6]*i+t[10]*a+t[14],e[15]=t[3]*n+t[7]*i+t[11]*a+t[15]):(o=t[0],f=t[1],l=t[2],m=t[3],g=t[4],F=t[5],V=t[6],ne=t[7],ge=t[8],ke=t[9],nt=t[10],Me=t[11],e[0]=o,e[1]=f,e[2]=l,e[3]=m,e[4]=g,e[5]=F,e[6]=V,e[7]=ne,e[8]=ge,e[9]=ke,e[10]=nt,e[11]=Me,e[12]=o*n+g*i+ge*a+t[12],e[13]=f*n+F*i+ke*a+t[13],e[14]=l*n+V*i+nt*a+t[14],e[15]=m*n+ne*i+Me*a+t[15]),e}function mn(e,t,r){var n=r[0],i=r[1],a=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Ts(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[4],o=t[5],f=t[6],l=t[7],m=t[8],g=t[9],F=t[10],V=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+m*n,e[5]=o*i+g*n,e[6]=f*i+F*n,e[7]=l*i+V*n,e[8]=m*i-a*n,e[9]=g*i-o*n,e[10]=F*i-f*n,e[11]=V*i-l*n,e}function Z_(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[0],o=t[1],f=t[2],l=t[3],m=t[8],g=t[9],F=t[10],V=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-m*n,e[1]=o*i-g*n,e[2]=f*i-F*n,e[3]=l*i-V*n,e[8]=a*n+m*i,e[9]=o*n+g*i,e[10]=f*n+F*i,e[11]=l*n+V*i,e}function Nd(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[0],o=t[1],f=t[2],l=t[3],m=t[4],g=t[5],F=t[6],V=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+m*n,e[1]=o*i+g*n,e[2]=f*i+F*n,e[3]=l*i+V*n,e[4]=m*i-a*n,e[5]=g*i-o*n,e[6]=F*i-f*n,e[7]=V*i-l*n,e}function J_(e,t,r,n,i){var a=1/Math.tan(t/2),o;return e[0]=a/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0?(o=1/(n-i),e[10]=(i+n)*o,e[14]=2*i*n*o):(e[10]=-1,e[14]=-2*n),e}var eg=J_;function kd(){var e=new Ii(4);return Ii!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function mf(e,t,r,n){var i=new Ii(4);return i[0]=e,i[1]=t,i[2]=r,i[3]=n,i}function tg(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*a+r[12]*o,e[1]=r[1]*n+r[5]*i+r[9]*a+r[13]*o,e[2]=r[2]*n+r[6]*i+r[10]*a+r[14]*o,e[3]=r[3]*n+r[7]*i+r[11]*a+r[15]*o,e}(function(){var e=kd();return function(t,r,n,i,a,o){var f,l;for(r||(r=4),n||(n=0),i?l=Math.min(i*r+n,t.length):l=t.length,f=n;f<l;f+=r)e[0]=t[f],e[1]=t[f+1],e[2]=t[f+2],e[3]=t[f+3],a(e,e,o),t[f]=e[0],t[f+1]=e[1],t[f+2]=e[2],t[f+3]=e[3];return t}})();class rg{constructor(t){Pe(this,"drawPlayerCommand");Pe(this,"drawPlayerShadowCommand");Pe(this,"playerTextures",new Map);Pe(this,"textures",new Map);const r=t.ctx,n=a=>r.prop(a);this.drawPlayerCommand=r({vert:cc,frag:ng,uniforms:{u_projection:n("u_projection"),u_texture:n("u_texture")},attributes:{a_position:r.buffer([[-1,-1],[1,-1],[1,1],[-1,1]]),a_uv:r.buffer([[0,0],[1,0],[1,1],[0,1]])},elements:r.elements([[2,1,0],[0,3,2]]),blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:1,dstRGB:"one minus src alpha",dstAlpha:1},equation:{rgb:"add",alpha:"add"}}});const i=a=>r.prop(a);this.drawPlayerShadowCommand=r({vert:cc,frag:ig,uniforms:{u_projection:i("u_projection")},attributes:{a_position:r.buffer([[-1,-1],[1,-1],[1,1],[-1,1]]),a_uv:r.buffer([[0,0],[1,0],[1,1],[0,1]])},elements:r.elements([[2,1,0],[0,3,2]]),blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:1,dstRGB:"one minus src alpha",dstAlpha:1},equation:{rgb:"add",alpha:"add"}}})}draw(t,r,n){const i=Dr(),a=At(),o=ge=>[[0,0,0],[.2,0,-.2],[-.2,0,.2],[.2,0,.2],[-.2,0,-.2]][ge]??[0,0,0],f=[],l=[],m=[],g=[],F=this.getTexture("dizziness"),V=this.getTexture("arrow"),ne=new Map;for(const ge of a.players.values()){ge.position.tick(n);const[ke,nt]=ge.position.current,Me=ra(r);if(!ge.position.transition){const yt=i.indexFromPosition([ge.position.x,ge.position.y]),Ye=ne.get(yt)??0;ne.set(yt,Ye+1),br(Me,Me,o(Ye))}const Je=this.getPlayerTexture(ge.id);if(!Je)continue;const je=Je.height/Je.width;br(Me,Me,[ke,0,nt]);const xe=ra(Me),Be=.4*je;if(br(xe,xe,[0,Be,0]),mn(xe,xe,[.4,-Be,1]),f.push({u_projection:xe,u_texture:Je}),F&&ge.dizziness){const yt=ra(Me);br(yt,yt,[0,2*Be,.1]),mn(yt,yt,[.25,-.25,1]),l.push({u_projection:yt,u_texture:F})}if(V){let yt=[ge.direction];if(ge.active){const Ye=hr().move.accept;Ye.length&&(yt=Ye)}for(const Ye of yt){const ut={[ht.UP]:0,[ht.RIGHT]:1,[ht.DOWN]:2,[ht.LEFT]:3}[Ye],ft=ra(Me),Ge=Math.sin(ut*Math.PI/2)*.5;let vt=-Math.cos(ut*Math.PI/2)*.5;Ye===ht.UP&&(vt+=-.2),br(ft,ft,[Ge,.1,vt]),mn(ft,ft,[.25,1,.25]),Ts(ft,ft,Math.PI/2),Nd(ft,ft,ut*Math.PI/2),l.push({u_projection:ft,u_texture:V})}}const We=ra(Me);br(We,We,[0,.01,0]),Ts(We,We,Math.PI/2),mn(We,We,[.4,.2,1]),m.push({u_projection:We});const Ot=t.projectPoint([ke,2*Be,nt],r);g.push([ge.name,Ot])}this.drawPlayerCommand(f),this.drawPlayerShadowCommand(m),this.drawPlayerCommand(l),a.playersLabel=g}getTexture(t){let r=this.textures.get(t);if(r===void 0){const n=Fn().getTexture(t);if(r=en().ctx.texture(n),!r)return;this.textures.set(t,r)}return r}getPlayerTexture(t){let r=this.playerTextures.get(t);if(r===void 0){const n=`player-${t}`,i=Fn().getTexture(n);if(r=en().ctx.texture(i),!r)return;this.playerTextures.set(t,r)}return r}}const cc=`
precision mediump float;
attribute vec2 a_position;
attribute vec2 a_uv;

uniform mat4 u_projection;

varying vec2 uv;

void main() {
  uv = a_uv;
  gl_Position = u_projection * vec4(a_position, 0, 1);
}
`,ng=`
precision mediump float;
uniform sampler2D u_texture;

varying vec2 uv;

void main() {
  vec4 color = texture2D(u_texture, uv);
  if (color.a < 0.1) discard;
  gl_FragColor = color;
}
`,ig=`
precision mediump float;

varying vec2 uv;

void main() {
  float distance_to_center = distance(uv, vec2(0.5));
  if (distance_to_center > 0.5) discard;
  gl_FragColor = vec4(0.1, 0.1, 0.1, 0.8);
}
`;class ag{constructor(t){Pe(this,"fbo");Pe(this,"width");Pe(this,"height");Pe(this,"changed",!0);Pe(this,"updateMapCommand");Pe(this,"mapCommand");Pe(this,"undergroundCommand");Pe(this,"skyCommand");Pe(this,"textures",new Map);const r=t.ctx,n=Dr(),i=(this.width=n.width)*ii.TILE_SIZE,a=(this.height=n.height)*ii.TILE_SIZE;this.fbo=r.framebuffer({width:i,height:a});const o=m=>r.prop(m);this.updateMapCommand=r({vert:dc,frag:hc,framebuffer:this.fbo,uniforms:{u_projection:o("u_projection"),u_texture:o("u_texture")},attributes:{a_position:r.buffer([[-1,-1],[1,-1],[1,1],[-1,1]]),a_uv:r.buffer([[0,0],[1,0],[1,1],[0,1]])},elements:r.elements([[2,1,0],[0,3,2]]),blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"src alpha",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}}});const f=m=>r.prop(m);this.mapCommand=r({vert:dc,frag:hc,uniforms:{u_projection:f("u_projection"),u_texture:f("u_texture")},attributes:{a_position:r.buffer([[-1,1],[1,1],[1,-1],[-1,-1]]),a_uv:r.buffer([[0,0],[1,0],[1,1],[0,1]])},elements:r.elements([[2,1,0],[0,3,2]]),blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"src alpha",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}}});const l=m=>r.prop(m);this.undergroundCommand=r({vert:sg,frag:og,uniforms:{u_projection:l("u_projection"),u_color:mf(.4609375,.640625,.2890625,1)},attributes:{a_position:r.buffer([[-1,1,-1],[1,1,-1],[1,1,1],[-1,1,1],[-1,-1,1],[1,-1,1],[1,1,1],[-1,1,1],[-1,-1,-1],[-1,1,-1],[-1,1,1],[-1,-1,1],[1,-1,-1],[1,-1,1],[1,1,1],[1,1,-1]])},elements:r.elements([[2,1,0],[0,3,2],[6,5,4],[4,7,6],[10,9,8],[8,11,10],[14,13,12],[12,15,14]]),blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"src alpha",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}}}),this.skyCommand=r({vert:fg,frag:lg,uniforms:{u_projection:l("u_projection"),u_color:mf(.4921875,.8359375,.8515625,1)},attributes:{a_position:r.buffer([[-1,-1],[1,-1],[1,1],[-1,1]])},elements:r.elements([[2,1,0],[0,3,2]]),blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"src alpha",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}}})}draw(t,r){const n=Dr();if(this.changed){t.ctx.clear({depth:1,color:[0,0,0,0],framebuffer:this.fbo});const g=[];for(const F in n.flatTiles){const V=n.flatTiles[F],ne=this.getTexture(V);if(!ne)continue;const ge=pn(),[ke,nt]=n.indexFromFlat(parseInt(F));br(ge,ge,[-1,1,0]),mn(ge,ge,[1/n.width,-1/n.height,0]),br(ge,ge,[ke*2+1,nt*2+1,0]),g.push({u_projection:ge,u_texture:ne})}this.updateMapCommand(g),this.changed=!1}const i=Math.floor(n.width/2),a=Math.floor(n.height/2),o=pn();br(o,r,[i,-.01,a]),mn(o,o,[n.width/2+.5,5,n.height/2+.5]),br(o,o,[0,-1,0]),this.undergroundCommand({u_projection:o});const f=pn();br(f,r,[i,25,a-10]),mn(f,f,[100,100,1]),this.skyCommand({u_projection:f});const l=pn();br(l,r,[i,0,a]),Ts(l,l,Math.PI/2),mn(l,l,[this.width/2,this.height/2,1]),this.mapCommand({u_projection:l,u_texture:this.fbo})}getTexture(t){let r=this.textures.get(t);if(r===void 0){const n=ii.tileImage(t);if(!n||(r=en().ctx.texture(n),!r))return;this.textures.set(t,r)}return r}}const dc=`
precision mediump float;
attribute vec2 a_position;
attribute vec2 a_uv;

uniform mat4 u_projection;

varying vec2 uv;

void main() {
  uv = a_uv;
  gl_Position = u_projection * vec4(a_position, 0, 1);
}
`,hc=`
precision mediump float;
uniform sampler2D u_texture;

varying vec2 uv;

void main() {
  gl_FragColor = texture2D(u_texture, uv);
}
`,sg=`
precision mediump float;
attribute vec3 a_position;

uniform mat4 u_projection;

varying float height;
void main() {
  height = a_position.y;
  gl_Position = u_projection * vec4(a_position, 1);
}
`,og=`
precision mediump float;
uniform vec4 u_color;

varying float height;
void main() {
  gl_FragColor = u_color * height;
  if (height < 0.995) {
    gl_FragColor -= vec4(0.1, 0.1, 0.1, 0);
  }
}
`,fg=`
precision mediump float;
attribute vec2 a_position;

uniform mat4 u_projection;

void main() {
  gl_Position = u_projection * vec4(a_position, 0, 1);
}
`,lg=`
precision mediump float;
uniform vec4 u_color;

void main() {
  gl_FragColor = u_color;
}
`;class ug{constructor(t){Pe(this,"damagedCommand");Pe(this,"textures",new Map);const r=t.ctx,n=i=>r.prop(i);this.damagedCommand=r({vert:cg,frag:dg,uniforms:{u_projection:n("u_projection"),u_direction:n("u_direction"),u_texture:n("u_texture"),u_time:n("u_time")},attributes:{a_position:r.buffer([[-1,-1],[1,-1],[1,1],[-1,1]]),a_uv:r.buffer([[0,0],[1,0],[1,1],[0,1]])},elements:r.elements([[2,1,0],[0,3,2]]),blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:1,dstRGB:"one minus src alpha",dstAlpha:1},equation:{rgb:"add",alpha:"add"}}})}draw(t,r,n){const i=Gd(),a=[];for(const o of i.inner.values())if(i.check("damaged",o)){o.time+=n;const f=this.getTexture("fx-damaged");if(!f)continue;const[l,m]=o.position,g=pn();br(g,r,[l,.5,m+.1]),mn(g,g,[.2,-.2,1]),a.push({u_time:o.time,u_direction:o.direction,u_projection:g,u_texture:f})}this.damagedCommand(a)}getTexture(t){let r=this.textures.get(t);if(r===void 0){const n=Fn().getTexture(t);if(r=en().ctx.texture(n),!r)return;this.textures.set(t,r)}return r}}const cg=`
precision mediump float;
attribute vec2 a_position;
attribute vec2 a_uv;

uniform mat4 u_projection;
uniform vec2 u_direction;
uniform float u_time;

varying vec2 uv;

void main() {
  uv = a_uv;
  vec2 move = u_direction * u_time / 800.0 * 2.0;
  gl_Position = u_projection * vec4(a_position - move, 0, 1);
}
`,dg=`
precision mediump float;
uniform sampler2D u_texture;
uniform float u_time;

varying vec2 uv;

void main() {
  float t = u_time / 800.0;
  vec4 color = texture2D(u_texture, uv);
  gl_FragColor = vec4(color.rgb, color.a * (1.0 - t));
}
`,en=()=>Bd,hg=e=>Bd=new pg(e);let Bd;class pg{constructor(t){Pe(this,"canvas");Pe(this,"ctx");Pe(this,"viewport",600);Pe(this,"paused",!0);Pe(this,"position",new ks(0,0));Pe(this,"aspect",NaN);Pe(this,"width",NaN);Pe(this,"height",NaN);Pe(this,"backgroundRender");Pe(this,"playersRender");Pe(this,"fxRender");this.canvas=t,this.ctx=K_({pixelRatio:1,canvas:t}),this.backgroundRender=new ag(this),this.playersRender=new rg(this),this.fxRender=new ug(this),this.resize(),window.addEventListener("resize",this.resize.bind(this))}start(){const t=this.paused;this.paused=!1,t&&this.draw()}stop(){this.paused=!0}draw(t=Date.now()){if(this.paused)return;const r=Date.now(),n=r-t;this.position.tick(n);const i=n<=1e3/60;if(requestAnimationFrame(()=>this.draw(i?t:r)),i)return;this.ctx.poll(),this.clear();const f=eg(pn(),Math.PI/3,this.aspect,1,1e4),l=pn(),m=5,g=30*Math.PI/180,F=m*Math.sin(g),V=m*Math.cos(g),ne=.8,[ge,ke]=this.position.current;br(l,l,[gt.x+ge,gt.y+ne+F,gt.z+ke+V]),Z_(l,l,gt.angleY*Math.PI/180),Ts(l,l,gt.angleX*Math.PI/180-g),Nd(l,l,gt.angleZ*Math.PI/180);const nt=q_(pn(),l),Me=Q_(pn(),f,nt);this.backgroundRender.draw(this,Me),this.playersRender.draw(this,Me,n),this.fxRender.draw(this,Me,n)}clear(){this.ctx.clear({color:[0,0,0,1],depth:1})}resize(){let{width:t,height:r}=this.canvas.getBoundingClientRect();const n=window.devicePixelRatio;this.canvas.height=r*n,this.canvas.width=t*n,this.aspect=t/r,this.height=r,this.width=t}projectPoint(t,r){const n=mf(t[0],t[1],t[2],1),i=tg(kd(),n,r);return[(i[0]/i[3]+1)*.5*this.width,(1-i[1]/i[3])*.5*this.height]}}const ai=6,mg=.4;class vg{constructor(t,r,n,i,a,o){Pe(this,"active",!1);Pe(this,"health",ai);Pe(this,"dizziness",0);Pe(this,"fixedDirection",!0);Pe(this,"doubleDice",0);Pe(this,"fixedDices",[]);Pe(this,"immune",0);Pe(this,"doubleTaskScore",0);Pe(this,"doubleDamage",0);this.id=t,this.name=r,this.score=n,this.color=i,this.position=a,this.direction=o}async walk(){const r=Dr().nextPosition([this.position.x,this.position.y],this.direction);if(r.size===0)throw new Error("No moves available");const n=hr();this.fixedDirection?this.fixedDirection=!1:this.direction=r.size===1?r.keys().next().value:await n.move.input("選擇方向",Array.from(r.keys()));const i=r.get(this.direction);this.position.set(this.position.x+i[0],this.position.y+i[1],200);const a=en();a.position=this.position.clone(),await n.wait(200)}async trigger(t){const r=Dr(),n=At();t??(t=r.getTile(this.position.x,this.position.y)),console.group(`${this.name} 抵達 ${ii.tileText(t)}`);const i={[ur.Spawner]:async()=>{console.log("獲得 50 分"),n.messages.push(`${this.name} 獲得 50 分`),this.score+=50,n.victoryScore<=this.score&&(console.log("獲勝"),n.messages.push(`${this.name} 獲勝`),n.winner=this,Bs().running=!1)},[ur.Task]:async()=>{const a=G_();console.log(`獲得任務 ${a[0]}`),n.messages.push(`${this.name} 獲得任務 ${a[0]}`),await n.setEvent(this,"任務",a,!0)},[ur.Opportunity]:async()=>{const a=V_();console.log(`獲得機會 ${a[0]}`),n.messages.push(`${this.name} 獲得機會 ${a[0]}`),await n.setEvent(this,"機會",a)},[ur.Destiny]:async()=>{const a=U_();console.log(`獲得命運 ${a[0]}`),n.messages.push(`${this.name} 獲得命運 ${a[0]}`),await n.setEvent(this,"命運",a)},[ur.Punishment]:async()=>{const a=H_();console.log(`獲得懲罰 ${a[0]}`),n.messages.push(`${this.name} 獲得懲罰 ${a[0]}`),await n.setEvent(this,"懲罰",a)},[ur.Teleport]:async()=>{const a=hr();if(!await a.confirm.input("是否傳送"))return;const o=r.teleports.filter(l=>l[0]!==this.position.x&&l[1]!==this.position.y);Es(o);const f=o.pop();console.log(`傳送至 ${f}`),n.messages.push(`${this.name} 傳送至 ${f}`),await this.teleport(f),await a.wait(500)},[ur.Prison]:async()=>{console.log("被關 1 回合"),n.messages.push(`${this.name} 被關 1 回合`),this.dizziness++},[ur.Hospital]:async()=>{console.log("被治療 1 回合"),n.messages.push(`${this.name} 被治療 1 回合`),this.health=ai,this.dizziness++},[ur.Empty](){throw new Error("Unreachable")}}[t];await i(),console.groupEnd()}async attack(t,r=!1){const n=Dr(),i=At();if(n.getTile(this.position.x,this.position.y)===ur.Hospital){console.log(`${t.name} 在醫院，無法攻擊`),i.messages.push(`${t.name} 在醫院，無法攻擊`);return}if(t.immune){console.log(`${t.name} 處於無敵狀態`),i.messages.push(`${t.name} 處於無敵狀態`);return}const a=hr();if(!r&&!await a.confirm.input(`是否攻擊${t.name}`)){console.log(`${this.name} 放棄攻擊`),i.messages.push(`${this.name} 放棄攻擊`);return}console.group(`${this.name} 與${t.name} 對戰`);let o=await this.throwDice(`對 ${t.name} 進行攻擊`);this.doubleDamage&&(this.doubleDamage--,o*=2),await t.damage(o,this),console.groupEnd()}async damage(t,r){console.log(`${this.name} 受到 ${t} 點傷害`);const n=At();n.messages.push(`${this.name} 受到 ${t} 點傷害`),this.health-=t;const i=Gd();let[a,o]=this.position.current;for(let f=0;f<t;f++){const l=Math.random()*Math.PI*2;i.effect({name:"damaged",position:[a,o],direction:[Math.sin(l),Math.cos(l)],time:0},800)}if(this.health>0){await hr().wait(1e3);return}if(console.log(`${this.name} 被擊倒`),n.messages.push(`${this.name} 被擊倒`),this.health=ai,this.dizziness=1,r){const f=Math.floor(this.score*mg);console.log(`${r.id} 獲得 ${f} 分`),n.messages.push(`${r.id} 掠奪了 ${f} 分`),this.score-=f,r.score+=f}else{const f=Math.floor(this.score*.2);console.log(`${this.name} 掉落 ${f} 分`),n.messages.push(`${this.name} 掉落了 ${f} 分`),this.score-=f}await hr().wait(1e3)}async teleport(t){const r=Dr(),n=this.active;this.position.set(t[0],t[1],200),n&&(en().position=this.position.clone());const i=Array.from(r.nextPosition([t[0],t[1]]).keys());Es(i),this.direction=i.pop(),this.fixedDirection=!0,n&&await hr().wait(200)}async throwDice(t){const n=await At().throwDice(t,!!this.doubleDice,this.fixedDices);return this.doubleDice=Math.max(0,this.doubleDice-1),n}reverseDirection(){this.direction={[ht.UP]:ht.DOWN,[ht.RIGHT]:ht.LEFT,[ht.DOWN]:ht.UP,[ht.LEFT]:ht.RIGHT}[this.direction]}teleportPosition(t){return this.teleport([t.x,t.y])}status(){return this.dizziness?"dizziness":"normal"}}const Bs=()=>_g,_g=wf(new class{constructor(){Pe(this,"ready",!1);Pe(this,"running",!1)}async setup(t){console.info("初始化遊戲");const r=At(),n=Dr();console.info("初始化玩家");const i=n.spawnPoints(),a=["#8650a6","#56ae6c","#b84c7d","#ac9c3d","#6881d8","#ba543d"],o=t.length;if(i.length<o)throw new Error("Not enough spawners");Es(i);let f;for(let m=0;m<o;m++){const g=i.pop();m===0&&(f=g[0]);const F=ks.from(g[0]),V=g[1],ne=new vg(m+1,t[m],100,a[m],F,V);r.players.set(m,ne)}console.info("初始化渲染器");const l=en();l.start(),l.position.set(f[0],f[1])}async run(){const t=At(),r=en(),n=hr();console.group(`第 ${++t.inning} 回合`);const i=t.players;for(const a of i.values()){a.active=!0;const o=a.position.x,f=a.position.y;if(r.position.set(o,f,a.position.distance(r.position)*50),a.immune&&a.immune--,a.dizziness){console.info(`${a.name} 眩暈中`),t.messages.push(`${a.name} 眩暈中`),await n.wait(1e3),a.active=!1,a.dizziness--;continue}for(t.steps=await a.throwDice("開始回合");t.steps>0;){await a.walk(),t.steps--;const l=t.traps;for(const m of l){const g=a.position,F=m[0]===g.x,V=m[1]===g.y;!F||!V||await m[2](a)}for(const m of i.values())a!==m&&a.position.equals(m.position)&&await a.attack(m);t.steps===0&&await a.trigger()}t.steps=void 0,await n.next.input("結束回合"),a.active=!1}console.groupEnd(),this.running&&of(()=>this.run())}async init(t,r,n){console.info("初始化狀態"),this.ready=!0,this.running=!0;const i=At();gt.virtualDice=r,i.victoryScore=t,of(async()=>{await this.setup(n),await this.run()})}async stop(){this.running=!1,this.ready=!1,en().stop()}}),gg={class:"loader"},yg={class:"progress"},bg=["max","value"],xg={key:0},Eg={key:1,class:"log"},Tg=vn({__name:"Loader",setup(e){const t=Fn(),r=sf(()=>t.textures.size+t.sounds.size+t.loadings),n=sf(()=>r.value-t.loadings);return(i,a)=>(qe(),tt("div",gg,[Oe("span",yg,[_t(dt(Fe(n))+" / "+dt(Fe(r))+" ",1),Oe("progress",{max:Fe(r),value:Fe(n)},null,8,bg)]),Fe(t).isFinished()?(qe(),tt("p",xg,"Loading Completed")):(qe(),tt("div",Eg,[(qe(!0),tt(Tt,null,Rr(Fe(t).logs.toReversed(),(o,f)=>(qe(),tt("span",{key:f},dt(o),1))),128))]))]))}}),Ag=Nn(Tg,[["__scopeId","data-v-d03c34ba"]]),wg={open:""},Sg={class:"players"},Cg=["onUpdate:modelValue"],Lg={key:0,class:"error"},Rg=vn({__name:"Start",setup(e){const t=Ho(1e3),r=Ho(!0),n=Mn(["哭哭貓貓","胡桃搖","點一下玩一年","狼師","已購買小孩愛吃","少女自用，99新"]),i=Bs(),a=Fn(),o=()=>{if(!a.isFinished()){f.value="The game is not ready yet";return}i.init(t.value,r.value,n)},f=Ho("");return(l,m)=>(qe(),tt(Tt,null,[Oe("form",{onSubmit:Id(o,["prevent"])},[m[6]||(m[6]=Oe("h1",null,"Monopoly",-1)),Oe("label",null,[m[3]||(m[3]=Oe("span",null,"victory Score: ",-1)),er(Oe("input",{type:"number",min:"500",max:"10000",step:"100","onUpdate:modelValue":m[0]||(m[0]=g=>t.value=g)},null,512),[[sr,t.value]])]),Oe("label",null,[m[4]||(m[4]=Oe("span",null,"Virtual Dice: ",-1)),er(Oe("input",{type:"checkbox","onUpdate:modelValue":m[1]||(m[1]=g=>r.value=g)},null,512),[[Dd,r.value]])]),Oe("details",wg,[m[5]||(m[5]=Oe("summary",null,"Players",-1)),Oe("div",Sg,[(qe(!0),tt(Tt,null,Rr(n.length,g=>(qe(),tt("label",null,[Oe("span",null,dt(g)+". ",1),er(Oe("input",{"onUpdate:modelValue":F=>n[g-1]=F},null,8,Cg),[[sr,n[g-1]]])]))),256)),Oe("button",{type:"button",onClick:m[2]||(m[2]=g=>n.push((n.length+1).toString()))},"Add")])]),m[7]||(m[7]=Oe("button",{class:"confirm"},"Start",-1)),f.value?(qe(),tt("span",Lg,"Warring: "+dt(f.value),1)):Lr("",!0)],32),zt(Ag)],64))}}),Og=Nn(Rg,[["__scopeId","data-v-8858ec5c"]]),Pg=vn({__name:"Canvas",setup(e){const t=zv("canvas");return ls(t,r=>{const n=en();n&&n.stop(),r&&hg(r)}),(r,n)=>(qe(),tt("canvas",{class:"canvas",ref_key:"canvas",ref:t},null,512))}}),Dg=Nn(Pg,[["__scopeId","data-v-368ef003"]]),Fg={class:"popup"},Ig={class:"input"},Gg=["disabled","onClick"],Mg=["onClick"],Ng=["onClick"],kg=vn({__name:"Input",setup(e){const t=hr(),r=t.next,n=t.move,i=t.confirm,a=t.players;function o(g,F){return g.length===0?!0:g.includes(F)}const f=[[ht.UP,"⇑"],[ht.DOWN,"⇓"],[ht.LEFT,"⇐"],[ht.RIGHT,"⇒"]],l=[[!0,"接受"],[!1,"拒絕"]],m=xa(()=>Array.from(a.accept).map(g=>[g,g.name]));return(g,F)=>(qe(),tt(Tt,null,[Oe("div",Fg,dt(Fe(r).text)+" "+dt(Fe(n).text)+" "+dt(Fe(i).text),1),Oe("div",Ig,[Fe(r).receive?(qe(),tt("button",{key:0,onClick:F[0]||(F[0]=V=>Fe(r).resolve())},"下一步")):Lr("",!0),Fe(n).receive?(qe(),tt(Tt,{key:1},Rr(f,([V,ne])=>Oe("button",{disabled:!o(Fe(n).accept,V),onClick:ge=>Fe(n).resolve(V)},dt(ne),9,Gg)),64)):Lr("",!0),Fe(i).receive?(qe(),tt(Tt,{key:2},Rr(l,([V,ne])=>(qe(),tt(Tt,null,[o(Fe(i).accept,V)?(qe(),tt("button",{key:0,onClick:ge=>Fe(i).resolve(V)},dt(ne),9,Mg)):Lr("",!0)],64))),64)):Lr("",!0),Fe(a).receive?(qe(!0),tt(Tt,{key:3},Rr(m.value,([V,ne])=>(qe(),tt(Tt,null,[o(Fe(a).accept,V)?(qe(),tt("button",{key:0,onClick:ge=>Fe(a).resolve(V)},dt(ne),9,Ng)):Lr("",!0)],64))),256)):Lr("",!0)])],64))}}),Bg=Nn(kg,[["__scopeId","data-v-f17c053e"]]),Ug={key:0},$g={key:1},Vg={class:"info"},jg=vn({__name:"Ranking",setup(e){const t=At(),r=xa(()=>Array.from(t.players.values()));return(n,i)=>(qe(),ua(Pd,{name:"list",tag:"div",class:"list"},{default:ms(()=>[(qe(!0),tt(Tt,null,Rr(r.value.toSorted((a,o)=>o.score-a.score),(a,o)=>(qe(),tt("div",{class:ga(["player",{active:a.active}]),key:a.id},[Oe("h3",null,[_t(dt(a.name)+" ",1),o===0?(qe(),tt("i",Ug,"👑")):Lr("",!0),a.dizziness?(qe(),tt("i",$g,"💫")):Lr("",!0)]),Oe("div",Vg,[Oe("span",null,"分數: "+dt(a.score),1)]),Oe("span",null,[(qe(!0),tt(Tt,null,Rr(Fe(ai),f=>(qe(),tt(Tt,null,[_t(dt(f<=a.health?"❤️":"🤍"),1)],64))),256))])],2))),128))]),_:1}))}}),Hg=Nn(jg,[["__scopeId","data-v-892d9001"]]),Ud=""+new URL("../tiles/task.png",import.meta.url).href,$d=""+new URL("../tiles/opportunity.png",import.meta.url).href,Vd=""+new URL("../tiles/destiny.png",import.meta.url).href,jd=""+new URL("../tiles/punishment.png",import.meta.url).href,zg=""+new URL("../others/dice1.png",import.meta.url).href,Wg=""+new URL("../others/dice2.png",import.meta.url).href,Xg=""+new URL("../others/dice3.png",import.meta.url).href,Yg=""+new URL("../others/dice4.png",import.meta.url).href,Kg=""+new URL("../others/dice5.png",import.meta.url).href,qg=""+new URL("../others/dice6.png",import.meta.url).href,Qg={class:"popup-group",style:{"z-index":"0"}},Zg={class:"popup-group"},Jg={key:0,class:"popup center dices"},ey=["src"],ty=["onUpdate:modelValue"],ry={key:1,class:"popup center"},ny={key:0,class:"popup debug"},iy={open:""},ay={open:""},sy=["onUpdate:modelValue","max"],oy=["onUpdate:modelValue"],fy=["onUpdate:modelValue"],ly=["onUpdate:modelValue"],uy=["onUpdate:modelValue"],cy=["onUpdate:modelValue"],dy=["onUpdate:modelValue"],hy={open:""},py={class:"face back"},my=["src"],vy={class:"face front"},_y=["innerHTML"],gy={class:"btns"},yy=vn({__name:"Popup",setup(e){const t=At();function r(f){const[l,m]=f;return{left:`${l}px`,top:`${m}px`,"z-index":window.innerHeight-Math.floor(m)}}function n(f){return f.toFixed(2)}const i=xa(()=>t.event?{任務:Ud,機會:$d,命運:Vd,懲罰:jd}[t.event.type]:"");function a(f){return[zg,Wg,Xg,Yg,Kg,qg][f-1]}function o(){const f=Array.from(t.players.values());t.winner=f.find(l=>l.score===Math.max(...f.map(m=>m.score))),Bs().running=!1}return(f,l)=>(qe(),tt(Tt,null,[Oe("div",Qg,[(qe(!0),tt(Tt,null,Rr(Fe(t).playersLabel,([m,g])=>(qe(),tt("div",{style:Ls(r(g)),class:"popup label"},dt(m),5))),256))]),Oe("div",Zg,[Fe(t).dices!==void 0?(qe(),tt("div",Jg,[Fe(gt).virtualDice?(qe(!0),tt(Tt,{key:0},Rr(Fe(t).dices,m=>(qe(),tt("img",{src:a(m)},null,8,ey))),256)):(qe(!0),tt(Tt,{key:1},Rr(Fe(t).dices,(m,g)=>er((qe(),tt("input",{"onUpdate:modelValue":F=>Fe(t).dices[g]=F,class:"input",type:"number",min:"1",max:"6"},null,8,ty)),[[sr,Fe(t).dices[g],void 0,{number:!0}]])),256))])):Fe(t).steps!==void 0?(qe(),tt("div",ry,dt(Fe(t).steps)+" 步 ",1)):Lr("",!0),zt(Pd,{tag:"div",name:"list",class:"popup messages"},{default:ms(()=>[(qe(!0),tt(Tt,null,Rr(Fe(t).messages.toArray(),m=>(qe(),tt("div",{key:m,class:"message"},dt(m),1))),128))]),_:1})]),Fe(gt).enabled?(qe(),tt("div",ny,[Oe("details",iy,[l[14]||(l[14]=Oe("summary",null,"Current",-1)),Oe("span",null,[l[12]||(l[12]=_t("Step: ")),Fe(t).steps!==void 0?er((qe(),tt("input",{key:0,type:"range","onUpdate:modelValue":l[0]||(l[0]=m=>Fe(t).steps=m),max:32,min:0},null,512)),[[sr,Fe(t).steps,void 0,{number:!0}]]):Lr("",!0),_t(dt(Fe(t).steps??"Undefined"),1)]),Oe("span",null,[l[13]||(l[13]=_t("Transition: ")),er(Oe("input",{type:"checkbox","onUpdate:modelValue":l[1]||(l[1]=m=>Fe(gt).transition=m)},null,512),[[Dd,Fe(gt).transition]])])]),(qe(!0),tt(Tt,null,Rr(Fe(t).players.values(),m=>(qe(),tt("details",ay,[Oe("summary",null,"Player "+dt(m.id),1),Oe("span",null,[l[15]||(l[15]=_t("Health: ")),er(Oe("input",{type:"range","onUpdate:modelValue":g=>m.health=g,max:Fe(ai),min:"0"},null,8,sy),[[sr,m.health,void 0,{number:!0}]]),_t(" "+dt(m.health),1)]),Oe("span",null,[l[16]||(l[16]=_t("Dizziness: ")),er(Oe("input",{type:"range","onUpdate:modelValue":g=>m.dizziness=g,max:"5",min:"0"},null,8,oy),[[sr,m.dizziness,void 0,{number:!0}]]),_t(" "+dt(m.dizziness),1)]),Oe("span",null,[l[17]||(l[17]=_t("Immune: ")),er(Oe("input",{type:"range","onUpdate:modelValue":g=>m.immune=g,max:"5",min:"0"},null,8,fy),[[sr,m.immune,void 0,{number:!0}]]),_t(" "+dt(m.immune),1)]),Oe("span",null,[l[18]||(l[18]=_t("DoubleDice: ")),er(Oe("input",{type:"range","onUpdate:modelValue":g=>m.doubleDice=g,max:"5",min:"0"},null,8,ly),[[sr,m.doubleDice,void 0,{number:!0}]]),_t(" "+dt(m.doubleDice),1)]),Oe("span",null,[l[19]||(l[19]=_t("DoubleTaskScore: ")),er(Oe("input",{type:"range","onUpdate:modelValue":g=>m.doubleTaskScore=g,max:"5",min:"0"},null,8,uy),[[sr,m.doubleTaskScore,void 0,{number:!0}]]),_t(" "+dt(m.doubleTaskScore),1)]),Oe("span",null,[l[20]||(l[20]=_t("DoubleDamage: ")),er(Oe("input",{type:"range","onUpdate:modelValue":g=>m.doubleDamage=g,max:"5",min:"0"},null,8,cy),[[sr,m.doubleDamage,void 0,{number:!0}]]),_t(" "+dt(m.doubleDamage),1)]),Oe("span",null,[l[21]||(l[21]=_t("Score: ")),er(Oe("input",{type:"number","onUpdate:modelValue":g=>m.score=g,max:"2000",min:"0"},null,8,dy),[[sr,m.score,void 0,{number:!0}]])])]))),256)),Oe("details",hy,[l[28]||(l[28]=Oe("summary",null,"View",-1)),Oe("span",null,[l[22]||(l[22]=_t("X:")),er(Oe("input",{type:"range","onUpdate:modelValue":l[2]||(l[2]=m=>Fe(gt).x=m),max:10,min:-10,step:"0.5"},null,512),[[sr,Fe(gt).x,void 0,{number:!0}]]),_t(dt(n(Fe(gt).x)),1)]),Oe("span",null,[l[23]||(l[23]=_t("Y:")),er(Oe("input",{type:"range","onUpdate:modelValue":l[3]||(l[3]=m=>Fe(gt).y=m),max:10,min:-10,step:"0.5"},null,512),[[sr,Fe(gt).y,void 0,{number:!0}]]),_t(dt(n(Fe(gt).y)),1)]),Oe("span",null,[l[24]||(l[24]=_t("Z:")),er(Oe("input",{type:"range","onUpdate:modelValue":l[4]||(l[4]=m=>Fe(gt).z=m),max:10,min:-10,step:"0.5"},null,512),[[sr,Fe(gt).z,void 0,{number:!0}]]),_t(dt(n(Fe(gt).z)),1)]),Oe("span",null,[l[25]||(l[25]=_t("AngleX: ")),er(Oe("input",{type:"range","onUpdate:modelValue":l[5]||(l[5]=m=>Fe(gt).angleX=m),max:180,min:-180},null,512),[[sr,Fe(gt).angleX,void 0,{number:!0}]]),_t(dt(n(Fe(gt).angleX)),1)]),Oe("span",null,[l[26]||(l[26]=_t("AngleY: ")),er(Oe("input",{type:"range","onUpdate:modelValue":l[6]||(l[6]=m=>Fe(gt).angleY=m),max:180,min:-180},null,512),[[sr,Fe(gt).angleY,void 0,{number:!0}]]),_t(dt(n(Fe(gt).angleY)),1)]),Oe("span",null,[l[27]||(l[27]=_t("AngleZ: ")),er(Oe("input",{type:"range","onUpdate:modelValue":l[7]||(l[7]=m=>Fe(gt).angleZ=m),max:180,min:-180},null,512),[[sr,Fe(gt).angleZ,void 0,{number:!0}]]),_t(dt(n(Fe(gt).angleZ)),1)])]),Oe("button",{onClick:l[8]||(l[8]=m=>o())},"Stop")])):Lr("",!0),zt(K0,{name:"event"},{default:ms(()=>[Fe(t).event?(qe(),tt("div",{key:0,class:ga(["popup","event",{transition:Fe(gt).transition}])},[Oe("div",py,[Oe("img",{src:i.value},null,8,my),Oe("span",null,dt(Fe(t).event.type),1)]),Oe("div",vy,[Oe("h1",null,dt(Fe(t).event.type),1),Oe("h2",null,dt(Fe(t).event.title),1),Oe("p",{innerHTML:Fe(t).event.description},null,8,_y),Oe("div",gy,[Fe(t).event.hasFail?(qe(),tt(Tt,{key:0},[Oe("button",{onClick:l[9]||(l[9]=m=>Fe(t).event.callback(!0))},"成功"),Oe("button",{onClick:l[10]||(l[10]=m=>Fe(t).event.callback(!1))},"失敗")],64)):(qe(),tt("button",{key:1,onClick:l[11]||(l[11]=m=>Fe(t).event.callback(!0))},"完成"))])])],2)):Lr("",!0)]),_:1})],64))}}),by=Nn(yy,[["__scopeId","data-v-1473281e"]]),xy=vn({__name:"Game",setup(e){return(t,r)=>(qe(),tt("div",{class:"container",onContextmenu:r[0]||(r[0]=Id(n=>Fe(gt).enabled=!Fe(gt).enabled,["right","prevent"]))},[Oe("main",null,[zt(Dg),zt(Bg)]),Oe("aside",null,[zt(Hg)]),zt(by)],32))}}),Ey=Nn(xy,[["__scopeId","data-v-7eff93bf"]]),Ty=vn({__name:"App",setup(e){const t=Bs();return(r,n)=>Fe(t).ready?Fe(t).running?(qe(),ua(Ey,{key:1})):(qe(),ua(F_,{key:2})):(qe(),ua(Og,{key:0}))}}),Ay=""+new URL("../tiles/spawner.png",import.meta.url).href,wy=""+new URL("../tiles/teleport.png",import.meta.url).href,Sy=""+new URL("../tiles/prison.png",import.meta.url).href,Cy=""+new URL("../tiles/hospital.png",import.meta.url).href,Ly=""+new URL("../players/player.1.png",import.meta.url).href,Ry=""+new URL("../players/player.2.png",import.meta.url).href,Oy=""+new URL("../players/player.3.png",import.meta.url).href,Py=""+new URL("../players/player.4.png",import.meta.url).href,Dy=""+new URL("../players/player.5.png",import.meta.url).href,Fy=""+new URL("../players/player.6.png",import.meta.url).href,Iy=""+new URL("../fx/damaged.png",import.meta.url).href,Gy=""+new URL("../others/arrow.png",import.meta.url).href,My=""+new URL("../others/dizziness.png",import.meta.url).href;w_(Ty).mount("#app");const or=Fn();or.loadTexture("tile-spawner",Ay);or.loadTexture("tile-task",Ud);or.loadTexture("tile-opportunity",$d);or.loadTexture("tile-destiny",Vd);or.loadTexture("tile-punishment",jd);or.loadTexture("tile-teleport",wy);or.loadTexture("tile-prison",Sy);or.loadTexture("tile-hospital",Cy);or.loadTexture("player-1",Ly);or.loadTexture("player-2",Ry);or.loadTexture("player-3",Oy);or.loadTexture("player-4",Py);or.loadTexture("player-5",Dy);or.loadTexture("player-6",Fy);or.loadTexture("fx-damaged",Iy);or.loadTexture("arrow",Gy);or.loadTexture("dizziness",My);
