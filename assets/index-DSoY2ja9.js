var Xm=Object.defineProperty;var Ym=(e,t,r)=>t in e?Xm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Oe=(e,t,r)=>Ym(e,typeof t!="symbol"?t+"":t,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const f of a.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&n(f)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function df(e){const t=Object.create(null);for(const r of e.split(","))t[r]=1;return r=>r in t}const Lt={},Ci=[],Jr=()=>{},Km=()=>!1,Es=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),hf=e=>e.startsWith("onUpdate:"),Wt=Object.assign,pf=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},qm=Object.prototype.hasOwnProperty,Tt=(e,t)=>qm.call(e,t),tt=Array.isArray,Li=e=>Ts(e)==="[object Map]",uu=e=>Ts(e)==="[object Set]",lt=e=>typeof e=="function",Xt=e=>typeof e=="string",Gn=e=>typeof e=="symbol",Gt=e=>e!==null&&typeof e=="object",du=e=>(Gt(e)||lt(e))&&lt(e.then)&&lt(e.catch),hu=Object.prototype.toString,Ts=e=>hu.call(e),Qm=e=>Ts(e).slice(8,-1),pu=e=>Ts(e)==="[object Object]",mf=e=>Xt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,aa=df(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),As=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},Zm=/-(\w)/g,Pn=As(e=>e.replace(Zm,(t,r)=>r?r.toUpperCase():"")),Jm=/\B([A-Z])/g,si=As(e=>e.replace(Jm,"-$1").toLowerCase()),mu=As(e=>e.charAt(0).toUpperCase()+e.slice(1)),Go=As(e=>e?`on${mu(e)}`:""),On=(e,t)=>!Object.is(e,t),os=(e,...t)=>{for(let r=0;r<e.length;r++)e[r](...t)},vu=(e,t,r,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:r})},Ko=e=>{const t=parseFloat(e);return isNaN(t)?e:t},ev=e=>{const t=Xt(e)?Number(e):NaN;return isNaN(t)?e:t};let wc;const ws=()=>wc||(wc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ga(e){if(tt(e)){const t={};for(let r=0;r<e.length;r++){const n=e[r],i=Xt(n)?iv(n):ga(n);if(i)for(const a in i)t[a]=i[a]}return t}else if(Xt(e)||Gt(e))return e}const tv=/;(?![^(]*\))/g,rv=/:([^]+)/,nv=/\/\*[^]*?\*\//g;function iv(e){const t={};return e.replace(nv,"").split(tv).forEach(r=>{if(r){const n=r.split(rv);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function Ss(e){let t="";if(Xt(e))t=e;else if(tt(e))for(let r=0;r<e.length;r++){const n=Ss(e[r]);n&&(t+=n+" ")}else if(Gt(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}const av="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",sv=df(av);function _u(e){return!!e||e===""}const gu=e=>!!(e&&e.__v_isRef===!0),ut=e=>Xt(e)?e:e==null?"":tt(e)||Gt(e)&&(e.toString===hu||!lt(e.toString))?gu(e)?ut(e.value):JSON.stringify(e,bu,2):String(e),bu=(e,t)=>gu(t)?bu(e,t.value):Li(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[n,i],a)=>(r[Mo(n,a)+" =>"]=i,r),{})}:uu(t)?{[`Set(${t.size})`]:[...t.values()].map(r=>Mo(r))}:Gn(t)?Mo(t):Gt(t)&&!tt(t)&&!pu(t)?String(t):t,Mo=(e,t="")=>{var r;return Gn(e)?`Symbol(${(r=e.description)!=null?r:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Lr;class ov{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Lr,!t&&Lr&&(this.index=(Lr.scopes||(Lr.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,r;if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].pause();for(t=0,r=this.effects.length;t<r;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,r;if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].resume();for(t=0,r=this.effects.length;t<r;t++)this.effects[t].resume()}}run(t){if(this._active){const r=Lr;try{return Lr=this,t()}finally{Lr=r}}}on(){Lr=this}off(){Lr=this.parent}stop(t){if(this._active){this._active=!1;let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(this.effects.length=0,r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function fv(){return Lr}let Dt;const No=new WeakSet;class yu{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Lr&&Lr.active&&Lr.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,No.has(this)&&(No.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Eu(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Sc(this),Tu(this);const t=Dt,r=jr;Dt=this,jr=!0;try{return this.fn()}finally{Au(this),Dt=t,jr=r,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)gf(t);this.deps=this.depsTail=void 0,Sc(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?No.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){qo(this)&&this.run()}get dirty(){return qo(this)}}let xu=0,sa,oa;function Eu(e,t=!1){if(e.flags|=8,t){e.next=oa,oa=e;return}e.next=sa,sa=e}function vf(){xu++}function _f(){if(--xu>0)return;if(oa){let t=oa;for(oa=void 0;t;){const r=t.next;t.next=void 0,t.flags&=-9,t=r}}let e;for(;sa;){let t=sa;for(sa=void 0;t;){const r=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=r}}if(e)throw e}function Tu(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Au(e){let t,r=e.depsTail,n=r;for(;n;){const i=n.prevDep;n.version===-1?(n===r&&(r=i),gf(n),lv(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}e.deps=t,e.depsTail=r}function qo(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(wu(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function wu(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===da))return;e.globalVersion=da;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!qo(e)){e.flags&=-3;return}const r=Dt,n=jr;Dt=e,jr=!0;try{Tu(e);const i=e.fn(e._value);(t.version===0||On(i,e._value))&&(e._value=i,t.version++)}catch(i){throw t.version++,i}finally{Dt=r,jr=n,Au(e),e.flags&=-3}}function gf(e,t=!1){const{dep:r,prevSub:n,nextSub:i}=e;if(n&&(n.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=n,e.nextSub=void 0),r.subs===e&&(r.subs=n,!n&&r.computed)){r.computed.flags&=-5;for(let a=r.computed.deps;a;a=a.nextDep)gf(a,!0)}!t&&!--r.sc&&r.map&&r.map.delete(r.key)}function lv(e){const{prevDep:t,nextDep:r}=e;t&&(t.nextDep=r,e.prevDep=void 0),r&&(r.prevDep=t,e.nextDep=void 0)}let jr=!0;const Su=[];function Mn(){Su.push(jr),jr=!1}function Nn(){const e=Su.pop();jr=e===void 0?!0:e}function Sc(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const r=Dt;Dt=void 0;try{t()}finally{Dt=r}}}let da=0;class cv{constructor(t,r){this.sub=t,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class bf{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Dt||!jr||Dt===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==Dt)r=this.activeLink=new cv(Dt,this),Dt.deps?(r.prevDep=Dt.depsTail,Dt.depsTail.nextDep=r,Dt.depsTail=r):Dt.deps=Dt.depsTail=r,Cu(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const n=r.nextDep;n.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=n),r.prevDep=Dt.depsTail,r.nextDep=void 0,Dt.depsTail.nextDep=r,Dt.depsTail=r,Dt.deps===r&&(Dt.deps=n)}return r}trigger(t){this.version++,da++,this.notify(t)}notify(t){vf();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{_f()}}}function Cu(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)Cu(n)}const r=e.dep.subs;r!==e&&(e.prevSub=r,r&&(r.nextSub=e)),e.dep.subs=e}}const Qo=new WeakMap,ri=Symbol(""),Zo=Symbol(""),ha=Symbol("");function lr(e,t,r){if(jr&&Dt){let n=Qo.get(e);n||Qo.set(e,n=new Map);let i=n.get(r);i||(n.set(r,i=new bf),i.map=n,i.key=r),i.track()}}function dn(e,t,r,n,i,a){const f=Qo.get(e);if(!f){da++;return}const o=l=>{l&&l.trigger()};if(vf(),t==="clear")f.forEach(o);else{const l=tt(e),y=l&&mf(r);if(l&&r==="length"){const g=Number(n);f.forEach((P,$)=>{($==="length"||$===ha||!Gn($)&&$>=g)&&o(P)})}else switch((r!==void 0||f.has(void 0))&&o(f.get(r)),y&&o(f.get(ha)),t){case"add":l?y&&o(f.get("length")):(o(f.get(ri)),Li(e)&&o(f.get(Zo)));break;case"delete":l||(o(f.get(ri)),Li(e)&&o(f.get(Zo)));break;case"set":Li(e)&&o(f.get(ri));break}}_f()}function Ai(e){const t=yt(e);return t===e?t:(lr(t,"iterate",ha),Mr(e)?t:t.map(cr))}function Cs(e){return lr(e=yt(e),"iterate",ha),e}const uv={__proto__:null,[Symbol.iterator](){return Bo(this,Symbol.iterator,cr)},concat(...e){return Ai(this).concat(...e.map(t=>tt(t)?Ai(t):t))},entries(){return Bo(this,"entries",e=>(e[1]=cr(e[1]),e))},every(e,t){return cn(this,"every",e,t,void 0,arguments)},filter(e,t){return cn(this,"filter",e,t,r=>r.map(cr),arguments)},find(e,t){return cn(this,"find",e,t,cr,arguments)},findIndex(e,t){return cn(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return cn(this,"findLast",e,t,cr,arguments)},findLastIndex(e,t){return cn(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return cn(this,"forEach",e,t,void 0,arguments)},includes(...e){return ko(this,"includes",e)},indexOf(...e){return ko(this,"indexOf",e)},join(e){return Ai(this).join(e)},lastIndexOf(...e){return ko(this,"lastIndexOf",e)},map(e,t){return cn(this,"map",e,t,void 0,arguments)},pop(){return ta(this,"pop")},push(...e){return ta(this,"push",e)},reduce(e,...t){return Cc(this,"reduce",e,t)},reduceRight(e,...t){return Cc(this,"reduceRight",e,t)},shift(){return ta(this,"shift")},some(e,t){return cn(this,"some",e,t,void 0,arguments)},splice(...e){return ta(this,"splice",e)},toReversed(){return Ai(this).toReversed()},toSorted(e){return Ai(this).toSorted(e)},toSpliced(...e){return Ai(this).toSpliced(...e)},unshift(...e){return ta(this,"unshift",e)},values(){return Bo(this,"values",cr)}};function Bo(e,t,r){const n=Cs(e),i=n[t]();return n!==e&&!Mr(e)&&(i._next=i.next,i.next=()=>{const a=i._next();return a.value&&(a.value=r(a.value)),a}),i}const dv=Array.prototype;function cn(e,t,r,n,i,a){const f=Cs(e),o=f!==e&&!Mr(e),l=f[t];if(l!==dv[t]){const P=l.apply(e,a);return o?cr(P):P}let y=r;f!==e&&(o?y=function(P,$){return r.call(this,cr(P),$,e)}:r.length>2&&(y=function(P,$){return r.call(this,P,$,e)}));const g=l.call(f,y,n);return o&&i?i(g):g}function Cc(e,t,r,n){const i=Cs(e);let a=r;return i!==e&&(Mr(e)?r.length>3&&(a=function(f,o,l){return r.call(this,f,o,l,e)}):a=function(f,o,l){return r.call(this,f,cr(o),l,e)}),i[t](a,...n)}function ko(e,t,r){const n=yt(e);lr(n,"iterate",ha);const i=n[t](...r);return(i===-1||i===!1)&&Tf(r[0])?(r[0]=yt(r[0]),n[t](...r)):i}function ta(e,t,r=[]){Mn(),vf();const n=yt(e)[t].apply(e,r);return _f(),Nn(),n}const hv=df("__proto__,__v_isRef,__isVue"),Lu=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Gn));function pv(e){Gn(e)||(e=String(e));const t=yt(this);return lr(t,"has",e),t.hasOwnProperty(e)}class Ru{constructor(t=!1,r=!1){this._isReadonly=t,this._isShallow=r}get(t,r,n){if(r==="__v_skip")return t.__v_skip;const i=this._isReadonly,a=this._isShallow;if(r==="__v_isReactive")return!i;if(r==="__v_isReadonly")return i;if(r==="__v_isShallow")return a;if(r==="__v_raw")return n===(i?a?Av:Du:a?Pu:Fu).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const f=tt(t);if(!i){let l;if(f&&(l=uv[r]))return l;if(r==="hasOwnProperty")return pv}const o=Reflect.get(t,r,hr(t)?t:n);return(Gn(r)?Lu.has(r):hv(r))||(i||lr(t,"get",r),a)?o:hr(o)?f&&mf(r)?o:o.value:Gt(o)?i?Iu(o):oi(o):o}}class Ou extends Ru{constructor(t=!1){super(!1,t)}set(t,r,n,i){let a=t[r];if(!this._isShallow){const l=ii(a);if(!Mr(n)&&!ii(n)&&(a=yt(a),n=yt(n)),!tt(t)&&hr(a)&&!hr(n))return l?!1:(a.value=n,!0)}const f=tt(t)&&mf(r)?Number(r)<t.length:Tt(t,r),o=Reflect.set(t,r,n,hr(t)?t:i);return t===yt(i)&&(f?On(n,a)&&dn(t,"set",r,n):dn(t,"add",r,n)),o}deleteProperty(t,r){const n=Tt(t,r);t[r];const i=Reflect.deleteProperty(t,r);return i&&n&&dn(t,"delete",r,void 0),i}has(t,r){const n=Reflect.has(t,r);return(!Gn(r)||!Lu.has(r))&&lr(t,"has",r),n}ownKeys(t){return lr(t,"iterate",tt(t)?"length":ri),Reflect.ownKeys(t)}}class mv extends Ru{constructor(t=!1){super(!0,t)}set(t,r){return!0}deleteProperty(t,r){return!0}}const vv=new Ou,_v=new mv,gv=new Ou(!0);const Jo=e=>e,rs=e=>Reflect.getPrototypeOf(e);function bv(e,t,r){return function(...n){const i=this.__v_raw,a=yt(i),f=Li(a),o=e==="entries"||e===Symbol.iterator&&f,l=e==="keys"&&f,y=i[e](...n),g=r?Jo:t?ef:cr;return!t&&lr(a,"iterate",l?Zo:ri),{next(){const{value:P,done:$}=y.next();return $?{value:P,done:$}:{value:o?[g(P[0]),g(P[1])]:g(P),done:$}},[Symbol.iterator](){return this}}}}function ns(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function yv(e,t){const r={get(i){const a=this.__v_raw,f=yt(a),o=yt(i);e||(On(i,o)&&lr(f,"get",i),lr(f,"get",o));const{has:l}=rs(f),y=t?Jo:e?ef:cr;if(l.call(f,i))return y(a.get(i));if(l.call(f,o))return y(a.get(o));a!==f&&a.get(i)},get size(){const i=this.__v_raw;return!e&&lr(yt(i),"iterate",ri),Reflect.get(i,"size",i)},has(i){const a=this.__v_raw,f=yt(a),o=yt(i);return e||(On(i,o)&&lr(f,"has",i),lr(f,"has",o)),i===o?a.has(i):a.has(i)||a.has(o)},forEach(i,a){const f=this,o=f.__v_raw,l=yt(o),y=t?Jo:e?ef:cr;return!e&&lr(l,"iterate",ri),o.forEach((g,P)=>i.call(a,y(g),y(P),f))}};return Wt(r,e?{add:ns("add"),set:ns("set"),delete:ns("delete"),clear:ns("clear")}:{add(i){!t&&!Mr(i)&&!ii(i)&&(i=yt(i));const a=yt(this);return rs(a).has.call(a,i)||(a.add(i),dn(a,"add",i,i)),this},set(i,a){!t&&!Mr(a)&&!ii(a)&&(a=yt(a));const f=yt(this),{has:o,get:l}=rs(f);let y=o.call(f,i);y||(i=yt(i),y=o.call(f,i));const g=l.call(f,i);return f.set(i,a),y?On(a,g)&&dn(f,"set",i,a):dn(f,"add",i,a),this},delete(i){const a=yt(this),{has:f,get:o}=rs(a);let l=f.call(a,i);l||(i=yt(i),l=f.call(a,i)),o&&o.call(a,i);const y=a.delete(i);return l&&dn(a,"delete",i,void 0),y},clear(){const i=yt(this),a=i.size!==0,f=i.clear();return a&&dn(i,"clear",void 0,void 0),f}}),["keys","values","entries",Symbol.iterator].forEach(i=>{r[i]=bv(i,e,t)}),r}function yf(e,t){const r=yv(e,t);return(n,i,a)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(Tt(r,i)&&i in n?r:n,i,a)}const xv={get:yf(!1,!1)},Ev={get:yf(!1,!0)},Tv={get:yf(!0,!1)};const Fu=new WeakMap,Pu=new WeakMap,Du=new WeakMap,Av=new WeakMap;function wv(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Sv(e){return e.__v_skip||!Object.isExtensible(e)?0:wv(Qm(e))}function oi(e){return ii(e)?e:Ef(e,!1,vv,xv,Fu)}function xf(e){return Ef(e,!1,gv,Ev,Pu)}function Iu(e){return Ef(e,!0,_v,Tv,Du)}function Ef(e,t,r,n,i){if(!Gt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=i.get(e);if(a)return a;const f=Sv(e);if(f===0)return e;const o=new Proxy(e,f===2?n:r);return i.set(e,o),o}function Ri(e){return ii(e)?Ri(e.__v_raw):!!(e&&e.__v_isReactive)}function ii(e){return!!(e&&e.__v_isReadonly)}function Mr(e){return!!(e&&e.__v_isShallow)}function Tf(e){return e?!!e.__v_raw:!1}function yt(e){const t=e&&e.__v_raw;return t?yt(t):e}function Cv(e){return!Tt(e,"__v_skip")&&Object.isExtensible(e)&&vu(e,"__v_skip",!0),e}const cr=e=>Gt(e)?oi(e):e,ef=e=>Gt(e)?Iu(e):e;function hr(e){return e?e.__v_isRef===!0:!1}function Lc(e){return Gu(e,!1)}function Lv(e){return Gu(e,!0)}function Gu(e,t){return hr(e)?e:new Rv(e,t)}class Rv{constructor(t,r){this.dep=new bf,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?t:yt(t),this._value=r?t:cr(t),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(t){const r=this._rawValue,n=this.__v_isShallow||Mr(t)||ii(t);t=n?t:yt(t),On(t,r)&&(this._rawValue=t,this._value=n?t:cr(t),this.dep.trigger())}}function Ne(e){return hr(e)?e.value:e}const Ov={get:(e,t,r)=>t==="__v_raw"?e:Ne(Reflect.get(e,t,r)),set:(e,t,r,n)=>{const i=e[t];return hr(i)&&!hr(r)?(i.value=r,!0):Reflect.set(e,t,r,n)}};function Mu(e){return Ri(e)?e:new Proxy(e,Ov)}class Fv{constructor(t,r,n){this.fn=t,this.setter=r,this._value=void 0,this.dep=new bf(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=da-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Dt!==this)return Eu(this,!0),!0}get value(){const t=this.dep.track();return wu(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function tf(e,t,r=!1){let n,i;return lt(e)?n=e:(n=e.get,i=e.set),new Fv(n,i,r)}const is={},us=new WeakMap;let ei;function Pv(e,t=!1,r=ei){if(r){let n=us.get(r);n||us.set(r,n=[]),n.push(e)}}function Dv(e,t,r=Lt){const{immediate:n,deep:i,once:a,scheduler:f,augmentJob:o,call:l}=r,y=ye=>i?ye:Mr(ye)||i===!1||i===0?hn(ye,1):hn(ye);let g,P,$,re,ue=!1,De=!1;if(hr(e)?(P=()=>e.value,ue=Mr(e)):Ri(e)?(P=()=>y(e),ue=!0):tt(e)?(De=!0,ue=e.some(ye=>Ri(ye)||Mr(ye)),P=()=>e.map(ye=>{if(hr(ye))return ye.value;if(Ri(ye))return y(ye);if(lt(ye))return l?l(ye,2):ye()})):lt(e)?t?P=l?()=>l(e,2):e:P=()=>{if($){Mn();try{$()}finally{Nn()}}const ye=ei;ei=g;try{return l?l(e,3,[re]):e(re)}finally{ei=ye}}:P=Jr,t&&i){const ye=P,Me=i===!0?1/0:i;P=()=>hn(ye(),Me)}const qe=fv(),Ie=()=>{g.stop(),qe&&qe.active&&pf(qe.effects,g)};if(a&&t){const ye=t;t=(...Me)=>{ye(...Me),Ie()}}let Qe=De?new Array(e.length).fill(is):is;const Ue=ye=>{if(!(!(g.flags&1)||!g.dirty&&!ye))if(t){const Me=g.run();if(i||ue||(De?Me.some((We,wt)=>On(We,Qe[wt])):On(Me,Qe))){$&&$();const We=ei;ei=g;try{const wt=[Me,Qe===is?void 0:De&&Qe[0]===is?[]:Qe,re];l?l(t,3,wt):t(...wt),Qe=Me}finally{ei=We}}}else g.run()};return o&&o(Ue),g=new yu(P),g.scheduler=f?()=>f(Ue,!1):Ue,re=ye=>Pv(ye,!1,g),$=g.onStop=()=>{const ye=us.get(g);if(ye){if(l)l(ye,4);else for(const Me of ye)Me();us.delete(g)}},t?n?Ue(!0):Qe=g.run():f?f(Ue.bind(null,!0),!0):g.run(),Ie.pause=g.pause.bind(g),Ie.resume=g.resume.bind(g),Ie.stop=Ie,Ie}function hn(e,t=1/0,r){if(t<=0||!Gt(e)||e.__v_skip||(r=r||new Set,r.has(e)))return e;if(r.add(e),t--,hr(e))hn(e.value,t,r);else if(tt(e))for(let n=0;n<e.length;n++)hn(e[n],t,r);else if(uu(e)||Li(e))e.forEach(n=>{hn(n,t,r)});else if(pu(e)){for(const n in e)hn(e[n],t,r);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&hn(e[n],t,r)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ba(e,t,r,n){try{return n?e(...n):e()}catch(i){Ls(i,t,r)}}function Vr(e,t,r,n){if(lt(e)){const i=ba(e,t,r,n);return i&&du(i)&&i.catch(a=>{Ls(a,t,r)}),i}if(tt(e)){const i=[];for(let a=0;a<e.length;a++)i.push(Vr(e[a],t,r,n));return i}}function Ls(e,t,r,n=!0){const i=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:f}=t&&t.appContext.config||Lt;if(t){let o=t.parent;const l=t.proxy,y=`https://vuejs.org/error-reference/#runtime-${r}`;for(;o;){const g=o.ec;if(g){for(let P=0;P<g.length;P++)if(g[P](e,l,y)===!1)return}o=o.parent}if(a){Mn(),ba(a,null,10,[e,l,y]),Nn();return}}Iv(e,r,i,n,f)}function Iv(e,t,r,n=!0,i=!1){if(i)throw e;console.error(e)}const gr=[];let Qr=-1;const Oi=[];let Cn=null,wi=0;const Nu=Promise.resolve();let ds=null;function rf(e){const t=ds||Nu;return e?t.then(this?e.bind(this):e):t}function Gv(e){let t=Qr+1,r=gr.length;for(;t<r;){const n=t+r>>>1,i=gr[n],a=pa(i);a<e||a===e&&i.flags&2?t=n+1:r=n}return t}function Af(e){if(!(e.flags&1)){const t=pa(e),r=gr[gr.length-1];!r||!(e.flags&2)&&t>=pa(r)?gr.push(e):gr.splice(Gv(t),0,e),e.flags|=1,Bu()}}function Bu(){ds||(ds=Nu.then($u))}function Mv(e){tt(e)?Oi.push(...e):Cn&&e.id===-1?Cn.splice(wi+1,0,e):e.flags&1||(Oi.push(e),e.flags|=1),Bu()}function Rc(e,t,r=Qr+1){for(;r<gr.length;r++){const n=gr[r];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;gr.splice(r,1),r--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function ku(e){if(Oi.length){const t=[...new Set(Oi)].sort((r,n)=>pa(r)-pa(n));if(Oi.length=0,Cn){Cn.push(...t);return}for(Cn=t,wi=0;wi<Cn.length;wi++){const r=Cn[wi];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}Cn=null,wi=0}}const pa=e=>e.id==null?e.flags&2?-1:1/0:e.id;function $u(e){try{for(Qr=0;Qr<gr.length;Qr++){const t=gr[Qr];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),ba(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Qr<gr.length;Qr++){const t=gr[Qr];t&&(t.flags&=-2)}Qr=-1,gr.length=0,ku(),ds=null,(gr.length||Oi.length)&&$u()}}let Or=null,Uu=null;function hs(e){const t=Or;return Or=e,Uu=e&&e.type.__scopeId||null,t}function ps(e,t=Or,r){if(!t||e._n)return e;const n=(...i)=>{n._d&&Bc(-1);const a=hs(t);let f;try{f=e(...i)}finally{hs(a),n._d&&Bc(1)}return f};return n._n=!0,n._c=!0,n._d=!0,n}function mr(e,t){if(Or===null)return e;const r=Ds(Or),n=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[a,f,o,l=Lt]=t[i];a&&(lt(a)&&(a={mounted:a,updated:a}),a.deep&&hn(f),n.push({dir:a,instance:r,value:f,oldValue:void 0,arg:o,modifiers:l}))}return e}function Qn(e,t,r,n){const i=e.dirs,a=t&&t.dirs;for(let f=0;f<i.length;f++){const o=i[f];a&&(o.oldValue=a[f].value);let l=o.dir[n];l&&(Mn(),Vr(l,r,8,[e.el,o,e,t]),Nn())}}const Nv=Symbol("_vte"),ju=e=>e.__isTeleport,Ln=Symbol("_leaveCb"),as=Symbol("_enterCb");function Vu(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Qu(()=>{e.isMounted=!0}),Ju(()=>{e.isUnmounting=!0}),e}const Gr=[Function,Array],Hu={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Gr,onEnter:Gr,onAfterEnter:Gr,onEnterCancelled:Gr,onBeforeLeave:Gr,onLeave:Gr,onAfterLeave:Gr,onLeaveCancelled:Gr,onBeforeAppear:Gr,onAppear:Gr,onAfterAppear:Gr,onAppearCancelled:Gr},zu=e=>{const t=e.subTree;return t.component?zu(t.component):t},Bv={name:"BaseTransition",props:Hu,setup(e,{slots:t}){const r=Rf(),n=Vu();return()=>{const i=t.default&&wf(t.default(),!0);if(!i||!i.length)return;const a=Wu(i),f=yt(e),{mode:o}=f;if(n.isLeaving)return $o(a);const l=Oc(a);if(!l)return $o(a);let y=ma(l,f,n,r,P=>y=P);l.type!==xr&&ai(l,y);let g=r.subTree&&Oc(r.subTree);if(g&&g.type!==xr&&!ti(l,g)&&zu(r).type!==xr){let P=ma(g,f,n,r);if(ai(g,P),o==="out-in"&&l.type!==xr)return n.isLeaving=!0,P.afterLeave=()=>{n.isLeaving=!1,r.job.flags&8||r.update(),delete P.afterLeave,g=void 0},$o(a);o==="in-out"&&l.type!==xr?P.delayLeave=($,re,ue)=>{const De=Xu(n,g);De[String(g.key)]=g,$[Ln]=()=>{re(),$[Ln]=void 0,delete y.delayedLeave,g=void 0},y.delayedLeave=()=>{ue(),delete y.delayedLeave,g=void 0}}:g=void 0}else g&&(g=void 0);return a}}};function Wu(e){let t=e[0];if(e.length>1){for(const r of e)if(r.type!==xr){t=r;break}}return t}const kv=Bv;function Xu(e,t){const{leavingVNodes:r}=e;let n=r.get(t.type);return n||(n=Object.create(null),r.set(t.type,n)),n}function ma(e,t,r,n,i){const{appear:a,mode:f,persisted:o=!1,onBeforeEnter:l,onEnter:y,onAfterEnter:g,onEnterCancelled:P,onBeforeLeave:$,onLeave:re,onAfterLeave:ue,onLeaveCancelled:De,onBeforeAppear:qe,onAppear:Ie,onAfterAppear:Qe,onAppearCancelled:Ue}=t,ye=String(e.key),Me=Xu(r,e),We=(He,Je)=>{He&&Vr(He,n,9,Je)},wt=(He,Je)=>{const mt=Je[1];We(He,Je),tt(He)?He.every(Fe=>Fe.length<=1)&&mt():He.length<=1&&mt()},Ot={mode:f,persisted:o,beforeEnter(He){let Je=l;if(!r.isMounted)if(a)Je=qe||l;else return;He[Ln]&&He[Ln](!0);const mt=Me[ye];mt&&ti(e,mt)&&mt.el[Ln]&&mt.el[Ln](),We(Je,[He])},enter(He){let Je=y,mt=g,Fe=P;if(!r.isMounted)if(a)Je=Ie||y,mt=Qe||g,Fe=Ue||P;else return;let vt=!1;const ft=He[as]=Nr=>{vt||(vt=!0,Nr?We(Fe,[He]):We(mt,[He]),Ot.delayedLeave&&Ot.delayedLeave(),He[as]=void 0)};Je?wt(Je,[He,ft]):ft()},leave(He,Je){const mt=String(e.key);if(He[as]&&He[as](!0),r.isUnmounting)return Je();We($,[He]);let Fe=!1;const vt=He[Ln]=ft=>{Fe||(Fe=!0,Je(),ft?We(De,[He]):We(ue,[He]),He[Ln]=void 0,Me[mt]===e&&delete Me[mt])};Me[mt]=e,re?wt(re,[He,vt]):vt()},clone(He){const Je=ma(He,t,r,n,i);return i&&i(Je),Je}};return Ot}function $o(e){if(Rs(e))return e=Dn(e),e.children=null,e}function Oc(e){if(!Rs(e))return ju(e.type)&&e.children?Wu(e.children):e;const{shapeFlag:t,children:r}=e;if(r){if(t&16)return r[0];if(t&32&&lt(r.default))return r.default()}}function ai(e,t){e.shapeFlag&6&&e.component?(e.transition=t,ai(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function wf(e,t=!1,r){let n=[],i=0;for(let a=0;a<e.length;a++){let f=e[a];const o=r==null?f.key:String(r)+String(f.key!=null?f.key:a);f.type===At?(f.patchFlag&128&&i++,n=n.concat(wf(f.children,t,o))):(t||f.type!==xr)&&n.push(o!=null?Dn(f,{key:o}):f)}if(i>1)for(let a=0;a<n.length;a++)n[a].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function tn(e,t){return lt(e)?Wt({name:e.name},t,{setup:e}):e}function Yu(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Ku(e){const t=Rf(),r=Lv(null);if(t){const i=t.refs===Lt?t.refs={}:t.refs;Object.defineProperty(i,e,{enumerable:!0,get:()=>r.value,set:a=>r.value=a})}return r}function ms(e,t,r,n,i=!1){if(tt(e)){e.forEach((ue,De)=>ms(ue,t&&(tt(t)?t[De]:t),r,n,i));return}if(fa(n)&&!i){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&ms(e,t,r,n.component.subTree);return}const a=n.shapeFlag&4?Ds(n.component):n.el,f=i?null:a,{i:o,r:l}=e,y=t&&t.r,g=o.refs===Lt?o.refs={}:o.refs,P=o.setupState,$=yt(P),re=P===Lt?()=>!1:ue=>Tt($,ue);if(y!=null&&y!==l&&(Xt(y)?(g[y]=null,re(y)&&(P[y]=null)):hr(y)&&(y.value=null)),lt(l))ba(l,o,12,[f,g]);else{const ue=Xt(l),De=hr(l);if(ue||De){const qe=()=>{if(e.f){const Ie=ue?re(l)?P[l]:g[l]:l.value;i?tt(Ie)&&pf(Ie,a):tt(Ie)?Ie.includes(a)||Ie.push(a):ue?(g[l]=[a],re(l)&&(P[l]=g[l])):(l.value=[a],e.k&&(g[e.k]=l.value))}else ue?(g[l]=f,re(l)&&(P[l]=f)):De&&(l.value=f,e.k&&(g[e.k]=f))};f?(qe.id=-1,Cr(qe,r)):qe()}}}ws().requestIdleCallback;ws().cancelIdleCallback;const fa=e=>!!e.type.__asyncLoader,Rs=e=>e.type.__isKeepAlive;function $v(e,t){qu(e,"a",t)}function Uv(e,t){qu(e,"da",t)}function qu(e,t,r=dr){const n=e.__wdc||(e.__wdc=()=>{let i=r;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(Os(t,n,r),r){let i=r.parent;for(;i&&i.parent;)Rs(i.parent.vnode)&&jv(n,t,r,i),i=i.parent}}function jv(e,t,r,n){const i=Os(t,e,n,!0);ed(()=>{pf(n[t],i)},r)}function Os(e,t,r=dr,n=!1){if(r){const i=r[e]||(r[e]=[]),a=t.__weh||(t.__weh=(...f)=>{Mn();const o=ya(r),l=Vr(t,r,e,f);return o(),Nn(),l});return n?i.unshift(a):i.push(a),a}}const vn=e=>(t,r=dr)=>{(!_a||e==="sp")&&Os(e,(...n)=>t(...n),r)},Vv=vn("bm"),Qu=vn("m"),Hv=vn("bu"),Zu=vn("u"),Ju=vn("bum"),ed=vn("um"),zv=vn("sp"),Wv=vn("rtg"),Xv=vn("rtc");function Yv(e,t=dr){Os("ec",e,t)}const Kv=Symbol.for("v-ndc");function Ur(e,t,r,n){let i;const a=r,f=tt(e);if(f||Xt(e)){const o=f&&Ri(e);let l=!1;o&&(l=!Mr(e),e=Cs(e)),i=new Array(e.length);for(let y=0,g=e.length;y<g;y++)i[y]=t(l?cr(e[y]):e[y],y,void 0,a)}else if(typeof e=="number"){i=new Array(e);for(let o=0;o<e;o++)i[o]=t(o+1,o,void 0,a)}else if(Gt(e))if(e[Symbol.iterator])i=Array.from(e,(o,l)=>t(o,l,void 0,a));else{const o=Object.keys(e);i=new Array(o.length);for(let l=0,y=o.length;l<y;l++){const g=o[l];i[l]=t(e[g],g,l,a)}}else i=[];return i}const nf=e=>e?yd(e)?Ds(e):nf(e.parent):null,la=Wt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>nf(e.parent),$root:e=>nf(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Sf(e),$forceUpdate:e=>e.f||(e.f=()=>{Af(e.update)}),$nextTick:e=>e.n||(e.n=rf.bind(e.proxy)),$watch:e=>_0.bind(e)}),Uo=(e,t)=>e!==Lt&&!e.__isScriptSetup&&Tt(e,t),qv={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:r,setupState:n,data:i,props:a,accessCache:f,type:o,appContext:l}=e;let y;if(t[0]!=="$"){const re=f[t];if(re!==void 0)switch(re){case 1:return n[t];case 2:return i[t];case 4:return r[t];case 3:return a[t]}else{if(Uo(n,t))return f[t]=1,n[t];if(i!==Lt&&Tt(i,t))return f[t]=2,i[t];if((y=e.propsOptions[0])&&Tt(y,t))return f[t]=3,a[t];if(r!==Lt&&Tt(r,t))return f[t]=4,r[t];af&&(f[t]=0)}}const g=la[t];let P,$;if(g)return t==="$attrs"&&lr(e.attrs,"get",""),g(e);if((P=o.__cssModules)&&(P=P[t]))return P;if(r!==Lt&&Tt(r,t))return f[t]=4,r[t];if($=l.config.globalProperties,Tt($,t))return $[t]},set({_:e},t,r){const{data:n,setupState:i,ctx:a}=e;return Uo(i,t)?(i[t]=r,!0):n!==Lt&&Tt(n,t)?(n[t]=r,!0):Tt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:n,appContext:i,propsOptions:a}},f){let o;return!!r[f]||e!==Lt&&Tt(e,f)||Uo(t,f)||(o=a[0])&&Tt(o,f)||Tt(n,f)||Tt(la,f)||Tt(i.config.globalProperties,f)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:Tt(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};function Fc(e){return tt(e)?e.reduce((t,r)=>(t[r]=null,t),{}):e}let af=!0;function Qv(e){const t=Sf(e),r=e.proxy,n=e.ctx;af=!1,t.beforeCreate&&Pc(t.beforeCreate,e,"bc");const{data:i,computed:a,methods:f,watch:o,provide:l,inject:y,created:g,beforeMount:P,mounted:$,beforeUpdate:re,updated:ue,activated:De,deactivated:qe,beforeDestroy:Ie,beforeUnmount:Qe,destroyed:Ue,unmounted:ye,render:Me,renderTracked:We,renderTriggered:wt,errorCaptured:Ot,serverPrefetch:He,expose:Je,inheritAttrs:mt,components:Fe,directives:vt,filters:ft}=t;if(y&&Zv(y,n,null),f)for(const Ft in f){const St=f[Ft];lt(St)&&(n[Ft]=St.bind(r))}if(i){const Ft=i.call(r,r);Gt(Ft)&&(e.data=oi(Ft))}if(af=!0,a)for(const Ft in a){const St=a[Ft],rn=lt(St)?St.bind(r,r):lt(St.get)?St.get.bind(r,r):Jr,nn=!lt(St)&&lt(St.set)?St.set.bind(r):Jr,Hr=Gi({get:rn,set:nn});Object.defineProperty(n,Ft,{enumerable:!0,configurable:!0,get:()=>Hr.value,set:Pr=>Hr.value=Pr})}if(o)for(const Ft in o)td(o[Ft],n,r,Ft);if(l){const Ft=lt(l)?l.call(r):l;Reflect.ownKeys(Ft).forEach(St=>{i0(St,Ft[St])})}g&&Pc(g,e,"c");function Yt(Ft,St){tt(St)?St.forEach(rn=>Ft(rn.bind(r))):St&&Ft(St.bind(r))}if(Yt(Vv,P),Yt(Qu,$),Yt(Hv,re),Yt(Zu,ue),Yt($v,De),Yt(Uv,qe),Yt(Yv,Ot),Yt(Xv,We),Yt(Wv,wt),Yt(Ju,Qe),Yt(ed,ye),Yt(zv,He),tt(Je))if(Je.length){const Ft=e.exposed||(e.exposed={});Je.forEach(St=>{Object.defineProperty(Ft,St,{get:()=>r[St],set:rn=>r[St]=rn})})}else e.exposed||(e.exposed={});Me&&e.render===Jr&&(e.render=Me),mt!=null&&(e.inheritAttrs=mt),Fe&&(e.components=Fe),vt&&(e.directives=vt),He&&Yu(e)}function Zv(e,t,r=Jr){tt(e)&&(e=sf(e));for(const n in e){const i=e[n];let a;Gt(i)?"default"in i?a=fs(i.from||n,i.default,!0):a=fs(i.from||n):a=fs(i),hr(a)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>a.value,set:f=>a.value=f}):t[n]=a}}function Pc(e,t,r){Vr(tt(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,r)}function td(e,t,r,n){let i=n.includes(".")?md(r,n):()=>r[n];if(Xt(e)){const a=t[e];lt(a)&&Pi(i,a)}else if(lt(e))Pi(i,e.bind(r));else if(Gt(e))if(tt(e))e.forEach(a=>td(a,t,r,n));else{const a=lt(e.handler)?e.handler.bind(r):t[e.handler];lt(a)&&Pi(i,a,e)}}function Sf(e){const t=e.type,{mixins:r,extends:n}=t,{mixins:i,optionsCache:a,config:{optionMergeStrategies:f}}=e.appContext,o=a.get(t);let l;return o?l=o:!i.length&&!r&&!n?l=t:(l={},i.length&&i.forEach(y=>vs(l,y,f,!0)),vs(l,t,f)),Gt(t)&&a.set(t,l),l}function vs(e,t,r,n=!1){const{mixins:i,extends:a}=t;a&&vs(e,a,r,!0),i&&i.forEach(f=>vs(e,f,r,!0));for(const f in t)if(!(n&&f==="expose")){const o=Jv[f]||r&&r[f];e[f]=o?o(e[f],t[f]):t[f]}return e}const Jv={data:Dc,props:Ic,emits:Ic,methods:ia,computed:ia,beforeCreate:vr,created:vr,beforeMount:vr,mounted:vr,beforeUpdate:vr,updated:vr,beforeDestroy:vr,beforeUnmount:vr,destroyed:vr,unmounted:vr,activated:vr,deactivated:vr,errorCaptured:vr,serverPrefetch:vr,components:ia,directives:ia,watch:t0,provide:Dc,inject:e0};function Dc(e,t){return t?e?function(){return Wt(lt(e)?e.call(this,this):e,lt(t)?t.call(this,this):t)}:t:e}function e0(e,t){return ia(sf(e),sf(t))}function sf(e){if(tt(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function vr(e,t){return e?[...new Set([].concat(e,t))]:t}function ia(e,t){return e?Wt(Object.create(null),e,t):t}function Ic(e,t){return e?tt(e)&&tt(t)?[...new Set([...e,...t])]:Wt(Object.create(null),Fc(e),Fc(t??{})):t}function t0(e,t){if(!e)return t;if(!t)return e;const r=Wt(Object.create(null),e);for(const n in t)r[n]=vr(e[n],t[n]);return r}function rd(){return{app:null,config:{isNativeTag:Km,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let r0=0;function n0(e,t){return function(n,i=null){lt(n)||(n=Wt({},n)),i!=null&&!Gt(i)&&(i=null);const a=rd(),f=new WeakSet,o=[];let l=!1;const y=a.app={_uid:r0++,_component:n,_props:i,_container:null,_context:a,_instance:null,version:B0,get config(){return a.config},set config(g){},use(g,...P){return f.has(g)||(g&&lt(g.install)?(f.add(g),g.install(y,...P)):lt(g)&&(f.add(g),g(y,...P))),y},mixin(g){return a.mixins.includes(g)||a.mixins.push(g),y},component(g,P){return P?(a.components[g]=P,y):a.components[g]},directive(g,P){return P?(a.directives[g]=P,y):a.directives[g]},mount(g,P,$){if(!l){const re=y._ceVNode||jt(n,i);return re.appContext=a,$===!0?$="svg":$===!1&&($=void 0),P&&t?t(re,g):e(re,g,$),l=!0,y._container=g,g.__vue_app__=y,Ds(re.component)}},onUnmount(g){o.push(g)},unmount(){l&&(Vr(o,y._instance,16),e(null,y._container),delete y._container.__vue_app__)},provide(g,P){return a.provides[g]=P,y},runWithContext(g){const P=Fi;Fi=y;try{return g()}finally{Fi=P}}};return y}}let Fi=null;function i0(e,t){if(dr){let r=dr.provides;const n=dr.parent&&dr.parent.provides;n===r&&(r=dr.provides=Object.create(n)),r[e]=t}}function fs(e,t,r=!1){const n=dr||Or;if(n||Fi){const i=Fi?Fi._context.provides:n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return r&&lt(t)?t.call(n&&n.proxy):t}}const nd={},id=()=>Object.create(nd),ad=e=>Object.getPrototypeOf(e)===nd;function a0(e,t,r,n=!1){const i={},a=id();e.propsDefaults=Object.create(null),sd(e,t,i,a);for(const f in e.propsOptions[0])f in i||(i[f]=void 0);r?e.props=n?i:xf(i):e.type.props?e.props=i:e.props=a,e.attrs=a}function s0(e,t,r,n){const{props:i,attrs:a,vnode:{patchFlag:f}}=e,o=yt(i),[l]=e.propsOptions;let y=!1;if((n||f>0)&&!(f&16)){if(f&8){const g=e.vnode.dynamicProps;for(let P=0;P<g.length;P++){let $=g[P];if(Fs(e.emitsOptions,$))continue;const re=t[$];if(l)if(Tt(a,$))re!==a[$]&&(a[$]=re,y=!0);else{const ue=Pn($);i[ue]=of(l,o,ue,re,e,!1)}else re!==a[$]&&(a[$]=re,y=!0)}}}else{sd(e,t,i,a)&&(y=!0);let g;for(const P in o)(!t||!Tt(t,P)&&((g=si(P))===P||!Tt(t,g)))&&(l?r&&(r[P]!==void 0||r[g]!==void 0)&&(i[P]=of(l,o,P,void 0,e,!0)):delete i[P]);if(a!==o)for(const P in a)(!t||!Tt(t,P))&&(delete a[P],y=!0)}y&&dn(e.attrs,"set","")}function sd(e,t,r,n){const[i,a]=e.propsOptions;let f=!1,o;if(t)for(let l in t){if(aa(l))continue;const y=t[l];let g;i&&Tt(i,g=Pn(l))?!a||!a.includes(g)?r[g]=y:(o||(o={}))[g]=y:Fs(e.emitsOptions,l)||(!(l in n)||y!==n[l])&&(n[l]=y,f=!0)}if(a){const l=yt(r),y=o||Lt;for(let g=0;g<a.length;g++){const P=a[g];r[P]=of(i,l,P,y[P],e,!Tt(y,P))}}return f}function of(e,t,r,n,i,a){const f=e[r];if(f!=null){const o=Tt(f,"default");if(o&&n===void 0){const l=f.default;if(f.type!==Function&&!f.skipFactory&&lt(l)){const{propsDefaults:y}=i;if(r in y)n=y[r];else{const g=ya(i);n=y[r]=l.call(null,t),g()}}else n=l;i.ce&&i.ce._setProp(r,n)}f[0]&&(a&&!o?n=!1:f[1]&&(n===""||n===si(r))&&(n=!0))}return n}const o0=new WeakMap;function od(e,t,r=!1){const n=r?o0:t.propsCache,i=n.get(e);if(i)return i;const a=e.props,f={},o=[];let l=!1;if(!lt(e)){const g=P=>{l=!0;const[$,re]=od(P,t,!0);Wt(f,$),re&&o.push(...re)};!r&&t.mixins.length&&t.mixins.forEach(g),e.extends&&g(e.extends),e.mixins&&e.mixins.forEach(g)}if(!a&&!l)return Gt(e)&&n.set(e,Ci),Ci;if(tt(a))for(let g=0;g<a.length;g++){const P=Pn(a[g]);Gc(P)&&(f[P]=Lt)}else if(a)for(const g in a){const P=Pn(g);if(Gc(P)){const $=a[g],re=f[P]=tt($)||lt($)?{type:$}:Wt({},$),ue=re.type;let De=!1,qe=!0;if(tt(ue))for(let Ie=0;Ie<ue.length;++Ie){const Qe=ue[Ie],Ue=lt(Qe)&&Qe.name;if(Ue==="Boolean"){De=!0;break}else Ue==="String"&&(qe=!1)}else De=lt(ue)&&ue.name==="Boolean";re[0]=De,re[1]=qe,(De||Tt(re,"default"))&&o.push(P)}}const y=[f,o];return Gt(e)&&n.set(e,y),y}function Gc(e){return e[0]!=="$"&&!aa(e)}const fd=e=>e[0]==="_"||e==="$stable",Cf=e=>tt(e)?e.map(Zr):[Zr(e)],f0=(e,t,r)=>{if(t._n)return t;const n=ps((...i)=>Cf(t(...i)),r);return n._c=!1,n},ld=(e,t,r)=>{const n=e._ctx;for(const i in e){if(fd(i))continue;const a=e[i];if(lt(a))t[i]=f0(i,a,n);else if(a!=null){const f=Cf(a);t[i]=()=>f}}},cd=(e,t)=>{const r=Cf(t);e.slots.default=()=>r},ud=(e,t,r)=>{for(const n in t)(r||n!=="_")&&(e[n]=t[n])},l0=(e,t,r)=>{const n=e.slots=id();if(e.vnode.shapeFlag&32){const i=t._;i?(ud(n,t,r),r&&vu(n,"_",i,!0)):ld(t,n)}else t&&cd(e,t)},c0=(e,t,r)=>{const{vnode:n,slots:i}=e;let a=!0,f=Lt;if(n.shapeFlag&32){const o=t._;o?r&&o===1?a=!1:ud(i,t,r):(a=!t.$stable,ld(t,i)),f=t}else t&&(cd(e,t),f={default:1});if(a)for(const o in i)!fd(o)&&f[o]==null&&delete i[o]},Cr=A0;function u0(e){return d0(e)}function d0(e,t){const r=ws();r.__VUE__=!0;const{insert:n,remove:i,patchProp:a,createElement:f,createText:o,createComment:l,setText:y,setElementText:g,parentNode:P,nextSibling:$,setScopeId:re=Jr,insertStaticContent:ue}=e,De=(A,R,H,le=null,ie=null,te=null,Pe=void 0,Te=null,Se=!!R.dynamicChildren)=>{if(A===R)return;A&&!ti(A,R)&&(le=fi(A),Pr(A,ie,te,!0),A=null),R.patchFlag===-2&&(Se=!1,R.dynamicChildren=null);const{type:de,ref:c,shapeFlag:Ge}=R;switch(de){case Ps:qe(A,R,H,le);break;case xr:Ie(A,R,H,le);break;case Ho:A==null&&Qe(R,H,le,Pe);break;case At:Fe(A,R,H,le,ie,te,Pe,Te,Se);break;default:Ge&1?Me(A,R,H,le,ie,te,Pe,Te,Se):Ge&6?vt(A,R,H,le,ie,te,Pe,Te,Se):(Ge&64||Ge&128)&&de.process(A,R,H,le,ie,te,Pe,Te,Se,kn)}c!=null&&ie&&ms(c,A&&A.ref,te,R||A,!R)},qe=(A,R,H,le)=>{if(A==null)n(R.el=o(R.children),H,le);else{const ie=R.el=A.el;R.children!==A.children&&y(ie,R.children)}},Ie=(A,R,H,le)=>{A==null?n(R.el=l(R.children||""),H,le):R.el=A.el},Qe=(A,R,H,le)=>{[A.el,A.anchor]=ue(A.children,R,H,le,A.el,A.anchor)},Ue=({el:A,anchor:R},H,le)=>{let ie;for(;A&&A!==R;)ie=$(A),n(A,H,le),A=ie;n(R,H,le)},ye=({el:A,anchor:R})=>{let H;for(;A&&A!==R;)H=$(A),i(A),A=H;i(R)},Me=(A,R,H,le,ie,te,Pe,Te,Se)=>{R.type==="svg"?Pe="svg":R.type==="math"&&(Pe="mathml"),A==null?We(R,H,le,ie,te,Pe,Te,Se):He(A,R,ie,te,Pe,Te,Se)},We=(A,R,H,le,ie,te,Pe,Te)=>{let Se,de;const{props:c,shapeFlag:Ge,transition:Xe,dirs:rt}=A;if(Se=A.el=f(A.type,te,c&&c.is,c),Ge&8?g(Se,A.children):Ge&16&&Ot(A.children,Se,null,le,ie,jo(A,te),Pe,Te),rt&&Qn(A,null,le,"created"),wt(Se,A,A.scopeId,Pe,le),c){for(const _t in c)_t!=="value"&&!aa(_t)&&a(Se,_t,null,c[_t],te,le);"value"in c&&a(Se,"value",null,c.value,te),(de=c.onVnodeBeforeMount)&&Kr(de,le,A)}rt&&Qn(A,null,le,"beforeMount");const ht=h0(ie,Xe);ht&&Xe.beforeEnter(Se),n(Se,R,H),((de=c&&c.onVnodeMounted)||ht||rt)&&Cr(()=>{de&&Kr(de,le,A),ht&&Xe.enter(Se),rt&&Qn(A,null,le,"mounted")},ie)},wt=(A,R,H,le,ie)=>{if(H&&re(A,H),le)for(let te=0;te<le.length;te++)re(A,le[te]);if(ie){let te=ie.subTree;if(R===te||_d(te.type)&&(te.ssContent===R||te.ssFallback===R)){const Pe=ie.vnode;wt(A,Pe,Pe.scopeId,Pe.slotScopeIds,ie.parent)}}},Ot=(A,R,H,le,ie,te,Pe,Te,Se=0)=>{for(let de=Se;de<A.length;de++){const c=A[de]=Te?Rn(A[de]):Zr(A[de]);De(null,c,R,H,le,ie,te,Pe,Te)}},He=(A,R,H,le,ie,te,Pe)=>{const Te=R.el=A.el;let{patchFlag:Se,dynamicChildren:de,dirs:c}=R;Se|=A.patchFlag&16;const Ge=A.props||Lt,Xe=R.props||Lt;let rt;if(H&&Zn(H,!1),(rt=Xe.onVnodeBeforeUpdate)&&Kr(rt,H,R,A),c&&Qn(R,A,H,"beforeUpdate"),H&&Zn(H,!0),(Ge.innerHTML&&Xe.innerHTML==null||Ge.textContent&&Xe.textContent==null)&&g(Te,""),de?Je(A.dynamicChildren,de,Te,H,le,jo(R,ie),te):Pe||St(A,R,Te,null,H,le,jo(R,ie),te,!1),Se>0){if(Se&16)mt(Te,Ge,Xe,H,ie);else if(Se&2&&Ge.class!==Xe.class&&a(Te,"class",null,Xe.class,ie),Se&4&&a(Te,"style",Ge.style,Xe.style,ie),Se&8){const ht=R.dynamicProps;for(let _t=0;_t<ht.length;_t++){const bt=ht[_t],qt=Ge[bt],Qt=Xe[bt];(Qt!==qt||bt==="value")&&a(Te,bt,qt,Qt,ie,H)}}Se&1&&A.children!==R.children&&g(Te,R.children)}else!Pe&&de==null&&mt(Te,Ge,Xe,H,ie);((rt=Xe.onVnodeUpdated)||c)&&Cr(()=>{rt&&Kr(rt,H,R,A),c&&Qn(R,A,H,"updated")},le)},Je=(A,R,H,le,ie,te,Pe)=>{for(let Te=0;Te<R.length;Te++){const Se=A[Te],de=R[Te],c=Se.el&&(Se.type===At||!ti(Se,de)||Se.shapeFlag&70)?P(Se.el):H;De(Se,de,c,null,le,ie,te,Pe,!0)}},mt=(A,R,H,le,ie)=>{if(R!==H){if(R!==Lt)for(const te in R)!aa(te)&&!(te in H)&&a(A,te,R[te],null,ie,le);for(const te in H){if(aa(te))continue;const Pe=H[te],Te=R[te];Pe!==Te&&te!=="value"&&a(A,te,Te,Pe,ie,le)}"value"in H&&a(A,"value",R.value,H.value,ie)}},Fe=(A,R,H,le,ie,te,Pe,Te,Se)=>{const de=R.el=A?A.el:o(""),c=R.anchor=A?A.anchor:o("");let{patchFlag:Ge,dynamicChildren:Xe,slotScopeIds:rt}=R;rt&&(Te=Te?Te.concat(rt):rt),A==null?(n(de,H,le),n(c,H,le),Ot(R.children||[],H,c,ie,te,Pe,Te,Se)):Ge>0&&Ge&64&&Xe&&A.dynamicChildren?(Je(A.dynamicChildren,Xe,H,ie,te,Pe,Te),(R.key!=null||ie&&R===ie.subTree)&&dd(A,R,!0)):St(A,R,H,c,ie,te,Pe,Te,Se)},vt=(A,R,H,le,ie,te,Pe,Te,Se)=>{R.slotScopeIds=Te,A==null?R.shapeFlag&512?ie.ctx.activate(R,H,le,Pe,Se):ft(R,H,le,ie,te,Pe,Se):Nr(A,R,Se)},ft=(A,R,H,le,ie,te,Pe)=>{const Te=A.component=F0(A,le,ie);if(Rs(A)&&(Te.ctx.renderer=kn),P0(Te,!1,Pe),Te.asyncDep){if(ie&&ie.registerDep(Te,Yt,Pe),!A.el){const Se=Te.subTree=jt(xr);Ie(null,Se,R,H)}}else Yt(Te,A,R,H,ie,te,Pe)},Nr=(A,R,H)=>{const le=R.component=A.component;if(E0(A,R,H))if(le.asyncDep&&!le.asyncResolved){Ft(le,R,H);return}else le.next=R,le.update();else R.el=A.el,le.vnode=R},Yt=(A,R,H,le,ie,te,Pe)=>{const Te=()=>{if(A.isMounted){let{next:Ge,bu:Xe,u:rt,parent:ht,vnode:_t}=A;{const pr=hd(A);if(pr){Ge&&(Ge.el=_t.el,Ft(A,Ge,Pe)),pr.asyncDep.then(()=>{A.isUnmounted||Te()});return}}let bt=Ge,qt;Zn(A,!1),Ge?(Ge.el=_t.el,Ft(A,Ge,Pe)):Ge=_t,Xe&&os(Xe),(qt=Ge.props&&Ge.props.onVnodeBeforeUpdate)&&Kr(qt,ht,Ge,_t),Zn(A,!0);const Qt=Vo(A),Tr=A.subTree;A.subTree=Qt,De(Tr,Qt,P(Tr.el),fi(Tr),A,ie,te),Ge.el=Qt.el,bt===null&&T0(A,Qt.el),rt&&Cr(rt,ie),(qt=Ge.props&&Ge.props.onVnodeUpdated)&&Cr(()=>Kr(qt,ht,Ge,_t),ie)}else{let Ge;const{el:Xe,props:rt}=R,{bm:ht,m:_t,parent:bt,root:qt,type:Qt}=A,Tr=fa(R);if(Zn(A,!1),ht&&os(ht),!Tr&&(Ge=rt&&rt.onVnodeBeforeMount)&&Kr(Ge,bt,R),Zn(A,!0),Xe&&Ni){const pr=()=>{A.subTree=Vo(A),Ni(Xe,A.subTree,A,ie,null)};Tr&&Qt.__asyncHydrate?Qt.__asyncHydrate(Xe,A,pr):pr()}else{qt.ce&&qt.ce._injectChildStyle(Qt);const pr=A.subTree=Vo(A);De(null,pr,H,le,A,ie,te),R.el=pr.el}if(_t&&Cr(_t,ie),!Tr&&(Ge=rt&&rt.onVnodeMounted)){const pr=R;Cr(()=>Kr(Ge,bt,pr),ie)}(R.shapeFlag&256||bt&&fa(bt.vnode)&&bt.vnode.shapeFlag&256)&&A.a&&Cr(A.a,ie),A.isMounted=!0,R=H=le=null}};A.scope.on();const Se=A.effect=new yu(Te);A.scope.off();const de=A.update=Se.run.bind(Se),c=A.job=Se.runIfDirty.bind(Se);c.i=A,c.id=A.uid,Se.scheduler=()=>Af(c),Zn(A,!0),de()},Ft=(A,R,H)=>{R.component=A;const le=A.vnode.props;A.vnode=R,A.next=null,s0(A,R.props,le,H),c0(A,R.children,H),Mn(),Rc(A),Nn()},St=(A,R,H,le,ie,te,Pe,Te,Se=!1)=>{const de=A&&A.children,c=A?A.shapeFlag:0,Ge=R.children,{patchFlag:Xe,shapeFlag:rt}=R;if(Xe>0){if(Xe&128){nn(de,Ge,H,le,ie,te,Pe,Te,Se);return}else if(Xe&256){rn(de,Ge,H,le,ie,te,Pe,Te,Se);return}}rt&8?(c&16&&Bn(de,ie,te),Ge!==de&&g(H,Ge)):c&16?rt&16?nn(de,Ge,H,le,ie,te,Pe,Te,Se):Bn(de,ie,te,!0):(c&8&&g(H,""),rt&16&&Ot(Ge,H,le,ie,te,Pe,Te,Se))},rn=(A,R,H,le,ie,te,Pe,Te,Se)=>{A=A||Ci,R=R||Ci;const de=A.length,c=R.length,Ge=Math.min(de,c);let Xe;for(Xe=0;Xe<Ge;Xe++){const rt=R[Xe]=Se?Rn(R[Xe]):Zr(R[Xe]);De(A[Xe],rt,H,null,ie,te,Pe,Te,Se)}de>c?Bn(A,ie,te,!0,!1,Ge):Ot(R,H,le,ie,te,Pe,Te,Se,Ge)},nn=(A,R,H,le,ie,te,Pe,Te,Se)=>{let de=0;const c=R.length;let Ge=A.length-1,Xe=c-1;for(;de<=Ge&&de<=Xe;){const rt=A[de],ht=R[de]=Se?Rn(R[de]):Zr(R[de]);if(ti(rt,ht))De(rt,ht,H,null,ie,te,Pe,Te,Se);else break;de++}for(;de<=Ge&&de<=Xe;){const rt=A[Ge],ht=R[Xe]=Se?Rn(R[Xe]):Zr(R[Xe]);if(ti(rt,ht))De(rt,ht,H,null,ie,te,Pe,Te,Se);else break;Ge--,Xe--}if(de>Ge){if(de<=Xe){const rt=Xe+1,ht=rt<c?R[rt].el:le;for(;de<=Xe;)De(null,R[de]=Se?Rn(R[de]):Zr(R[de]),H,ht,ie,te,Pe,Te,Se),de++}}else if(de>Xe)for(;de<=Ge;)Pr(A[de],ie,te,!0),de++;else{const rt=de,ht=de,_t=new Map;for(de=ht;de<=Xe;de++){const ir=R[de]=Se?Rn(R[de]):Zr(R[de]);ir.key!=null&&_t.set(ir.key,de)}let bt,qt=0;const Qt=Xe-ht+1;let Tr=!1,pr=0;const gn=new Array(Qt);for(de=0;de<Qt;de++)gn[de]=0;for(de=rt;de<=Ge;de++){const ir=A[de];if(qt>=Qt){Pr(ir,ie,te,!0);continue}let Ar;if(ir.key!=null)Ar=_t.get(ir.key);else for(bt=ht;bt<=Xe;bt++)if(gn[bt-ht]===0&&ti(ir,R[bt])){Ar=bt;break}Ar===void 0?Pr(ir,ie,te,!0):(gn[Ar-ht]=de+1,Ar>=pr?pr=Ar:Tr=!0,De(ir,R[Ar],H,null,ie,te,Pe,Te,Se),qt++)}const sr=Tr?p0(gn):Ci;for(bt=sr.length-1,de=Qt-1;de>=0;de--){const ir=ht+de,Ar=R[ir],wa=ir+1<c?R[ir+1].el:le;gn[de]===0?De(null,Ar,H,wa,ie,te,Pe,Te,Se):Tr&&(bt<0||de!==sr[bt]?Hr(Ar,H,wa,2):bt--)}}},Hr=(A,R,H,le,ie=null)=>{const{el:te,type:Pe,transition:Te,children:Se,shapeFlag:de}=A;if(de&6){Hr(A.component.subTree,R,H,le);return}if(de&128){A.suspense.move(R,H,le);return}if(de&64){Pe.move(A,R,H,kn);return}if(Pe===At){n(te,R,H);for(let Ge=0;Ge<Se.length;Ge++)Hr(Se[Ge],R,H,le);n(A.anchor,R,H);return}if(Pe===Ho){Ue(A,R,H);return}if(le!==2&&de&1&&Te)if(le===0)Te.beforeEnter(te),n(te,R,H),Cr(()=>Te.enter(te),ie);else{const{leave:Ge,delayLeave:Xe,afterLeave:rt}=Te,ht=()=>n(te,R,H),_t=()=>{Ge(te,()=>{ht(),rt&&rt()})};Xe?Xe(te,ht,_t):_t()}else n(te,R,H)},Pr=(A,R,H,le=!1,ie=!1)=>{const{type:te,props:Pe,ref:Te,children:Se,dynamicChildren:de,shapeFlag:c,patchFlag:Ge,dirs:Xe,cacheIndex:rt}=A;if(Ge===-2&&(ie=!1),Te!=null&&ms(Te,null,H,A,!0),rt!=null&&(R.renderCache[rt]=void 0),c&256){R.ctx.deactivate(A);return}const ht=c&1&&Xe,_t=!fa(A);let bt;if(_t&&(bt=Pe&&Pe.onVnodeBeforeUnmount)&&Kr(bt,R,A),c&6)Ns(A.component,H,le);else{if(c&128){A.suspense.unmount(H,le);return}ht&&Qn(A,null,R,"beforeUnmount"),c&64?A.type.remove(A,R,H,kn,le):de&&!de.hasOnce&&(te!==At||Ge>0&&Ge&64)?Bn(de,R,H,!1,!0):(te===At&&Ge&384||!ie&&c&16)&&Bn(Se,R,H),le&&Ea(A)}(_t&&(bt=Pe&&Pe.onVnodeUnmounted)||ht)&&Cr(()=>{bt&&Kr(bt,R,A),ht&&Qn(A,null,R,"unmounted")},H)},Ea=A=>{const{type:R,el:H,anchor:le,transition:ie}=A;if(R===At){Ms(H,le);return}if(R===Ho){ye(A);return}const te=()=>{i(H),ie&&!ie.persisted&&ie.afterLeave&&ie.afterLeave()};if(A.shapeFlag&1&&ie&&!ie.persisted){const{leave:Pe,delayLeave:Te}=ie,Se=()=>Pe(H,te);Te?Te(A.el,te,Se):Se()}else te()},Ms=(A,R)=>{let H;for(;A!==R;)H=$(A),i(A),A=H;i(R)},Ns=(A,R,H)=>{const{bum:le,scope:ie,job:te,subTree:Pe,um:Te,m:Se,a:de}=A;Mc(Se),Mc(de),le&&os(le),ie.stop(),te&&(te.flags|=8,Pr(Pe,A,R,H)),Te&&Cr(Te,R),Cr(()=>{A.isUnmounted=!0},R),R&&R.pendingBranch&&!R.isUnmounted&&A.asyncDep&&!A.asyncResolved&&A.suspenseId===R.pendingId&&(R.deps--,R.deps===0&&R.resolve())},Bn=(A,R,H,le=!1,ie=!1,te=0)=>{for(let Pe=te;Pe<A.length;Pe++)Pr(A[Pe],R,H,le,ie)},fi=A=>{if(A.shapeFlag&6)return fi(A.component.subTree);if(A.shapeFlag&128)return A.suspense.next();const R=$(A.anchor||A.el),H=R&&R[Nv];return H?$(H):R};let Mi=!1;const Ta=(A,R,H)=>{A==null?R._vnode&&Pr(R._vnode,null,null,!0):De(R._vnode||null,A,R,null,null,null,H),R._vnode=A,Mi||(Mi=!0,Rc(),ku(),Mi=!1)},kn={p:De,um:Pr,m:Hr,r:Ea,mt:ft,mc:Ot,pc:St,pbc:Je,n:fi,o:e};let Aa,Ni;return{render:Ta,hydrate:Aa,createApp:n0(Ta,Aa)}}function jo({type:e,props:t},r){return r==="svg"&&e==="foreignObject"||r==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:r}function Zn({effect:e,job:t},r){r?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function h0(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function dd(e,t,r=!1){const n=e.children,i=t.children;if(tt(n)&&tt(i))for(let a=0;a<n.length;a++){const f=n[a];let o=i[a];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=i[a]=Rn(i[a]),o.el=f.el),!r&&o.patchFlag!==-2&&dd(f,o)),o.type===Ps&&(o.el=f.el)}}function p0(e){const t=e.slice(),r=[0];let n,i,a,f,o;const l=e.length;for(n=0;n<l;n++){const y=e[n];if(y!==0){if(i=r[r.length-1],e[i]<y){t[n]=i,r.push(n);continue}for(a=0,f=r.length-1;a<f;)o=a+f>>1,e[r[o]]<y?a=o+1:f=o;y<e[r[a]]&&(a>0&&(t[n]=r[a-1]),r[a]=n)}}for(a=r.length,f=r[a-1];a-- >0;)r[a]=f,f=t[f];return r}function hd(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:hd(t)}function Mc(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const m0=Symbol.for("v-scx"),v0=()=>fs(m0);function Pi(e,t,r){return pd(e,t,r)}function pd(e,t,r=Lt){const{immediate:n,deep:i,flush:a,once:f}=r,o=Wt({},r),l=t&&n||!t&&a!=="post";let y;if(_a){if(a==="sync"){const re=v0();y=re.__watcherHandles||(re.__watcherHandles=[])}else if(!l){const re=()=>{};return re.stop=Jr,re.resume=Jr,re.pause=Jr,re}}const g=dr;o.call=(re,ue,De)=>Vr(re,g,ue,De);let P=!1;a==="post"?o.scheduler=re=>{Cr(re,g&&g.suspense)}:a!=="sync"&&(P=!0,o.scheduler=(re,ue)=>{ue?re():Af(re)}),o.augmentJob=re=>{t&&(re.flags|=4),P&&(re.flags|=2,g&&(re.id=g.uid,re.i=g))};const $=Dv(e,t,o);return _a&&(y?y.push($):l&&$()),$}function _0(e,t,r){const n=this.proxy,i=Xt(e)?e.includes(".")?md(n,e):()=>n[e]:e.bind(n,n);let a;lt(t)?a=t:(a=t.handler,r=t);const f=ya(this),o=pd(i,a.bind(n),r);return f(),o}function md(e,t){const r=t.split(".");return()=>{let n=e;for(let i=0;i<r.length&&n;i++)n=n[r[i]];return n}}const g0=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Pn(t)}Modifiers`]||e[`${si(t)}Modifiers`];function b0(e,t,...r){if(e.isUnmounted)return;const n=e.vnode.props||Lt;let i=r;const a=t.startsWith("update:"),f=a&&g0(n,t.slice(7));f&&(f.trim&&(i=r.map(g=>Xt(g)?g.trim():g)),f.number&&(i=r.map(Ko)));let o,l=n[o=Go(t)]||n[o=Go(Pn(t))];!l&&a&&(l=n[o=Go(si(t))]),l&&Vr(l,e,6,i);const y=n[o+"Once"];if(y){if(!e.emitted)e.emitted={};else if(e.emitted[o])return;e.emitted[o]=!0,Vr(y,e,6,i)}}function vd(e,t,r=!1){const n=t.emitsCache,i=n.get(e);if(i!==void 0)return i;const a=e.emits;let f={},o=!1;if(!lt(e)){const l=y=>{const g=vd(y,t,!0);g&&(o=!0,Wt(f,g))};!r&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!a&&!o?(Gt(e)&&n.set(e,null),null):(tt(a)?a.forEach(l=>f[l]=null):Wt(f,a),Gt(e)&&n.set(e,f),f)}function Fs(e,t){return!e||!Es(t)?!1:(t=t.slice(2).replace(/Once$/,""),Tt(e,t[0].toLowerCase()+t.slice(1))||Tt(e,si(t))||Tt(e,t))}function Vo(e){const{type:t,vnode:r,proxy:n,withProxy:i,propsOptions:[a],slots:f,attrs:o,emit:l,render:y,renderCache:g,props:P,data:$,setupState:re,ctx:ue,inheritAttrs:De}=e,qe=hs(e);let Ie,Qe;try{if(r.shapeFlag&4){const ye=i||n,Me=ye;Ie=Zr(y.call(Me,ye,g,P,re,$,ue)),Qe=o}else{const ye=t;Ie=Zr(ye.length>1?ye(P,{attrs:o,slots:f,emit:l}):ye(P,null)),Qe=t.props?o:y0(o)}}catch(ye){ca.length=0,Ls(ye,e,1),Ie=jt(xr)}let Ue=Ie;if(Qe&&De!==!1){const ye=Object.keys(Qe),{shapeFlag:Me}=Ue;ye.length&&Me&7&&(a&&ye.some(hf)&&(Qe=x0(Qe,a)),Ue=Dn(Ue,Qe,!1,!0))}return r.dirs&&(Ue=Dn(Ue,null,!1,!0),Ue.dirs=Ue.dirs?Ue.dirs.concat(r.dirs):r.dirs),r.transition&&ai(Ue,r.transition),Ie=Ue,hs(qe),Ie}const y0=e=>{let t;for(const r in e)(r==="class"||r==="style"||Es(r))&&((t||(t={}))[r]=e[r]);return t},x0=(e,t)=>{const r={};for(const n in e)(!hf(n)||!(n.slice(9)in t))&&(r[n]=e[n]);return r};function E0(e,t,r){const{props:n,children:i,component:a}=e,{props:f,children:o,patchFlag:l}=t,y=a.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return n?Nc(n,f,y):!!f;if(l&8){const g=t.dynamicProps;for(let P=0;P<g.length;P++){const $=g[P];if(f[$]!==n[$]&&!Fs(y,$))return!0}}}else return(i||o)&&(!o||!o.$stable)?!0:n===f?!1:n?f?Nc(n,f,y):!0:!!f;return!1}function Nc(e,t,r){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const a=n[i];if(t[a]!==e[a]&&!Fs(r,a))return!0}return!1}function T0({vnode:e,parent:t},r){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=r,t=t.parent;else break}}const _d=e=>e.__isSuspense;function A0(e,t){t&&t.pendingBranch?tt(e)?t.effects.push(...e):t.effects.push(e):Mv(e)}const At=Symbol.for("v-fgt"),Ps=Symbol.for("v-txt"),xr=Symbol.for("v-cmt"),Ho=Symbol.for("v-stc"),ca=[];let Fr=null;function et(e=!1){ca.push(Fr=e?null:[])}function w0(){ca.pop(),Fr=ca[ca.length-1]||null}let va=1;function Bc(e,t=!1){va+=e,e<0&&Fr&&t&&(Fr.hasOnce=!0)}function gd(e){return e.dynamicChildren=va>0?Fr||Ci:null,w0(),va>0&&Fr&&Fr.push(e),e}function ot(e,t,r,n,i,a){return gd(ke(e,t,r,n,i,a,!0))}function ua(e,t,r,n,i){return gd(jt(e,t,r,n,i,!0))}function _s(e){return e?e.__v_isVNode===!0:!1}function ti(e,t){return e.type===t.type&&e.key===t.key}const bd=({key:e})=>e??null,ls=({ref:e,ref_key:t,ref_for:r})=>(typeof e=="number"&&(e=""+e),e!=null?Xt(e)||hr(e)||lt(e)?{i:Or,r:e,k:t,f:!!r}:e:null);function ke(e,t=null,r=null,n=0,i=null,a=e===At?0:1,f=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&bd(t),ref:t&&ls(t),scopeId:Uu,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Or};return o?(Lf(l,r),a&128&&e.normalize(l)):r&&(l.shapeFlag|=Xt(r)?8:16),va>0&&!f&&Fr&&(l.patchFlag>0||a&6)&&l.patchFlag!==32&&Fr.push(l),l}const jt=S0;function S0(e,t=null,r=null,n=0,i=null,a=!1){if((!e||e===Kv)&&(e=xr),_s(e)){const o=Dn(e,t,!0);return r&&Lf(o,r),va>0&&!a&&Fr&&(o.shapeFlag&6?Fr[Fr.indexOf(e)]=o:Fr.push(o)),o.patchFlag=-2,o}if(M0(e)&&(e=e.__vccOpts),t){t=C0(t);let{class:o,style:l}=t;o&&!Xt(o)&&(t.class=Ss(o)),Gt(l)&&(Tf(l)&&!tt(l)&&(l=Wt({},l)),t.style=ga(l))}const f=Xt(e)?1:_d(e)?128:ju(e)?64:Gt(e)?4:lt(e)?2:0;return ke(e,t,r,n,i,f,a,!0)}function C0(e){return e?Tf(e)||ad(e)?Wt({},e):e:null}function Dn(e,t,r=!1,n=!1){const{props:i,ref:a,patchFlag:f,children:o,transition:l}=e,y=t?L0(i||{},t):i,g={__v_isVNode:!0,__v_skip:!0,type:e.type,props:y,key:y&&bd(y),ref:t&&t.ref?r&&a?tt(a)?a.concat(ls(t)):[a,ls(t)]:ls(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==At?f===-1?16:f|16:f,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Dn(e.ssContent),ssFallback:e.ssFallback&&Dn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&n&&ai(g,l.clone(g)),g}function gt(e=" ",t=0){return jt(Ps,null,e,t)}function Rr(e="",t=!1){return t?(et(),ua(xr,null,e)):jt(xr,null,e)}function Zr(e){return e==null||typeof e=="boolean"?jt(xr):tt(e)?jt(At,null,e.slice()):_s(e)?Rn(e):jt(Ps,null,String(e))}function Rn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Dn(e)}function Lf(e,t){let r=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(tt(t))r=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),Lf(e,i()),i._c&&(i._d=!0));return}else{r=32;const i=t._;!i&&!ad(t)?t._ctx=Or:i===3&&Or&&(Or.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else lt(t)?(t={default:t,_ctx:Or},r=32):(t=String(t),n&64?(r=16,t=[gt(t)]):r=8);e.children=t,e.shapeFlag|=r}function L0(...e){const t={};for(let r=0;r<e.length;r++){const n=e[r];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=Ss([t.class,n.class]));else if(i==="style")t.style=ga([t.style,n.style]);else if(Es(i)){const a=t[i],f=n[i];f&&a!==f&&!(tt(a)&&a.includes(f))&&(t[i]=a?[].concat(a,f):f)}else i!==""&&(t[i]=n[i])}return t}function Kr(e,t,r,n=null){Vr(e,t,7,[r,n])}const R0=rd();let O0=0;function F0(e,t,r){const n=e.type,i=(t?t.appContext:e.appContext)||R0,a={uid:O0++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ov(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:od(n,i),emitsOptions:vd(n,i),emit:null,emitted:null,propsDefaults:Lt,inheritAttrs:n.inheritAttrs,ctx:Lt,data:Lt,props:Lt,attrs:Lt,slots:Lt,refs:Lt,setupState:Lt,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=b0.bind(null,a),e.ce&&e.ce(a),a}let dr=null;const Rf=()=>dr||Or;let gs,ff;{const e=ws(),t=(r,n)=>{let i;return(i=e[r])||(i=e[r]=[]),i.push(n),a=>{i.length>1?i.forEach(f=>f(a)):i[0](a)}};gs=t("__VUE_INSTANCE_SETTERS__",r=>dr=r),ff=t("__VUE_SSR_SETTERS__",r=>_a=r)}const ya=e=>{const t=dr;return gs(e),e.scope.on(),()=>{e.scope.off(),gs(t)}},kc=()=>{dr&&dr.scope.off(),gs(null)};function yd(e){return e.vnode.shapeFlag&4}let _a=!1;function P0(e,t=!1,r=!1){t&&ff(t);const{props:n,children:i}=e.vnode,a=yd(e);a0(e,n,a,t),l0(e,i,r);const f=a?D0(e,t):void 0;return t&&ff(!1),f}function D0(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,qv);const{setup:n}=r;if(n){Mn();const i=e.setupContext=n.length>1?G0(e):null,a=ya(e),f=ba(n,e,0,[e.props,i]),o=du(f);if(Nn(),a(),(o||e.sp)&&!fa(e)&&Yu(e),o){if(f.then(kc,kc),t)return f.then(l=>{$c(e,l,t)}).catch(l=>{Ls(l,e,0)});e.asyncDep=f}else $c(e,f,t)}else xd(e,t)}function $c(e,t,r){lt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Gt(t)&&(e.setupState=Mu(t)),xd(e,r)}let Uc;function xd(e,t,r){const n=e.type;if(!e.render){if(!t&&Uc&&!n.render){const i=n.template||Sf(e).template;if(i){const{isCustomElement:a,compilerOptions:f}=e.appContext.config,{delimiters:o,compilerOptions:l}=n,y=Wt(Wt({isCustomElement:a,delimiters:o},f),l);n.render=Uc(i,y)}}e.render=n.render||Jr}{const i=ya(e);Mn();try{Qv(e)}finally{Nn(),i()}}}const I0={get(e,t){return lr(e,"get",""),e[t]}};function G0(e){const t=r=>{e.exposed=r||{}};return{attrs:new Proxy(e.attrs,I0),slots:e.slots,emit:e.emit,expose:t}}function Ds(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Mu(Cv(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in la)return la[r](e)},has(t,r){return r in t||r in la}})):e.proxy}function M0(e){return lt(e)&&"__vccOpts"in e}const Gi=(e,t)=>tf(e,t,_a);function N0(e,t,r){const n=arguments.length;return n===2?Gt(t)&&!tt(t)?_s(t)?jt(e,null,[t]):jt(e,t):jt(e,null,t):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&_s(r)&&(r=[r]),jt(e,t,r))}const B0="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let lf;const jc=typeof window<"u"&&window.trustedTypes;if(jc)try{lf=jc.createPolicy("vue",{createHTML:e=>e})}catch{}const Ed=lf?e=>lf.createHTML(e):e=>e,k0="http://www.w3.org/2000/svg",$0="http://www.w3.org/1998/Math/MathML",un=typeof document<"u"?document:null,Vc=un&&un.createElement("template"),U0={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,n)=>{const i=t==="svg"?un.createElementNS(k0,e):t==="mathml"?un.createElementNS($0,e):r?un.createElement(e,{is:r}):un.createElement(e);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>un.createTextNode(e),createComment:e=>un.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>un.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,r,n,i,a){const f=r?r.previousSibling:t.lastChild;if(i&&(i===a||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),r),!(i===a||!(i=i.nextSibling)););else{Vc.innerHTML=Ed(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const o=Vc.content;if(n==="svg"||n==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}t.insertBefore(o,r)}return[f?f.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}},wn="transition",ra="animation",Di=Symbol("_vtc"),Td={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Ad=Wt({},Hu,Td),j0=e=>(e.displayName="Transition",e.props=Ad,e),V0=j0((e,{slots:t})=>N0(kv,wd(e),t)),Jn=(e,t=[])=>{tt(e)?e.forEach(r=>r(...t)):e&&e(...t)},Hc=e=>e?tt(e)?e.some(t=>t.length>1):e.length>1:!1;function wd(e){const t={};for(const Fe in e)Fe in Td||(t[Fe]=e[Fe]);if(e.css===!1)return t;const{name:r="v",type:n,duration:i,enterFromClass:a=`${r}-enter-from`,enterActiveClass:f=`${r}-enter-active`,enterToClass:o=`${r}-enter-to`,appearFromClass:l=a,appearActiveClass:y=f,appearToClass:g=o,leaveFromClass:P=`${r}-leave-from`,leaveActiveClass:$=`${r}-leave-active`,leaveToClass:re=`${r}-leave-to`}=e,ue=H0(i),De=ue&&ue[0],qe=ue&&ue[1],{onBeforeEnter:Ie,onEnter:Qe,onEnterCancelled:Ue,onLeave:ye,onLeaveCancelled:Me,onBeforeAppear:We=Ie,onAppear:wt=Qe,onAppearCancelled:Ot=Ue}=t,He=(Fe,vt,ft,Nr)=>{Fe._enterCancelled=Nr,Sn(Fe,vt?g:o),Sn(Fe,vt?y:f),ft&&ft()},Je=(Fe,vt)=>{Fe._isLeaving=!1,Sn(Fe,P),Sn(Fe,re),Sn(Fe,$),vt&&vt()},mt=Fe=>(vt,ft)=>{const Nr=Fe?wt:Qe,Yt=()=>He(vt,Fe,ft);Jn(Nr,[vt,Yt]),zc(()=>{Sn(vt,Fe?l:a),qr(vt,Fe?g:o),Hc(Nr)||Wc(vt,n,De,Yt)})};return Wt(t,{onBeforeEnter(Fe){Jn(Ie,[Fe]),qr(Fe,a),qr(Fe,f)},onBeforeAppear(Fe){Jn(We,[Fe]),qr(Fe,l),qr(Fe,y)},onEnter:mt(!1),onAppear:mt(!0),onLeave(Fe,vt){Fe._isLeaving=!0;const ft=()=>Je(Fe,vt);qr(Fe,P),Fe._enterCancelled?(qr(Fe,$),cf()):(cf(),qr(Fe,$)),zc(()=>{Fe._isLeaving&&(Sn(Fe,P),qr(Fe,re),Hc(ye)||Wc(Fe,n,qe,ft))}),Jn(ye,[Fe,ft])},onEnterCancelled(Fe){He(Fe,!1,void 0,!0),Jn(Ue,[Fe])},onAppearCancelled(Fe){He(Fe,!0,void 0,!0),Jn(Ot,[Fe])},onLeaveCancelled(Fe){Je(Fe),Jn(Me,[Fe])}})}function H0(e){if(e==null)return null;if(Gt(e))return[zo(e.enter),zo(e.leave)];{const t=zo(e);return[t,t]}}function zo(e){return ev(e)}function qr(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.add(r)),(e[Di]||(e[Di]=new Set)).add(t)}function Sn(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.remove(n));const r=e[Di];r&&(r.delete(t),r.size||(e[Di]=void 0))}function zc(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let z0=0;function Wc(e,t,r,n){const i=e._endId=++z0,a=()=>{i===e._endId&&n()};if(r!=null)return setTimeout(a,r);const{type:f,timeout:o,propCount:l}=Sd(e,t);if(!f)return n();const y=f+"end";let g=0;const P=()=>{e.removeEventListener(y,$),a()},$=re=>{re.target===e&&++g>=l&&P()};setTimeout(()=>{g<l&&P()},o+1),e.addEventListener(y,$)}function Sd(e,t){const r=window.getComputedStyle(e),n=ue=>(r[ue]||"").split(", "),i=n(`${wn}Delay`),a=n(`${wn}Duration`),f=Xc(i,a),o=n(`${ra}Delay`),l=n(`${ra}Duration`),y=Xc(o,l);let g=null,P=0,$=0;t===wn?f>0&&(g=wn,P=f,$=a.length):t===ra?y>0&&(g=ra,P=y,$=l.length):(P=Math.max(f,y),g=P>0?f>y?wn:ra:null,$=g?g===wn?a.length:l.length:0);const re=g===wn&&/\b(transform|all)(,|$)/.test(n(`${wn}Property`).toString());return{type:g,timeout:P,propCount:$,hasTransform:re}}function Xc(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((r,n)=>Yc(r)+Yc(e[n])))}function Yc(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function cf(){return document.body.offsetHeight}function W0(e,t,r){const n=e[Di];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}const Kc=Symbol("_vod"),X0=Symbol("_vsh"),Y0=Symbol(""),K0=/(^|;)\s*display\s*:/;function q0(e,t,r){const n=e.style,i=Xt(r);let a=!1;if(r&&!i){if(t)if(Xt(t))for(const f of t.split(";")){const o=f.slice(0,f.indexOf(":")).trim();r[o]==null&&cs(n,o,"")}else for(const f in t)r[f]==null&&cs(n,f,"");for(const f in r)f==="display"&&(a=!0),cs(n,f,r[f])}else if(i){if(t!==r){const f=n[Y0];f&&(r+=";"+f),n.cssText=r,a=K0.test(r)}}else t&&e.removeAttribute("style");Kc in e&&(e[Kc]=a?n.display:"",e[X0]&&(n.display="none"))}const qc=/\s*!important$/;function cs(e,t,r){if(tt(r))r.forEach(n=>cs(e,t,n));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const n=Q0(e,t);qc.test(r)?e.setProperty(si(n),r.replace(qc,""),"important"):e[n]=r}}const Qc=["Webkit","Moz","ms"],Wo={};function Q0(e,t){const r=Wo[t];if(r)return r;let n=Pn(t);if(n!=="filter"&&n in e)return Wo[t]=n;n=mu(n);for(let i=0;i<Qc.length;i++){const a=Qc[i]+n;if(a in e)return Wo[t]=a}return t}const Zc="http://www.w3.org/1999/xlink";function Jc(e,t,r,n,i,a=sv(t)){n&&t.startsWith("xlink:")?r==null?e.removeAttributeNS(Zc,t.slice(6,t.length)):e.setAttributeNS(Zc,t,r):r==null||a&&!_u(r)?e.removeAttribute(t):e.setAttribute(t,a?"":Gn(r)?String(r):r)}function eu(e,t,r,n,i){if(t==="innerHTML"||t==="textContent"){r!=null&&(e[t]=t==="innerHTML"?Ed(r):r);return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const o=a==="OPTION"?e.getAttribute("value")||"":e.value,l=r==null?e.type==="checkbox"?"on":"":String(r);(o!==l||!("_value"in e))&&(e.value=l),r==null&&e.removeAttribute(t),e._value=r;return}let f=!1;if(r===""||r==null){const o=typeof e[t];o==="boolean"?r=_u(r):r==null&&o==="string"?(r="",f=!0):o==="number"&&(r=0,f=!0)}try{e[t]=r}catch{}f&&e.removeAttribute(i||t)}function Si(e,t,r,n){e.addEventListener(t,r,n)}function Z0(e,t,r,n){e.removeEventListener(t,r,n)}const tu=Symbol("_vei");function J0(e,t,r,n,i=null){const a=e[tu]||(e[tu]={}),f=a[t];if(n&&f)f.value=n;else{const[o,l]=e_(t);if(n){const y=a[t]=n_(n,i);Si(e,o,y,l)}else f&&(Z0(e,o,f,l),a[t]=void 0)}}const ru=/(?:Once|Passive|Capture)$/;function e_(e){let t;if(ru.test(e)){t={};let n;for(;n=e.match(ru);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):si(e.slice(2)),t]}let Xo=0;const t_=Promise.resolve(),r_=()=>Xo||(t_.then(()=>Xo=0),Xo=Date.now());function n_(e,t){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;Vr(i_(n,r.value),t,5,[n])};return r.value=e,r.attached=r_(),r}function i_(e,t){if(tt(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const nu=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,a_=(e,t,r,n,i,a)=>{const f=i==="svg";t==="class"?W0(e,n,f):t==="style"?q0(e,r,n):Es(t)?hf(t)||J0(e,t,r,n,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):s_(e,t,n,f))?(eu(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Jc(e,t,n,f,a,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Xt(n))?eu(e,Pn(t),n,a,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),Jc(e,t,n,f))};function s_(e,t,r,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&nu(t)&&lt(r));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return nu(t)&&Xt(r)?!1:t in e}const Cd=new WeakMap,Ld=new WeakMap,bs=Symbol("_moveCb"),iu=Symbol("_enterCb"),o_=e=>(delete e.props.mode,e),f_=o_({name:"TransitionGroup",props:Wt({},Ad,{tag:String,moveClass:String}),setup(e,{slots:t}){const r=Rf(),n=Vu();let i,a;return Zu(()=>{if(!i.length)return;const f=e.moveClass||`${e.name||"v"}-move`;if(!d_(i[0].el,r.vnode.el,f))return;i.forEach(l_),i.forEach(c_);const o=i.filter(u_);cf(),o.forEach(l=>{const y=l.el,g=y.style;qr(y,f),g.transform=g.webkitTransform=g.transitionDuration="";const P=y[bs]=$=>{$&&$.target!==y||(!$||/transform$/.test($.propertyName))&&(y.removeEventListener("transitionend",P),y[bs]=null,Sn(y,f))};y.addEventListener("transitionend",P)})}),()=>{const f=yt(e),o=wd(f);let l=f.tag||At;if(i=[],a)for(let y=0;y<a.length;y++){const g=a[y];g.el&&g.el instanceof Element&&(i.push(g),ai(g,ma(g,o,n,r)),Cd.set(g,g.el.getBoundingClientRect()))}a=t.default?wf(t.default()):[];for(let y=0;y<a.length;y++){const g=a[y];g.key!=null&&ai(g,ma(g,o,n,r))}return jt(l,null,a)}}}),Rd=f_;function l_(e){const t=e.el;t[bs]&&t[bs](),t[iu]&&t[iu]()}function c_(e){Ld.set(e,e.el.getBoundingClientRect())}function u_(e){const t=Cd.get(e),r=Ld.get(e),n=t.left-r.left,i=t.top-r.top;if(n||i){const a=e.el.style;return a.transform=a.webkitTransform=`translate(${n}px,${i}px)`,a.transitionDuration="0s",e}}function d_(e,t,r){const n=e.cloneNode(),i=e[Di];i&&i.forEach(o=>{o.split(/\s+/).forEach(l=>l&&n.classList.remove(l))}),r.split(/\s+/).forEach(o=>o&&n.classList.add(o)),n.style.display="none";const a=t.nodeType===1?t:t.parentNode;a.appendChild(n);const{hasTransform:f}=Sd(n);return a.removeChild(n),f}const au=e=>{const t=e.props["onUpdate:modelValue"]||!1;return tt(t)?r=>os(t,r):t};function h_(e){e.target.composing=!0}function su(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Yo=Symbol("_assign"),_r={created(e,{modifiers:{lazy:t,trim:r,number:n}},i){e[Yo]=au(i);const a=n||i.props&&i.props.type==="number";Si(e,t?"change":"input",f=>{if(f.target.composing)return;let o=e.value;r&&(o=o.trim()),a&&(o=Ko(o)),e[Yo](o)}),r&&Si(e,"change",()=>{e.value=e.value.trim()}),t||(Si(e,"compositionstart",h_),Si(e,"compositionend",su),Si(e,"change",su))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:r,modifiers:{lazy:n,trim:i,number:a}},f){if(e[Yo]=au(f),e.composing)return;const o=(a||e.type==="number")&&!/^0\d/.test(e.value)?Ko(e.value):e.value,l=t??"";o!==l&&(document.activeElement===e&&e.type!=="range"&&(n&&t===r||i&&e.value.trim()===l)||(e.value=l))}},p_=["ctrl","shift","alt","meta"],m_={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>p_.some(r=>e[`${r}Key`]&&!t.includes(r))},Od=(e,t)=>{const r=e._withMods||(e._withMods={}),n=t.join(".");return r[n]||(r[n]=(i,...a)=>{for(let f=0;f<t.length;f++){const o=m_[t[f]];if(o&&o(i,t))return}return e(i,...a)})},v_=Wt({patchProp:a_},U0);let ou;function __(){return ou||(ou=u0(v_))}const g_=(...e)=>{const t=__().createApp(...e),{mount:r}=t;return t.mount=n=>{const i=y_(n);if(!i)return;const a=t._component;!lt(a)&&!a.render&&!a.template&&(a.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const f=r(i,!1,b_(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),f},t};function b_(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function y_(e){return Xt(e)?document.querySelector(e):e}const In=()=>x_,x_=xf(new class{constructor(){Oe(this,"textures",new Map);Oe(this,"sounds",new Map);Oe(this,"loadings",0);Oe(this,"logs",[])}log(t){this.logs.push(t)}loadTexture(t,r){this.log(`Loading texture "${t}" from "${r}"`);const n=new Image;n.src=r,this.loadings++,n.onload=async()=>{this.log(`Texture "${t}" loaded`),this.textures.set(t,n),this.loadings--}}loadSound(t,r){this.log(`Loading sound "${t}" from "${r}"`);const n=new Audio(r);this.loadings++,n.oncanplaythrough=()=>{this.log(`Sound "${t}" loaded`),this.sounds.set(t,n),this.loadings--}}getTexture(t){return this.textures.get(t)}getSound(t){return this.sounds.get(t)}dropTexture(t){this.textures.has(t)&&this.textures.delete(t)}isFinished(){return this.loadings===0}});let ss=class{constructor(){Oe(this,"callback");Oe(this,"accept",[]);Oe(this,"receive",!1);Oe(this,"text","")}async input(t,r=[]){return this.receive=!0,this.text=t,new Promise(n=>{this.accept=r,this.callback=n})}resolve(t){if(!this.callback)throw new Error("No callback");this.callback(t),this.callback=void 0,this.receive=!1,this.text="",this.accept=[]}};const ur=()=>E_;let E_=oi(new class{constructor(){Oe(this,"next",new ss);Oe(this,"move",new ss);Oe(this,"confirm",new ss);Oe(this,"players",new ss)}wait(t){return new Promise(r=>setTimeout(r,t))}});var dt=(e=>(e.UP="up",e.RIGHT="right",e.DOWN="down",e.LEFT="left",e))(dt||{});const xt=()=>T_,T_=oi(new class{constructor(){Oe(this,"players",new Map);Oe(this,"dices");Oe(this,"steps");Oe(this,"inning",0);Oe(this,"winner");Oe(this,"victoryScore",1e3);Oe(this,"quantity",0);Oe(this,"messages",new class{constructor(){Oe(this,"inner",new Map);Oe(this,"counter",0)}push(r,n=5e3){const i=this.counter++;return this.inner.set(i,r),n!==0&&setTimeout(()=>this.inner.delete(i),n),i}remove(r){this.inner.delete(r)}length(){return this.inner.size}toArray(){return Array.from(this.inner.values())}});Oe(this,"playersLabel",[]);Oe(this,"event");Oe(this,"traps",[])}setEvent(t,r,n,i=!1){return new Promise(a=>{const[f,o,l]=n;this.event={type:r,title:f,hasFail:i,description:o.trim().replaceAll(`
`,"<br>"),callback:async y=>{this.event=void 0,await l(t,y),a()}}})}withoutPlayer(t){return Array.from(this.players.values()).filter(r=>r!==t)}async throwDice(t,r=!1,n){const i=ur(),a=r?2:1,f=1500,o=15;for(let y=0;y<o;y++)this.dices=Array.from({length:a},()=>Math.floor(Math.random()*6)+1),await i.wait(f/o);n&&(this.dices=this.dices.map(y=>n.shift()??y)),await i.next.input(t);const l=this.dices.reduce((y,g)=>y+g,0);return this.dices=void 0,l}}),A_={class:"player"},w_=tn({__name:"GameOver",setup(e){const t=xt(),r=Gi(()=>Array.from(t.players.values()));return(n,i)=>(et(),ot(At,null,[i[0]||(i[0]=ke("h1",null,"遊戲結束",-1)),gt(" 最終贏家是... 第 "+ut(Ne(t).winner.id)+" 組！ ",1),(et(!0),ot(At,null,Ur(r.value.toSorted((a,f)=>f.score-a.score),a=>(et(),ot("div",A_,[ke("h3",null,[gt("第 "+ut(a.id)+" 組 ",1),ke("i",null,ut(a===Ne(t).winner?"👑":"👻"),1)]),ke("span",null,"分數: "+ut(a.score),1)]))),256))],64))}}),_n=(e,t)=>{const r=e.__vccOpts||e;for(const[n,i]of t)r[n]=i;return r},S_=_n(w_,[["__scopeId","data-v-7819b9bd"]]);function ys(e){let t=e.length;for(;t!=0;){let r=Math.floor(Math.random()*t);t--,[e[t],e[r]]=[e[r],e[t]]}}const Is=e=>e[Math.floor(Math.random()*e.length)],C_=()=>[["吃好吃滿",`組內每個人都要裝滿半碗，並在1分鐘吃完。

成功 +80分
失敗 -20分`,er(80,-20)],["喝好喝滿",`組內每個人都要裝滿兩杯飲料，並在30秒喝完。

成功 +50分
失敗 -20分`,er(50,-20)],["記憶力比拚",`記住隊內至少三個人的名字並說出。

成功 +80分
失敗 -20分`,er(80,-20)],["記憶力比拚",`播放歌曲，記住該段歌詞並唱出。

成功 +100分
失敗 -20分`,er(100,-20)],["四不像",`團體做出指定團體動作，在1分鐘內完成。

成功 +50分
失敗 -20分`,er(50,-20)],["有你真好",`找一位其他隊伍的人 (不可重複) 拍照，1分鐘內完成。

成功 +60分
失敗 -50分`,er(60,-50)],["聖誕你不知",`回答聖誕節冷知識

聖誕老人住哪裡? (國家)
<span class="hide">芬蘭 羅瓦涅米</span>

成功 +50分
失敗 -20分`,er(50,-20)],["聖誕你不知",`回答聖誕節冷知識

聖誕老人的馴鹿是公還是母?
<span class="hide">母的</span>

成功 +50分
失敗 -20分`,er(50,-20)],["擠眉弄眼",`隊內互相使用便條紙貼在對方臉上某個部位，只能使用臉部肌肉把便條紙拿下，1分鐘內完成。

成功 +80分
失敗 -40分`,er(80,-40)],["支援前線",`拿到主持人要求物品及數量，回到原位，1分鐘內完成。

成功 +60分
失敗 -20分`,er(60,-20)],["比手劃腳",`指定一位並背對所有人，其他人提示直到猜到題目，3分鐘內完成。

成功 +80分
失敗 -40分`,er(80,-40)],["誰的腳腳最靈活",`每位組員接力用腳夾裝有豆子的杯子依序傳遞，最後數量占1/4者成功。

成功 +80分
失敗 -20分`,er(80,-20)],["誰是花栗鼠",`每位組員跟著簡易節拍唸出繞口令，1分鐘內完成。

成功 +60分
失敗 -20分`,er(60,-20)],["Just dance",`玩家須在無音樂時跳出"APT"副歌舞蹈 或 freestyle 滿一分鐘即成功。

成功 +60分
失敗 -20分`,er(60,-20)],["歌王大道",`玩家須唱出一首歌滿一分鐘即成功。

成功 +50分
失敗 -20分`,er(50,-20)],["你畫我猜",`每位組員接力畫出題目，使猜題者猜，2分鐘內答對2題即成功。

成功 +50分
失敗 -20分`,er(50,-20)],["屁屁超人",`玩家想出一句話，並依序用屁股寫出各個字，其餘玩家猜出即成功。

成功 +60分
失敗 -20分`,er(60,-20)],["誰是老鼠屎",`玩家站成一排，利用頭或臉部把物品傳遞給下一個人，中途無掉落，2分鐘內完成即成功。

成功 +80分
失敗 -20分`,er(80,-20)],["有你真好",`找一位工作人員 (不可重複) 拍照，1分鐘內完成。

成功 +60分
失敗 -40分`,er(60,-40)]];function er(e,t){return(r,n)=>{let i=1;n?(r.doubleTaskScore&&(r.doubleTaskScore--,i+=1),r.score+=e*i):r.score+=t}}const L_=()=>Is(C_());var fr=(e=>(e[e.Empty=0]="Empty",e[e.Spawner=1]="Spawner",e[e.Task=2]="Task",e[e.Opportunity=3]="Opportunity",e[e.Destiny=4]="Destiny",e[e.Punishment=5]="Punishment",e[e.Teleport=6]="Teleport",e[e.Prison=7]="Prison",e[e.Hospital=8]="Hospital",e))(fr||{});class Fn{constructor(t,r){Oe(this,"width");Oe(this,"height");Oe(this,"tiles");Oe(this,"flatTiles");Oe(this,"teleports",[]);Oe(this,"spawners",[]);Oe(this,"prisons",[]);Oe(this,"hospitals",[]);Oe(this,"punishments",[]);this.spawnPointDirections=r,this.tiles=t,this.width=t[0].length,this.height=t.length,this.flatTiles=this.tiles.flat();for(const[n,i]of this.flatTiles.entries())switch(i){case 6:{this.teleports.push(this.indexFromFlat(n));break}case 1:{this.spawners.push(this.indexFromFlat(n));break}case 5:{this.punishments.push(this.indexFromFlat(n));break}case 7:{this.prisons.push(this.indexFromFlat(n));break}case 8:{this.hospitals.push(this.indexFromFlat(n));break}}}getTile(t,r){return this.flatTiles[r*this.width+t]}indexFromFlat(t){const r=t%this.width,n=Math.floor(t/this.width);return[r,n]}indexFromPosition(t){const[r,n]=t;return n*this.width+r}spawnPoints(){const t=this.spawners;if(this.spawnPointDirections.length!==t.length){console.group("Spawner count not match directions"),console.log(`Directions: ${t.length}`),console.log(`Spawn Points: ${this.spawnPointDirections.length}`),console.group("Spawners: ");for(const n of t){const i=Array.from(this.nextPosition(n).keys());console.log(`Spawner: ${n}, Accepts: ${i}`)}throw console.groupEnd(),console.groupEnd(),new Error("spawner count not match directions")}return this.spawnPointDirections.map((n,i)=>[t[i],n])}nextPosition(t,r){const n=new Map([[dt.UP,[0,-1]],[dt.RIGHT,[1,0]],[dt.DOWN,[0,1]],[dt.LEFT,[-1,0]]]),i={[dt.UP]:dt.DOWN,[dt.RIGHT]:dt.LEFT,[dt.DOWN]:dt.UP,[dt.LEFT]:dt.RIGHT}[r],a=new Map;for(const[f,o]of n.entries()){if(f===i)continue;const l=t[0]+o[0],y=t[1]+o[1];l<0||y<0||l>=this.width||y>=this.height||this.getTile(l,y)===0||a.set(f,o)}return a}static tileColor(t){return{0:"black",1:"green",2:"blue",3:"yellow",4:"orange",5:"red",6:"purple",7:"gray",8:"white"}[t]}static tileText(t){return{0:"空地",1:"出生點",2:"任務",3:"機會",4:"命運",5:"懲罰",6:"傳送門",7:"監獄",8:"醫院"}[t]}static tileImage(t){const r=In();if(t===0)return;const n="tile-"+{1:"spawner",2:"task",3:"opportunity",4:"destiny",5:"punishment",6:"teleport",7:"prison",8:"hospital"}[t];return r.getTexture(n)}static stringToTile(t){const r={空:0,出:1,任:2,機:3,命:4,懲:5,傳:6,監:7,醫:8}[t];if(r===void 0)throw new Error("Invalid tile");return r}}Oe(Fn,"TILE_SIZE",64);const Er=()=>F_,R_=`
出任機傳命出命任機傳出
命空空空懲空命空空空懲
機空空空傳空機空空空傳
機空空空傳空機空空空傳
傳監醫任命任傳監醫任懲
出空空空命空傳空空空出
命任機傳命機命任機傳命
命空空空懲空命空空空懲
機空空空傳空機空空空傳
命空空空懲空命空空空懲
出監醫任命出傳監醫任出
`.trim(),O_=[dt.RIGHT,dt.RIGHT,dt.DOWN,dt.UP,dt.DOWN,dt.UP,dt.LEFT,dt.LEFT],F_=new Fn(R_.split(`
`).map(e=>e.split("").map(Fn.stringToTile)),O_),P_=()=>[["暴風雪","全部人受到 1 點傷害。",e=>{const t=xt();for(const r of t.players.values())r.damage(1)}],["掉錢包","遺失 25% 分數。(最高 100, 最低 20)",e=>{const t=Math.min(100,Math.max(20,Math.floor(e.score*.25)));e.score-=t}],["刑事拘留","傳送並關入監獄。",async e=>{const r=Er().prisons;let n=1/0,i=r[0];for(const a of r){const f=e.position.x-a[0],o=e.position.y-a[1],l=f*f+o*o;l<n&&(n=l,i=a)}await e.teleport(i),await e.trigger(fr.Prison),await ur().wait(500)}],["大流感","全部玩家傳送至醫院，使所有人降低至3點血。",async e=>{const t=xt(),n=Er().hospitals,i=n[Math.floor(Math.random()*n.length)];for(const a of t.players.values())a.teleport(i),a.health=Math.min(3,a.health);await ur().wait(500)}],["海克斯科技","全部人互相傳送。",async e=>{const t=xt(),r=Array.from(t.players.values()),n=r.map(i=>[i.position.x,i.position.y]);ys(n);for(const i in r){const a=r[i],f=n[i];a.teleport(f)}await ur().wait(500)}],["大聖人","向所有分享自己的金錢，但也分享給自己。",e=>{const t=xt(),r=t.players.size,n=Math.floor(e.score/r);for(const i of t.players.values())e.score-=n,i.score+=n}],["監獄超收","全部玩家傳送到監獄。",async e=>{const t=xt(),n=Er().prisons,i=n[Math.floor(Math.random()*n.length)];for(const a of t.players.values())a.teleport(i),a.trigger(fr.Prison);await ur().wait(500)}],["最後的晚餐","全部人承受不足致命的傷害。(除非剩下1滴血)",e=>{const t=xt();for(const r of t.players.values()){const n=Math.max(1,Math.floor(Math.random()*r.health));r.damage(n)}}],["雪球大戰","隨機攻擊玩家。",async e=>{const r=xt().withoutPlayer(e),n=r[Math.floor(Math.random()*r.length)];await e.attack(n,!0)}],["平安夜","全部人回復至滿血。",e=>{const t=xt();for(const r of t.players.values())r.health=Math.max(ni,r.health)}],["平安夜","全部人無敵一回合",e=>{const t=xt();for(const r of t.players.values())r.immune++}],["聖誕狂歡曲","全部人下次移動時獲得雙倍骰子。",e=>{const t=xt();for(const r of t.players.values())r.doubleDice++}],["北極探險","玩家前進到最近的懲罰格接受懲罰。",async e=>{const r=Er().punishments;let n=r[0],i=1/0;for(const a of r){const f=Math.abs(e.position.x-a[0])+Math.abs(e.position.y-a[1]);f<i&&(i=f,n=a)}await e.teleport(n),await e.trigger(fr.Punishment)}],["金錢危機","須支付30%分數給其餘玩家。",e=>{const t=xt(),r=Math.floor(e.score*.3);for(const n of t.players.values())n!==e&&(e.score-=r,n.score+=r)}],["扭轉命運","重抽一次命運事件。",e=>e.trigger(fr.Destiny)],["冰雹風暴","產生眩暈效果，暫停在原地一回合。",e=>{e.dizziness++}],["太空漫步","反轉方向。",e=>{e.reverseDirection()}],["這就是你的命","原地接受懲罰，捏鼻子模仿某個動物或角色的聲音一分鐘。",async e=>{}],["慢工出細活","下次移動時只能前進一格。",e=>{e.fixedDices.push(1)}],["木頭人","再次擲骰，但會被暈眩。",async e=>{const t=xt();t.steps=await e.throwDice("再次擲骰"),e.doubleDice=Math.max(0,e.doubleDice-1),e.dizziness++}]],D_=()=>Is(P_()),I_=()=>[["致命節奏","重骰，繼續前進。",async e=>{const t=xt();t.steps=await e.throwDice("繼續行動")}],["量子科技","與隨機一名玩家交換位置。",async e=>{const r=xt().withoutPlayer(e),n=r[Math.floor(Math.random()*r.length)],i=n.position.clone();n.teleportPosition(e.position),await e.teleportPosition(i)}],["背刺","移動至分數最高(不含自己)一位玩家並攻擊他。",async e=>{const r=xt().withoutPlayer(e),n=r.reduce((i,a)=>a.score>i.score?a:i,r[0]);await e.teleportPosition(n.position),await e.attack(n,!0)}],["共同富裕","與分數最高者，平分分數。(本身為最高時，與最低分者平分)",e=>{const r=xt().withoutPlayer(e),n=r.reduce((o,l)=>l.score>o.score?l:o,r[0]),i=r.reduce((o,l)=>l.score<o.score?l:o,r[0]),a=e.score>=n.score?i:n,f=e.score+a.score;e.score=Math.floor(f/2),a.score=f-e.score}],["聖誕交換禮物","選擇一位玩家，接受懲罰。",async e=>{const t=xt();(await ur().players.input("���擇一位玩家",t.withoutPlayer(e))).trigger(fr.Punishment)}],["聖誕交換禮物","選擇一位玩家，交換分數。",async e=>{const t=xt(),r=await ur().players.input("選擇一位玩家",t.withoutPlayer(e)),n=e.score;e.score=r.score,r.score=n}],["聖誕禮物","獲得 30 分、回復一點生命值。",e=>{e.score+=30,e.health+=1}],["聖誕禮物","扣至1點生命值、獲得 60% 分數 (最高 300 分，最低 100 分)。",e=>{e.health=1;let t=Math.floor(e.score*.6);t=Math.max(100,Math.min(t,300)),e.score+=t}],["聖誕夜","除你以外所有人暈眩一回合。",e=>{xt().withoutPlayer(e).forEach(n=>n.dizziness++)}],["重生而降","直接獲得 50 分。",e=>{e.score+=50}],["回家嚕","回到最近的起點。",async e=>{const r=Er().spawners;let n=r[0],i=1/0;for(const a of r){const f=Math.abs(e.position.x-a[0])+Math.abs(e.position.y-a[1]);f<i&&(i=f,n=a)}await e.teleport(n),await e.trigger()}],["我直直撞","前進6步。",async e=>{const t=xt();t.steps=6}],["滿血復活","回復至最大生命值。",e=>{e.health=ni}],["就想看你秀","抽到下一個任務時可指定其餘玩家完成。",e=>{}],["打不到我勒","免疫下一次攻擊。",e=>{e.immune++}],["Double星","下次移動時獲得雙倍骰子。",e=>{e.doubleDice++}],["Double星","下次任務獲得雙倍分數。",e=>{e.doubleTaskScore++}],["我要打鼠你","下一次攻擊時，扣兩倍血量。",e=>{e.doubleDamage++}]],G_=()=>Is(I_()),M_=()=>[["我是青蛙","蹲下學青蛙跳，並發出呱呱呱的聲音。",e=>{}],["我是企鵝","模仿企鵝走路繞一圈。",e=>{}],["我是大猩猩","模仿大猩猩雙手捶胸跑一圈。",e=>{}],["我是雞王","模仿公雞雙手擺動繞一圈，並發出咕咕咕的聲音。",e=>{}],["臭腳ㄚ攻擊","聞自己的襪子30秒，並說真香。",e=>{}],["我最好看","絲襪套頭5秒。",e=>{}],["人體噴水秀","含水唱出兩隻老虎。",e=>{}],["人體彩繪","請下一組玩家在你的臉上畫畫。",e=>{}],["斗六火車讚","上傳自拍照到限時動態，@營建系學會並打上一句話。",e=>{}],["老香了","聞自己的胳肢窩，並說真香。",e=>{}],["要活就要動","棒式1分鐘。",e=>{}],["誰能比我騷","M字腿五次。",e=>{}],["乾淨乖寶寶","背對大家，一邊扭屁股擺動作一邊唱洗刷刷*n遍。",e=>{}]],N_=()=>Is(M_()),Fd=()=>B_,B_=oi(new class{constructor(){Oe(this,"inner",new Map);Oe(this,"counter",0)}effect(t,r=1e3){const n=this.counter++;this.inner.set(n,t),setTimeout(()=>this.inner.delete(n),r)}sound(t){const n=In().getSound(t);if(!n)throw new Error("Sound not found");return n.currentTime=0,n.play(),n}check(t,r){return t===r.name}});var k_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $_(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Pd={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(k_,function(){var r=function(s){return s instanceof Uint8Array||s instanceof Uint16Array||s instanceof Uint32Array||s instanceof Int8Array||s instanceof Int16Array||s instanceof Int32Array||s instanceof Float32Array||s instanceof Float64Array||s instanceof Uint8ClampedArray},n=function(s,d){for(var _=Object.keys(d),G=0;G<_.length;++G)s[_[G]]=d[_[G]];return s},i=`
`;function a(s){return typeof atob<"u"?atob(s):"base64:"+s}function f(s){var d=new Error("(regl) "+s);throw console.error(d),d}function o(s,d){s||f(d)}function l(s){return s?": "+s:""}function y(s,d,_){s in d||f("unknown parameter ("+s+")"+l(_)+". possible values: "+Object.keys(d).join())}function g(s,d){r(s)||f("invalid parameter type"+l(d)+". must be a typed array")}function P(s,d){switch(d){case"number":return typeof s=="number";case"object":return typeof s=="object";case"string":return typeof s=="string";case"boolean":return typeof s=="boolean";case"function":return typeof s=="function";case"undefined":return typeof s>"u";case"symbol":return typeof s=="symbol"}}function $(s,d,_){P(s,d)||f("invalid parameter type"+l(_)+". expected "+d+", got "+typeof s)}function re(s,d){s>=0&&(s|0)===s||f("invalid parameter type, ("+s+")"+l(d)+". must be a nonnegative integer")}function ue(s,d,_){d.indexOf(s)<0&&f("invalid value"+l(_)+". must be one of: "+d)}var De=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function qe(s){Object.keys(s).forEach(function(d){De.indexOf(d)<0&&f('invalid regl constructor argument "'+d+'". must be one of '+De)})}function Ie(s,d){for(s=s+"";s.length<d;)s=" "+s;return s}function Qe(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function Ue(s,d){this.number=s,this.line=d,this.errors=[]}function ye(s,d,_){this.file=s,this.line=d,this.message=_}function Me(){var s=new Error,d=(s.stack||s).toString(),_=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(d);if(_)return _[1];var G=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(d);return G?G[1]:"unknown"}function We(){var s=new Error,d=(s.stack||s).toString(),_=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(d);if(_)return _[1];var G=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(d);return G?G[1]:"unknown"}function wt(s,d){var _=s.split(`
`),G=1,U=0,I={unknown:new Qe,0:new Qe};I.unknown.name=I[0].name=d||Me(),I.unknown.lines.push(new Ue(0,""));for(var B=0;B<_.length;++B){var X=_[B],W=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(X);if(W)switch(W[1]){case"line":var Z=/(\d+)(\s+\d+)?/.exec(W[2]);Z&&(G=Z[1]|0,Z[2]&&(U=Z[2]|0,U in I||(I[U]=new Qe)));break;case"define":var ee=/SHADER_NAME(_B64)?\s+(.*)$/.exec(W[2]);ee&&(I[U].name=ee[1]?a(ee[2]):ee[2]);break}I[U].lines.push(new Ue(G++,X))}return Object.keys(I).forEach(function(J){var oe=I[J];oe.lines.forEach(function(Y){oe.index[Y.number]=Y})}),I}function Ot(s){var d=[];return s.split(`
`).forEach(function(_){if(!(_.length<5)){var G=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(_);G?d.push(new ye(G[1]|0,G[2]|0,G[3].trim())):_.length>0&&d.push(new ye("unknown",0,_))}}),d}function He(s,d){d.forEach(function(_){var G=s[_.file];if(G){var U=G.index[_.line];if(U){U.errors.push(_),G.hasErrors=!0;return}}s.unknown.hasErrors=!0,s.unknown.lines[0].errors.push(_)})}function Je(s,d,_,G,U){if(!s.getShaderParameter(d,s.COMPILE_STATUS)){var I=s.getShaderInfoLog(d),B=G===s.FRAGMENT_SHADER?"fragment":"vertex";Ft(_,"string",B+" shader source must be a string",U);var X=wt(_,U),W=Ot(I);He(X,W),Object.keys(X).forEach(function(Z){var ee=X[Z];if(!ee.hasErrors)return;var J=[""],oe=[""];function Y(Q,C){J.push(Q),oe.push(C||"")}Y("file number "+Z+": "+ee.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),ee.lines.forEach(function(Q){if(Q.errors.length>0){Y(Ie(Q.number,4)+"|  ","background-color:yellow; font-weight:bold"),Y(Q.line+i,"color:red; background-color:yellow; font-weight:bold");var C=0;Q.errors.forEach(function(N){var q=N.message,be=/^\s*'(.*)'\s*:\s*(.*)$/.exec(q);if(be){var z=be[1];switch(q=be[2],z){case"assign":z="=";break}C=Math.max(Q.line.indexOf(z,C),0)}else C=0;Y(Ie("| ",6)),Y(Ie("^^^",C+3)+i,"font-weight:bold"),Y(Ie("| ",6)),Y(q+i,"font-weight:bold")}),Y(Ie("| ",6)+i)}else Y(Ie(Q.number,4)+"|  "),Y(Q.line+i,"color:red")}),typeof document<"u"&&!window.chrome?(oe[0]=J.join("%c"),console.log.apply(console,oe)):console.log(J.join(""))}),o.raise("Error compiling "+B+" shader, "+X[0].name)}}function mt(s,d,_,G,U){if(!s.getProgramParameter(d,s.LINK_STATUS)){var I=s.getProgramInfoLog(d),B=wt(_,U),X=wt(G,U),W='Error linking program with vertex shader, "'+X[0].name+'", and fragment shader "'+B[0].name+'"';typeof document<"u"?console.log("%c"+W+i+"%c"+I,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(W+i+I),o.raise(W)}}function Fe(s){s._commandRef=Me()}function vt(s,d,_,G){Fe(s);function U(W){return W?G.id(W):0}s._fragId=U(s.static.frag),s._vertId=U(s.static.vert);function I(W,Z){Object.keys(Z).forEach(function(ee){W[G.id(ee)]=!0})}var B=s._uniformSet={};I(B,d.static),I(B,d.dynamic);var X=s._attributeSet={};I(X,_.static),I(X,_.dynamic),s._hasCount="count"in s.static||"count"in s.dynamic||"elements"in s.static||"elements"in s.dynamic}function ft(s,d){var _=We();f(s+" in command "+(d||Me())+(_==="unknown"?"":" called from "+_))}function Nr(s,d,_){s||ft(d,_||Me())}function Yt(s,d,_,G){s in d||ft("unknown parameter ("+s+")"+l(_)+". possible values: "+Object.keys(d).join(),G||Me())}function Ft(s,d,_,G){P(s,d)||ft("invalid parameter type"+l(_)+". expected "+d+", got "+typeof s,G||Me())}function St(s){s()}function rn(s,d,_){s.texture?ue(s.texture._texture.internalformat,d,"unsupported texture format for attachment"):ue(s.renderbuffer._renderbuffer.format,_,"unsupported renderbuffer format for attachment")}var nn=33071,Hr=9728,Pr=9984,Ea=9985,Ms=9986,Ns=9987,Bn=5120,fi=5121,Mi=5122,Ta=5123,kn=5124,Aa=5125,Ni=5126,A=32819,R=32820,H=33635,le=34042,ie=36193,te={};te[Bn]=te[fi]=1,te[Mi]=te[Ta]=te[ie]=te[H]=te[A]=te[R]=2,te[kn]=te[Aa]=te[Ni]=te[le]=4;function Pe(s,d){return s===R||s===A||s===H?2:s===le?4:te[s]*d}function Te(s){return!(s&s-1)&&!!s}function Se(s,d,_){var G,U=d.width,I=d.height,B=d.channels;o(U>0&&U<=_.maxTextureSize&&I>0&&I<=_.maxTextureSize,"invalid texture shape"),(s.wrapS!==nn||s.wrapT!==nn)&&o(Te(U)&&Te(I),"incompatible wrap mode for texture, both width and height must be power of 2"),d.mipmask===1?U!==1&&I!==1&&o(s.minFilter!==Pr&&s.minFilter!==Ms&&s.minFilter!==Ea&&s.minFilter!==Ns,"min filter requires mipmap"):(o(Te(U)&&Te(I),"texture must be a square power of 2 to support mipmapping"),o(d.mipmask===(U<<1)-1,"missing or incomplete mipmap data")),d.type===Ni&&(_.extensions.indexOf("oes_texture_float_linear")<0&&o(s.minFilter===Hr&&s.magFilter===Hr,"filter not supported, must enable oes_texture_float_linear"),o(!s.genMipmaps,"mipmap generation not supported with float textures"));var X=d.images;for(G=0;G<16;++G)if(X[G]){var W=U>>G,Z=I>>G;o(d.mipmask&1<<G,"missing mipmap data");var ee=X[G];if(o(ee.width===W&&ee.height===Z,"invalid shape for mip images"),o(ee.format===d.format&&ee.internalformat===d.internalformat&&ee.type===d.type,"incompatible type for mip image"),!ee.compressed)if(ee.data){var J=Math.ceil(Pe(ee.type,B)*W/ee.unpackAlignment)*ee.unpackAlignment;o(ee.data.byteLength===J*Z,"invalid data for image, buffer size is inconsistent with image format")}else ee.element||ee.copy}else s.genMipmaps||o((d.mipmask&1<<G)===0,"extra mipmap data");d.compressed&&o(!s.genMipmaps,"mipmap generation for compressed images not supported")}function de(s,d,_,G){var U=s.width,I=s.height,B=s.channels;o(U>0&&U<=G.maxTextureSize&&I>0&&I<=G.maxTextureSize,"invalid texture shape"),o(U===I,"cube map must be square"),o(d.wrapS===nn&&d.wrapT===nn,"wrap mode not supported by cube map");for(var X=0;X<_.length;++X){var W=_[X];o(W.width===U&&W.height===I,"inconsistent cube map face shape"),d.genMipmaps&&(o(!W.compressed,"can not generate mipmap for compressed textures"),o(W.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Z=W.images,ee=0;ee<16;++ee){var J=Z[ee];if(J){var oe=U>>ee,Y=I>>ee;o(W.mipmask&1<<ee,"missing mipmap data"),o(J.width===oe&&J.height===Y,"invalid shape for mip images"),o(J.format===s.format&&J.internalformat===s.internalformat&&J.type===s.type,"incompatible type for mip image"),J.compressed||(J.data?o(J.data.byteLength===oe*Y*Math.max(Pe(J.type,B),J.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):J.element||J.copy)}}}}var c=n(o,{optional:St,raise:f,commandRaise:ft,command:Nr,parameter:y,commandParameter:Yt,constructor:qe,type:$,commandType:Ft,isTypedArray:g,nni:re,oneOf:ue,shaderError:Je,linkError:mt,callSite:We,saveCommandRef:Fe,saveDrawInfo:vt,framebufferFormat:rn,guessCommand:Me,texture2D:Se,textureCube:de}),Ge=0,Xe=0,rt=5,ht=6;function _t(s,d){this.id=Ge++,this.type=s,this.data=d}function bt(s){return s.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function qt(s){if(s.length===0)return[];var d=s.charAt(0),_=s.charAt(s.length-1);if(s.length>1&&d===_&&(d==='"'||d==="'"))return['"'+bt(s.substr(1,s.length-2))+'"'];var G=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(s);if(G)return qt(s.substr(0,G.index)).concat(qt(G[1])).concat(qt(s.substr(G.index+G[0].length)));var U=s.split(".");if(U.length===1)return['"'+bt(s)+'"'];for(var I=[],B=0;B<U.length;++B)I=I.concat(qt(U[B]));return I}function Qt(s){return"["+qt(s).join("][")+"]"}function Tr(s,d){return new _t(s,Qt(d+""))}function pr(s){return typeof s=="function"&&!s._reglType||s instanceof _t}function gn(s,d){if(typeof s=="function")return new _t(Xe,s);if(typeof s=="number"||typeof s=="boolean")return new _t(rt,s);if(Array.isArray(s))return new _t(ht,s.map(function(_,G){return gn(_,d+"["+G+"]")}));if(s instanceof _t)return s;c(!1,"invalid option type in uniform "+d)}var sr={DynamicVariable:_t,define:Tr,isDynamic:pr,unbox:gn,accessor:Qt},ir={next:typeof requestAnimationFrame=="function"?function(s){return requestAnimationFrame(s)}:function(s){return setTimeout(s,16)},cancel:typeof cancelAnimationFrame=="function"?function(s){return cancelAnimationFrame(s)}:clearTimeout},Ar=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function wa(){var s={"":0},d=[""];return{id:function(_){var G=s[_];return G||(G=s[_]=d.length,d.push(_),G)},str:function(_){return d[_]}}}function $d(s,d,_){var G=document.createElement("canvas");n(G.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),s.appendChild(G),s===document.body&&(G.style.position="absolute",n(s.style,{margin:0,padding:0}));function U(){var X=window.innerWidth,W=window.innerHeight;if(s!==document.body){var Z=G.getBoundingClientRect();X=Z.right-Z.left,W=Z.bottom-Z.top}G.width=_*X,G.height=_*W}var I;s!==document.body&&typeof ResizeObserver=="function"?(I=new ResizeObserver(function(){setTimeout(U)}),I.observe(s)):window.addEventListener("resize",U,!1);function B(){I?I.disconnect():window.removeEventListener("resize",U),s.removeChild(G)}return U(),{canvas:G,onDestroy:B}}function Ud(s,d){function _(G){try{return s.getContext(G,d)}catch{return null}}return _("webgl")||_("experimental-webgl")||_("webgl-experimental")}function jd(s){return typeof s.nodeName=="string"&&typeof s.appendChild=="function"&&typeof s.getBoundingClientRect=="function"}function Vd(s){return typeof s.drawArrays=="function"||typeof s.drawElements=="function"}function Ff(s){return typeof s=="string"?s.split():(c(Array.isArray(s),"invalid extension array"),s)}function Pf(s){return typeof s=="string"?(c(typeof document<"u","not supported outside of DOM"),document.querySelector(s)):s}function Hd(s){var d=s||{},_,G,U,I,B={},X=[],W=[],Z=typeof window>"u"?1:window.devicePixelRatio,ee=!1,J=function(Q){Q&&c.raise(Q)},oe=function(){};if(typeof d=="string"?(c(typeof document<"u","selector queries only supported in DOM environments"),_=document.querySelector(d),c(_,"invalid query string for element")):typeof d=="object"?jd(d)?_=d:Vd(d)?(I=d,U=I.canvas):(c.constructor(d),"gl"in d?I=d.gl:"canvas"in d?U=Pf(d.canvas):"container"in d&&(G=Pf(d.container)),"attributes"in d&&(B=d.attributes,c.type(B,"object","invalid context attributes")),"extensions"in d&&(X=Ff(d.extensions)),"optionalExtensions"in d&&(W=Ff(d.optionalExtensions)),"onDone"in d&&(c.type(d.onDone,"function","invalid or missing onDone callback"),J=d.onDone),"profile"in d&&(ee=!!d.profile),"pixelRatio"in d&&(Z=+d.pixelRatio,c(Z>0,"invalid pixel ratio"))):c.raise("invalid arguments to regl"),_&&(_.nodeName.toLowerCase()==="canvas"?U=_:G=_),!I){if(!U){c(typeof document<"u","must manually specify webgl context outside of DOM environments");var Y=$d(G||document.body,J,Z);if(!Y)return null;U=Y.canvas,oe=Y.onDestroy}B.premultipliedAlpha===void 0&&(B.premultipliedAlpha=!0),I=Ud(U,B)}return I?{gl:I,canvas:U,container:G,extensions:X,optionalExtensions:W,pixelRatio:Z,profile:ee,onDone:J,onDestroy:oe}:(oe(),J("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function zd(s,d){var _={};function G(B){c.type(B,"string","extension name must be string");var X=B.toLowerCase(),W;try{W=_[X]=s.getExtension(X)}catch{}return!!W}for(var U=0;U<d.extensions.length;++U){var I=d.extensions[U];if(!G(I))return d.onDestroy(),d.onDone('"'+I+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return d.optionalExtensions.forEach(G),{extensions:_,restore:function(){Object.keys(_).forEach(function(B){if(_[B]&&!G(B))throw new Error("(regl): error restoring extension "+B)})}}}function wr(s,d){for(var _=Array(s),G=0;G<s;++G)_[G]=d(G);return _}var Wd=5120,Xd=5121,Yd=5122,Kd=5123,qd=5124,Qd=5125,Zd=5126;function Jd(s){for(var d=16;d<=1<<28;d*=16)if(s<=d)return d;return 0}function Df(s){var d,_;return d=(s>65535)<<4,s>>>=d,_=(s>255)<<3,s>>>=_,d|=_,_=(s>15)<<2,s>>>=_,d|=_,_=(s>3)<<1,s>>>=_,d|=_,d|s>>1}function If(){var s=wr(8,function(){return[]});function d(I){var B=Jd(I),X=s[Df(B)>>2];return X.length>0?X.pop():new ArrayBuffer(B)}function _(I){s[Df(I.byteLength)>>2].push(I)}function G(I,B){var X=null;switch(I){case Wd:X=new Int8Array(d(B),0,B);break;case Xd:X=new Uint8Array(d(B),0,B);break;case Yd:X=new Int16Array(d(2*B),0,B);break;case Kd:X=new Uint16Array(d(2*B),0,B);break;case qd:X=new Int32Array(d(4*B),0,B);break;case Qd:X=new Uint32Array(d(4*B),0,B);break;case Zd:X=new Float32Array(d(4*B),0,B);break;default:return null}return X.length!==B?X.subarray(0,B):X}function U(I){_(I.buffer)}return{alloc:d,free:_,allocType:G,freeType:U}}var kt=If();kt.zero=If();var eh=3408,th=3410,rh=3411,nh=3412,ih=3413,ah=3414,sh=3415,oh=33901,fh=33902,lh=3379,ch=3386,uh=34921,dh=36347,hh=36348,ph=35661,mh=35660,vh=34930,_h=36349,gh=34076,bh=34024,yh=7936,xh=7937,Eh=7938,Th=35724,Ah=34047,wh=36063,Sh=34852,Sa=3553,Gf=34067,Ch=34069,Lh=33984,Bi=6408,Bs=5126,Mf=5121,ks=36160,Rh=36053,Oh=36064,Fh=16384,Ph=function(s,d){var _=1;d.ext_texture_filter_anisotropic&&(_=s.getParameter(Ah));var G=1,U=1;d.webgl_draw_buffers&&(G=s.getParameter(Sh),U=s.getParameter(wh));var I=!!d.oes_texture_float;if(I){var B=s.createTexture();s.bindTexture(Sa,B),s.texImage2D(Sa,0,Bi,1,1,0,Bi,Bs,null);var X=s.createFramebuffer();if(s.bindFramebuffer(ks,X),s.framebufferTexture2D(ks,Oh,Sa,B,0),s.bindTexture(Sa,null),s.checkFramebufferStatus(ks)!==Rh)I=!1;else{s.viewport(0,0,1,1),s.clearColor(1,0,0,1),s.clear(Fh);var W=kt.allocType(Bs,4);s.readPixels(0,0,1,1,Bi,Bs,W),s.getError()?I=!1:(s.deleteFramebuffer(X),s.deleteTexture(B),I=W[0]===1),kt.freeType(W)}}var Z=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),ee=!0;if(!Z){var J=s.createTexture(),oe=kt.allocType(Mf,36);s.activeTexture(Lh),s.bindTexture(Gf,J),s.texImage2D(Ch,0,Bi,3,3,0,Bi,Mf,oe),kt.freeType(oe),s.bindTexture(Gf,null),s.deleteTexture(J),ee=!s.getError()}return{colorBits:[s.getParameter(th),s.getParameter(rh),s.getParameter(nh),s.getParameter(ih)],depthBits:s.getParameter(ah),stencilBits:s.getParameter(sh),subpixelBits:s.getParameter(eh),extensions:Object.keys(d).filter(function(Y){return!!d[Y]}),maxAnisotropic:_,maxDrawbuffers:G,maxColorAttachments:U,pointSizeDims:s.getParameter(oh),lineWidthDims:s.getParameter(fh),maxViewportDims:s.getParameter(ch),maxCombinedTextureUnits:s.getParameter(ph),maxCubeMapSize:s.getParameter(gh),maxRenderbufferSize:s.getParameter(bh),maxTextureUnits:s.getParameter(vh),maxTextureSize:s.getParameter(lh),maxAttributes:s.getParameter(uh),maxVertexUniforms:s.getParameter(dh),maxVertexTextureUnits:s.getParameter(mh),maxVaryingVectors:s.getParameter(hh),maxFragmentUniforms:s.getParameter(_h),glsl:s.getParameter(Th),renderer:s.getParameter(xh),vendor:s.getParameter(yh),version:s.getParameter(Eh),readFloat:I,npotTextureCube:ee}};function Br(s){return!!s&&typeof s=="object"&&Array.isArray(s.shape)&&Array.isArray(s.stride)&&typeof s.offset=="number"&&s.shape.length===s.stride.length&&(Array.isArray(s.data)||r(s.data))}var Sr=function(s){return Object.keys(s).map(function(d){return s[d]})},Ca={shape:Mh,flatten:Gh};function Dh(s,d,_){for(var G=0;G<d;++G)_[G]=s[G]}function Ih(s,d,_,G){for(var U=0,I=0;I<d;++I)for(var B=s[I],X=0;X<_;++X)G[U++]=B[X]}function Nf(s,d,_,G,U,I){for(var B=I,X=0;X<d;++X)for(var W=s[X],Z=0;Z<_;++Z)for(var ee=W[Z],J=0;J<G;++J)U[B++]=ee[J]}function Bf(s,d,_,G,U){for(var I=1,B=_+1;B<d.length;++B)I*=d[B];var X=d[_];if(d.length-_===4){var W=d[_+1],Z=d[_+2],ee=d[_+3];for(B=0;B<X;++B)Nf(s[B],W,Z,ee,G,U),U+=I}else for(B=0;B<X;++B)Bf(s[B],d,_+1,G,U),U+=I}function Gh(s,d,_,G){var U=1;if(d.length)for(var I=0;I<d.length;++I)U*=d[I];else U=0;var B=G||kt.allocType(_,U);switch(d.length){case 0:break;case 1:Dh(s,d[0],B);break;case 2:Ih(s,d[0],d[1],B);break;case 3:Nf(s,d[0],d[1],d[2],B,0);break;default:Bf(s,d,0,B,0)}return B}function Mh(s){for(var d=[],_=s;_.length;_=_[0])d.push(_.length);return d}var $s={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Nh=5120,Bh=5122,kh=5124,$h=5121,Uh=5123,jh=5125,Vh=5126,Hh=5126,$n={int8:Nh,int16:Bh,int32:kh,uint8:$h,uint16:Uh,uint32:jh,float:Vh,float32:Hh},zh=35048,Wh=35040,La={dynamic:zh,stream:Wh,static:35044},Us=Ca.flatten,kf=Ca.shape,$f=35044,Xh=35040,js=5121,Vs=5126,bn=[];bn[5120]=1,bn[5122]=2,bn[5124]=4,bn[5121]=1,bn[5123]=2,bn[5125]=4,bn[5126]=4;function Ra(s){return $s[Object.prototype.toString.call(s)]|0}function Uf(s,d){for(var _=0;_<d.length;++_)s[_]=d[_]}function jf(s,d,_,G,U,I,B){for(var X=0,W=0;W<_;++W)for(var Z=0;Z<G;++Z)s[X++]=d[U*W+I*Z+B]}function Yh(s,d,_,G){var U=0,I={};function B(C){this.id=U++,this.buffer=s.createBuffer(),this.type=C,this.usage=$f,this.byteLength=0,this.dimension=1,this.dtype=js,this.persistentData=null,_.profile&&(this.stats={size:0})}B.prototype.bind=function(){s.bindBuffer(this.type,this.buffer)},B.prototype.destroy=function(){oe(this)};var X=[];function W(C,N){var q=X.pop();return q||(q=new B(C)),q.bind(),J(q,N,Xh,0,1,!1),q}function Z(C){X.push(C)}function ee(C,N,q){C.byteLength=N.byteLength,s.bufferData(C.type,N,q)}function J(C,N,q,be,z,_e){var pe;if(C.usage=q,Array.isArray(N)){if(C.dtype=be||Vs,N.length>0){var Be;if(Array.isArray(N[0])){pe=kf(N);for(var j=1,k=1;k<pe.length;++k)j*=pe[k];C.dimension=j,Be=Us(N,pe,C.dtype),ee(C,Be,q),_e?C.persistentData=Be:kt.freeType(Be)}else if(typeof N[0]=="number"){C.dimension=z;var Ae=kt.allocType(C.dtype,N.length);Uf(Ae,N),ee(C,Ae,q),_e?C.persistentData=Ae:kt.freeType(Ae)}else r(N[0])?(C.dimension=N[0].length,C.dtype=be||Ra(N[0])||Vs,Be=Us(N,[N.length,N[0].length],C.dtype),ee(C,Be,q),_e?C.persistentData=Be:kt.freeType(Be)):c.raise("invalid buffer data")}}else if(r(N))C.dtype=be||Ra(N),C.dimension=z,ee(C,N,q),_e&&(C.persistentData=new Uint8Array(new Uint8Array(N.buffer)));else if(Br(N)){pe=N.shape;var fe=N.stride,K=N.offset,ce=0,he=0,Ke=0,ze=0;pe.length===1?(ce=pe[0],he=1,Ke=fe[0],ze=0):pe.length===2?(ce=pe[0],he=pe[1],Ke=fe[0],ze=fe[1]):c.raise("invalid shape"),C.dtype=be||Ra(N.data)||Vs,C.dimension=he;var me=kt.allocType(C.dtype,ce*he);jf(me,N.data,ce,he,Ke,ze,K),ee(C,me,q),_e?C.persistentData=me:kt.freeType(me)}else N instanceof ArrayBuffer?(C.dtype=js,C.dimension=z,ee(C,N,q),_e&&(C.persistentData=new Uint8Array(new Uint8Array(N)))):c.raise("invalid buffer data")}function oe(C){d.bufferCount--,G(C);var N=C.buffer;c(N,"buffer must not be deleted already"),s.deleteBuffer(N),C.buffer=null,delete I[C.id]}function Y(C,N,q,be){d.bufferCount++;var z=new B(N);I[z.id]=z;function _e(j){var k=$f,Ae=null,fe=0,K=0,ce=1;return Array.isArray(j)||r(j)||Br(j)||j instanceof ArrayBuffer?Ae=j:typeof j=="number"?fe=j|0:j&&(c.type(j,"object","buffer arguments must be an object, a number or an array"),"data"in j&&(c(Ae===null||Array.isArray(Ae)||r(Ae)||Br(Ae),"invalid data for buffer"),Ae=j.data),"usage"in j&&(c.parameter(j.usage,La,"invalid buffer usage"),k=La[j.usage]),"type"in j&&(c.parameter(j.type,$n,"invalid buffer type"),K=$n[j.type]),"dimension"in j&&(c.type(j.dimension,"number","invalid dimension"),ce=j.dimension|0),"length"in j&&(c.nni(fe,"buffer length must be a nonnegative integer"),fe=j.length|0)),z.bind(),Ae?J(z,Ae,k,K,ce,be):(fe&&s.bufferData(z.type,fe,k),z.dtype=K||js,z.usage=k,z.dimension=ce,z.byteLength=fe),_.profile&&(z.stats.size=z.byteLength*bn[z.dtype]),_e}function pe(j,k){c(k+j.byteLength<=z.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+j.byteLength+" starting from offset "+k+" to a buffer of size "+z.byteLength),s.bufferSubData(z.type,k,j)}function Be(j,k){var Ae=(k||0)|0,fe;if(z.bind(),r(j)||j instanceof ArrayBuffer)pe(j,Ae);else if(Array.isArray(j)){if(j.length>0)if(typeof j[0]=="number"){var K=kt.allocType(z.dtype,j.length);Uf(K,j),pe(K,Ae),kt.freeType(K)}else if(Array.isArray(j[0])||r(j[0])){fe=kf(j);var ce=Us(j,fe,z.dtype);pe(ce,Ae),kt.freeType(ce)}else c.raise("invalid buffer data")}else if(Br(j)){fe=j.shape;var he=j.stride,Ke=0,ze=0,me=0,ge=0;fe.length===1?(Ke=fe[0],ze=1,me=he[0],ge=0):fe.length===2?(Ke=fe[0],ze=fe[1],me=he[0],ge=he[1]):c.raise("invalid shape");var je=Array.isArray(j.data)?z.dtype:Ra(j.data),Ye=kt.allocType(je,Ke*ze);jf(Ye,j.data,Ke,ze,me,ge,j.offset),pe(Ye,Ae),kt.freeType(Ye)}else c.raise("invalid data for buffer subdata");return _e}return q||_e(C),_e._reglType="buffer",_e._buffer=z,_e.subdata=Be,_.profile&&(_e.stats=z.stats),_e.destroy=function(){oe(z)},_e}function Q(){Sr(I).forEach(function(C){C.buffer=s.createBuffer(),s.bindBuffer(C.type,C.buffer),s.bufferData(C.type,C.persistentData||C.byteLength,C.usage)})}return _.profile&&(d.getTotalBufferSize=function(){var C=0;return Object.keys(I).forEach(function(N){C+=I[N].stats.size}),C}),{create:Y,createStream:W,destroyStream:Z,clear:function(){Sr(I).forEach(oe),X.forEach(oe)},getBuffer:function(C){return C&&C._buffer instanceof B?C._buffer:null},restore:Q,_initBuffer:J}}var Kh=0,qh=0,Qh=1,Zh=1,Jh=4,ep=4,yn={points:Kh,point:qh,lines:Qh,line:Zh,triangles:Jh,triangle:ep,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},tp=0,rp=1,ki=4,np=5120,li=5121,Vf=5122,ci=5123,Hf=5124,Un=5125,Hs=34963,ip=35040,ap=35044;function sp(s,d,_,G){var U={},I=0,B={uint8:li,uint16:ci};d.oes_element_index_uint&&(B.uint32=Un);function X(Q){this.id=I++,U[this.id]=this,this.buffer=Q,this.primType=ki,this.vertCount=0,this.type=0}X.prototype.bind=function(){this.buffer.bind()};var W=[];function Z(Q){var C=W.pop();return C||(C=new X(_.create(null,Hs,!0,!1)._buffer)),J(C,Q,ip,-1,-1,0,0),C}function ee(Q){W.push(Q)}function J(Q,C,N,q,be,z,_e){Q.buffer.bind();var pe;if(C){var Be=_e;!_e&&(!r(C)||Br(C)&&!r(C.data))&&(Be=d.oes_element_index_uint?Un:ci),_._initBuffer(Q.buffer,C,N,Be,3)}else s.bufferData(Hs,z,N),Q.buffer.dtype=pe||li,Q.buffer.usage=N,Q.buffer.dimension=3,Q.buffer.byteLength=z;if(pe=_e,!_e){switch(Q.buffer.dtype){case li:case np:pe=li;break;case ci:case Vf:pe=ci;break;case Un:case Hf:pe=Un;break;default:c.raise("unsupported type for element array")}Q.buffer.dtype=pe}Q.type=pe,c(pe!==Un||!!d.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var j=be;j<0&&(j=Q.buffer.byteLength,pe===ci?j>>=1:pe===Un&&(j>>=2)),Q.vertCount=j;var k=q;if(q<0){k=ki;var Ae=Q.buffer.dimension;Ae===1&&(k=tp),Ae===2&&(k=rp),Ae===3&&(k=ki)}Q.primType=k}function oe(Q){G.elementsCount--,c(Q.buffer!==null,"must not double destroy elements"),delete U[Q.id],Q.buffer.destroy(),Q.buffer=null}function Y(Q,C){var N=_.create(null,Hs,!0),q=new X(N._buffer);G.elementsCount++;function be(z){if(!z)N(),q.primType=ki,q.vertCount=0,q.type=li;else if(typeof z=="number")N(z),q.primType=ki,q.vertCount=z|0,q.type=li;else{var _e=null,pe=ap,Be=-1,j=-1,k=0,Ae=0;Array.isArray(z)||r(z)||Br(z)?_e=z:(c.type(z,"object","invalid arguments for elements"),"data"in z&&(_e=z.data,c(Array.isArray(_e)||r(_e)||Br(_e),"invalid data for element buffer")),"usage"in z&&(c.parameter(z.usage,La,"invalid element buffer usage"),pe=La[z.usage]),"primitive"in z&&(c.parameter(z.primitive,yn,"invalid element buffer primitive"),Be=yn[z.primitive]),"count"in z&&(c(typeof z.count=="number"&&z.count>=0,"invalid vertex count for elements"),j=z.count|0),"type"in z&&(c.parameter(z.type,B,"invalid buffer type"),Ae=B[z.type]),"length"in z?k=z.length|0:(k=j,Ae===ci||Ae===Vf?k*=2:(Ae===Un||Ae===Hf)&&(k*=4))),J(q,_e,pe,Be,j,k,Ae)}return be}return be(Q),be._reglType="elements",be._elements=q,be.subdata=function(z,_e){return N.subdata(z,_e),be},be.destroy=function(){oe(q)},be}return{create:Y,createStream:Z,destroyStream:ee,getElements:function(Q){return typeof Q=="function"&&Q._elements instanceof X?Q._elements:null},clear:function(){Sr(U).forEach(oe)}}}var zf=new Float32Array(1),op=new Uint32Array(zf.buffer),fp=5123;function Wf(s){for(var d=kt.allocType(fp,s.length),_=0;_<s.length;++_)if(isNaN(s[_]))d[_]=65535;else if(s[_]===1/0)d[_]=31744;else if(s[_]===-1/0)d[_]=64512;else{zf[0]=s[_];var G=op[0],U=G>>>31<<15,I=(G<<1>>>24)-127,B=G>>13&1023;if(I<-24)d[_]=U;else if(I<-14){var X=-14-I;d[_]=U+(B+1024>>X)}else I>15?d[_]=U+31744:d[_]=U+(I+15<<10)+B}return d}function Mt(s){return Array.isArray(s)||r(s)}var Xf=function(s){return!(s&s-1)&&!!s},lp=34467,zr=3553,zs=34067,Oa=34069,jn=6408,Ws=6406,Fa=6407,$i=6409,Pa=6410,Yf=32854,Xs=32855,Kf=36194,cp=32819,up=32820,dp=33635,hp=34042,Ys=6402,Da=34041,Ks=35904,qs=35906,ui=36193,Qs=33776,Zs=33777,Js=33778,eo=33779,qf=35986,Qf=35987,Zf=34798,Jf=35840,el=35841,tl=35842,rl=35843,nl=36196,di=5121,to=5123,ro=5125,Ui=5126,pp=10242,mp=10243,vp=10497,no=33071,_p=33648,gp=10240,bp=10241,io=9728,yp=9729,ao=9984,il=9985,al=9986,so=9987,xp=33170,Ia=4352,Ep=4353,Tp=4354,Ap=34046,wp=3317,Sp=37440,Cp=37441,Lp=37443,sl=37444,ji=33984,Rp=[ao,al,il,so],Ga=[0,$i,Pa,Fa,jn],Dr={};Dr[$i]=Dr[Ws]=Dr[Ys]=1,Dr[Da]=Dr[Pa]=2,Dr[Fa]=Dr[Ks]=3,Dr[jn]=Dr[qs]=4;function hi(s){return"[object "+s+"]"}var ol=hi("HTMLCanvasElement"),fl=hi("OffscreenCanvas"),ll=hi("CanvasRenderingContext2D"),cl=hi("ImageBitmap"),ul=hi("HTMLImageElement"),dl=hi("HTMLVideoElement"),Op=Object.keys($s).concat([ol,fl,ll,cl,ul,dl]),pi=[];pi[di]=1,pi[Ui]=4,pi[ui]=2,pi[to]=2,pi[ro]=4;var tr=[];tr[Yf]=2,tr[Xs]=2,tr[Kf]=2,tr[Da]=4,tr[Qs]=.5,tr[Zs]=.5,tr[Js]=1,tr[eo]=1,tr[qf]=.5,tr[Qf]=1,tr[Zf]=1,tr[Jf]=.5,tr[el]=.25,tr[tl]=.5,tr[rl]=.25,tr[nl]=.5;function hl(s){return Array.isArray(s)&&(s.length===0||typeof s[0]=="number")}function pl(s){if(!Array.isArray(s))return!1;var d=s.length;return!(d===0||!Mt(s[0]))}function Vn(s){return Object.prototype.toString.call(s)}function ml(s){return Vn(s)===ol}function vl(s){return Vn(s)===fl}function Fp(s){return Vn(s)===ll}function Pp(s){return Vn(s)===cl}function Dp(s){return Vn(s)===ul}function Ip(s){return Vn(s)===dl}function oo(s){if(!s)return!1;var d=Vn(s);return Op.indexOf(d)>=0?!0:hl(s)||pl(s)||Br(s)}function _l(s){return $s[Object.prototype.toString.call(s)]|0}function Gp(s,d){var _=d.length;switch(s.type){case di:case to:case ro:case Ui:var G=kt.allocType(s.type,_);G.set(d),s.data=G;break;case ui:s.data=Wf(d);break;default:c.raise("unsupported texture type, must specify a typed array")}}function gl(s,d){return kt.allocType(s.type===ui?Ui:s.type,d)}function bl(s,d){s.type===ui?(s.data=Wf(d),kt.freeType(d)):s.data=d}function Mp(s,d,_,G,U,I){for(var B=s.width,X=s.height,W=s.channels,Z=B*X*W,ee=gl(s,Z),J=0,oe=0;oe<X;++oe)for(var Y=0;Y<B;++Y)for(var Q=0;Q<W;++Q)ee[J++]=d[_*Y+G*oe+U*Q+I];bl(s,ee)}function Ma(s,d,_,G,U,I){var B;if(typeof tr[s]<"u"?B=tr[s]:B=Dr[s]*pi[d],I&&(B*=6),U){for(var X=0,W=_;W>=1;)X+=B*W*W,W/=2;return X}else return B*_*G}function Np(s,d,_,G,U,I,B){var X={"don't care":Ia,"dont care":Ia,nice:Tp,fast:Ep},W={repeat:vp,clamp:no,mirror:_p},Z={nearest:io,linear:yp},ee=n({mipmap:so,"nearest mipmap nearest":ao,"linear mipmap nearest":il,"nearest mipmap linear":al,"linear mipmap linear":so},Z),J={none:0,browser:sl},oe={uint8:di,rgba4:cp,rgb565:dp,"rgb5 a1":up},Y={alpha:Ws,luminance:$i,"luminance alpha":Pa,rgb:Fa,rgba:jn,rgba4:Yf,"rgb5 a1":Xs,rgb565:Kf},Q={};d.ext_srgb&&(Y.srgb=Ks,Y.srgba=qs),d.oes_texture_float&&(oe.float32=oe.float=Ui),d.oes_texture_half_float&&(oe.float16=oe["half float"]=ui),d.webgl_depth_texture&&(n(Y,{depth:Ys,"depth stencil":Da}),n(oe,{uint16:to,uint32:ro,"depth stencil":hp})),d.webgl_compressed_texture_s3tc&&n(Q,{"rgb s3tc dxt1":Qs,"rgba s3tc dxt1":Zs,"rgba s3tc dxt3":Js,"rgba s3tc dxt5":eo}),d.webgl_compressed_texture_atc&&n(Q,{"rgb atc":qf,"rgba atc explicit alpha":Qf,"rgba atc interpolated alpha":Zf}),d.webgl_compressed_texture_pvrtc&&n(Q,{"rgb pvrtc 4bppv1":Jf,"rgb pvrtc 2bppv1":el,"rgba pvrtc 4bppv1":tl,"rgba pvrtc 2bppv1":rl}),d.webgl_compressed_texture_etc1&&(Q["rgb etc1"]=nl);var C=Array.prototype.slice.call(s.getParameter(lp));Object.keys(Q).forEach(function(v){var M=Q[v];C.indexOf(M)>=0&&(Y[v]=M)});var N=Object.keys(Y);_.textureFormats=N;var q=[];Object.keys(Y).forEach(function(v){var M=Y[v];q[M]=v});var be=[];Object.keys(oe).forEach(function(v){var M=oe[v];be[M]=v});var z=[];Object.keys(Z).forEach(function(v){var M=Z[v];z[M]=v});var _e=[];Object.keys(ee).forEach(function(v){var M=ee[v];_e[M]=v});var pe=[];Object.keys(W).forEach(function(v){var M=W[v];pe[M]=v});var Be=N.reduce(function(v,M){var D=Y[M];return D===$i||D===Ws||D===$i||D===Pa||D===Ys||D===Da||d.ext_srgb&&(D===Ks||D===qs)?v[D]=D:D===Xs||M.indexOf("rgba")>=0?v[D]=jn:v[D]=Fa,v},{});function j(){this.internalformat=jn,this.format=jn,this.type=di,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=sl,this.width=0,this.height=0,this.channels=0}function k(v,M){v.internalformat=M.internalformat,v.format=M.format,v.type=M.type,v.compressed=M.compressed,v.premultiplyAlpha=M.premultiplyAlpha,v.flipY=M.flipY,v.unpackAlignment=M.unpackAlignment,v.colorSpace=M.colorSpace,v.width=M.width,v.height=M.height,v.channels=M.channels}function Ae(v,M){if(!(typeof M!="object"||!M)){if("premultiplyAlpha"in M&&(c.type(M.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),v.premultiplyAlpha=M.premultiplyAlpha),"flipY"in M&&(c.type(M.flipY,"boolean","invalid texture flip"),v.flipY=M.flipY),"alignment"in M&&(c.oneOf(M.alignment,[1,2,4,8],"invalid texture unpack alignment"),v.unpackAlignment=M.alignment),"colorSpace"in M&&(c.parameter(M.colorSpace,J,"invalid colorSpace"),v.colorSpace=J[M.colorSpace]),"type"in M){var D=M.type;c(d.oes_texture_float||!(D==="float"||D==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),c(d.oes_texture_half_float||!(D==="half float"||D==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),c(d.webgl_depth_texture||!(D==="uint16"||D==="uint32"||D==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),c.parameter(D,oe,"invalid texture type"),v.type=oe[D]}var Ee=v.width,nt=v.height,p=v.channels,u=!1;"shape"in M?(c(Array.isArray(M.shape)&&M.shape.length>=2,"shape must be an array"),Ee=M.shape[0],nt=M.shape[1],M.shape.length===3&&(p=M.shape[2],c(p>0&&p<=4,"invalid number of channels"),u=!0),c(Ee>=0&&Ee<=_.maxTextureSize,"invalid width"),c(nt>=0&&nt<=_.maxTextureSize,"invalid height")):("radius"in M&&(Ee=nt=M.radius,c(Ee>=0&&Ee<=_.maxTextureSize,"invalid radius")),"width"in M&&(Ee=M.width,c(Ee>=0&&Ee<=_.maxTextureSize,"invalid width")),"height"in M&&(nt=M.height,c(nt>=0&&nt<=_.maxTextureSize,"invalid height")),"channels"in M&&(p=M.channels,c(p>0&&p<=4,"invalid number of channels"),u=!0)),v.width=Ee|0,v.height=nt|0,v.channels=p|0;var x=!1;if("format"in M){var S=M.format;c(d.webgl_depth_texture||!(S==="depth"||S==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),c.parameter(S,Y,"invalid texture format");var O=v.internalformat=Y[S];v.format=Be[O],S in oe&&("type"in M||(v.type=oe[S])),S in Q&&(v.compressed=!0),x=!0}!u&&x?v.channels=Dr[v.format]:u&&!x?v.channels!==Ga[v.format]&&(v.format=v.internalformat=Ga[v.channels]):x&&u&&c(v.channels===Dr[v.format],"number of channels inconsistent with specified format")}}function fe(v){s.pixelStorei(Sp,v.flipY),s.pixelStorei(Cp,v.premultiplyAlpha),s.pixelStorei(Lp,v.colorSpace),s.pixelStorei(wp,v.unpackAlignment)}function K(){j.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function ce(v,M){var D=null;if(oo(M)?D=M:M&&(c.type(M,"object","invalid pixel data type"),Ae(v,M),"x"in M&&(v.xOffset=M.x|0),"y"in M&&(v.yOffset=M.y|0),oo(M.data)&&(D=M.data)),c(!v.compressed||D instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),M.copy){c(!D,"can not specify copy and data field for the same texture");var Ee=U.viewportWidth,nt=U.viewportHeight;v.width=v.width||Ee-v.xOffset,v.height=v.height||nt-v.yOffset,v.needsCopy=!0,c(v.xOffset>=0&&v.xOffset<Ee&&v.yOffset>=0&&v.yOffset<nt&&v.width>0&&v.width<=Ee&&v.height>0&&v.height<=nt,"copy texture read out of bounds")}else if(!D)v.width=v.width||1,v.height=v.height||1,v.channels=v.channels||4;else if(r(D))v.channels=v.channels||4,v.data=D,!("type"in M)&&v.type===di&&(v.type=_l(D));else if(hl(D))v.channels=v.channels||4,Gp(v,D),v.alignment=1,v.needsFree=!0;else if(Br(D)){var p=D.data;!Array.isArray(p)&&v.type===di&&(v.type=_l(p));var u=D.shape,x=D.stride,S,O,T,E,w,h;u.length===3?(T=u[2],h=x[2]):(c(u.length===2,"invalid ndarray pixel data, must be 2 or 3D"),T=1,h=1),S=u[0],O=u[1],E=x[0],w=x[1],v.alignment=1,v.width=S,v.height=O,v.channels=T,v.format=v.internalformat=Ga[T],v.needsFree=!0,Mp(v,p,E,w,h,D.offset)}else if(ml(D)||vl(D)||Fp(D))ml(D)||vl(D)?v.element=D:v.element=D.canvas,v.width=v.element.width,v.height=v.element.height,v.channels=4;else if(Pp(D))v.element=D,v.width=D.width,v.height=D.height,v.channels=4;else if(Dp(D))v.element=D,v.width=D.naturalWidth,v.height=D.naturalHeight,v.channels=4;else if(Ip(D))v.element=D,v.width=D.videoWidth,v.height=D.videoHeight,v.channels=4;else if(pl(D)){var b=v.width||D[0].length,m=v.height||D.length,L=v.channels;Mt(D[0][0])?L=L||D[0][0].length:L=L||1;for(var F=Ca.shape(D),V=1,ae=0;ae<F.length;++ae)V*=F[ae];var se=gl(v,V);Ca.flatten(D,F,"",se),bl(v,se),v.alignment=1,v.width=b,v.height=m,v.channels=L,v.format=v.internalformat=Ga[L],v.needsFree=!0}v.type===Ui?c(_.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):v.type===ui&&c(_.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function he(v,M,D){var Ee=v.element,nt=v.data,p=v.internalformat,u=v.format,x=v.type,S=v.width,O=v.height;fe(v),Ee?s.texImage2D(M,D,u,u,x,Ee):v.compressed?s.compressedTexImage2D(M,D,p,S,O,0,nt):v.needsCopy?(G(),s.copyTexImage2D(M,D,u,v.xOffset,v.yOffset,S,O,0)):s.texImage2D(M,D,u,S,O,0,u,x,nt||null)}function Ke(v,M,D,Ee,nt){var p=v.element,u=v.data,x=v.internalformat,S=v.format,O=v.type,T=v.width,E=v.height;fe(v),p?s.texSubImage2D(M,nt,D,Ee,S,O,p):v.compressed?s.compressedTexSubImage2D(M,nt,D,Ee,x,T,E,u):v.needsCopy?(G(),s.copyTexSubImage2D(M,nt,D,Ee,v.xOffset,v.yOffset,T,E)):s.texSubImage2D(M,nt,D,Ee,T,E,S,O,u)}var ze=[];function me(){return ze.pop()||new K}function ge(v){v.needsFree&&kt.freeType(v.data),K.call(v),ze.push(v)}function je(){j.call(this),this.genMipmaps=!1,this.mipmapHint=Ia,this.mipmask=0,this.images=Array(16)}function Ye(v,M,D){var Ee=v.images[0]=me();v.mipmask=1,Ee.width=v.width=M,Ee.height=v.height=D,Ee.channels=v.channels=4}function it(v,M){var D=null;if(oo(M))D=v.images[0]=me(),k(D,v),ce(D,M),v.mipmask=1;else if(Ae(v,M),Array.isArray(M.mipmap))for(var Ee=M.mipmap,nt=0;nt<Ee.length;++nt)D=v.images[nt]=me(),k(D,v),D.width>>=nt,D.height>>=nt,ce(D,Ee[nt]),v.mipmask|=1<<nt;else D=v.images[0]=me(),k(D,v),ce(D,M),v.mipmask=1;k(v,v.images[0]),v.compressed&&(v.internalformat===Qs||v.internalformat===Zs||v.internalformat===Js||v.internalformat===eo)&&c(v.width%4===0&&v.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Pt(v,M){for(var D=v.images,Ee=0;Ee<D.length;++Ee){if(!D[Ee])return;he(D[Ee],M,Ee)}}var It=[];function st(){var v=It.pop()||new je;j.call(v),v.mipmask=0;for(var M=0;M<16;++M)v.images[M]=null;return v}function Vt(v){for(var M=v.images,D=0;D<M.length;++D)M[D]&&ge(M[D]),M[D]=null;It.push(v)}function Ct(){this.minFilter=io,this.magFilter=io,this.wrapS=no,this.wrapT=no,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Ia}function Ut(v,M){if("min"in M){var D=M.min;c.parameter(D,ee),v.minFilter=ee[D],Rp.indexOf(v.minFilter)>=0&&!("faces"in M)&&(v.genMipmaps=!0)}if("mag"in M){var Ee=M.mag;c.parameter(Ee,Z),v.magFilter=Z[Ee]}var nt=v.wrapS,p=v.wrapT;if("wrap"in M){var u=M.wrap;typeof u=="string"?(c.parameter(u,W),nt=p=W[u]):Array.isArray(u)&&(c.parameter(u[0],W),c.parameter(u[1],W),nt=W[u[0]],p=W[u[1]])}else{if("wrapS"in M){var x=M.wrapS;c.parameter(x,W),nt=W[x]}if("wrapT"in M){var S=M.wrapT;c.parameter(S,W),p=W[S]}}if(v.wrapS=nt,v.wrapT=p,"anisotropic"in M){var O=M.anisotropic;c(typeof O=="number"&&O>=1&&O<=_.maxAnisotropic,"aniso samples must be between 1 and "),v.anisotropic=M.anisotropic}if("mipmap"in M){var T=!1;switch(typeof M.mipmap){case"string":c.parameter(M.mipmap,X,"invalid mipmap hint"),v.mipmapHint=X[M.mipmap],v.genMipmaps=!0,T=!0;break;case"boolean":T=v.genMipmaps=M.mipmap;break;case"object":c(Array.isArray(M.mipmap),"invalid mipmap type"),v.genMipmaps=!1,T=!0;break;default:c.raise("invalid mipmap type")}T&&!("min"in M)&&(v.minFilter=ao)}}function Ht(v,M){s.texParameteri(M,bp,v.minFilter),s.texParameteri(M,gp,v.magFilter),s.texParameteri(M,pp,v.wrapS),s.texParameteri(M,mp,v.wrapT),d.ext_texture_filter_anisotropic&&s.texParameteri(M,Ap,v.anisotropic),v.genMipmaps&&(s.hint(xp,v.mipmapHint),s.generateMipmap(M))}var zt=0,Zt={},rr=_.maxTextureUnits,Nt=Array(rr).map(function(){return null});function Ze(v){j.call(this),this.mipmask=0,this.internalformat=jn,this.id=zt++,this.refCount=1,this.target=v,this.texture=s.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Ct,B.profile&&(this.stats={size:0})}function nr(v){s.activeTexture(ji),s.bindTexture(v.target,v.texture)}function pt(){var v=Nt[0];v?s.bindTexture(v.target,v.texture):s.bindTexture(zr,null)}function $e(v){var M=v.texture;c(M,"must not double destroy texture");var D=v.unit,Ee=v.target;D>=0&&(s.activeTexture(ji+D),s.bindTexture(Ee,null),Nt[D]=null),s.deleteTexture(M),v.texture=null,v.params=null,v.pixels=null,v.refCount=0,delete Zt[v.id],I.textureCount--}n(Ze.prototype,{bind:function(){var v=this;v.bindCount+=1;var M=v.unit;if(M<0){for(var D=0;D<rr;++D){var Ee=Nt[D];if(Ee){if(Ee.bindCount>0)continue;Ee.unit=-1}Nt[D]=v,M=D;break}M>=rr&&c.raise("insufficient number of texture units"),B.profile&&I.maxTextureUnits<M+1&&(I.maxTextureUnits=M+1),v.unit=M,s.activeTexture(ji+M),s.bindTexture(v.target,v.texture)}return M},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&$e(this)}});function at(v,M){var D=new Ze(zr);Zt[D.id]=D,I.textureCount++;function Ee(u,x){var S=D.texInfo;Ct.call(S);var O=st();return typeof u=="number"?typeof x=="number"?Ye(O,u|0,x|0):Ye(O,u|0,u|0):u?(c.type(u,"object","invalid arguments to regl.texture"),Ut(S,u),it(O,u)):Ye(O,1,1),S.genMipmaps&&(O.mipmask=(O.width<<1)-1),D.mipmask=O.mipmask,k(D,O),c.texture2D(S,O,_),D.internalformat=O.internalformat,Ee.width=O.width,Ee.height=O.height,nr(D),Pt(O,zr),Ht(S,zr),pt(),Vt(O),B.profile&&(D.stats.size=Ma(D.internalformat,D.type,O.width,O.height,S.genMipmaps,!1)),Ee.format=q[D.internalformat],Ee.type=be[D.type],Ee.mag=z[S.magFilter],Ee.min=_e[S.minFilter],Ee.wrapS=pe[S.wrapS],Ee.wrapT=pe[S.wrapT],Ee}function nt(u,x,S,O){c(!!u,"must specify image data");var T=x|0,E=S|0,w=O|0,h=me();return k(h,D),h.width=0,h.height=0,ce(h,u),h.width=h.width||(D.width>>w)-T,h.height=h.height||(D.height>>w)-E,c(D.type===h.type&&D.format===h.format&&D.internalformat===h.internalformat,"incompatible format for texture.subimage"),c(T>=0&&E>=0&&T+h.width<=D.width&&E+h.height<=D.height,"texture.subimage write out of bounds"),c(D.mipmask&1<<w,"missing mipmap data"),c(h.data||h.element||h.needsCopy,"missing image data"),nr(D),Ke(h,zr,T,E,w),pt(),ge(h),Ee}function p(u,x){var S=u|0,O=x|0||S;if(S===D.width&&O===D.height)return Ee;Ee.width=D.width=S,Ee.height=D.height=O,nr(D);for(var T=0;D.mipmask>>T;++T){var E=S>>T,w=O>>T;if(!E||!w)break;s.texImage2D(zr,T,D.format,E,w,0,D.format,D.type,null)}return pt(),B.profile&&(D.stats.size=Ma(D.internalformat,D.type,S,O,!1,!1)),Ee}return Ee(v,M),Ee.subimage=nt,Ee.resize=p,Ee._reglType="texture2d",Ee._texture=D,B.profile&&(Ee.stats=D.stats),Ee.destroy=function(){D.decRef()},Ee}function ct(v,M,D,Ee,nt,p){var u=new Ze(zs);Zt[u.id]=u,I.cubeCount++;var x=new Array(6);function S(E,w,h,b,m,L){var F,V=u.texInfo;for(Ct.call(V),F=0;F<6;++F)x[F]=st();if(typeof E=="number"||!E){var ae=E|0||1;for(F=0;F<6;++F)Ye(x[F],ae,ae)}else if(typeof E=="object")if(w)it(x[0],E),it(x[1],w),it(x[2],h),it(x[3],b),it(x[4],m),it(x[5],L);else if(Ut(V,E),Ae(u,E),"faces"in E){var se=E.faces;for(c(Array.isArray(se)&&se.length===6,"cube faces must be a length 6 array"),F=0;F<6;++F)c(typeof se[F]=="object"&&!!se[F],"invalid input for cube map face"),k(x[F],u),it(x[F],se[F])}else for(F=0;F<6;++F)it(x[F],E);else c.raise("invalid arguments to cube map");for(k(u,x[0]),c.optional(function(){_.npotTextureCube||c(Xf(u.width)&&Xf(u.height),"your browser does not support non power or two texture dimensions")}),V.genMipmaps?u.mipmask=(x[0].width<<1)-1:u.mipmask=x[0].mipmask,c.textureCube(u,V,x,_),u.internalformat=x[0].internalformat,S.width=x[0].width,S.height=x[0].height,nr(u),F=0;F<6;++F)Pt(x[F],Oa+F);for(Ht(V,zs),pt(),B.profile&&(u.stats.size=Ma(u.internalformat,u.type,S.width,S.height,V.genMipmaps,!0)),S.format=q[u.internalformat],S.type=be[u.type],S.mag=z[V.magFilter],S.min=_e[V.minFilter],S.wrapS=pe[V.wrapS],S.wrapT=pe[V.wrapT],F=0;F<6;++F)Vt(x[F]);return S}function O(E,w,h,b,m){c(!!w,"must specify image data"),c(typeof E=="number"&&E===(E|0)&&E>=0&&E<6,"invalid face");var L=h|0,F=b|0,V=m|0,ae=me();return k(ae,u),ae.width=0,ae.height=0,ce(ae,w),ae.width=ae.width||(u.width>>V)-L,ae.height=ae.height||(u.height>>V)-F,c(u.type===ae.type&&u.format===ae.format&&u.internalformat===ae.internalformat,"incompatible format for texture.subimage"),c(L>=0&&F>=0&&L+ae.width<=u.width&&F+ae.height<=u.height,"texture.subimage write out of bounds"),c(u.mipmask&1<<V,"missing mipmap data"),c(ae.data||ae.element||ae.needsCopy,"missing image data"),nr(u),Ke(ae,Oa+E,L,F,V),pt(),ge(ae),S}function T(E){var w=E|0;if(w!==u.width){S.width=u.width=w,S.height=u.height=w,nr(u);for(var h=0;h<6;++h)for(var b=0;u.mipmask>>b;++b)s.texImage2D(Oa+h,b,u.format,w>>b,w>>b,0,u.format,u.type,null);return pt(),B.profile&&(u.stats.size=Ma(u.internalformat,u.type,S.width,S.height,!1,!0)),S}}return S(v,M,D,Ee,nt,p),S.subimage=O,S.resize=T,S._reglType="textureCube",S._texture=u,B.profile&&(S.stats=u.stats),S.destroy=function(){u.decRef()},S}function Bt(){for(var v=0;v<rr;++v)s.activeTexture(ji+v),s.bindTexture(zr,null),Nt[v]=null;Sr(Zt).forEach($e),I.cubeCount=0,I.textureCount=0}B.profile&&(I.getTotalTextureSize=function(){var v=0;return Object.keys(Zt).forEach(function(M){v+=Zt[M].stats.size}),v});function Xr(){for(var v=0;v<rr;++v){var M=Nt[v];M&&(M.bindCount=0,M.unit=-1,Nt[v]=null)}Sr(Zt).forEach(function(D){D.texture=s.createTexture(),s.bindTexture(D.target,D.texture);for(var Ee=0;Ee<32;++Ee)if(D.mipmask&1<<Ee)if(D.target===zr)s.texImage2D(zr,Ee,D.internalformat,D.width>>Ee,D.height>>Ee,0,D.internalformat,D.type,null);else for(var nt=0;nt<6;++nt)s.texImage2D(Oa+nt,Ee,D.internalformat,D.width>>Ee,D.height>>Ee,0,D.internalformat,D.type,null);Ht(D.texInfo,D.target)})}function qn(){for(var v=0;v<rr;++v){var M=Nt[v];M&&(M.bindCount=0,M.unit=-1,Nt[v]=null),s.activeTexture(ji+v),s.bindTexture(zr,null),s.bindTexture(zs,null)}}return{create2D:at,createCube:ct,clear:Bt,getTexture:function(v){return null},restore:Xr,refresh:qn}}var xn=36161,Na=32854,yl=32855,xl=36194,El=33189,Tl=36168,Al=34041,wl=35907,Sl=34836,Cl=34842,Ll=34843,kr=[];kr[Na]=2,kr[yl]=2,kr[xl]=2,kr[El]=2,kr[Tl]=1,kr[Al]=4,kr[wl]=4,kr[Sl]=16,kr[Cl]=8,kr[Ll]=6;function Rl(s,d,_){return kr[s]*d*_}var Bp=function(s,d,_,G,U){var I={rgba4:Na,rgb565:xl,"rgb5 a1":yl,depth:El,stencil:Tl,"depth stencil":Al};d.ext_srgb&&(I.srgba=wl),d.ext_color_buffer_half_float&&(I.rgba16f=Cl,I.rgb16f=Ll),d.webgl_color_buffer_float&&(I.rgba32f=Sl);var B=[];Object.keys(I).forEach(function(Y){var Q=I[Y];B[Q]=Y});var X=0,W={};function Z(Y){this.id=X++,this.refCount=1,this.renderbuffer=Y,this.format=Na,this.width=0,this.height=0,U.profile&&(this.stats={size:0})}Z.prototype.decRef=function(){--this.refCount<=0&&ee(this)};function ee(Y){var Q=Y.renderbuffer;c(Q,"must not double destroy renderbuffer"),s.bindRenderbuffer(xn,null),s.deleteRenderbuffer(Q),Y.renderbuffer=null,Y.refCount=0,delete W[Y.id],G.renderbufferCount--}function J(Y,Q){var C=new Z(s.createRenderbuffer());W[C.id]=C,G.renderbufferCount++;function N(be,z){var _e=0,pe=0,Be=Na;if(typeof be=="object"&&be){var j=be;if("shape"in j){var k=j.shape;c(Array.isArray(k)&&k.length>=2,"invalid renderbuffer shape"),_e=k[0]|0,pe=k[1]|0}else"radius"in j&&(_e=pe=j.radius|0),"width"in j&&(_e=j.width|0),"height"in j&&(pe=j.height|0);"format"in j&&(c.parameter(j.format,I,"invalid renderbuffer format"),Be=I[j.format])}else typeof be=="number"?(_e=be|0,typeof z=="number"?pe=z|0:pe=_e):be?c.raise("invalid arguments to renderbuffer constructor"):_e=pe=1;if(c(_e>0&&pe>0&&_e<=_.maxRenderbufferSize&&pe<=_.maxRenderbufferSize,"invalid renderbuffer size"),!(_e===C.width&&pe===C.height&&Be===C.format))return N.width=C.width=_e,N.height=C.height=pe,C.format=Be,s.bindRenderbuffer(xn,C.renderbuffer),s.renderbufferStorage(xn,Be,_e,pe),c(s.getError()===0,"invalid render buffer format"),U.profile&&(C.stats.size=Rl(C.format,C.width,C.height)),N.format=B[C.format],N}function q(be,z){var _e=be|0,pe=z|0||_e;return _e===C.width&&pe===C.height||(c(_e>0&&pe>0&&_e<=_.maxRenderbufferSize&&pe<=_.maxRenderbufferSize,"invalid renderbuffer size"),N.width=C.width=_e,N.height=C.height=pe,s.bindRenderbuffer(xn,C.renderbuffer),s.renderbufferStorage(xn,C.format,_e,pe),c(s.getError()===0,"invalid render buffer format"),U.profile&&(C.stats.size=Rl(C.format,C.width,C.height))),N}return N(Y,Q),N.resize=q,N._reglType="renderbuffer",N._renderbuffer=C,U.profile&&(N.stats=C.stats),N.destroy=function(){C.decRef()},N}U.profile&&(G.getTotalRenderbufferSize=function(){var Y=0;return Object.keys(W).forEach(function(Q){Y+=W[Q].stats.size}),Y});function oe(){Sr(W).forEach(function(Y){Y.renderbuffer=s.createRenderbuffer(),s.bindRenderbuffer(xn,Y.renderbuffer),s.renderbufferStorage(xn,Y.format,Y.width,Y.height)}),s.bindRenderbuffer(xn,null)}return{create:J,clear:function(){Sr(W).forEach(ee)},restore:oe}},an=36160,fo=36161,Hn=3553,Ba=34069,Ol=36064,Fl=36096,Pl=36128,Dl=33306,Il=36053,kp=36054,$p=36055,Up=36057,jp=36061,Vp=36193,Hp=5121,zp=5126,Gl=6407,Ml=6408,Wp=6402,Xp=[Gl,Ml],lo=[];lo[Ml]=4,lo[Gl]=3;var ka=[];ka[Hp]=1,ka[zp]=4,ka[Vp]=2;var Yp=32854,Kp=32855,qp=36194,Qp=33189,Zp=36168,Nl=34041,Jp=35907,em=34836,tm=34842,rm=34843,nm=[Yp,Kp,qp,Jp,tm,rm,em],mi={};mi[Il]="complete",mi[kp]="incomplete attachment",mi[Up]="incomplete dimensions",mi[$p]="incomplete, missing attachment",mi[jp]="unsupported";function im(s,d,_,G,U,I){var B={cur:null,next:null,dirty:!1,setFBO:null},X=["rgba"],W=["rgba4","rgb565","rgb5 a1"];d.ext_srgb&&W.push("srgba"),d.ext_color_buffer_half_float&&W.push("rgba16f","rgb16f"),d.webgl_color_buffer_float&&W.push("rgba32f");var Z=["uint8"];d.oes_texture_half_float&&Z.push("half float","float16"),d.oes_texture_float&&Z.push("float","float32");function ee(K,ce,he){this.target=K,this.texture=ce,this.renderbuffer=he;var Ke=0,ze=0;ce?(Ke=ce.width,ze=ce.height):he&&(Ke=he.width,ze=he.height),this.width=Ke,this.height=ze}function J(K){K&&(K.texture&&K.texture._texture.decRef(),K.renderbuffer&&K.renderbuffer._renderbuffer.decRef())}function oe(K,ce,he){if(K)if(K.texture){var Ke=K.texture._texture,ze=Math.max(1,Ke.width),me=Math.max(1,Ke.height);c(ze===ce&&me===he,"inconsistent width/height for supplied texture"),Ke.refCount+=1}else{var ge=K.renderbuffer._renderbuffer;c(ge.width===ce&&ge.height===he,"inconsistent width/height for renderbuffer"),ge.refCount+=1}}function Y(K,ce){ce&&(ce.texture?s.framebufferTexture2D(an,K,ce.target,ce.texture._texture.texture,0):s.framebufferRenderbuffer(an,K,fo,ce.renderbuffer._renderbuffer.renderbuffer))}function Q(K){var ce=Hn,he=null,Ke=null,ze=K;typeof K=="object"&&(ze=K.data,"target"in K&&(ce=K.target|0)),c.type(ze,"function","invalid attachment data");var me=ze._reglType;return me==="texture2d"?(he=ze,c(ce===Hn)):me==="textureCube"?(he=ze,c(ce>=Ba&&ce<Ba+6,"invalid cube map target")):me==="renderbuffer"?(Ke=ze,ce=fo):c.raise("invalid regl object for attachment"),new ee(ce,he,Ke)}function C(K,ce,he,Ke,ze){if(he){var me=G.create2D({width:K,height:ce,format:Ke,type:ze});return me._texture.refCount=0,new ee(Hn,me,null)}else{var ge=U.create({width:K,height:ce,format:Ke});return ge._renderbuffer.refCount=0,new ee(fo,null,ge)}}function N(K){return K&&(K.texture||K.renderbuffer)}function q(K,ce,he){K&&(K.texture?K.texture.resize(ce,he):K.renderbuffer&&K.renderbuffer.resize(ce,he),K.width=ce,K.height=he)}var be=0,z={};function _e(){this.id=be++,z[this.id]=this,this.framebuffer=s.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function pe(K){K.colorAttachments.forEach(J),J(K.depthAttachment),J(K.stencilAttachment),J(K.depthStencilAttachment)}function Be(K){var ce=K.framebuffer;c(ce,"must not double destroy framebuffer"),s.deleteFramebuffer(ce),K.framebuffer=null,I.framebufferCount--,delete z[K.id]}function j(K){var ce;s.bindFramebuffer(an,K.framebuffer);var he=K.colorAttachments;for(ce=0;ce<he.length;++ce)Y(Ol+ce,he[ce]);for(ce=he.length;ce<_.maxColorAttachments;++ce)s.framebufferTexture2D(an,Ol+ce,Hn,null,0);s.framebufferTexture2D(an,Dl,Hn,null,0),s.framebufferTexture2D(an,Fl,Hn,null,0),s.framebufferTexture2D(an,Pl,Hn,null,0),Y(Fl,K.depthAttachment),Y(Pl,K.stencilAttachment),Y(Dl,K.depthStencilAttachment);var Ke=s.checkFramebufferStatus(an);!s.isContextLost()&&Ke!==Il&&c.raise("framebuffer configuration not supported, status = "+mi[Ke]),s.bindFramebuffer(an,B.next?B.next.framebuffer:null),B.cur=B.next,s.getError()}function k(K,ce){var he=new _e;I.framebufferCount++;function Ke(me,ge){var je;c(B.next!==he,"can not update framebuffer which is currently in use");var Ye=0,it=0,Pt=!0,It=!0,st=null,Vt=!0,Ct="rgba",Ut="uint8",Ht=1,zt=null,Zt=null,rr=null,Nt=!1;if(typeof me=="number")Ye=me|0,it=ge|0||Ye;else if(!me)Ye=it=1;else{c.type(me,"object","invalid arguments for framebuffer");var Ze=me;if("shape"in Ze){var nr=Ze.shape;c(Array.isArray(nr)&&nr.length>=2,"invalid shape for framebuffer"),Ye=nr[0],it=nr[1]}else"radius"in Ze&&(Ye=it=Ze.radius),"width"in Ze&&(Ye=Ze.width),"height"in Ze&&(it=Ze.height);("color"in Ze||"colors"in Ze)&&(st=Ze.color||Ze.colors,Array.isArray(st)&&c(st.length===1||d.webgl_draw_buffers,"multiple render targets not supported")),st||("colorCount"in Ze&&(Ht=Ze.colorCount|0,c(Ht>0,"invalid color buffer count")),"colorTexture"in Ze&&(Vt=!!Ze.colorTexture,Ct="rgba4"),"colorType"in Ze&&(Ut=Ze.colorType,Vt?(c(d.oes_texture_float||!(Ut==="float"||Ut==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),c(d.oes_texture_half_float||!(Ut==="half float"||Ut==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Ut==="half float"||Ut==="float16"?(c(d.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Ct="rgba16f"):(Ut==="float"||Ut==="float32")&&(c(d.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Ct="rgba32f"),c.oneOf(Ut,Z,"invalid color type")),"colorFormat"in Ze&&(Ct=Ze.colorFormat,X.indexOf(Ct)>=0?Vt=!0:W.indexOf(Ct)>=0?Vt=!1:c.optional(function(){Vt?c.oneOf(Ze.colorFormat,X,"invalid color format for texture"):c.oneOf(Ze.colorFormat,W,"invalid color format for renderbuffer")}))),("depthTexture"in Ze||"depthStencilTexture"in Ze)&&(Nt=!!(Ze.depthTexture||Ze.depthStencilTexture),c(!Nt||d.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Ze&&(typeof Ze.depth=="boolean"?Pt=Ze.depth:(zt=Ze.depth,It=!1)),"stencil"in Ze&&(typeof Ze.stencil=="boolean"?It=Ze.stencil:(Zt=Ze.stencil,Pt=!1)),"depthStencil"in Ze&&(typeof Ze.depthStencil=="boolean"?Pt=It=Ze.depthStencil:(rr=Ze.depthStencil,Pt=!1,It=!1))}var pt=null,$e=null,at=null,ct=null;if(Array.isArray(st))pt=st.map(Q);else if(st)pt=[Q(st)];else for(pt=new Array(Ht),je=0;je<Ht;++je)pt[je]=C(Ye,it,Vt,Ct,Ut);c(d.webgl_draw_buffers||pt.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),c(pt.length<=_.maxColorAttachments,"too many color attachments, not supported"),Ye=Ye||pt[0].width,it=it||pt[0].height,zt?$e=Q(zt):Pt&&!It&&($e=C(Ye,it,Nt,"depth","uint32")),Zt?at=Q(Zt):It&&!Pt&&(at=C(Ye,it,!1,"stencil","uint8")),rr?ct=Q(rr):!zt&&!Zt&&It&&Pt&&(ct=C(Ye,it,Nt,"depth stencil","depth stencil")),c(!!zt+!!Zt+!!rr<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var Bt=null;for(je=0;je<pt.length;++je)if(oe(pt[je],Ye,it),c(!pt[je]||pt[je].texture&&Xp.indexOf(pt[je].texture._texture.format)>=0||pt[je].renderbuffer&&nm.indexOf(pt[je].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+je+" is invalid"),pt[je]&&pt[je].texture){var Xr=lo[pt[je].texture._texture.format]*ka[pt[je].texture._texture.type];Bt===null?Bt=Xr:c(Bt===Xr,"all color attachments much have the same number of bits per pixel.")}return oe($e,Ye,it),c(!$e||$e.texture&&$e.texture._texture.format===Wp||$e.renderbuffer&&$e.renderbuffer._renderbuffer.format===Qp,"invalid depth attachment for framebuffer object"),oe(at,Ye,it),c(!at||at.renderbuffer&&at.renderbuffer._renderbuffer.format===Zp,"invalid stencil attachment for framebuffer object"),oe(ct,Ye,it),c(!ct||ct.texture&&ct.texture._texture.format===Nl||ct.renderbuffer&&ct.renderbuffer._renderbuffer.format===Nl,"invalid depth-stencil attachment for framebuffer object"),pe(he),he.width=Ye,he.height=it,he.colorAttachments=pt,he.depthAttachment=$e,he.stencilAttachment=at,he.depthStencilAttachment=ct,Ke.color=pt.map(N),Ke.depth=N($e),Ke.stencil=N(at),Ke.depthStencil=N(ct),Ke.width=he.width,Ke.height=he.height,j(he),Ke}function ze(me,ge){c(B.next!==he,"can not resize a framebuffer which is currently in use");var je=Math.max(me|0,1),Ye=Math.max(ge|0||je,1);if(je===he.width&&Ye===he.height)return Ke;for(var it=he.colorAttachments,Pt=0;Pt<it.length;++Pt)q(it[Pt],je,Ye);return q(he.depthAttachment,je,Ye),q(he.stencilAttachment,je,Ye),q(he.depthStencilAttachment,je,Ye),he.width=Ke.width=je,he.height=Ke.height=Ye,j(he),Ke}return Ke(K,ce),n(Ke,{resize:ze,_reglType:"framebuffer",_framebuffer:he,destroy:function(){Be(he),pe(he)},use:function(me){B.setFBO({framebuffer:Ke},me)}})}function Ae(K){var ce=Array(6);function he(ze){var me;c(ce.indexOf(B.next)<0,"can not update framebuffer which is currently in use");var ge={color:null},je=0,Ye=null,it="rgba",Pt="uint8",It=1;if(typeof ze=="number")je=ze|0;else if(!ze)je=1;else{c.type(ze,"object","invalid arguments for framebuffer");var st=ze;if("shape"in st){var Vt=st.shape;c(Array.isArray(Vt)&&Vt.length>=2,"invalid shape for framebuffer"),c(Vt[0]===Vt[1],"cube framebuffer must be square"),je=Vt[0]}else"radius"in st&&(je=st.radius|0),"width"in st?(je=st.width|0,"height"in st&&c(st.height===je,"must be square")):"height"in st&&(je=st.height|0);("color"in st||"colors"in st)&&(Ye=st.color||st.colors,Array.isArray(Ye)&&c(Ye.length===1||d.webgl_draw_buffers,"multiple render targets not supported")),Ye||("colorCount"in st&&(It=st.colorCount|0,c(It>0,"invalid color buffer count")),"colorType"in st&&(c.oneOf(st.colorType,Z,"invalid color type"),Pt=st.colorType),"colorFormat"in st&&(it=st.colorFormat,c.oneOf(st.colorFormat,X,"invalid color format for texture"))),"depth"in st&&(ge.depth=st.depth),"stencil"in st&&(ge.stencil=st.stencil),"depthStencil"in st&&(ge.depthStencil=st.depthStencil)}var Ct;if(Ye)if(Array.isArray(Ye))for(Ct=[],me=0;me<Ye.length;++me)Ct[me]=Ye[me];else Ct=[Ye];else{Ct=Array(It);var Ut={radius:je,format:it,type:Pt};for(me=0;me<It;++me)Ct[me]=G.createCube(Ut)}for(ge.color=Array(Ct.length),me=0;me<Ct.length;++me){var Ht=Ct[me];c(typeof Ht=="function"&&Ht._reglType==="textureCube","invalid cube map"),je=je||Ht.width,c(Ht.width===je&&Ht.height===je,"invalid cube map shape"),ge.color[me]={target:Ba,data:Ct[me]}}for(me=0;me<6;++me){for(var zt=0;zt<Ct.length;++zt)ge.color[zt].target=Ba+me;me>0&&(ge.depth=ce[0].depth,ge.stencil=ce[0].stencil,ge.depthStencil=ce[0].depthStencil),ce[me]?ce[me](ge):ce[me]=k(ge)}return n(he,{width:je,height:je,color:Ct})}function Ke(ze){var me,ge=ze|0;if(c(ge>0&&ge<=_.maxCubeMapSize,"invalid radius for cube fbo"),ge===he.width)return he;var je=he.color;for(me=0;me<je.length;++me)je[me].resize(ge);for(me=0;me<6;++me)ce[me].resize(ge);return he.width=he.height=ge,he}return he(K),n(he,{faces:ce,resize:Ke,_reglType:"framebufferCube",destroy:function(){ce.forEach(function(ze){ze.destroy()})}})}function fe(){B.cur=null,B.next=null,B.dirty=!0,Sr(z).forEach(function(K){K.framebuffer=s.createFramebuffer(),j(K)})}return n(B,{getFramebuffer:function(K){if(typeof K=="function"&&K._reglType==="framebuffer"){var ce=K._framebuffer;if(ce instanceof _e)return ce}return null},create:k,createCube:Ae,clear:function(){Sr(z).forEach(Be)},restore:fe})}var am=5126,Bl=34962,$a=34963,kl=["attributes","elements","offset","count","primitive","instances"];function co(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=am,this.offset=0,this.stride=0,this.divisor=0}function sm(s,d,_,G,U,I,B){for(var X=_.maxAttributes,W=new Array(X),Z=0;Z<X;++Z)W[Z]=new co;var ee=0,J={},oe={Record:co,scope:{},state:W,currentVAO:null,targetVAO:null,restore:Q()?pe:function(){},createVAO:Be,getVAO:N,destroyBuffer:Y,setVAO:Q()?q:be,clear:Q()?z:function(){}};function Y(j){for(var k=0;k<W.length;++k){var Ae=W[k];Ae.buffer===j&&(s.disableVertexAttribArray(k),Ae.buffer=null)}}function Q(){return d.oes_vertex_array_object}function C(){return d.angle_instanced_arrays}function N(j){return typeof j=="function"&&j._vao?j._vao:null}function q(j){if(j!==oe.currentVAO){var k=Q();j?k.bindVertexArrayOES(j.vao):k.bindVertexArrayOES(null),oe.currentVAO=j}}function be(j){if(j!==oe.currentVAO){if(j)j.bindAttrs();else{for(var k=C(),Ae=0;Ae<W.length;++Ae){var fe=W[Ae];fe.buffer?(s.enableVertexAttribArray(Ae),fe.buffer.bind(),s.vertexAttribPointer(Ae,fe.size,fe.type,fe.normalized,fe.stride,fe.offfset),k&&fe.divisor&&k.vertexAttribDivisorANGLE(Ae,fe.divisor)):(s.disableVertexAttribArray(Ae),s.vertexAttrib4f(Ae,fe.x,fe.y,fe.z,fe.w))}B.elements?s.bindBuffer($a,B.elements.buffer.buffer):s.bindBuffer($a,null)}oe.currentVAO=j}}function z(){Sr(J).forEach(function(j){j.destroy()})}function _e(){this.id=++ee,this.attributes=[],this.elements=null,this.ownsElements=!1,this.count=0,this.offset=0,this.instances=-1,this.primitive=4;var j=Q();j?this.vao=j.createVertexArrayOES():this.vao=null,J[this.id]=this,this.buffers=[]}_e.prototype.bindAttrs=function(){for(var j=C(),k=this.attributes,Ae=0;Ae<k.length;++Ae){var fe=k[Ae];fe.buffer?(s.enableVertexAttribArray(Ae),s.bindBuffer(Bl,fe.buffer.buffer),s.vertexAttribPointer(Ae,fe.size,fe.type,fe.normalized,fe.stride,fe.offset),j&&fe.divisor&&j.vertexAttribDivisorANGLE(Ae,fe.divisor)):(s.disableVertexAttribArray(Ae),s.vertexAttrib4f(Ae,fe.x,fe.y,fe.z,fe.w))}for(var K=k.length;K<X;++K)s.disableVertexAttribArray(K);var ce=I.getElements(this.elements);ce?s.bindBuffer($a,ce.buffer.buffer):s.bindBuffer($a,null)},_e.prototype.refresh=function(){var j=Q();j&&(j.bindVertexArrayOES(this.vao),this.bindAttrs(),oe.currentVAO=null,j.bindVertexArrayOES(null))},_e.prototype.destroy=function(){if(this.vao){var j=Q();this===oe.currentVAO&&(oe.currentVAO=null,j.bindVertexArrayOES(null)),j.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),J[this.id]&&(delete J[this.id],G.vaoCount-=1)};function pe(){var j=Q();j&&Sr(J).forEach(function(k){k.refresh()})}function Be(j){var k=new _e;G.vaoCount+=1;function Ae(fe){var K;if(Array.isArray(fe))K=fe,k.elements&&k.ownsElements&&k.elements.destroy(),k.elements=null,k.ownsElements=!1,k.offset=0,k.count=0,k.instances=-1,k.primitive=4;else{if(c(typeof fe=="object","invalid arguments for create vao"),c("attributes"in fe,"must specify attributes for vao"),fe.elements){var ce=fe.elements;k.ownsElements?typeof ce=="function"&&ce._reglType==="elements"?(k.elements.destroy(),k.ownsElements=!1):(k.elements(ce),k.ownsElements=!1):I.getElements(fe.elements)?(k.elements=fe.elements,k.ownsElements=!1):(k.elements=I.create(fe.elements),k.ownsElements=!0)}else k.elements=null,k.ownsElements=!1;K=fe.attributes,k.offset=0,k.count=-1,k.instances=-1,k.primitive=4,k.elements&&(k.count=k.elements._elements.vertCount,k.primitive=k.elements._elements.primType),"offset"in fe&&(k.offset=fe.offset|0),"count"in fe&&(k.count=fe.count|0),"instances"in fe&&(k.instances=fe.instances|0),"primitive"in fe&&(c(fe.primitive in yn,"bad primitive type: "+fe.primitive),k.primitive=yn[fe.primitive]),c.optional(()=>{for(var Pt=Object.keys(fe),It=0;It<Pt.length;++It)c(kl.indexOf(Pt[It])>=0,'invalid option for vao: "'+Pt[It]+'" valid options are '+kl)}),c(Array.isArray(K),"attributes must be an array")}c(K.length<X,"too many attributes"),c(K.length>0,"must specify at least one attribute");var he={},Ke=k.attributes;Ke.length=K.length;for(var ze=0;ze<K.length;++ze){var me=K[ze],ge=Ke[ze]=new co,je=me.data||me;if(Array.isArray(je)||r(je)||Br(je)){var Ye;k.buffers[ze]&&(Ye=k.buffers[ze],r(je)&&Ye._buffer.byteLength>=je.byteLength?Ye.subdata(je):(Ye.destroy(),k.buffers[ze]=null)),k.buffers[ze]||(Ye=k.buffers[ze]=U.create(me,Bl,!1,!0)),ge.buffer=U.getBuffer(Ye),ge.size=ge.buffer.dimension|0,ge.normalized=!1,ge.type=ge.buffer.dtype,ge.offset=0,ge.stride=0,ge.divisor=0,ge.state=1,he[ze]=1}else U.getBuffer(me)?(ge.buffer=U.getBuffer(me),ge.size=ge.buffer.dimension|0,ge.normalized=!1,ge.type=ge.buffer.dtype,ge.offset=0,ge.stride=0,ge.divisor=0,ge.state=1):U.getBuffer(me.buffer)?(ge.buffer=U.getBuffer(me.buffer),ge.size=(+me.size||ge.buffer.dimension)|0,ge.normalized=!!me.normalized||!1,"type"in me?(c.parameter(me.type,$n,"invalid buffer type"),ge.type=$n[me.type]):ge.type=ge.buffer.dtype,ge.offset=(me.offset||0)|0,ge.stride=(me.stride||0)|0,ge.divisor=(me.divisor||0)|0,ge.state=1,c(ge.size>=1&&ge.size<=4,"size must be between 1 and 4"),c(ge.offset>=0,"invalid offset"),c(ge.stride>=0&&ge.stride<=255,"stride must be between 0 and 255"),c(ge.divisor>=0,"divisor must be positive"),c(!ge.divisor||!!d.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in me?(c(ze>0,"first attribute must not be a constant"),ge.x=+me.x||0,ge.y=+me.y||0,ge.z=+me.z||0,ge.w=+me.w||0,ge.state=2):c(!1,"invalid attribute spec for location "+ze)}for(var it=0;it<k.buffers.length;++it)!he[it]&&k.buffers[it]&&(k.buffers[it].destroy(),k.buffers[it]=null);return k.refresh(),Ae}return Ae.destroy=function(){for(var fe=0;fe<k.buffers.length;++fe)k.buffers[fe]&&k.buffers[fe].destroy();k.buffers.length=0,k.ownsElements&&(k.elements.destroy(),k.elements=null,k.ownsElements=!1),k.destroy()},Ae._vao=k,Ae._reglType="vao",Ae(j)}return oe}var $l=35632,om=35633,fm=35718,lm=35721;function cm(s,d,_,G){var U={},I={};function B(C,N,q,be){this.name=C,this.id=N,this.location=q,this.info=be}function X(C,N){for(var q=0;q<C.length;++q)if(C[q].id===N.id){C[q].location=N.location;return}C.push(N)}function W(C,N,q){var be=C===$l?U:I,z=be[N];if(!z){var _e=d.str(N);z=s.createShader(C),s.shaderSource(z,_e),s.compileShader(z),c.shaderError(s,z,_e,C,q),be[N]=z}return z}var Z={},ee=[],J=0;function oe(C,N){this.id=J++,this.fragId=C,this.vertId=N,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,G.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Y(C,N,q){var be,z,_e=W($l,C.fragId),pe=W(om,C.vertId),Be=C.program=s.createProgram();if(s.attachShader(Be,_e),s.attachShader(Be,pe),q)for(be=0;be<q.length;++be){var j=q[be];s.bindAttribLocation(Be,j[0],j[1])}s.linkProgram(Be),c.linkError(s,Be,d.str(C.fragId),d.str(C.vertId),N);var k=s.getProgramParameter(Be,fm);G.profile&&(C.stats.uniformsCount=k);var Ae=C.uniforms;for(be=0;be<k;++be)if(z=s.getActiveUniform(Be,be),z)if(z.size>1)for(var fe=0;fe<z.size;++fe){var K=z.name.replace("[0]","["+fe+"]");X(Ae,new B(K,d.id(K),s.getUniformLocation(Be,K),z))}else X(Ae,new B(z.name,d.id(z.name),s.getUniformLocation(Be,z.name),z));var ce=s.getProgramParameter(Be,lm);G.profile&&(C.stats.attributesCount=ce);var he=C.attributes;for(be=0;be<ce;++be)z=s.getActiveAttrib(Be,be),z&&X(he,new B(z.name,d.id(z.name),s.getAttribLocation(Be,z.name),z))}G.profile&&(_.getMaxUniformsCount=function(){var C=0;return ee.forEach(function(N){N.stats.uniformsCount>C&&(C=N.stats.uniformsCount)}),C},_.getMaxAttributesCount=function(){var C=0;return ee.forEach(function(N){N.stats.attributesCount>C&&(C=N.stats.attributesCount)}),C});function Q(){U={},I={};for(var C=0;C<ee.length;++C)Y(ee[C],null,ee[C].attributes.map(function(N){return[N.location,N.name]}))}return{clear:function(){var C=s.deleteShader.bind(s);Sr(U).forEach(C),U={},Sr(I).forEach(C),I={},ee.forEach(function(N){s.deleteProgram(N.program)}),ee.length=0,Z={},_.shaderCount=0},program:function(C,N,q,be){c.command(C>=0,"missing vertex shader",q),c.command(N>=0,"missing fragment shader",q);var z=Z[N];z||(z=Z[N]={});var _e=z[C];if(_e&&(_e.refCount++,!be))return _e;var pe=new oe(N,C);return _.shaderCount++,Y(pe,q,be),_e||(z[C]=pe),ee.push(pe),n(pe,{destroy:function(){if(pe.refCount--,pe.refCount<=0){s.deleteProgram(pe.program);var Be=ee.indexOf(pe);ee.splice(Be,1),_.shaderCount--}z[pe.vertId].refCount<=0&&(s.deleteShader(I[pe.vertId]),delete I[pe.vertId],delete Z[pe.fragId][pe.vertId]),Object.keys(Z[pe.fragId]).length||(s.deleteShader(U[pe.fragId]),delete U[pe.fragId],delete Z[pe.fragId])}})},restore:Q,shader:W,frag:-1,vert:-1}}var um=6408,Vi=5121,dm=3333,Ua=5126;function hm(s,d,_,G,U,I,B){function X(ee){var J;d.next===null?(c(U.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),J=Vi):(c(d.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),J=d.next.colorAttachments[0].texture._texture.type,c.optional(function(){I.oes_texture_float?(c(J===Vi||J===Ua,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),J===Ua&&c(B.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):c(J===Vi,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var oe=0,Y=0,Q=G.framebufferWidth,C=G.framebufferHeight,N=null;r(ee)?N=ee:ee&&(c.type(ee,"object","invalid arguments to regl.read()"),oe=ee.x|0,Y=ee.y|0,c(oe>=0&&oe<G.framebufferWidth,"invalid x offset for regl.read"),c(Y>=0&&Y<G.framebufferHeight,"invalid y offset for regl.read"),Q=(ee.width||G.framebufferWidth-oe)|0,C=(ee.height||G.framebufferHeight-Y)|0,N=ee.data||null),N&&(J===Vi?c(N instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):J===Ua&&c(N instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),c(Q>0&&Q+oe<=G.framebufferWidth,"invalid width for read pixels"),c(C>0&&C+Y<=G.framebufferHeight,"invalid height for read pixels"),_();var q=Q*C*4;return N||(J===Vi?N=new Uint8Array(q):J===Ua&&(N=N||new Float32Array(q))),c.isTypedArray(N,"data buffer for regl.read() must be a typedarray"),c(N.byteLength>=q,"data buffer for regl.read() too small"),s.pixelStorei(dm,4),s.readPixels(oe,Y,Q,C,um,J,N),N}function W(ee){var J;return d.setFBO({framebuffer:ee.framebuffer},function(){J=X(ee)}),J}function Z(ee){return!ee||!("framebuffer"in ee)?X(ee):W(ee)}return Z}function vi(s){return Array.prototype.slice.call(s)}function _i(s){return vi(s).join("")}function pm(){var s=0,d=[],_=[];function G(J){for(var oe=0;oe<_.length;++oe)if(_[oe]===J)return d[oe];var Y="g"+s++;return d.push(Y),_.push(J),Y}function U(){var J=[];function oe(){J.push.apply(J,vi(arguments))}var Y=[];function Q(){var C="v"+s++;return Y.push(C),arguments.length>0&&(J.push(C,"="),J.push.apply(J,vi(arguments)),J.push(";")),C}return n(oe,{def:Q,toString:function(){return _i([Y.length>0?"var "+Y.join(",")+";":"",_i(J)])}})}function I(){var J=U(),oe=U(),Y=J.toString,Q=oe.toString;function C(N,q){oe(N,q,"=",J.def(N,q),";")}return n(function(){J.apply(J,vi(arguments))},{def:J.def,entry:J,exit:oe,save:C,set:function(N,q,be){C(N,q),J(N,q,"=",be,";")},toString:function(){return Y()+Q()}})}function B(){var J=_i(arguments),oe=I(),Y=I(),Q=oe.toString,C=Y.toString;return n(oe,{then:function(){return oe.apply(oe,vi(arguments)),this},else:function(){return Y.apply(Y,vi(arguments)),this},toString:function(){var N=C();return N&&(N="else{"+N+"}"),_i(["if(",J,"){",Q(),"}",N])}})}var X=U(),W={};function Z(J,oe){var Y=[];function Q(){var z="a"+Y.length;return Y.push(z),z}oe=oe||0;for(var C=0;C<oe;++C)Q();var N=I(),q=N.toString,be=W[J]=n(N,{arg:Q,toString:function(){return _i(["function(",Y.join(),"){",q(),"}"])}});return be}function ee(){var J=['"use strict";',X,"return {"];Object.keys(W).forEach(function(Q){J.push('"',Q,'":',W[Q].toString(),",")}),J.push("}");var oe=_i(J).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Y=Function.apply(null,d.concat(oe));return Y.apply(null,_)}return{global:X,link:G,block:U,proc:Z,scope:I,cond:B,compile:ee}}var gi="xyzw".split(""),Ul=5121,bi=1,uo=2,ho=0,po=1,mo=2,vo=3,ja=4,jl=5,Vl=6,Hl="dither",zl="blend.enable",Wl="blend.color",_o="blend.equation",go="blend.func",Xl="depth.enable",Yl="depth.func",Kl="depth.range",ql="depth.mask",bo="colorMask",Ql="cull.enable",Zl="cull.face",yo="frontFace",xo="lineWidth",Jl="polygonOffset.enable",Eo="polygonOffset.offset",ec="sample.alpha",tc="sample.enable",To="sample.coverage",rc="stencil.enable",nc="stencil.mask",Ao="stencil.func",wo="stencil.opFront",Hi="stencil.opBack",ic="scissor.enable",Va="scissor.box",sn="viewport",zi="profile",zn="framebuffer",Wi="vert",Xi="frag",Wn="elements",Xn="primitive",Yn="count",Ha="offset",za="instances",Yi="vao",So="Width",Co="Height",yi=zn+So,xi=zn+Co,mm=sn+So,vm=sn+Co,ac="drawingBuffer",sc=ac+So,oc=ac+Co,_m=[go,_o,Ao,wo,Hi,To,sn,Va,Eo],Ei=34962,Lo=34963,gm=35632,bm=35633,fc=3553,ym=34067,xm=2884,Em=3042,Tm=3024,Am=2960,wm=2929,Sm=3089,Cm=32823,Lm=32926,Rm=32928,Ro=5126,Wa=35664,Xa=35665,Ya=35666,Oo=5124,Ka=35667,qa=35668,Qa=35669,Fo=35670,Za=35671,Ja=35672,es=35673,Ki=35674,qi=35675,Qi=35676,Zi=35678,Ji=35680,Po=4,ea=1028,Kn=1029,lc=2304,Do=2305,Om=32775,Fm=32776,Pm=519,En=7680,cc=0,uc=1,dc=32774,Dm=513,hc=36160,Im=36064,Wr={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},pc=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Ti={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Tn={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},mc={frag:gm,vert:bm},Io={cw:lc,ccw:Do};function ts(s){return Array.isArray(s)||r(s)||Br(s)}function vc(s){return s.sort(function(d,_){return d===sn?-1:_===sn?1:d<_?-1:1})}function Kt(s,d,_,G){this.thisDep=s,this.contextDep=d,this.propDep=_,this.append=G}function An(s){return s&&!(s.thisDep||s.contextDep||s.propDep)}function $t(s){return new Kt(!1,!1,!1,s)}function br(s,d){var _=s.type;if(_===ho){var G=s.data.length;return new Kt(!0,G>=1,G>=2,d)}else if(_===ja){var U=s.data;return new Kt(U.thisDep,U.contextDep,U.propDep,d)}else{if(_===jl)return new Kt(!1,!1,!1,d);if(_===Vl){for(var I=!1,B=!1,X=!1,W=0;W<s.data.length;++W){var Z=s.data[W];if(Z.type===po)X=!0;else if(Z.type===mo)B=!0;else if(Z.type===vo)I=!0;else if(Z.type===ho){I=!0;var ee=Z.data;ee>=1&&(B=!0),ee>=2&&(X=!0)}else Z.type===ja&&(I=I||Z.data.thisDep,B=B||Z.data.contextDep,X=X||Z.data.propDep)}return new Kt(I,B,X,d)}else return new Kt(_===vo,_===mo,_===po,d)}}var _c=new Kt(!1,!1,!1,function(){});function Gm(s,d,_,G,U,I,B,X,W,Z,ee,J,oe,Y,Q){var C=Z.Record,N={add:32774,subtract:32778,"reverse subtract":32779};_.ext_blend_minmax&&(N.min=Om,N.max=Fm);var q=_.angle_instanced_arrays,be=_.webgl_draw_buffers,z=_.oes_vertex_array_object,_e={dirty:!0,profile:Q.profile},pe={},Be=[],j={},k={};function Ae(p){return p.replace(".","_")}function fe(p,u,x){var S=Ae(p);Be.push(p),pe[S]=_e[S]=!!x,j[S]=u}function K(p,u,x){var S=Ae(p);Be.push(p),Array.isArray(x)?(_e[S]=x.slice(),pe[S]=x.slice()):_e[S]=pe[S]=x,k[S]=u}fe(Hl,Tm),fe(zl,Em),K(Wl,"blendColor",[0,0,0,0]),K(_o,"blendEquationSeparate",[dc,dc]),K(go,"blendFuncSeparate",[uc,cc,uc,cc]),fe(Xl,wm,!0),K(Yl,"depthFunc",Dm),K(Kl,"depthRange",[0,1]),K(ql,"depthMask",!0),K(bo,bo,[!0,!0,!0,!0]),fe(Ql,xm),K(Zl,"cullFace",Kn),K(yo,yo,Do),K(xo,xo,1),fe(Jl,Cm),K(Eo,"polygonOffset",[0,0]),fe(ec,Lm),fe(tc,Rm),K(To,"sampleCoverage",[1,!1]),fe(rc,Am),K(nc,"stencilMask",-1),K(Ao,"stencilFunc",[Pm,0,-1]),K(wo,"stencilOpSeparate",[ea,En,En,En]),K(Hi,"stencilOpSeparate",[Kn,En,En,En]),fe(ic,Sm),K(Va,"scissor",[0,0,s.drawingBufferWidth,s.drawingBufferHeight]),K(sn,sn,[0,0,s.drawingBufferWidth,s.drawingBufferHeight]);var ce={gl:s,context:oe,strings:d,next:pe,current:_e,draw:J,elements:I,buffer:U,shader:ee,attributes:Z.state,vao:Z,uniforms:W,framebuffer:X,extensions:_,timer:Y,isBufferArgs:ts},he={primTypes:yn,compareFuncs:Ti,blendFuncs:Wr,blendEquations:N,stencilOps:Tn,glTypes:$n,orientationType:Io};c.optional(function(){ce.isArrayLike=Mt}),be&&(he.backBuffer=[Kn],he.drawBuffer=wr(G.maxDrawbuffers,function(p){return p===0?[0]:wr(p,function(u){return Im+u})}));var Ke=0;function ze(){var p=pm(),u=p.link,x=p.global;p.id=Ke++,p.batchId="0";var S=u(ce),O=p.shared={props:"a0"};Object.keys(ce).forEach(function(b){O[b]=x.def(S,".",b)}),c.optional(function(){p.CHECK=u(c),p.commandStr=c.guessCommand(),p.command=u(p.commandStr),p.assert=function(b,m,L){b("if(!(",m,"))",this.CHECK,".commandRaise(",u(L),",",this.command,");")},he.invalidBlendCombinations=pc});var T=p.next={},E=p.current={};Object.keys(k).forEach(function(b){Array.isArray(_e[b])&&(T[b]=x.def(O.next,".",b),E[b]=x.def(O.current,".",b))});var w=p.constants={};Object.keys(he).forEach(function(b){w[b]=x.def(JSON.stringify(he[b]))}),p.invoke=function(b,m){switch(m.type){case ho:var L=["this",O.context,O.props,p.batchId];return b.def(u(m.data),".call(",L.slice(0,Math.max(m.data.length+1,4)),")");case po:return b.def(O.props,m.data);case mo:return b.def(O.context,m.data);case vo:return b.def("this",m.data);case ja:return m.data.append(p,b),m.data.ref;case jl:return m.data.toString();case Vl:return m.data.map(function(F){return p.invoke(b,F)})}},p.attribCache={};var h={};return p.scopeAttrib=function(b){var m=d.id(b);if(m in h)return h[m];var L=Z.scope[m];L||(L=Z.scope[m]=new C);var F=h[m]=u(L);return F},p}function me(p){var u=p.static,x=p.dynamic,S;if(zi in u){var O=!!u[zi];S=$t(function(E,w){return O}),S.enable=O}else if(zi in x){var T=x[zi];S=br(T,function(E,w){return E.invoke(w,T)})}return S}function ge(p,u){var x=p.static,S=p.dynamic;if(zn in x){var O=x[zn];return O?(O=X.getFramebuffer(O),c.command(O,"invalid framebuffer object"),$t(function(E,w){var h=E.link(O),b=E.shared;w.set(b.framebuffer,".next",h);var m=b.context;return w.set(m,"."+yi,h+".width"),w.set(m,"."+xi,h+".height"),h})):$t(function(E,w){var h=E.shared;w.set(h.framebuffer,".next","null");var b=h.context;return w.set(b,"."+yi,b+"."+sc),w.set(b,"."+xi,b+"."+oc),"null"})}else if(zn in S){var T=S[zn];return br(T,function(E,w){var h=E.invoke(w,T),b=E.shared,m=b.framebuffer,L=w.def(m,".getFramebuffer(",h,")");c.optional(function(){E.assert(w,"!"+h+"||"+L,"invalid framebuffer object")}),w.set(m,".next",L);var F=b.context;return w.set(F,"."+yi,L+"?"+L+".width:"+F+"."+sc),w.set(F,"."+xi,L+"?"+L+".height:"+F+"."+oc),L})}else return null}function je(p,u,x){var S=p.static,O=p.dynamic;function T(h){if(h in S){var b=S[h];c.commandType(b,"object","invalid "+h,x.commandStr);var m=!0,L=b.x|0,F=b.y|0,V,ae;return"width"in b?(V=b.width|0,c.command(V>=0,"invalid "+h,x.commandStr)):m=!1,"height"in b?(ae=b.height|0,c.command(ae>=0,"invalid "+h,x.commandStr)):m=!1,new Kt(!m&&u&&u.thisDep,!m&&u&&u.contextDep,!m&&u&&u.propDep,function(ne,Le){var xe=ne.shared.context,we=V;"width"in b||(we=Le.def(xe,".",yi,"-",L));var Ce=ae;return"height"in b||(Ce=Le.def(xe,".",xi,"-",F)),[L,F,we,Ce]})}else if(h in O){var se=O[h],ve=br(se,function(ne,Le){var xe=ne.invoke(Le,se);c.optional(function(){ne.assert(Le,xe+"&&typeof "+xe+'==="object"',"invalid "+h)});var we=ne.shared.context,Ce=Le.def(xe,".x|0"),Re=Le.def(xe,".y|0"),Ve=Le.def('"width" in ',xe,"?",xe,".width|0:","(",we,".",yi,"-",Ce,")"),Et=Le.def('"height" in ',xe,"?",xe,".height|0:","(",we,".",xi,"-",Re,")");return c.optional(function(){ne.assert(Le,Ve+">=0&&"+Et+">=0","invalid "+h)}),[Ce,Re,Ve,Et]});return u&&(ve.thisDep=ve.thisDep||u.thisDep,ve.contextDep=ve.contextDep||u.contextDep,ve.propDep=ve.propDep||u.propDep),ve}else return u?new Kt(u.thisDep,u.contextDep,u.propDep,function(ne,Le){var xe=ne.shared.context;return[0,0,Le.def(xe,".",yi),Le.def(xe,".",xi)]}):null}var E=T(sn);if(E){var w=E;E=new Kt(E.thisDep,E.contextDep,E.propDep,function(h,b){var m=w.append(h,b),L=h.shared.context;return b.set(L,"."+mm,m[2]),b.set(L,"."+vm,m[3]),m})}return{viewport:E,scissor_box:T(Va)}}function Ye(p,u){var x=p.static,S=typeof x[Xi]=="string"&&typeof x[Wi]=="string";if(S){if(Object.keys(u.dynamic).length>0)return null;var O=u.static,T=Object.keys(O);if(T.length>0&&typeof O[T[0]]=="number"){for(var E=[],w=0;w<T.length;++w)c(typeof O[T[w]]=="number","must specify all vertex attribute locations when using vaos"),E.push([O[T[w]]|0,T[w]]);return E}}return null}function it(p,u,x){var S=p.static,O=p.dynamic;function T(m){if(m in S){var L=d.id(S[m]);c.optional(function(){ee.shader(mc[m],L,c.guessCommand())});var F=$t(function(){return L});return F.id=L,F}else if(m in O){var V=O[m];return br(V,function(ae,se){var ve=ae.invoke(se,V),ne=se.def(ae.shared.strings,".id(",ve,")");return c.optional(function(){se(ae.shared.shader,".shader(",mc[m],",",ne,",",ae.command,");")}),ne})}return null}var E=T(Xi),w=T(Wi),h=null,b;return An(E)&&An(w)?(h=ee.program(w.id,E.id,null,x),b=$t(function(m,L){return m.link(h)})):b=new Kt(E&&E.thisDep||w&&w.thisDep,E&&E.contextDep||w&&w.contextDep,E&&E.propDep||w&&w.propDep,function(m,L){var F=m.shared.shader,V;E?V=E.append(m,L):V=L.def(F,".",Xi);var ae;w?ae=w.append(m,L):ae=L.def(F,".",Wi);var se=F+".program("+ae+","+V;return c.optional(function(){se+=","+m.command}),L.def(se+")")}),{frag:E,vert:w,progVar:b,program:h}}function Pt(p,u){var x=p.static,S=p.dynamic,O={},T=!1;function E(){if(Yi in x){var Le=x[Yi];return Le!==null&&Z.getVAO(Le)===null&&(Le=Z.createVAO(Le)),T=!0,O.vao=Le,$t(function(we){var Ce=Z.getVAO(Le);return Ce?we.link(Ce):"null"})}else if(Yi in S){T=!0;var xe=S[Yi];return br(xe,function(we,Ce){var Re=we.invoke(Ce,xe);return Ce.def(we.shared.vao+".getVAO("+Re+")")})}return null}var w=E(),h=!1;function b(){if(Wn in x){var Le=x[Wn];if(O.elements=Le,ts(Le)){var xe=O.elements=I.create(Le,!0);Le=I.getElements(xe),h=!0}else Le&&(Le=I.getElements(Le),h=!0,c.command(Le,"invalid elements",u.commandStr));var we=$t(function(Re,Ve){if(Le){var Et=Re.link(Le);return Re.ELEMENTS=Et,Et}return Re.ELEMENTS=null,null});return we.value=Le,we}else if(Wn in S){h=!0;var Ce=S[Wn];return br(Ce,function(Re,Ve){var Et=Re.shared,Jt=Et.isBufferArgs,on=Et.elements,fn=Re.invoke(Ve,Ce),ln=Ve.def("null"),or=Ve.def(Jt,"(",fn,")"),Yr=Re.cond(or).then(ln,"=",on,".createStream(",fn,");").else(ln,"=",on,".getElements(",fn,");");return c.optional(function(){Re.assert(Yr.else,"!"+fn+"||"+ln,"invalid elements")}),Ve.entry(Yr),Ve.exit(Re.cond(or).then(on,".destroyStream(",ln,");")),Re.ELEMENTS=ln,ln})}else if(T)return new Kt(w.thisDep,w.contextDep,w.propDep,function(Re,Ve){return Ve.def(Re.shared.vao+".currentVAO?"+Re.shared.elements+".getElements("+Re.shared.vao+".currentVAO.elements):null")});return null}var m=b();function L(){if(Xn in x){var Le=x[Xn];return O.primitive=Le,c.commandParameter(Le,yn,"invalid primitve",u.commandStr),$t(function(we,Ce){return yn[Le]})}else if(Xn in S){var xe=S[Xn];return br(xe,function(we,Ce){var Re=we.constants.primTypes,Ve=we.invoke(Ce,xe);return c.optional(function(){we.assert(Ce,Ve+" in "+Re,"invalid primitive, must be one of "+Object.keys(yn))}),Ce.def(Re,"[",Ve,"]")})}else{if(h)return An(m)?m.value?$t(function(we,Ce){return Ce.def(we.ELEMENTS,".primType")}):$t(function(){return Po}):new Kt(m.thisDep,m.contextDep,m.propDep,function(we,Ce){var Re=we.ELEMENTS;return Ce.def(Re,"?",Re,".primType:",Po)});if(T)return new Kt(w.thisDep,w.contextDep,w.propDep,function(we,Ce){return Ce.def(we.shared.vao+".currentVAO?"+we.shared.vao+".currentVAO.primitive:"+Po)})}return null}function F(Le,xe){if(Le in x){var we=x[Le]|0;return xe?O.offset=we:O.instances=we,c.command(!xe||we>=0,"invalid "+Le,u.commandStr),$t(function(Re,Ve){return xe&&(Re.OFFSET=we),we})}else if(Le in S){var Ce=S[Le];return br(Ce,function(Re,Ve){var Et=Re.invoke(Ve,Ce);return xe&&(Re.OFFSET=Et,c.optional(function(){Re.assert(Ve,Et+">=0","invalid "+Le)})),Et})}else if(xe){if(h)return $t(function(Re,Ve){return Re.OFFSET=0,0});if(T)return new Kt(w.thisDep,w.contextDep,w.propDep,function(Re,Ve){return Ve.def(Re.shared.vao+".currentVAO?"+Re.shared.vao+".currentVAO.offset:0")})}else if(T)return new Kt(w.thisDep,w.contextDep,w.propDep,function(Re,Ve){return Ve.def(Re.shared.vao+".currentVAO?"+Re.shared.vao+".currentVAO.instances:-1")});return null}var V=F(Ha,!0);function ae(){if(Yn in x){var Le=x[Yn]|0;return O.count=Le,c.command(typeof Le=="number"&&Le>=0,"invalid vertex count",u.commandStr),$t(function(){return Le})}else if(Yn in S){var xe=S[Yn];return br(xe,function(Ve,Et){var Jt=Ve.invoke(Et,xe);return c.optional(function(){Ve.assert(Et,"typeof "+Jt+'==="number"&&'+Jt+">=0&&"+Jt+"===("+Jt+"|0)","invalid vertex count")}),Jt})}else if(h)if(An(m)){if(m)return V?new Kt(V.thisDep,V.contextDep,V.propDep,function(Ve,Et){var Jt=Et.def(Ve.ELEMENTS,".vertCount-",Ve.OFFSET);return c.optional(function(){Ve.assert(Et,Jt+">=0","invalid vertex offset/element buffer too small")}),Jt}):$t(function(Ve,Et){return Et.def(Ve.ELEMENTS,".vertCount")});var we=$t(function(){return-1});return c.optional(function(){we.MISSING=!0}),we}else{var Ce=new Kt(m.thisDep||V.thisDep,m.contextDep||V.contextDep,m.propDep||V.propDep,function(Ve,Et){var Jt=Ve.ELEMENTS;return Ve.OFFSET?Et.def(Jt,"?",Jt,".vertCount-",Ve.OFFSET,":-1"):Et.def(Jt,"?",Jt,".vertCount:-1")});return c.optional(function(){Ce.DYNAMIC=!0}),Ce}else if(T){var Re=new Kt(w.thisDep,w.contextDep,w.propDep,function(Ve,Et){return Et.def(Ve.shared.vao,".currentVAO?",Ve.shared.vao,".currentVAO.count:-1")});return Re}return null}var se=L(),ve=ae(),ne=F(za,!1);return{elements:m,primitive:se,count:ve,instances:ne,offset:V,vao:w,vaoActive:T,elementsActive:h,static:O}}function It(p,u){var x=p.static,S=p.dynamic,O={};return Be.forEach(function(T){var E=Ae(T);function w(h,b){if(T in x){var m=h(x[T]);O[E]=$t(function(){return m})}else if(T in S){var L=S[T];O[E]=br(L,function(F,V){return b(F,V,F.invoke(V,L))})}}switch(T){case Ql:case zl:case Hl:case rc:case Xl:case ic:case Jl:case ec:case tc:case ql:return w(function(h){return c.commandType(h,"boolean",T,u.commandStr),h},function(h,b,m){return c.optional(function(){h.assert(b,"typeof "+m+'==="boolean"',"invalid flag "+T,h.commandStr)}),m});case Yl:return w(function(h){return c.commandParameter(h,Ti,"invalid "+T,u.commandStr),Ti[h]},function(h,b,m){var L=h.constants.compareFuncs;return c.optional(function(){h.assert(b,m+" in "+L,"invalid "+T+", must be one of "+Object.keys(Ti))}),b.def(L,"[",m,"]")});case Kl:return w(function(h){return c.command(Mt(h)&&h.length===2&&typeof h[0]=="number"&&typeof h[1]=="number"&&h[0]<=h[1],"depth range is 2d array",u.commandStr),h},function(h,b,m){c.optional(function(){h.assert(b,h.shared.isArrayLike+"("+m+")&&"+m+".length===2&&typeof "+m+'[0]==="number"&&typeof '+m+'[1]==="number"&&'+m+"[0]<="+m+"[1]","depth range must be a 2d array")});var L=b.def("+",m,"[0]"),F=b.def("+",m,"[1]");return[L,F]});case go:return w(function(h){c.commandType(h,"object","blend.func",u.commandStr);var b="srcRGB"in h?h.srcRGB:h.src,m="srcAlpha"in h?h.srcAlpha:h.src,L="dstRGB"in h?h.dstRGB:h.dst,F="dstAlpha"in h?h.dstAlpha:h.dst;return c.commandParameter(b,Wr,E+".srcRGB",u.commandStr),c.commandParameter(m,Wr,E+".srcAlpha",u.commandStr),c.commandParameter(L,Wr,E+".dstRGB",u.commandStr),c.commandParameter(F,Wr,E+".dstAlpha",u.commandStr),c.command(pc.indexOf(b+", "+L)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+b+", "+L+")",u.commandStr),[Wr[b],Wr[L],Wr[m],Wr[F]]},function(h,b,m){var L=h.constants.blendFuncs;c.optional(function(){h.assert(b,m+"&&typeof "+m+'==="object"',"invalid blend func, must be an object")});function F(xe,we){var Ce=b.def('"',xe,we,'" in ',m,"?",m,".",xe,we,":",m,".",xe);return c.optional(function(){h.assert(b,Ce+" in "+L,"invalid "+T+"."+xe+we+", must be one of "+Object.keys(Wr))}),Ce}var V=F("src","RGB"),ae=F("dst","RGB");c.optional(function(){var xe=h.constants.invalidBlendCombinations;h.assert(b,xe+".indexOf("+V+'+", "+'+ae+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var se=b.def(L,"[",V,"]"),ve=b.def(L,"[",F("src","Alpha"),"]"),ne=b.def(L,"[",ae,"]"),Le=b.def(L,"[",F("dst","Alpha"),"]");return[se,ne,ve,Le]});case _o:return w(function(h){if(typeof h=="string")return c.commandParameter(h,N,"invalid "+T,u.commandStr),[N[h],N[h]];if(typeof h=="object")return c.commandParameter(h.rgb,N,T+".rgb",u.commandStr),c.commandParameter(h.alpha,N,T+".alpha",u.commandStr),[N[h.rgb],N[h.alpha]];c.commandRaise("invalid blend.equation",u.commandStr)},function(h,b,m){var L=h.constants.blendEquations,F=b.def(),V=b.def(),ae=h.cond("typeof ",m,'==="string"');return c.optional(function(){function se(ve,ne,Le){h.assert(ve,Le+" in "+L,"invalid "+ne+", must be one of "+Object.keys(N))}se(ae.then,T,m),h.assert(ae.else,m+"&&typeof "+m+'==="object"',"invalid "+T),se(ae.else,T+".rgb",m+".rgb"),se(ae.else,T+".alpha",m+".alpha")}),ae.then(F,"=",V,"=",L,"[",m,"];"),ae.else(F,"=",L,"[",m,".rgb];",V,"=",L,"[",m,".alpha];"),b(ae),[F,V]});case Wl:return w(function(h){return c.command(Mt(h)&&h.length===4,"blend.color must be a 4d array",u.commandStr),wr(4,function(b){return+h[b]})},function(h,b,m){return c.optional(function(){h.assert(b,h.shared.isArrayLike+"("+m+")&&"+m+".length===4","blend.color must be a 4d array")}),wr(4,function(L){return b.def("+",m,"[",L,"]")})});case nc:return w(function(h){return c.commandType(h,"number",E,u.commandStr),h|0},function(h,b,m){return c.optional(function(){h.assert(b,"typeof "+m+'==="number"',"invalid stencil.mask")}),b.def(m,"|0")});case Ao:return w(function(h){c.commandType(h,"object",E,u.commandStr);var b=h.cmp||"keep",m=h.ref||0,L="mask"in h?h.mask:-1;return c.commandParameter(b,Ti,T+".cmp",u.commandStr),c.commandType(m,"number",T+".ref",u.commandStr),c.commandType(L,"number",T+".mask",u.commandStr),[Ti[b],m,L]},function(h,b,m){var L=h.constants.compareFuncs;c.optional(function(){function se(){h.assert(b,Array.prototype.join.call(arguments,""),"invalid stencil.func")}se(m+"&&typeof ",m,'==="object"'),se('!("cmp" in ',m,")||(",m,".cmp in ",L,")")});var F=b.def('"cmp" in ',m,"?",L,"[",m,".cmp]",":",En),V=b.def(m,".ref|0"),ae=b.def('"mask" in ',m,"?",m,".mask|0:-1");return[F,V,ae]});case wo:case Hi:return w(function(h){c.commandType(h,"object",E,u.commandStr);var b=h.fail||"keep",m=h.zfail||"keep",L=h.zpass||"keep";return c.commandParameter(b,Tn,T+".fail",u.commandStr),c.commandParameter(m,Tn,T+".zfail",u.commandStr),c.commandParameter(L,Tn,T+".zpass",u.commandStr),[T===Hi?Kn:ea,Tn[b],Tn[m],Tn[L]]},function(h,b,m){var L=h.constants.stencilOps;c.optional(function(){h.assert(b,m+"&&typeof "+m+'==="object"',"invalid "+T)});function F(V){return c.optional(function(){h.assert(b,'!("'+V+'" in '+m+")||("+m+"."+V+" in "+L+")","invalid "+T+"."+V+", must be one of "+Object.keys(Tn))}),b.def('"',V,'" in ',m,"?",L,"[",m,".",V,"]:",En)}return[T===Hi?Kn:ea,F("fail"),F("zfail"),F("zpass")]});case Eo:return w(function(h){c.commandType(h,"object",E,u.commandStr);var b=h.factor|0,m=h.units|0;return c.commandType(b,"number",E+".factor",u.commandStr),c.commandType(m,"number",E+".units",u.commandStr),[b,m]},function(h,b,m){c.optional(function(){h.assert(b,m+"&&typeof "+m+'==="object"',"invalid "+T)});var L=b.def(m,".factor|0"),F=b.def(m,".units|0");return[L,F]});case Zl:return w(function(h){var b=0;return h==="front"?b=ea:h==="back"&&(b=Kn),c.command(!!b,E,u.commandStr),b},function(h,b,m){return c.optional(function(){h.assert(b,m+'==="front"||'+m+'==="back"',"invalid cull.face")}),b.def(m,'==="front"?',ea,":",Kn)});case xo:return w(function(h){return c.command(typeof h=="number"&&h>=G.lineWidthDims[0]&&h<=G.lineWidthDims[1],"invalid line width, must be a positive number between "+G.lineWidthDims[0]+" and "+G.lineWidthDims[1],u.commandStr),h},function(h,b,m){return c.optional(function(){h.assert(b,"typeof "+m+'==="number"&&'+m+">="+G.lineWidthDims[0]+"&&"+m+"<="+G.lineWidthDims[1],"invalid line width")}),m});case yo:return w(function(h){return c.commandParameter(h,Io,E,u.commandStr),Io[h]},function(h,b,m){return c.optional(function(){h.assert(b,m+'==="cw"||'+m+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),b.def(m+'==="cw"?'+lc+":"+Do)});case bo:return w(function(h){return c.command(Mt(h)&&h.length===4,"color.mask must be length 4 array",u.commandStr),h.map(function(b){return!!b})},function(h,b,m){return c.optional(function(){h.assert(b,h.shared.isArrayLike+"("+m+")&&"+m+".length===4","invalid color.mask")}),wr(4,function(L){return"!!"+m+"["+L+"]"})});case To:return w(function(h){c.command(typeof h=="object"&&h,E,u.commandStr);var b="value"in h?h.value:1,m=!!h.invert;return c.command(typeof b=="number"&&b>=0&&b<=1,"sample.coverage.value must be a number between 0 and 1",u.commandStr),[b,m]},function(h,b,m){c.optional(function(){h.assert(b,m+"&&typeof "+m+'==="object"',"invalid sample.coverage")});var L=b.def('"value" in ',m,"?+",m,".value:1"),F=b.def("!!",m,".invert");return[L,F]})}}),O}function st(p,u){var x=p.static,S=p.dynamic,O={};return Object.keys(x).forEach(function(T){var E=x[T],w;if(typeof E=="number"||typeof E=="boolean")w=$t(function(){return E});else if(typeof E=="function"){var h=E._reglType;h==="texture2d"||h==="textureCube"?w=$t(function(b){return b.link(E)}):h==="framebuffer"||h==="framebufferCube"?(c.command(E.color.length>0,'missing color attachment for framebuffer sent to uniform "'+T+'"',u.commandStr),w=$t(function(b){return b.link(E.color[0])})):c.commandRaise('invalid data for uniform "'+T+'"',u.commandStr)}else Mt(E)?w=$t(function(b){var m=b.global.def("[",wr(E.length,function(L){return c.command(typeof E[L]=="number"||typeof E[L]=="boolean","invalid uniform "+T,b.commandStr),E[L]}),"]");return m}):c.commandRaise('invalid or missing data for uniform "'+T+'"',u.commandStr);w.value=E,O[T]=w}),Object.keys(S).forEach(function(T){var E=S[T];O[T]=br(E,function(w,h){return w.invoke(h,E)})}),O}function Vt(p,u){var x=p.static,S=p.dynamic,O={};return Object.keys(x).forEach(function(T){var E=x[T],w=d.id(T),h=new C;if(ts(E))h.state=bi,h.buffer=U.getBuffer(U.create(E,Ei,!1,!0)),h.type=0;else{var b=U.getBuffer(E);if(b)h.state=bi,h.buffer=b,h.type=0;else if(c.command(typeof E=="object"&&E,"invalid data for attribute "+T,u.commandStr),"constant"in E){var m=E.constant;h.buffer="null",h.state=uo,typeof m=="number"?h.x=m:(c.command(Mt(m)&&m.length>0&&m.length<=4,"invalid constant for attribute "+T,u.commandStr),gi.forEach(function(ne,Le){Le<m.length&&(h[ne]=m[Le])}))}else{ts(E.buffer)?b=U.getBuffer(U.create(E.buffer,Ei,!1,!0)):b=U.getBuffer(E.buffer),c.command(!!b,'missing buffer for attribute "'+T+'"',u.commandStr);var L=E.offset|0;c.command(L>=0,'invalid offset for attribute "'+T+'"',u.commandStr);var F=E.stride|0;c.command(F>=0&&F<256,'invalid stride for attribute "'+T+'", must be integer betweeen [0, 255]',u.commandStr);var V=E.size|0;c.command(!("size"in E)||V>0&&V<=4,'invalid size for attribute "'+T+'", must be 1,2,3,4',u.commandStr);var ae=!!E.normalized,se=0;"type"in E&&(c.commandParameter(E.type,$n,"invalid type for attribute "+T,u.commandStr),se=$n[E.type]);var ve=E.divisor|0;c.optional(function(){"divisor"in E&&(c.command(ve===0||q,'cannot specify divisor for attribute "'+T+'", instancing not supported',u.commandStr),c.command(ve>=0,'invalid divisor for attribute "'+T+'"',u.commandStr));var ne=u.commandStr,Le=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(E).forEach(function(xe){c.command(Le.indexOf(xe)>=0,'unknown parameter "'+xe+'" for attribute pointer "'+T+'" (valid parameters are '+Le+")",ne)})}),h.buffer=b,h.state=bi,h.size=V,h.normalized=ae,h.type=se||b.dtype,h.offset=L,h.stride=F,h.divisor=ve}}O[T]=$t(function(ne,Le){var xe=ne.attribCache;if(w in xe)return xe[w];var we={isStream:!1};return Object.keys(h).forEach(function(Ce){we[Ce]=h[Ce]}),h.buffer&&(we.buffer=ne.link(h.buffer),we.type=we.type||we.buffer+".dtype"),xe[w]=we,we})}),Object.keys(S).forEach(function(T){var E=S[T];function w(h,b){var m=h.invoke(b,E),L=h.shared,F=h.constants,V=L.isBufferArgs,ae=L.buffer;c.optional(function(){h.assert(b,m+"&&(typeof "+m+'==="object"||typeof '+m+'==="function")&&('+V+"("+m+")||"+ae+".getBuffer("+m+")||"+ae+".getBuffer("+m+".buffer)||"+V+"("+m+'.buffer)||("constant" in '+m+"&&(typeof "+m+'.constant==="number"||'+L.isArrayLike+"("+m+".constant))))",'invalid dynamic attribute "'+T+'"')});var se={isStream:b.def(!1)},ve=new C;ve.state=bi,Object.keys(ve).forEach(function(we){se[we]=b.def(""+ve[we])});var ne=se.buffer,Le=se.type;b("if(",V,"(",m,")){",se.isStream,"=true;",ne,"=",ae,".createStream(",Ei,",",m,");",Le,"=",ne,".dtype;","}else{",ne,"=",ae,".getBuffer(",m,");","if(",ne,"){",Le,"=",ne,".dtype;",'}else if("constant" in ',m,"){",se.state,"=",uo,";","if(typeof "+m+'.constant === "number"){',se[gi[0]],"=",m,".constant;",gi.slice(1).map(function(we){return se[we]}).join("="),"=0;","}else{",gi.map(function(we,Ce){return se[we]+"="+m+".constant.length>"+Ce+"?"+m+".constant["+Ce+"]:0;"}).join(""),"}}else{","if(",V,"(",m,".buffer)){",ne,"=",ae,".createStream(",Ei,",",m,".buffer);","}else{",ne,"=",ae,".getBuffer(",m,".buffer);","}",Le,'="type" in ',m,"?",F.glTypes,"[",m,".type]:",ne,".dtype;",se.normalized,"=!!",m,".normalized;");function xe(we){b(se[we],"=",m,".",we,"|0;")}return xe("size"),xe("offset"),xe("stride"),xe("divisor"),b("}}"),b.exit("if(",se.isStream,"){",ae,".destroyStream(",ne,");","}"),se}O[T]=br(E,w)}),O}function Ct(p){var u=p.static,x=p.dynamic,S={};return Object.keys(u).forEach(function(O){var T=u[O];S[O]=$t(function(E,w){return typeof T=="number"||typeof T=="boolean"?""+T:E.link(T)})}),Object.keys(x).forEach(function(O){var T=x[O];S[O]=br(T,function(E,w){return E.invoke(w,T)})}),S}function Ut(p,u,x,S,O){var T=p.static,E=p.dynamic;c.optional(function(){var xe=[zn,Wi,Xi,Wn,Xn,Ha,Yn,za,zi,Yi].concat(Be);function we(Ce){Object.keys(Ce).forEach(function(Re){c.command(xe.indexOf(Re)>=0,'unknown parameter "'+Re+'"',O.commandStr)})}we(T),we(E)});var w=Ye(p,u),h=ge(p),b=je(p,h,O),m=Pt(p,O),L=It(p,O),F=it(p,O,w);function V(xe){var we=b[xe];we&&(L[xe]=we)}V(sn),V(Ae(Va));var ae=Object.keys(L).length>0,se={framebuffer:h,draw:m,shader:F,state:L,dirty:ae,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(se.profile=me(p),se.uniforms=st(x,O),se.drawVAO=se.scopeVAO=m.vao,!se.drawVAO&&F.program&&!w&&_.angle_instanced_arrays&&m.static.elements){var ve=!0,ne=F.program.attributes.map(function(xe){var we=u.static[xe];return ve=ve&&!!we,we});if(ve&&ne.length>0){var Le=Z.getVAO(Z.createVAO({attributes:ne,elements:m.static.elements}));se.drawVAO=new Kt(null,null,null,function(xe,we){return xe.link(Le)}),se.useVAO=!0}}return w?se.useVAO=!0:se.attributes=Vt(u,O),se.context=Ct(S),se}function Ht(p,u,x){var S=p.shared,O=S.context,T=p.scope();Object.keys(x).forEach(function(E){u.save(O,"."+E);var w=x[E],h=w.append(p,u);Array.isArray(h)?T(O,".",E,"=[",h.join(),"];"):T(O,".",E,"=",h,";")}),u(T)}function zt(p,u,x,S){var O=p.shared,T=O.gl,E=O.framebuffer,w;be&&(w=u.def(O.extensions,".webgl_draw_buffers"));var h=p.constants,b=h.drawBuffer,m=h.backBuffer,L;x?L=x.append(p,u):L=u.def(E,".next"),S||u("if(",L,"!==",E,".cur){"),u("if(",L,"){",T,".bindFramebuffer(",hc,",",L,".framebuffer);"),be&&u(w,".drawBuffersWEBGL(",b,"[",L,".colorAttachments.length]);"),u("}else{",T,".bindFramebuffer(",hc,",null);"),be&&u(w,".drawBuffersWEBGL(",m,");"),u("}",E,".cur=",L,";"),S||u("}")}function Zt(p,u,x){var S=p.shared,O=S.gl,T=p.current,E=p.next,w=S.current,h=S.next,b=p.cond(w,".dirty");Be.forEach(function(m){var L=Ae(m);if(!(L in x.state)){var F,V;if(L in E){F=E[L],V=T[L];var ae=wr(_e[L].length,function(ve){return b.def(F,"[",ve,"]")});b(p.cond(ae.map(function(ve,ne){return ve+"!=="+V+"["+ne+"]"}).join("||")).then(O,".",k[L],"(",ae,");",ae.map(function(ve,ne){return V+"["+ne+"]="+ve}).join(";"),";"))}else{F=b.def(h,".",L);var se=p.cond(F,"!==",w,".",L);b(se),L in j?se(p.cond(F).then(O,".enable(",j[L],");").else(O,".disable(",j[L],");"),w,".",L,"=",F,";"):se(O,".",k[L],"(",F,");",w,".",L,"=",F,";")}}}),Object.keys(x.state).length===0&&b(w,".dirty=false;"),u(b)}function rr(p,u,x,S){var O=p.shared,T=p.current,E=O.current,w=O.gl;vc(Object.keys(x)).forEach(function(h){var b=x[h];if(!(S&&!S(b))){var m=b.append(p,u);if(j[h]){var L=j[h];An(b)?m?u(w,".enable(",L,");"):u(w,".disable(",L,");"):u(p.cond(m).then(w,".enable(",L,");").else(w,".disable(",L,");")),u(E,".",h,"=",m,";")}else if(Mt(m)){var F=T[h];u(w,".",k[h],"(",m,");",m.map(function(V,ae){return F+"["+ae+"]="+V}).join(";"),";")}else u(w,".",k[h],"(",m,");",E,".",h,"=",m,";")}})}function Nt(p,u){q&&(p.instancing=u.def(p.shared.extensions,".angle_instanced_arrays"))}function Ze(p,u,x,S,O){var T=p.shared,E=p.stats,w=T.current,h=T.timer,b=x.profile;function m(){return typeof performance>"u"?"Date.now()":"performance.now()"}var L,F;function V(xe){L=u.def(),xe(L,"=",m(),";"),typeof O=="string"?xe(E,".count+=",O,";"):xe(E,".count++;"),Y&&(S?(F=u.def(),xe(F,"=",h,".getNumPendingQueries();")):xe(h,".beginQuery(",E,");"))}function ae(xe){xe(E,".cpuTime+=",m(),"-",L,";"),Y&&(S?xe(h,".pushScopeStats(",F,",",h,".getNumPendingQueries(),",E,");"):xe(h,".endQuery();"))}function se(xe){var we=u.def(w,".profile");u(w,".profile=",xe,";"),u.exit(w,".profile=",we,";")}var ve;if(b){if(An(b)){b.enable?(V(u),ae(u.exit),se("true")):se("false");return}ve=b.append(p,u),se(ve)}else ve=u.def(w,".profile");var ne=p.block();V(ne),u("if(",ve,"){",ne,"}");var Le=p.block();ae(Le),u.exit("if(",ve,"){",Le,"}")}function nr(p,u,x,S,O){var T=p.shared;function E(h){switch(h){case Wa:case Ka:case Za:return 2;case Xa:case qa:case Ja:return 3;case Ya:case Qa:case es:return 4;default:return 1}}function w(h,b,m){var L=T.gl,F=u.def(h,".location"),V=u.def(T.attributes,"[",F,"]"),ae=m.state,se=m.buffer,ve=[m.x,m.y,m.z,m.w],ne=["buffer","normalized","offset","stride"];function Le(){u("if(!",V,".buffer){",L,".enableVertexAttribArray(",F,");}");var we=m.type,Ce;if(m.size?Ce=u.def(m.size,"||",b):Ce=b,u("if(",V,".type!==",we,"||",V,".size!==",Ce,"||",ne.map(function(Ve){return V+"."+Ve+"!=="+m[Ve]}).join("||"),"){",L,".bindBuffer(",Ei,",",se,".buffer);",L,".vertexAttribPointer(",[F,Ce,we,m.normalized,m.stride,m.offset],");",V,".type=",we,";",V,".size=",Ce,";",ne.map(function(Ve){return V+"."+Ve+"="+m[Ve]+";"}).join(""),"}"),q){var Re=m.divisor;u("if(",V,".divisor!==",Re,"){",p.instancing,".vertexAttribDivisorANGLE(",[F,Re],");",V,".divisor=",Re,";}")}}function xe(){u("if(",V,".buffer){",L,".disableVertexAttribArray(",F,");",V,".buffer=null;","}if(",gi.map(function(we,Ce){return V+"."+we+"!=="+ve[Ce]}).join("||"),"){",L,".vertexAttrib4f(",F,",",ve,");",gi.map(function(we,Ce){return V+"."+we+"="+ve[Ce]+";"}).join(""),"}")}ae===bi?Le():ae===uo?xe():(u("if(",ae,"===",bi,"){"),Le(),u("}else{"),xe(),u("}"))}S.forEach(function(h){var b=h.name,m=x.attributes[b],L;if(m){if(!O(m))return;L=m.append(p,u)}else{if(!O(_c))return;var F=p.scopeAttrib(b);c.optional(function(){p.assert(u,F+".state","missing attribute "+b)}),L={},Object.keys(new C).forEach(function(V){L[V]=u.def(F,".",V)})}w(p.link(h),E(h.info.type),L)})}function pt(p,u,x,S,O,T){for(var E=p.shared,w=E.gl,h,b=0;b<S.length;++b){var m=S[b],L=m.name,F=m.info.type,V=x.uniforms[L],ae=p.link(m),se=ae+".location",ve;if(V){if(!O(V))continue;if(An(V)){var ne=V.value;if(c.command(ne!==null&&typeof ne<"u",'missing uniform "'+L+'"',p.commandStr),F===Zi||F===Ji){c.command(typeof ne=="function"&&(F===Zi&&(ne._reglType==="texture2d"||ne._reglType==="framebuffer")||F===Ji&&(ne._reglType==="textureCube"||ne._reglType==="framebufferCube")),"invalid texture for uniform "+L,p.commandStr);var Le=p.link(ne._texture||ne.color[0]._texture);u(w,".uniform1i(",se,",",Le+".bind());"),u.exit(Le,".unbind();")}else if(F===Ki||F===qi||F===Qi){c.optional(function(){c.command(Mt(ne),"invalid matrix for uniform "+L,p.commandStr),c.command(F===Ki&&ne.length===4||F===qi&&ne.length===9||F===Qi&&ne.length===16,"invalid length for matrix uniform "+L,p.commandStr)});var xe=p.global.def("new Float32Array(["+Array.prototype.slice.call(ne)+"])"),we=2;F===qi?we=3:F===Qi&&(we=4),u(w,".uniformMatrix",we,"fv(",se,",false,",xe,");")}else{switch(F){case Ro:c.commandType(ne,"number","uniform "+L,p.commandStr),h="1f";break;case Wa:c.command(Mt(ne)&&ne.length===2,"uniform "+L,p.commandStr),h="2f";break;case Xa:c.command(Mt(ne)&&ne.length===3,"uniform "+L,p.commandStr),h="3f";break;case Ya:c.command(Mt(ne)&&ne.length===4,"uniform "+L,p.commandStr),h="4f";break;case Fo:c.commandType(ne,"boolean","uniform "+L,p.commandStr),h="1i";break;case Oo:c.commandType(ne,"number","uniform "+L,p.commandStr),h="1i";break;case Za:c.command(Mt(ne)&&ne.length===2,"uniform "+L,p.commandStr),h="2i";break;case Ka:c.command(Mt(ne)&&ne.length===2,"uniform "+L,p.commandStr),h="2i";break;case Ja:c.command(Mt(ne)&&ne.length===3,"uniform "+L,p.commandStr),h="3i";break;case qa:c.command(Mt(ne)&&ne.length===3,"uniform "+L,p.commandStr),h="3i";break;case es:c.command(Mt(ne)&&ne.length===4,"uniform "+L,p.commandStr),h="4i";break;case Qa:c.command(Mt(ne)&&ne.length===4,"uniform "+L,p.commandStr),h="4i";break}u(w,".uniform",h,"(",se,",",Mt(ne)?Array.prototype.slice.call(ne):ne,");")}continue}else ve=V.append(p,u)}else{if(!O(_c))continue;ve=u.def(E.uniforms,"[",d.id(L),"]")}F===Zi?(c(!Array.isArray(ve),"must specify a scalar prop for textures"),u("if(",ve,"&&",ve,'._reglType==="framebuffer"){',ve,"=",ve,".color[0];","}")):F===Ji&&(c(!Array.isArray(ve),"must specify a scalar prop for cube maps"),u("if(",ve,"&&",ve,'._reglType==="framebufferCube"){',ve,"=",ve,".color[0];","}")),c.optional(function(){function or($r,Ac){p.assert(u,$r,'bad data or missing for uniform "'+L+'".  '+Ac)}function Yr($r){c(!Array.isArray(ve),"must not specify an array type for uniform"),or("typeof "+ve+'==="'+$r+'"',"invalid type, expected "+$r)}function Ir($r,Ac){Array.isArray(ve)?c(ve.length===$r,"must have length "+$r):or(E.isArrayLike+"("+ve+")&&"+ve+".length==="+$r,"invalid vector, should have length "+$r,p.commandStr)}function Tc($r){c(!Array.isArray(ve),"must not specify a value type"),or("typeof "+ve+'==="function"&&'+ve+'._reglType==="texture'+($r===fc?"2d":"Cube")+'"',"invalid texture type",p.commandStr)}switch(F){case Oo:Yr("number");break;case Ka:Ir(2);break;case qa:Ir(3);break;case Qa:Ir(4);break;case Ro:Yr("number");break;case Wa:Ir(2);break;case Xa:Ir(3);break;case Ya:Ir(4);break;case Fo:Yr("boolean");break;case Za:Ir(2);break;case Ja:Ir(3);break;case es:Ir(4);break;case Ki:Ir(4);break;case qi:Ir(9);break;case Qi:Ir(16);break;case Zi:Tc(fc);break;case Ji:Tc(ym);break}});var Ce=1;switch(F){case Zi:case Ji:var Re=u.def(ve,"._texture");u(w,".uniform1i(",se,",",Re,".bind());"),u.exit(Re,".unbind();");continue;case Oo:case Fo:h="1i";break;case Ka:case Za:h="2i",Ce=2;break;case qa:case Ja:h="3i",Ce=3;break;case Qa:case es:h="4i",Ce=4;break;case Ro:h="1f";break;case Wa:h="2f",Ce=2;break;case Xa:h="3f",Ce=3;break;case Ya:h="4f",Ce=4;break;case Ki:h="Matrix2fv";break;case qi:h="Matrix3fv";break;case Qi:h="Matrix4fv";break}if(h.charAt(0)==="M"){u(w,".uniform",h,"(",se,",");var Ve=Math.pow(F-Ki+2,2),Et=p.global.def("new Float32Array(",Ve,")");Array.isArray(ve)?u("false,(",wr(Ve,function(or){return Et+"["+or+"]="+ve[or]}),",",Et,")"):u("false,(Array.isArray(",ve,")||",ve," instanceof Float32Array)?",ve,":(",wr(Ve,function(or){return Et+"["+or+"]="+ve+"["+or+"]"}),",",Et,")"),u(");")}else if(Ce>1){for(var Jt=[],on=[],fn=0;fn<Ce;++fn)Array.isArray(ve)?on.push(ve[fn]):on.push(u.def(ve+"["+fn+"]")),T&&Jt.push(u.def());T&&u("if(!",p.batchId,"||",Jt.map(function(or,Yr){return or+"!=="+on[Yr]}).join("||"),"){",Jt.map(function(or,Yr){return or+"="+on[Yr]+";"}).join("")),u(w,".uniform",h,"(",se,",",on.join(","),");"),T&&u("}")}else{if(c(!Array.isArray(ve),"uniform value must not be an array"),T){var ln=u.def();u("if(!",p.batchId,"||",ln,"!==",ve,"){",ln,"=",ve,";")}u(w,".uniform",h,"(",se,",",ve,");"),T&&u("}")}}}function $e(p,u,x,S){var O=p.shared,T=O.gl,E=O.draw,w=S.draw;function h(){var Ce=w.elements,Re,Ve=u;return Ce?((Ce.contextDep&&S.contextDynamic||Ce.propDep)&&(Ve=x),Re=Ce.append(p,Ve),w.elementsActive&&Ve("if("+Re+")"+T+".bindBuffer("+Lo+","+Re+".buffer.buffer);")):(Re=Ve.def(),Ve(Re,"=",E,".",Wn,";","if(",Re,"){",T,".bindBuffer(",Lo,",",Re,".buffer.buffer);}","else if(",O.vao,".currentVAO){",Re,"=",p.shared.elements+".getElements("+O.vao,".currentVAO.elements);",z?"":"if("+Re+")"+T+".bindBuffer("+Lo+","+Re+".buffer.buffer);","}")),Re}function b(){var Ce=w.count,Re,Ve=u;return Ce?((Ce.contextDep&&S.contextDynamic||Ce.propDep)&&(Ve=x),Re=Ce.append(p,Ve),c.optional(function(){Ce.MISSING&&p.assert(u,"false","missing vertex count"),Ce.DYNAMIC&&p.assert(Ve,Re+">=0","missing vertex count")})):(Re=Ve.def(E,".",Yn),c.optional(function(){p.assert(Ve,Re+">=0","missing vertex count")})),Re}var m=h();function L(Ce){var Re=w[Ce];return Re?Re.contextDep&&S.contextDynamic||Re.propDep?Re.append(p,x):Re.append(p,u):u.def(E,".",Ce)}var F=L(Xn),V=L(Ha),ae=b();if(typeof ae=="number"){if(ae===0)return}else x("if(",ae,"){"),x.exit("}");var se,ve;q&&(se=L(za),ve=p.instancing);var ne=m+".type",Le=w.elements&&An(w.elements)&&!w.vaoActive;function xe(){function Ce(){x(ve,".drawElementsInstancedANGLE(",[F,ae,ne,V+"<<(("+ne+"-"+Ul+")>>1)",se],");")}function Re(){x(ve,".drawArraysInstancedANGLE(",[F,V,ae,se],");")}m&&m!=="null"?Le?Ce():(x("if(",m,"){"),Ce(),x("}else{"),Re(),x("}")):Re()}function we(){function Ce(){x(T+".drawElements("+[F,ae,ne,V+"<<(("+ne+"-"+Ul+")>>1)"]+");")}function Re(){x(T+".drawArrays("+[F,V,ae]+");")}m&&m!=="null"?Le?Ce():(x("if(",m,"){"),Ce(),x("}else{"),Re(),x("}")):Re()}q&&(typeof se!="number"||se>=0)?typeof se=="string"?(x("if(",se,">0){"),xe(),x("}else if(",se,"<0){"),we(),x("}")):xe():we()}function at(p,u,x,S,O){var T=ze(),E=T.proc("body",O);return c.optional(function(){T.commandStr=u.commandStr,T.command=T.link(u.commandStr)}),q&&(T.instancing=E.def(T.shared.extensions,".angle_instanced_arrays")),p(T,E,x,S),T.compile().body}function ct(p,u,x,S){Nt(p,u),x.useVAO?x.drawVAO?u(p.shared.vao,".setVAO(",x.drawVAO.append(p,u),");"):u(p.shared.vao,".setVAO(",p.shared.vao,".targetVAO);"):(u(p.shared.vao,".setVAO(null);"),nr(p,u,x,S.attributes,function(){return!0})),pt(p,u,x,S.uniforms,function(){return!0},!1),$e(p,u,u,x)}function Bt(p,u){var x=p.proc("draw",1);Nt(p,x),Ht(p,x,u.context),zt(p,x,u.framebuffer),Zt(p,x,u),rr(p,x,u.state),Ze(p,x,u,!1,!0);var S=u.shader.progVar.append(p,x);if(x(p.shared.gl,".useProgram(",S,".program);"),u.shader.program)ct(p,x,u,u.shader.program);else{x(p.shared.vao,".setVAO(null);");var O=p.global.def("{}"),T=x.def(S,".id"),E=x.def(O,"[",T,"]");x(p.cond(E).then(E,".call(this,a0);").else(E,"=",O,"[",T,"]=",p.link(function(w){return at(ct,p,u,w,1)}),"(",S,");",E,".call(this,a0);"))}Object.keys(u.state).length>0&&x(p.shared.current,".dirty=true;"),p.shared.vao&&x(p.shared.vao,".setVAO(null);")}function Xr(p,u,x,S){p.batchId="a1",Nt(p,u);function O(){return!0}nr(p,u,x,S.attributes,O),pt(p,u,x,S.uniforms,O,!1),$e(p,u,u,x)}function qn(p,u,x,S){Nt(p,u);var O=x.contextDep,T=u.def(),E="a0",w="a1",h=u.def();p.shared.props=h,p.batchId=T;var b=p.scope(),m=p.scope();u(b.entry,"for(",T,"=0;",T,"<",w,";++",T,"){",h,"=",E,"[",T,"];",m,"}",b.exit);function L(ne){return ne.contextDep&&O||ne.propDep}function F(ne){return!L(ne)}if(x.needsContext&&Ht(p,m,x.context),x.needsFramebuffer&&zt(p,m,x.framebuffer),rr(p,m,x.state,L),x.profile&&L(x.profile)&&Ze(p,m,x,!1,!0),S)x.useVAO?x.drawVAO?L(x.drawVAO)?m(p.shared.vao,".setVAO(",x.drawVAO.append(p,m),");"):b(p.shared.vao,".setVAO(",x.drawVAO.append(p,b),");"):b(p.shared.vao,".setVAO(",p.shared.vao,".targetVAO);"):(b(p.shared.vao,".setVAO(null);"),nr(p,b,x,S.attributes,F),nr(p,m,x,S.attributes,L)),pt(p,b,x,S.uniforms,F,!1),pt(p,m,x,S.uniforms,L,!0),$e(p,b,m,x);else{var V=p.global.def("{}"),ae=x.shader.progVar.append(p,m),se=m.def(ae,".id"),ve=m.def(V,"[",se,"]");m(p.shared.gl,".useProgram(",ae,".program);","if(!",ve,"){",ve,"=",V,"[",se,"]=",p.link(function(ne){return at(Xr,p,x,ne,2)}),"(",ae,");}",ve,".call(this,a0[",T,"],",T,");")}}function v(p,u){var x=p.proc("batch",2);p.batchId="0",Nt(p,x);var S=!1,O=!0;Object.keys(u.context).forEach(function(V){S=S||u.context[V].propDep}),S||(Ht(p,x,u.context),O=!1);var T=u.framebuffer,E=!1;T?(T.propDep?S=E=!0:T.contextDep&&S&&(E=!0),E||zt(p,x,T)):zt(p,x,null),u.state.viewport&&u.state.viewport.propDep&&(S=!0);function w(V){return V.contextDep&&S||V.propDep}Zt(p,x,u),rr(p,x,u.state,function(V){return!w(V)}),(!u.profile||!w(u.profile))&&Ze(p,x,u,!1,"a1"),u.contextDep=S,u.needsContext=O,u.needsFramebuffer=E;var h=u.shader.progVar;if(h.contextDep&&S||h.propDep)qn(p,x,u,null);else{var b=h.append(p,x);if(x(p.shared.gl,".useProgram(",b,".program);"),u.shader.program)qn(p,x,u,u.shader.program);else{x(p.shared.vao,".setVAO(null);");var m=p.global.def("{}"),L=x.def(b,".id"),F=x.def(m,"[",L,"]");x(p.cond(F).then(F,".call(this,a0,a1);").else(F,"=",m,"[",L,"]=",p.link(function(V){return at(qn,p,u,V,2)}),"(",b,");",F,".call(this,a0,a1);"))}}Object.keys(u.state).length>0&&x(p.shared.current,".dirty=true;"),p.shared.vao&&x(p.shared.vao,".setVAO(null);")}function M(p,u){var x=p.proc("scope",3);p.batchId="a2";var S=p.shared,O=S.current;Ht(p,x,u.context),u.framebuffer&&u.framebuffer.append(p,x),vc(Object.keys(u.state)).forEach(function(E){var w=u.state[E],h=w.append(p,x);Mt(h)?h.forEach(function(b,m){x.set(p.next[E],"["+m+"]",b)}):x.set(S.next,"."+E,h)}),Ze(p,x,u,!0,!0),[Wn,Ha,Yn,za,Xn].forEach(function(E){var w=u.draw[E];w&&x.set(S.draw,"."+E,""+w.append(p,x))}),Object.keys(u.uniforms).forEach(function(E){var w=u.uniforms[E].append(p,x);Array.isArray(w)&&(w="["+w.join()+"]"),x.set(S.uniforms,"["+d.id(E)+"]",w)}),Object.keys(u.attributes).forEach(function(E){var w=u.attributes[E].append(p,x),h=p.scopeAttrib(E);Object.keys(new C).forEach(function(b){x.set(h,"."+b,w[b])})}),u.scopeVAO&&x.set(S.vao,".targetVAO",u.scopeVAO.append(p,x));function T(E){var w=u.shader[E];w&&x.set(S.shader,"."+E,w.append(p,x))}T(Wi),T(Xi),Object.keys(u.state).length>0&&(x(O,".dirty=true;"),x.exit(O,".dirty=true;")),x("a1(",p.shared.context,",a0,",p.batchId,");")}function D(p){if(!(typeof p!="object"||Mt(p))){for(var u=Object.keys(p),x=0;x<u.length;++x)if(sr.isDynamic(p[u[x]]))return!0;return!1}}function Ee(p,u,x){var S=u.static[x];if(!S||!D(S))return;var O=p.global,T=Object.keys(S),E=!1,w=!1,h=!1,b=p.global.def("{}");T.forEach(function(L){var F=S[L];if(sr.isDynamic(F)){typeof F=="function"&&(F=S[L]=sr.unbox(F));var V=br(F,null);E=E||V.thisDep,h=h||V.propDep,w=w||V.contextDep}else{switch(O(b,".",L,"="),typeof F){case"number":O(F);break;case"string":O('"',F,'"');break;case"object":Array.isArray(F)&&O("[",F.join(),"]");break;default:O(p.link(F));break}O(";")}});function m(L,F){T.forEach(function(V){var ae=S[V];if(sr.isDynamic(ae)){var se=L.invoke(F,ae);F(b,".",V,"=",se,";")}})}u.dynamic[x]=new sr.DynamicVariable(ja,{thisDep:E,contextDep:w,propDep:h,ref:b,append:m}),delete u.static[x]}function nt(p,u,x,S,O){var T=ze();T.stats=T.link(O),Object.keys(u.static).forEach(function(w){Ee(T,u,w)}),_m.forEach(function(w){Ee(T,p,w)});var E=Ut(p,u,x,S,T);return Bt(T,E),M(T,E),v(T,E),n(T.compile(),{destroy:function(){E.shader.program.destroy()}})}return{next:pe,current:_e,procs:function(){var p=ze(),u=p.proc("poll"),x=p.proc("refresh"),S=p.block();u(S),x(S);var O=p.shared,T=O.gl,E=O.next,w=O.current;S(w,".dirty=false;"),zt(p,u),zt(p,x,null,!0);var h;q&&(h=p.link(q)),_.oes_vertex_array_object&&x(p.link(_.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var b=0;b<G.maxAttributes;++b){var m=x.def(O.attributes,"[",b,"]"),L=p.cond(m,".buffer");L.then(T,".enableVertexAttribArray(",b,");",T,".bindBuffer(",Ei,",",m,".buffer.buffer);",T,".vertexAttribPointer(",b,",",m,".size,",m,".type,",m,".normalized,",m,".stride,",m,".offset);").else(T,".disableVertexAttribArray(",b,");",T,".vertexAttrib4f(",b,",",m,".x,",m,".y,",m,".z,",m,".w);",m,".buffer=null;"),x(L),q&&x(h,".vertexAttribDivisorANGLE(",b,",",m,".divisor);")}return x(p.shared.vao,".currentVAO=null;",p.shared.vao,".setVAO(",p.shared.vao,".targetVAO);"),Object.keys(j).forEach(function(F){var V=j[F],ae=S.def(E,".",F),se=p.block();se("if(",ae,"){",T,".enable(",V,")}else{",T,".disable(",V,")}",w,".",F,"=",ae,";"),x(se),u("if(",ae,"!==",w,".",F,"){",se,"}")}),Object.keys(k).forEach(function(F){var V=k[F],ae=_e[F],se,ve,ne=p.block();if(ne(T,".",V,"("),Mt(ae)){var Le=ae.length;se=p.global.def(E,".",F),ve=p.global.def(w,".",F),ne(wr(Le,function(xe){return se+"["+xe+"]"}),");",wr(Le,function(xe){return ve+"["+xe+"]="+se+"["+xe+"];"}).join("")),u("if(",wr(Le,function(xe){return se+"["+xe+"]!=="+ve+"["+xe+"]"}).join("||"),"){",ne,"}")}else se=S.def(E,".",F),ve=S.def(w,".",F),ne(se,");",w,".",F,"=",se,";"),u("if(",se,"!==",ve,"){",ne,"}");x(ne)}),p.compile()}(),compile:nt}}function Mm(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Nm=34918,Bm=34919,gc=35007,km=function(s,d){if(!d.ext_disjoint_timer_query)return null;var _=[];function G(){return _.pop()||d.ext_disjoint_timer_query.createQueryEXT()}function U(q){_.push(q)}var I=[];function B(q){var be=G();d.ext_disjoint_timer_query.beginQueryEXT(gc,be),I.push(be),Y(I.length-1,I.length,q)}function X(){d.ext_disjoint_timer_query.endQueryEXT(gc)}function W(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Z=[];function ee(){return Z.pop()||new W}function J(q){Z.push(q)}var oe=[];function Y(q,be,z){var _e=ee();_e.startQueryIndex=q,_e.endQueryIndex=be,_e.sum=0,_e.stats=z,oe.push(_e)}var Q=[],C=[];function N(){var q,be,z=I.length;if(z!==0){C.length=Math.max(C.length,z+1),Q.length=Math.max(Q.length,z+1),Q[0]=0,C[0]=0;var _e=0;for(q=0,be=0;be<I.length;++be){var pe=I[be];d.ext_disjoint_timer_query.getQueryObjectEXT(pe,Bm)?(_e+=d.ext_disjoint_timer_query.getQueryObjectEXT(pe,Nm),U(pe)):I[q++]=pe,Q[be+1]=_e,C[be+1]=q}for(I.length=q,q=0,be=0;be<oe.length;++be){var Be=oe[be],j=Be.startQueryIndex,k=Be.endQueryIndex;Be.sum+=Q[k]-Q[j];var Ae=C[j],fe=C[k];fe===Ae?(Be.stats.gpuTime+=Be.sum/1e6,J(Be)):(Be.startQueryIndex=Ae,Be.endQueryIndex=fe,oe[q++]=Be)}oe.length=q}}return{beginQuery:B,endQuery:X,pushScopeStats:Y,update:N,getNumPendingQueries:function(){return I.length},clear:function(){_.push.apply(_,I);for(var q=0;q<_.length;q++)d.ext_disjoint_timer_query.deleteQueryEXT(_[q]);I.length=0,_.length=0},restore:function(){I.length=0,_.length=0}}},$m=16384,Um=256,jm=1024,Vm=34962,bc="webglcontextlost",yc="webglcontextrestored",xc=1,Hm=2,zm=3;function Ec(s,d){for(var _=0;_<s.length;++_)if(s[_]===d)return _;return-1}function Wm(s){var d=Hd(s);if(!d)return null;var _=d.gl,G=_.getContextAttributes(),U=_.isContextLost(),I=zd(_,d);if(!I)return null;var B=wa(),X=Mm(),W=I.extensions,Z=km(_,W),ee=Ar(),J=_.drawingBufferWidth,oe=_.drawingBufferHeight,Y={tick:0,time:0,viewportWidth:J,viewportHeight:oe,framebufferWidth:J,framebufferHeight:oe,drawingBufferWidth:J,drawingBufferHeight:oe,pixelRatio:d.pixelRatio},Q={},C={elements:null,primitive:4,count:-1,offset:0,instances:-1},N=Ph(_,W),q=Yh(_,X,d,_e),be=sp(_,W,q,X),z=sm(_,W,N,X,q,be,C);function _e($e){return z.destroyBuffer($e)}var pe=cm(_,B,X,d),Be=Np(_,W,N,function(){Ae.procs.poll()},Y,X,d),j=Bp(_,W,N,X,d),k=im(_,W,N,Be,j,X),Ae=Gm(_,B,W,N,q,be,Be,k,Q,z,pe,C,Y,Z,d),fe=hm(_,k,Ae.procs.poll,Y,G,W,N),K=Ae.next,ce=_.canvas,he=[],Ke=[],ze=[],me=[d.onDestroy],ge=null;function je(){if(he.length===0){Z&&Z.update(),ge=null;return}ge=ir.next(je),rr();for(var $e=he.length-1;$e>=0;--$e){var at=he[$e];at&&at(Y,null,0)}_.flush(),Z&&Z.update()}function Ye(){!ge&&he.length>0&&(ge=ir.next(je))}function it(){ge&&(ir.cancel(je),ge=null)}function Pt($e){$e.preventDefault(),U=!0,it(),Ke.forEach(function(at){at()})}function It($e){_.getError(),U=!1,I.restore(),pe.restore(),q.restore(),Be.restore(),j.restore(),k.restore(),z.restore(),Z&&Z.restore(),Ae.procs.refresh(),Ye(),ze.forEach(function(at){at()})}ce&&(ce.addEventListener(bc,Pt,!1),ce.addEventListener(yc,It,!1));function st(){he.length=0,it(),ce&&(ce.removeEventListener(bc,Pt),ce.removeEventListener(yc,It)),pe.clear(),k.clear(),j.clear(),z.clear(),Be.clear(),be.clear(),q.clear(),Z&&Z.clear(),me.forEach(function($e){$e()})}function Vt($e){c(!!$e,"invalid args to regl({...})"),c.type($e,"object","invalid args to regl({...})");function at(O){var T=n({},O);delete T.uniforms,delete T.attributes,delete T.context,delete T.vao,"stencil"in T&&T.stencil.op&&(T.stencil.opBack=T.stencil.opFront=T.stencil.op,delete T.stencil.op);function E(w){if(w in T){var h=T[w];delete T[w],Object.keys(h).forEach(function(b){T[w+"."+b]=h[b]})}}return E("blend"),E("depth"),E("cull"),E("stencil"),E("polygonOffset"),E("scissor"),E("sample"),"vao"in O&&(T.vao=O.vao),T}function ct(O,T){var E={},w={};return Object.keys(O).forEach(function(h){var b=O[h];if(sr.isDynamic(b)){w[h]=sr.unbox(b,h);return}else if(T&&Array.isArray(b)){for(var m=0;m<b.length;++m)if(sr.isDynamic(b[m])){w[h]=sr.unbox(b,h);return}}E[h]=b}),{dynamic:w,static:E}}var Bt=ct($e.context||{},!0),Xr=ct($e.uniforms||{},!0),qn=ct($e.attributes||{},!1),v=ct(at($e),!1),M={gpuTime:0,cpuTime:0,count:0},D=Ae.compile(v,qn,Xr,Bt,M),Ee=D.draw,nt=D.batch,p=D.scope,u=[];function x(O){for(;u.length<O;)u.push(null);return u}function S(O,T){var E;if(U&&c.raise("context lost"),typeof O=="function")return p.call(this,null,O,0);if(typeof T=="function")if(typeof O=="number")for(E=0;E<O;++E)p.call(this,null,T,E);else if(Array.isArray(O))for(E=0;E<O.length;++E)p.call(this,O[E],T,E);else return p.call(this,O,T,0);else if(typeof O=="number"){if(O>0)return nt.call(this,x(O|0),O|0)}else if(Array.isArray(O)){if(O.length)return nt.call(this,O,O.length)}else return Ee.call(this,O)}return n(S,{stats:M,destroy:function(){D.destroy()}})}var Ct=k.setFBO=Vt({framebuffer:sr.define.call(null,xc,"framebuffer")});function Ut($e,at){var ct=0;Ae.procs.poll();var Bt=at.color;Bt&&(_.clearColor(+Bt[0]||0,+Bt[1]||0,+Bt[2]||0,+Bt[3]||0),ct|=$m),"depth"in at&&(_.clearDepth(+at.depth),ct|=Um),"stencil"in at&&(_.clearStencil(at.stencil|0),ct|=jm),c(!!ct,"called regl.clear with no buffer specified"),_.clear(ct)}function Ht($e){if(c(typeof $e=="object"&&$e,"regl.clear() takes an object as input"),"framebuffer"in $e)if($e.framebuffer&&$e.framebuffer_reglType==="framebufferCube")for(var at=0;at<6;++at)Ct(n({framebuffer:$e.framebuffer.faces[at]},$e),Ut);else Ct($e,Ut);else Ut(null,$e)}function zt($e){c.type($e,"function","regl.frame() callback must be a function"),he.push($e);function at(){var ct=Ec(he,$e);c(ct>=0,"cannot cancel a frame twice");function Bt(){var Xr=Ec(he,Bt);he[Xr]=he[he.length-1],he.length-=1,he.length<=0&&it()}he[ct]=Bt}return Ye(),{cancel:at}}function Zt(){var $e=K.viewport,at=K.scissor_box;$e[0]=$e[1]=at[0]=at[1]=0,Y.viewportWidth=Y.framebufferWidth=Y.drawingBufferWidth=$e[2]=at[2]=_.drawingBufferWidth,Y.viewportHeight=Y.framebufferHeight=Y.drawingBufferHeight=$e[3]=at[3]=_.drawingBufferHeight}function rr(){Y.tick+=1,Y.time=Ze(),Zt(),Ae.procs.poll()}function Nt(){Be.refresh(),Zt(),Ae.procs.refresh(),Z&&Z.update()}function Ze(){return(Ar()-ee)/1e3}Nt();function nr($e,at){c.type(at,"function","listener callback must be a function");var ct;switch($e){case"frame":return zt(at);case"lost":ct=Ke;break;case"restore":ct=ze;break;case"destroy":ct=me;break;default:c.raise("invalid event, must be one of frame,lost,restore,destroy")}return ct.push(at),{cancel:function(){for(var Bt=0;Bt<ct.length;++Bt)if(ct[Bt]===at){ct[Bt]=ct[ct.length-1],ct.pop();return}}}}var pt=n(Vt,{clear:Ht,prop:sr.define.bind(null,xc),context:sr.define.bind(null,Hm),this:sr.define.bind(null,zm),draw:Vt({}),buffer:function($e){return q.create($e,Vm,!1,!1)},elements:function($e){return be.create($e,!1)},texture:Be.create2D,cube:Be.createCube,renderbuffer:j.create,framebuffer:k.create,framebufferCube:k.createCube,vao:z.createVAO,attributes:G,frame:zt,on:nr,limits:N,hasExtension:function($e){return N.extensions.indexOf($e.toLowerCase())>=0},read:fe,destroy:st,_gl:_,_refresh:Nt,poll:function(){rr(),Z&&Z.update()},now:Ze,stats:X});return d.onDone(null,pt),pt}return Wm})})(Pd);var U_=Pd.exports;const j_=$_(U_),Rt=oi({enabled:!1,x:0,y:0,z:0,angleX:0,angleY:0,angleZ:0,scaleX:1,scaleY:1,scaleZ:1});class Gs{constructor(t,r){Oe(this,"x");Oe(this,"y");Oe(this,"current",[0,0]);Oe(this,"transition");this.x=t,this.y=r,this.current=[t,r]}set(t,r,n=0){const i=this.x,a=this.y;this.x=t,this.y=r,n===0?(this.current=[t,r],this.transition=void 0):(this.current=[i,a],this.transition={from:[i,a],target:[t,r],duration:[0,n]})}move(t,r,n=0){this.set(this.x+t,this.y+r,n)}tick(t){if(!this.transition)return;const r=this.transition;if(r.duration[0]+=t,r.duration[0]>=r.duration[1])this.current=r.target,this.transition=void 0;else{const n=r.duration[0]/r.duration[1],i=-(Math.cos(Math.PI*n)-1)/2,a=r.from[0]+(r.target[0]-r.from[0])*i,f=r.from[1]+(r.target[1]-r.from[1])*i;this.current=[a,f]}}distance(t){return Math.sqrt((this.x-t.x)**2+(this.y-t.y)**2)}equals(t){return this.x===t.x&&this.y===t.y}clone(){return Object.assign(Object.create(Object.getPrototypeOf(this)),this)}static from(t){return new Gs(t[0],t[1])}}var Ii=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function pn(){var e=new Ii(16);return Ii!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function na(e){var t=new Ii(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function V_(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],f=t[4],o=t[5],l=t[6],y=t[7],g=t[8],P=t[9],$=t[10],re=t[11],ue=t[12],De=t[13],qe=t[14],Ie=t[15],Qe=r*o-n*f,Ue=r*l-i*f,ye=r*y-a*f,Me=n*l-i*o,We=n*y-a*o,wt=i*y-a*l,Ot=g*De-P*ue,He=g*qe-$*ue,Je=g*Ie-re*ue,mt=P*qe-$*De,Fe=P*Ie-re*De,vt=$*Ie-re*qe,ft=Qe*vt-Ue*Fe+ye*mt+Me*Je-We*He+wt*Ot;return ft?(ft=1/ft,e[0]=(o*vt-l*Fe+y*mt)*ft,e[1]=(i*Fe-n*vt-a*mt)*ft,e[2]=(De*wt-qe*We+Ie*Me)*ft,e[3]=($*We-P*wt-re*Me)*ft,e[4]=(l*Je-f*vt-y*He)*ft,e[5]=(r*vt-i*Je+a*He)*ft,e[6]=(qe*ye-ue*wt-Ie*Ue)*ft,e[7]=(g*wt-$*ye+re*Ue)*ft,e[8]=(f*Fe-o*Je+y*Ot)*ft,e[9]=(n*Je-r*Fe-a*Ot)*ft,e[10]=(ue*We-De*ye+Ie*Qe)*ft,e[11]=(P*ye-g*We-re*Qe)*ft,e[12]=(o*He-f*mt-l*Ot)*ft,e[13]=(r*mt-n*He+i*Ot)*ft,e[14]=(De*Ue-ue*Me-qe*Qe)*ft,e[15]=(g*Me-P*Ue+$*Qe)*ft,e):null}function H_(e,t,r){var n=t[0],i=t[1],a=t[2],f=t[3],o=t[4],l=t[5],y=t[6],g=t[7],P=t[8],$=t[9],re=t[10],ue=t[11],De=t[12],qe=t[13],Ie=t[14],Qe=t[15],Ue=r[0],ye=r[1],Me=r[2],We=r[3];return e[0]=Ue*n+ye*o+Me*P+We*De,e[1]=Ue*i+ye*l+Me*$+We*qe,e[2]=Ue*a+ye*y+Me*re+We*Ie,e[3]=Ue*f+ye*g+Me*ue+We*Qe,Ue=r[4],ye=r[5],Me=r[6],We=r[7],e[4]=Ue*n+ye*o+Me*P+We*De,e[5]=Ue*i+ye*l+Me*$+We*qe,e[6]=Ue*a+ye*y+Me*re+We*Ie,e[7]=Ue*f+ye*g+Me*ue+We*Qe,Ue=r[8],ye=r[9],Me=r[10],We=r[11],e[8]=Ue*n+ye*o+Me*P+We*De,e[9]=Ue*i+ye*l+Me*$+We*qe,e[10]=Ue*a+ye*y+Me*re+We*Ie,e[11]=Ue*f+ye*g+Me*ue+We*Qe,Ue=r[12],ye=r[13],Me=r[14],We=r[15],e[12]=Ue*n+ye*o+Me*P+We*De,e[13]=Ue*i+ye*l+Me*$+We*qe,e[14]=Ue*a+ye*y+Me*re+We*Ie,e[15]=Ue*f+ye*g+Me*ue+We*Qe,e}function yr(e,t,r){var n=r[0],i=r[1],a=r[2],f,o,l,y,g,P,$,re,ue,De,qe,Ie;return t===e?(e[12]=t[0]*n+t[4]*i+t[8]*a+t[12],e[13]=t[1]*n+t[5]*i+t[9]*a+t[13],e[14]=t[2]*n+t[6]*i+t[10]*a+t[14],e[15]=t[3]*n+t[7]*i+t[11]*a+t[15]):(f=t[0],o=t[1],l=t[2],y=t[3],g=t[4],P=t[5],$=t[6],re=t[7],ue=t[8],De=t[9],qe=t[10],Ie=t[11],e[0]=f,e[1]=o,e[2]=l,e[3]=y,e[4]=g,e[5]=P,e[6]=$,e[7]=re,e[8]=ue,e[9]=De,e[10]=qe,e[11]=Ie,e[12]=f*n+g*i+ue*a+t[12],e[13]=o*n+P*i+De*a+t[13],e[14]=l*n+$*i+qe*a+t[14],e[15]=y*n+re*i+Ie*a+t[15]),e}function mn(e,t,r){var n=r[0],i=r[1],a=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function xs(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[4],f=t[5],o=t[6],l=t[7],y=t[8],g=t[9],P=t[10],$=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+y*n,e[5]=f*i+g*n,e[6]=o*i+P*n,e[7]=l*i+$*n,e[8]=y*i-a*n,e[9]=g*i-f*n,e[10]=P*i-o*n,e[11]=$*i-l*n,e}function z_(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[0],f=t[1],o=t[2],l=t[3],y=t[8],g=t[9],P=t[10],$=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-y*n,e[1]=f*i-g*n,e[2]=o*i-P*n,e[3]=l*i-$*n,e[8]=a*n+y*i,e[9]=f*n+g*i,e[10]=o*n+P*i,e[11]=l*n+$*i,e}function Dd(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[0],f=t[1],o=t[2],l=t[3],y=t[4],g=t[5],P=t[6],$=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+y*n,e[1]=f*i+g*n,e[2]=o*i+P*n,e[3]=l*i+$*n,e[4]=y*i-a*n,e[5]=g*i-f*n,e[6]=P*i-o*n,e[7]=$*i-l*n,e}function W_(e,t,r,n,i){var a=1/Math.tan(t/2),f;return e[0]=a/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0?(f=1/(n-i),e[10]=(i+n)*f,e[14]=2*i*n*f):(e[10]=-1,e[14]=-2*n),e}var X_=W_;function Id(){var e=new Ii(4);return Ii!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function uf(e,t,r,n){var i=new Ii(4);return i[0]=e,i[1]=t,i[2]=r,i[3]=n,i}function Y_(e,t,r){var n=t[0],i=t[1],a=t[2],f=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*a+r[12]*f,e[1]=r[1]*n+r[5]*i+r[9]*a+r[13]*f,e[2]=r[2]*n+r[6]*i+r[10]*a+r[14]*f,e[3]=r[3]*n+r[7]*i+r[11]*a+r[15]*f,e}(function(){var e=Id();return function(t,r,n,i,a,f){var o,l;for(r||(r=4),n||(n=0),i?l=Math.min(i*r+n,t.length):l=t.length,o=n;o<l;o+=r)e[0]=t[o],e[1]=t[o+1],e[2]=t[o+2],e[3]=t[o+3],a(e,e,f),t[o]=e[0],t[o+1]=e[1],t[o+2]=e[2],t[o+3]=e[3];return t}})();class K_{constructor(t){Oe(this,"drawPlayerCommand");Oe(this,"drawPlayerShadowCommand");Oe(this,"playerTextures",new Map);Oe(this,"textures",new Map);const r=t.ctx,n=a=>r.prop(a);this.drawPlayerCommand=r({vert:fu,frag:q_,uniforms:{u_projection:n("u_projection"),u_texture:n("u_texture")},attributes:{a_position:r.buffer([[-1,-1],[1,-1],[1,1],[-1,1]]),a_uv:r.buffer([[0,0],[1,0],[1,1],[0,1]])},elements:r.elements([[2,1,0],[0,3,2]]),blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:1,dstRGB:"one minus src alpha",dstAlpha:1},equation:{rgb:"add",alpha:"add"}}});const i=a=>r.prop(a);this.drawPlayerShadowCommand=r({vert:fu,frag:Q_,uniforms:{u_projection:i("u_projection")},attributes:{a_position:r.buffer([[-1,-1],[1,-1],[1,1],[-1,1]]),a_uv:r.buffer([[0,0],[1,0],[1,1],[0,1]])},elements:r.elements([[2,1,0],[0,3,2]]),blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:1,dstRGB:"one minus src alpha",dstAlpha:1},equation:{rgb:"add",alpha:"add"}}})}draw(t,r,n){const i=Er(),a=xt(),f=ue=>[[0,0,0],[.2,0,-.2],[-.2,0,.2],[.2,0,.2],[-.2,0,-.2]][ue]??[0,0,0],o=[],l=[],y=[],g=[],P=this.getTexture("dizziness"),$=this.getTexture("arrow"),re=new Map;for(const ue of a.players.values()){ue.position.tick(n);const[De,qe]=ue.position.current,Ie=na(r);if(!ue.position.transition){const He=i.indexFromPosition([ue.position.x,ue.position.y]),Je=re.get(He)??0;re.set(He,Je+1),yr(Ie,Ie,f(Je))}const Qe=this.getPlayerTexture(ue.id);if(!Qe)continue;const Ue=Qe.height/Qe.width;yr(Ie,Ie,[De,0,qe]);const ye=na(Ie),Me=.4*Ue;if(yr(ye,ye,[0,Me,0]),mn(ye,ye,[.4,-Me,1]),o.push({u_projection:ye,u_texture:Qe}),P&&ue.dizziness){const He=na(Ie);yr(He,He,[0,2*Me,.1]),mn(He,He,[.25,-.25,1]),l.push({u_projection:He,u_texture:P})}if($){let He=[ue.direction];if(ue.active){const Je=ur().move.accept;Je.length&&(He=Je)}for(const Je of He){const mt={[dt.UP]:0,[dt.RIGHT]:1,[dt.DOWN]:2,[dt.LEFT]:3}[Je],Fe=na(Ie),vt=Math.sin(mt*Math.PI/2)*.5,ft=-Math.cos(mt*Math.PI/2)*.5;yr(Fe,Fe,[vt,.1,ft]),mn(Fe,Fe,[.25,1,.25]),xs(Fe,Fe,Math.PI/2),Dd(Fe,Fe,mt*Math.PI/2),l.push({u_projection:Fe,u_texture:$})}}const We=na(Ie);yr(We,We,[0,.01,0]),xs(We,We,Math.PI/2),mn(We,We,[.4,.2,1]),y.push({u_projection:We});const wt=t.projectPoint([De,2*Me,qe],r),Ot=`${ue.id}`;g.push([Ot,wt])}this.drawPlayerCommand(o),this.drawPlayerShadowCommand(y),this.drawPlayerCommand(l),a.playersLabel=g}getTexture(t){let r=this.textures.get(t);if(r===void 0){const n=In().getTexture(t);if(r=en().ctx.texture(n),!r)return;this.textures.set(t,r)}return r}getPlayerTexture(t){let r=this.playerTextures.get(t);if(r===void 0){const n=`player-${t}`,i=In().getTexture(n);if(r=en().ctx.texture(i),!r)return;this.textures.set(n,r)}return r}}const fu=`
precision mediump float;
attribute vec2 a_position;
attribute vec2 a_uv;

uniform mat4 u_projection;

varying vec2 uv;

void main() {
  uv = a_uv;
  gl_Position = u_projection * vec4(a_position, 0, 1);
}
`,q_=`
precision mediump float;
uniform sampler2D u_texture;

varying vec2 uv;

void main() {
  vec4 color = texture2D(u_texture, uv);
  if (color.a < 0.1) discard;
  gl_FragColor = color;
}
`,Q_=`
precision mediump float;

varying vec2 uv;

void main() {
  float distance_to_center = distance(uv, vec2(0.5));
  if (distance_to_center > 0.5) discard;
  gl_FragColor = vec4(0.1, 0.1, 0.1, 0.8);
}
`;class Z_{constructor(t){Oe(this,"fbo");Oe(this,"width");Oe(this,"height");Oe(this,"changed",!0);Oe(this,"updateMapCommand");Oe(this,"mapCommand");Oe(this,"undergroundCommand");Oe(this,"skyCommand");Oe(this,"textures",new Map);const r=t.ctx,n=Er(),i=(this.width=n.width)*Fn.TILE_SIZE,a=(this.height=n.height)*Fn.TILE_SIZE;this.fbo=r.framebuffer({width:i,height:a});const f=y=>r.prop(y);this.updateMapCommand=r({vert:lu,frag:cu,framebuffer:this.fbo,uniforms:{u_projection:f("u_projection"),u_texture:f("u_texture")},attributes:{a_position:r.buffer([[-1,-1],[1,-1],[1,1],[-1,1]]),a_uv:r.buffer([[0,0],[1,0],[1,1],[0,1]])},elements:r.elements([[2,1,0],[0,3,2]]),blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"src alpha",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}}});const o=y=>r.prop(y);this.mapCommand=r({vert:lu,frag:cu,uniforms:{u_projection:o("u_projection"),u_texture:o("u_texture")},attributes:{a_position:r.buffer([[-1,1],[1,1],[1,-1],[-1,-1]]),a_uv:r.buffer([[0,0],[1,0],[1,1],[0,1]])},elements:r.elements([[2,1,0],[0,3,2]]),blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"src alpha",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}}});const l=y=>r.prop(y);this.undergroundCommand=r({vert:J_,frag:eg,uniforms:{u_projection:l("u_projection"),u_color:uf(.4609375,.640625,.2890625,1)},attributes:{a_position:r.buffer([[-1,1,-1],[1,1,-1],[1,1,1],[-1,1,1],[-1,-1,1],[1,-1,1],[1,1,1],[-1,1,1],[-1,-1,-1],[-1,1,-1],[-1,1,1],[-1,-1,1],[1,-1,-1],[1,-1,1],[1,1,1],[1,1,-1]])},elements:r.elements([[2,1,0],[0,3,2],[6,5,4],[4,7,6],[10,9,8],[8,11,10],[14,13,12],[12,15,14]]),blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"src alpha",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}}}),this.skyCommand=r({vert:tg,frag:rg,uniforms:{u_projection:l("u_projection"),u_color:uf(.4921875,.8359375,.8515625,1)},attributes:{a_position:r.buffer([[-1,-1],[1,-1],[1,1],[-1,1]])},elements:r.elements([[2,1,0],[0,3,2]]),blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"src alpha",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}}})}draw(t,r){const n=Er();if(this.changed){t.ctx.clear({depth:1,color:[0,0,0,0],framebuffer:this.fbo});const g=[];for(const P in n.flatTiles){const $=n.flatTiles[P],re=this.getTexture($);if(!re)continue;const ue=pn(),[De,qe]=n.indexFromFlat(parseInt(P));yr(ue,ue,[-1,1,0]),mn(ue,ue,[1/n.width,-1/n.height,0]),yr(ue,ue,[De*2+1,qe*2+1,0]),g.push({u_projection:ue,u_texture:re})}this.updateMapCommand(g),this.changed=!1}const i=Math.floor(n.width/2),a=Math.floor(n.height/2),f=pn();yr(f,r,[i,-.01,a]),mn(f,f,[n.width/2+.5,5,n.height/2+.5]),yr(f,f,[0,-1,0]),this.undergroundCommand({u_projection:f});const o=pn();yr(o,r,[i,25,a-10]),mn(o,o,[100,100,1]),this.skyCommand({u_projection:o});const l=pn();yr(l,r,[i,0,a]),xs(l,l,Math.PI/2),mn(l,l,[this.width/2,this.height/2,1]),this.mapCommand({u_projection:l,u_texture:this.fbo})}getTexture(t){let r=this.textures.get(t);if(r===void 0){const n=Fn.tileImage(t);if(!n||(r=en().ctx.texture(n),!r))return;this.textures.set(t,r)}return r}}const lu=`
precision mediump float;
attribute vec2 a_position;
attribute vec2 a_uv;

uniform mat4 u_projection;

varying vec2 uv;

void main() {
  uv = a_uv;
  gl_Position = u_projection * vec4(a_position, 0, 1);
}
`,cu=`
precision mediump float;
uniform sampler2D u_texture;

varying vec2 uv;

void main() {
  gl_FragColor = texture2D(u_texture, uv);
}
`,J_=`
precision mediump float;
attribute vec3 a_position;

uniform mat4 u_projection;

varying float height;
void main() {
  height = a_position.y;
  gl_Position = u_projection * vec4(a_position, 1);
}
`,eg=`
precision mediump float;
uniform vec4 u_color;

varying float height;
void main() {
  gl_FragColor = u_color * height;
  if (height < 0.995) {
    gl_FragColor -= vec4(0.1, 0.1, 0.1, 0);
  }
}
`,tg=`
precision mediump float;
attribute vec2 a_position;

uniform mat4 u_projection;

void main() {
  gl_Position = u_projection * vec4(a_position, 0, 1);
}
`,rg=`
precision mediump float;
uniform vec4 u_color;

void main() {
  gl_FragColor = u_color;
}
`;class ng{constructor(t){Oe(this,"damagedCommand");Oe(this,"textures",new Map);const r=t.ctx,n=i=>r.prop(i);this.damagedCommand=r({vert:ig,frag:ag,uniforms:{u_projection:n("u_projection"),u_direction:n("u_direction"),u_texture:n("u_texture"),u_time:n("u_time")},attributes:{a_position:r.buffer([[-1,-1],[1,-1],[1,1],[-1,1]]),a_uv:r.buffer([[0,0],[1,0],[1,1],[0,1]])},elements:r.elements([[2,1,0],[0,3,2]]),blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:1,dstRGB:"one minus src alpha",dstAlpha:1},equation:{rgb:"add",alpha:"add"}}})}draw(t,r,n){const i=Fd(),a=[];for(const f of i.inner.values())if(i.check("damaged",f)){f.time+=n;const o=this.getTexture("fx-damaged");if(!o)continue;const[l,y]=f.position,g=pn();yr(g,r,[l,.5,y+.1]),mn(g,g,[.2,-.2,1]),a.push({u_time:f.time,u_direction:f.direction,u_projection:g,u_texture:o})}this.damagedCommand(a)}getTexture(t){let r=this.textures.get(t);if(r===void 0){const n=In().getTexture(t);if(r=en().ctx.texture(n),!r)return;this.textures.set(t,r)}return r}}const ig=`
precision mediump float;
attribute vec2 a_position;
attribute vec2 a_uv;

uniform mat4 u_projection;
uniform vec2 u_direction;
uniform float u_time;

varying vec2 uv;

void main() {
  uv = a_uv;
  vec2 move = u_direction * u_time / 800.0 * 2.0;
  gl_Position = u_projection * vec4(a_position - move, 0, 1);
}
`,ag=`
precision mediump float;
uniform sampler2D u_texture;
uniform float u_time;

varying vec2 uv;

void main() {
  float t = u_time / 800.0;
  vec4 color = texture2D(u_texture, uv);
  gl_FragColor = vec4(color.rgb, color.a * (1.0 - t));
}
`,en=()=>Gd,sg=e=>Gd=new og(e);let Gd;class og{constructor(t){Oe(this,"canvas");Oe(this,"ctx");Oe(this,"viewport",600);Oe(this,"paused",!0);Oe(this,"position",new Gs(0,0));Oe(this,"aspect",NaN);Oe(this,"width",NaN);Oe(this,"height",NaN);Oe(this,"backgroundRender");Oe(this,"playersRender");Oe(this,"fxRender");this.canvas=t,this.ctx=j_({pixelRatio:1,canvas:t}),this.backgroundRender=new Z_(this),this.playersRender=new K_(this),this.fxRender=new ng(this),this.resize(),window.addEventListener("resize",this.resize.bind(this))}start(){const t=this.paused;this.paused=!1,t&&this.draw()}stop(){this.paused=!0}draw(t=Date.now()){if(this.paused)return;const r=Date.now(),n=r-t;this.position.tick(n);const i=n<=1e3/60;if(requestAnimationFrame(()=>this.draw(i?t:r)),i)return;this.ctx.poll(),this.clear();const o=X_(pn(),Math.PI/3,this.aspect,1,1e4),l=pn(),y=5,g=30*Math.PI/180,P=y*Math.sin(g),$=y*Math.cos(g),re=.8,[ue,De]=this.position.current;yr(l,l,[Rt.x+ue,Rt.y+re+P,Rt.z+De+$]),xs(l,l,Rt.angleX*Math.PI/180-g),z_(l,l,Rt.angleY*Math.PI/180),Dd(l,l,Rt.angleZ*Math.PI/180);const qe=V_(pn(),l),Ie=H_(pn(),o,qe);this.backgroundRender.draw(this,Ie),this.playersRender.draw(this,Ie,n),this.fxRender.draw(this,Ie,n)}clear(){this.ctx.clear({color:[0,0,0,1],depth:1})}resize(){let{width:t,height:r}=this.canvas.getBoundingClientRect();const n=window.devicePixelRatio;this.canvas.height=r*n,this.canvas.width=t*n,this.aspect=t/r,this.height=r,this.width=t}projectPoint(t,r){const n=uf(t[0],t[1],t[2],1),i=Y_(Id(),n,r);return[(i[0]/i[3]+1)*.5*this.width,(1-i[1]/i[3])*.5*this.height]}}const ni=6,fg=.6;class lg{constructor(t,r,n,i,a){Oe(this,"active",!1);Oe(this,"health",ni);Oe(this,"dizziness",0);Oe(this,"fixedDirection",!0);Oe(this,"doubleDice",0);Oe(this,"fixedDices",[]);Oe(this,"immune",0);Oe(this,"doubleTaskScore",0);Oe(this,"doubleDamage",0);this.id=t,this.score=r,this.color=n,this.position=i,this.direction=a}async walk(){const r=Er().nextPosition([this.position.x,this.position.y],this.direction);if(r.size===0)throw new Error("No moves available");const n=ur();this.fixedDirection?this.fixedDirection=!1:this.direction=r.size===1?r.keys().next().value:await n.move.input("選擇方向",Array.from(r.keys()));const i=r.get(this.direction);this.position.set(this.position.x+i[0],this.position.y+i[1],200);const a=en();a.position=this.position.clone(),await n.wait(200)}async trigger(t){const r=Er(),n=xt();t??(t=r.getTile(this.position.x,this.position.y)),console.group(`玩家 ${this.id} 抵達 ${Fn.tileText(t)}`);const i={[fr.Spawner]:async()=>{console.log("獲得 100 分"),n.messages.push(`玩家 ${this.id} 獲得 100 分`),this.score+=100,n.victoryScore<=this.score&&(console.log("獲勝"),n.messages.push(`玩家 ${this.id} 獲勝`),n.winner=this,Of().running=!1)},[fr.Task]:async()=>{const a=L_();console.log(`獲得任務 ${a[0]}`),n.messages.push(`玩家 ${this.id} 獲得任務 ${a[0]}`),await n.setEvent(this,"任務",a,!0)},[fr.Opportunity]:async()=>{const a=G_();console.log(`獲得機會 ${a[0]}`),n.messages.push(`玩家 ${this.id} 獲得機會 ${a[0]}`),await n.setEvent(this,"機會",a)},[fr.Destiny]:async()=>{const a=D_();console.log(`獲得命運 ${a[0]}`),n.messages.push(`玩家 ${this.id} 獲得命運 ${a[0]}`),await n.setEvent(this,"命運",a)},[fr.Punishment]:async()=>{const a=N_();console.log(`獲得懲罰 ${a[0]}`),n.messages.push(`玩家 ${this.id} 獲得懲罰 ${a[0]}`),await n.setEvent(this,"懲罰",a)},[fr.Teleport]:async()=>{const a=ur();if(!await a.confirm.input("是否傳送"))return;const f=r.teleports.filter(l=>l[0]!==this.position.x&&l[1]!==this.position.y);ys(f);const o=f.pop();console.log(`傳送至 ${o}`),n.messages.push(`玩家 ${this.id} 傳送至 ${o}`),await this.teleport(o),await a.wait(500)},[fr.Prison]:async()=>{console.log("被關 1 回合"),n.messages.push(`玩家 ${this.id} 被關 1 回合`),this.dizziness++},[fr.Hospital]:async()=>{console.log("被治療 1 回合"),n.messages.push(`玩家 ${this.id} 被治療 1 回合`),this.health=ni,this.dizziness++},[fr.Empty](){throw new Error("Unreachable")}}[t];await i(),console.groupEnd()}async attack(t,r=!1){const n=Er(),i=xt();if(n.getTile(this.position.x,this.position.y)===fr.Hospital){console.log(`玩家 ${t.id} 在醫院，無法攻擊`),i.messages.push(`玩家 ${t.id} 在醫院，無法攻擊`);return}if(t.immune){console.log(`玩家 ${t.id} 處於無敵狀態`),i.messages.push(`玩家 ${t.id} 處於無敵狀態`);return}const a=ur();if(!r&&!await a.confirm.input(`是否攻擊玩家 ${t.id}`)){console.log(`玩家 ${this.id} 放棄攻擊`),i.messages.push(`玩家 ${this.id} 放棄攻擊`);return}console.group(`玩家 ${this.id} 與玩家 ${t.id} 對戰`);let f=await this.throwDice(`對 第${t.id}組 進行掠奪`);this.doubleDamage&&(this.doubleDamage--,f*=2),await t.damage(f,this),console.groupEnd()}async damage(t,r){console.log(`玩家 ${this.id} 受到 ${t} 點傷害`);const n=xt();n.messages.push(`玩家 ${this.id} 受到 ${t} 點傷害`),this.health-=t;const i=Fd();let[a,f]=this.position.current;for(let o=0;o<t;o++){const l=Math.random()*Math.PI*2;i.effect({name:"damaged",position:[a,f],direction:[Math.sin(l),Math.cos(l)],time:0},800)}if(this.health>0){await ur().wait(1e3);return}if(console.log(`玩家 ${this.id} 被擊倒`),n.messages.push(`玩家 ${this.id} 被擊倒`),this.health=ni,this.dizziness=1,r){const o=Math.floor(this.score*fg);console.log(`玩家 ${r.id} 獲得 ${o} 分`),n.messages.push(`玩家 ${r.id} 掠奪了 ${o} 分`),this.score-=o,r.score+=o}else{const o=Math.floor(this.score*.2);console.log(`玩家 ${this.id} 掉落 ${o} 分`),n.messages.push(`玩家 ${this.id} 掉落了 ${o} 分`),this.score-=o}await ur().wait(1e3)}async teleport(t){const r=Er(),n=this.active;this.position.set(t[0],t[1],200),n&&(en().position=this.position.clone());const i=Array.from(r.nextPosition([t[0],t[1]]).keys());ys(i),this.direction=i.pop(),this.fixedDirection=!0,n&&await ur().wait(200)}async throwDice(t){const n=await xt().throwDice(t,!!this.doubleDice,this.fixedDices);return this.doubleDice=Math.max(0,this.doubleDice-1),n}reverseDirection(){this.direction={[dt.UP]:dt.DOWN,[dt.RIGHT]:dt.LEFT,[dt.DOWN]:dt.UP,[dt.LEFT]:dt.RIGHT}[this.direction]}teleportPosition(t){return this.teleport([t.x,t.y])}status(){return this.dizziness?"dizziness":"normal"}}const Of=()=>cg,cg=xf(new class{constructor(){Oe(this,"ready",!1);Oe(this,"running",!1)}async setup(){console.info("初始化遊戲");const t=xt(),r=Er();console.info("初始化玩家");const n=r.spawnPoints(),i=["#8650a6","#56ae6c","#b84c7d","#ac9c3d","#6881d8","#ba543d"];if(n.length<t.quantity)throw new Error("Not enough spawners");ys(n);let a;for(let o=0;o<t.quantity;o++){const l=n.pop();o===0&&(a=l[0]);const y=Gs.from(l[0]),g=l[1],P=new lg(o+1,100,i[o],y,g);t.players.set(o,P)}console.info("初始化渲染器");const f=en();f.start(),f.position.set(a[0],a[1])}async run(){const t=xt(),r=en(),n=ur();t.inning++,console.group(`第 ${t.inning} 回合`);const i=t.players;for(const a of i.values()){a.active=!0;const f=a.position.x,o=a.position.y;if(r.position.set(f,o,a.position.distance(r.position)*50),a.immune&&a.immune--,a.dizziness){console.info(`玩家 ${a.id} 眩暈中`),t.messages.push(`玩家 ${a.id} 眩暈中`),await n.wait(1e3),a.active=!1,a.dizziness--;continue}for(t.steps=await a.throwDice("開始回合");t.steps>0;){await a.walk(),t.steps--;const l=t.traps;for(const y of l){const g=a.position,P=y[0]===g.x,$=y[1]===g.y;!P||!$||await y[2](a)}for(const y of i.values())a!==y&&a.position.equals(y.position)&&await a.attack(y);t.steps===0&&await a.trigger()}t.steps=void 0,await n.wait(500),a.active=!1}console.groupEnd(),this.running&&rf(()=>this.run())}async init(t){console.info("初始化狀態"),this.ready=!0,this.running=!0;const r=xt();r.quantity=t,rf(async()=>{await this.setup(),await this.run()})}async stop(){this.running=!1,this.ready=!1,en().stop()}}),ug={class:"loader"},dg={class:"progress"},hg=["max","value"],pg={key:0},mg={key:1,class:"log"},vg=tn({__name:"Loader",setup(e){const t=In(),r=tf(()=>t.textures.size+t.sounds.size+t.loadings),n=tf(()=>r.value-t.loadings);return(i,a)=>(et(),ot("div",ug,[ke("span",dg,[gt(ut(Ne(n))+" / "+ut(Ne(r))+" ",1),ke("progress",{max:Ne(r),value:Ne(n)},null,8,hg)]),Ne(t).isFinished()?(et(),ot("p",pg,"Loading Completed")):(et(),ot("div",mg,[(et(!0),ot(At,null,Ur(Ne(t).logs.toReversed(),(f,o)=>(et(),ot("span",{key:o},ut(f),1))),128))]))]))}}),_g=_n(vg,[["__scopeId","data-v-d03c34ba"]]),gg={key:0,class:"error"},bg=tn({__name:"Start",setup(e){const t=Lc(2),r=Of(),n=In(),i=()=>{if(t.value<2||t.value>8){a.value="The quantity must be between 2 and 8";return}if(!n.isFinished()){a.value="The game is not ready yet";return}r.init(t.value)},a=Lc("");return(f,o)=>(et(),ot(At,null,[ke("form",{onSubmit:Od(i,["prevent"])},[o[2]||(o[2]=ke("h1",null,"Monopoly",-1)),ke("label",null,[o[1]||(o[1]=ke("span",null,"Quantity: ",-1)),mr(ke("input",{type:"number",min:"2",max:"8","onUpdate:modelValue":o[0]||(o[0]=l=>t.value=l)},null,512),[[_r,t.value]])]),o[3]||(o[3]=ke("button",{class:"confirm"},"Start",-1)),a.value?(et(),ot("span",gg,"Warring: "+ut(a.value),1)):Rr("",!0)],32),jt(_g)],64))}}),yg=_n(bg,[["__scopeId","data-v-2c58ce02"]]),xg=tn({__name:"Canvas",setup(e){const t=Ku("canvas");return Pi(t,r=>{const n=en();n&&n.stop(),r&&sg(r)}),(r,n)=>(et(),ot("canvas",{class:"canvas",ref_key:"canvas",ref:t},null,512))}}),Eg=_n(xg,[["__scopeId","data-v-368ef003"]]),Tg={class:"popup"},Ag={class:"input"},wg=["disabled","onClick"],Sg=["onClick"],Cg=["onClick"],Lg=tn({__name:"Input",setup(e){const t=ur(),r=t.next,n=t.move,i=t.confirm,a=t.players;function f(g,P){return g.length===0?!0:g.includes(P)}const o=[[dt.UP,"⇑"],[dt.DOWN,"⇓"],[dt.LEFT,"⇐"],[dt.RIGHT,"⇒"]],l=[[!0,"接受"],[!1,"拒絕"]],y=Gi(()=>Array.from(a.accept).map(g=>[g,`第${g.id}組`]));return(g,P)=>(et(),ot(At,null,[ke("div",Tg,ut(Ne(r).text)+" "+ut(Ne(n).text)+" "+ut(Ne(i).text),1),ke("div",Ag,[Ne(r).receive?(et(),ot("button",{key:0,onClick:P[0]||(P[0]=$=>Ne(r).resolve())},"下一步")):Rr("",!0),Ne(n).receive?(et(),ot(At,{key:1},Ur(o,([$,re])=>ke("button",{disabled:!f(Ne(n).accept,$),onClick:ue=>Ne(n).resolve($)},ut(re),9,wg)),64)):Rr("",!0),Ne(i).receive?(et(),ot(At,{key:2},Ur(l,([$,re])=>(et(),ot(At,null,[f(Ne(i).accept,$)?(et(),ot("button",{key:0,onClick:ue=>Ne(i).resolve($)},ut(re),9,Sg)):Rr("",!0)],64))),64)):Rr("",!0),Ne(a).receive?(et(!0),ot(At,{key:3},Ur(y.value,([$,re])=>(et(),ot(At,null,[f(Ne(a).accept,$)?(et(),ot("button",{key:0,onClick:ue=>Ne(a).resolve($)},ut(re),9,Cg)):Rr("",!0)],64))),256)):Rr("",!0)])],64))}}),Rg=_n(Lg,[["__scopeId","data-v-fb6100b8"]]),Og={key:0},Fg={key:1},Pg={class:"info"},Dg=tn({__name:"Ranking",setup(e){const t=xt(),r=Gi(()=>Array.from(t.players.values()));return(n,i)=>(et(),ua(Rd,{name:"list",tag:"div",class:"list"},{default:ps(()=>[(et(!0),ot(At,null,Ur(r.value.toSorted((a,f)=>f.score-a.score),(a,f)=>(et(),ot("div",{class:Ss(["player",{active:a.active}]),key:a.id},[ke("h3",null,[gt("第 "+ut(a.id)+" 組 ",1),f===0?(et(),ot("i",Og,"👑")):Rr("",!0),a.dizziness?(et(),ot("i",Fg,"💫")):Rr("",!0)]),ke("div",Pg,[ke("span",null,"分數: "+ut(a.score),1)]),ke("span",null,[(et(!0),ot(At,null,Ur(Ne(ni),o=>(et(),ot(At,null,[gt(ut(o<=a.health?"❤️":"🤍"),1)],64))),256))])],2))),128))]),_:1}))}}),Ig=_n(Dg,[["__scopeId","data-v-63b475c4"]]),Gg=tn({__name:"Minimap",setup(e){const t=Er();let r=null,n=null;const i=Ku("canvas");Pi(i,y=>{if(n=null,!y)return;n=y.getContext("2d"),g(y,n),window.addEventListener("resize",g.bind(null,y,n));function g(P,$){let{width:re,height:ue}=P.getBoundingClientRect();const De=window.devicePixelRatio||1,qe=P.width=re*De,Ie=P.height=ue*De,Qe=qe/t.width,Ue=Ie/t.height;$.setTransform(Qe,0,0,Ue,0,0);const ye=new OffscreenCanvas(qe,Ie),Me=ye.getContext("2d");Me.setTransform(Qe,0,0,Ue,0,0);for(const[We,wt]of t.flatTiles.entries()){const[Ot,He]=t.indexFromFlat(We),Je=Fn.tileImage(wt);Je&&Me.drawImage(Je,0,0,Je.width,Je.height,Ot,He,1,1)}r=ye.transferToImageBitmap(),l()}});const a=xt();Pi(a,()=>requestAnimationFrame(l));const f=Gi(()=>t.width/t.height);let o=NaN;function l(y=0){if(!n||y===o)return;o=y;const g=t.width,P=t.height;n.clearRect(0,0,g,P),n.drawImage(r,0,0,g,P),n.font="0.8px sans-serif",n.textAlign="center",n.textBaseline="hanging";for(const $ of a.players.values()){const re=$.position,ue=re.current[0]+.1,De=re.current[1]+.1,qe=$.color;n.fillStyle=qe,n.beginPath(),n.roundRect(ue,De,.8,.8,.1),n.fill(),n.fillStyle="#fff",n.fillText($.id.toString(),ue+.4,De+.1)}}return(y,g)=>(et(),ot("canvas",{class:"minimap",ref_key:"canvas",ref:i,style:ga({aspectRatio:f.value}),onContextmenu:g[0]||(g[0]=Od(P=>Ne(Rt).enabled=!Ne(Rt).enabled,["right","prevent"]))},null,36))}}),Mg=_n(Gg,[["__scopeId","data-v-bd28f956"]]),Md=""+new URL("../tiles/task.png",import.meta.url).href,Nd=""+new URL("../tiles/opportunity.png",import.meta.url).href,Bd=""+new URL("../tiles/destiny.png",import.meta.url).href,kd=""+new URL("../tiles/punishment.png",import.meta.url).href,Ng=""+new URL("../others/dice1.png",import.meta.url).href,Bg=""+new URL("../others/dice2.png",import.meta.url).href,kg=""+new URL("../others/dice3.png",import.meta.url).href,$g=""+new URL("../others/dice4.png",import.meta.url).href,Ug=""+new URL("../others/dice5.png",import.meta.url).href,jg=""+new URL("../others/dice6.png",import.meta.url).href,Vg={class:"popup-group"},Hg={key:0,class:"popup center dices"},zg=["src"],Wg={key:1,class:"popup center"},Xg={key:0,class:"popup debug"},Yg={open:""},Kg={open:""},qg=["onUpdate:modelValue","max"],Qg=["onUpdate:modelValue"],Zg=["onUpdate:modelValue"],Jg=["onUpdate:modelValue"],eb=["onUpdate:modelValue"],tb=["onUpdate:modelValue"],rb=["onUpdate:modelValue"],nb={open:""},ib={key:0,class:"popup event"},ab={class:"face front"},sb=["innerHTML"],ob={class:"btns"},fb={class:"face back"},lb=["src"],cb=tn({__name:"Popup",setup(e){const t=xt();function r(f){const[o,l]=f;return{left:`${o}px`,top:`${l}px`}}function n(f){return f.toFixed(2)}const i=Gi(()=>t.event?{任務:Md,機會:Nd,命運:Bd,懲罰:kd}[t.event.type]:"");function a(f){return[Ng,Bg,kg,$g,Ug,jg][f-1]}return(f,o)=>(et(),ot(At,null,[ke("div",Vg,[Ne(t).dices!==void 0?(et(),ot("div",Hg,[(et(!0),ot(At,null,Ur(Ne(t).dices,l=>(et(),ot("img",{src:a(l)},null,8,zg))),256))])):Ne(t).steps!==void 0?(et(),ot("div",Wg,ut(Ne(t).steps)+" 步 ",1)):Rr("",!0),jt(Rd,{tag:"div",name:"list",class:"popup messages"},{default:ps(()=>[(et(!0),ot(At,null,Ur(Ne(t).messages.toArray(),l=>(et(),ot("div",{key:l,class:"message"},ut(l),1))),128))]),_:1}),(et(!0),ot(At,null,Ur(Ne(t).playersLabel,([l,y])=>(et(),ot("div",{style:ga(r(y)),class:"popup label"}," 第 "+ut(l)+" 組 ",5))),256))]),Ne(Rt).enabled?(et(),ot("div",Xg,[ke("details",Yg,[o[11]||(o[11]=ke("summary",null,"Current",-1)),ke("span",null,[o[10]||(o[10]=gt("Step: ")),Ne(t).steps!==void 0?mr((et(),ot("input",{key:0,type:"range","onUpdate:modelValue":o[0]||(o[0]=l=>Ne(t).steps=l),max:32,min:0},null,512)),[[_r,Ne(t).steps,void 0,{number:!0}]]):Rr("",!0),gt(ut(Ne(t).steps??"Undefined"),1)])]),(et(!0),ot(At,null,Ur(Ne(t).players.values(),l=>(et(),ot("details",Kg,[ke("summary",null,"Player "+ut(l.id),1),ke("span",null,[o[12]||(o[12]=gt("Health: ")),mr(ke("input",{type:"range","onUpdate:modelValue":y=>l.health=y,max:Ne(ni),min:"0"},null,8,qg),[[_r,l.health,void 0,{number:!0}]]),gt(" "+ut(l.health),1)]),ke("span",null,[o[13]||(o[13]=gt("Dizziness: ")),mr(ke("input",{type:"range","onUpdate:modelValue":y=>l.dizziness=y,max:"5",min:"0"},null,8,Qg),[[_r,l.dizziness,void 0,{number:!0}]]),gt(" "+ut(l.dizziness),1)]),ke("span",null,[o[14]||(o[14]=gt("Immune: ")),mr(ke("input",{type:"range","onUpdate:modelValue":y=>l.immune=y,max:"5",min:"0"},null,8,Zg),[[_r,l.immune,void 0,{number:!0}]]),gt(" "+ut(l.immune),1)]),ke("span",null,[o[15]||(o[15]=gt("DoubleDice: ")),mr(ke("input",{type:"range","onUpdate:modelValue":y=>l.doubleDice=y,max:"5",min:"0"},null,8,Jg),[[_r,l.doubleDice,void 0,{number:!0}]]),gt(" "+ut(l.doubleDice),1)]),ke("span",null,[o[16]||(o[16]=gt("DoubleTaskScore: ")),mr(ke("input",{type:"range","onUpdate:modelValue":y=>l.doubleTaskScore=y,max:"5",min:"0"},null,8,eb),[[_r,l.doubleTaskScore,void 0,{number:!0}]]),gt(" "+ut(l.doubleTaskScore),1)]),ke("span",null,[o[17]||(o[17]=gt("DoubleDamage: ")),mr(ke("input",{type:"range","onUpdate:modelValue":y=>l.doubleDamage=y,max:"5",min:"0"},null,8,tb),[[_r,l.doubleDamage,void 0,{number:!0}]]),gt(" "+ut(l.doubleDamage),1)]),ke("span",null,[o[18]||(o[18]=gt("Score: ")),mr(ke("input",{type:"number","onUpdate:modelValue":y=>l.score=y,max:"2000",min:"0"},null,8,rb),[[_r,l.score,void 0,{number:!0}]])])]))),256)),ke("details",nb,[o[25]||(o[25]=ke("summary",null,"View",-1)),ke("span",null,[o[19]||(o[19]=gt("X:")),mr(ke("input",{type:"range","onUpdate:modelValue":o[1]||(o[1]=l=>Ne(Rt).x=l),max:10,min:-10,step:"0.5"},null,512),[[_r,Ne(Rt).x,void 0,{number:!0}]]),gt(ut(n(Ne(Rt).x)),1)]),ke("span",null,[o[20]||(o[20]=gt("Y:")),mr(ke("input",{type:"range","onUpdate:modelValue":o[2]||(o[2]=l=>Ne(Rt).y=l),max:10,min:-10,step:"0.5"},null,512),[[_r,Ne(Rt).y,void 0,{number:!0}]]),gt(ut(n(Ne(Rt).y)),1)]),ke("span",null,[o[21]||(o[21]=gt("Z:")),mr(ke("input",{type:"range","onUpdate:modelValue":o[3]||(o[3]=l=>Ne(Rt).z=l),max:10,min:-10,step:"0.5"},null,512),[[_r,Ne(Rt).z,void 0,{number:!0}]]),gt(ut(n(Ne(Rt).z)),1)]),ke("span",null,[o[22]||(o[22]=gt("AngleX: ")),mr(ke("input",{type:"range","onUpdate:modelValue":o[4]||(o[4]=l=>Ne(Rt).angleX=l),max:180,min:-180},null,512),[[_r,Ne(Rt).angleX,void 0,{number:!0}]]),gt(ut(n(Ne(Rt).angleX)),1)]),ke("span",null,[o[23]||(o[23]=gt("AngleY: ")),mr(ke("input",{type:"range","onUpdate:modelValue":o[5]||(o[5]=l=>Ne(Rt).angleY=l),max:180,min:-180},null,512),[[_r,Ne(Rt).angleY,void 0,{number:!0}]]),gt(ut(n(Ne(Rt).angleY)),1)]),ke("span",null,[o[24]||(o[24]=gt("AngleZ: ")),mr(ke("input",{type:"range","onUpdate:modelValue":o[6]||(o[6]=l=>Ne(Rt).angleZ=l),max:180,min:-180},null,512),[[_r,Ne(Rt).angleZ,void 0,{number:!0}]]),gt(ut(n(Ne(Rt).angleZ)),1)])])])):Rr("",!0),jt(V0,{name:"event"},{default:ps(()=>[Ne(t).event?(et(),ot("div",ib,[ke("div",ab,[ke("h1",null,ut(Ne(t).event.type),1),ke("h2",null,ut(Ne(t).event.title),1),ke("p",{innerHTML:Ne(t).event.description},null,8,sb),ke("div",ob,[Ne(t).event.hasFail?(et(),ot(At,{key:0},[ke("button",{onClick:o[7]||(o[7]=l=>Ne(t).event.callback(!0))},"成功"),ke("button",{onClick:o[8]||(o[8]=l=>Ne(t).event.callback(!1))},"失敗")],64)):(et(),ot("button",{key:1,onClick:o[9]||(o[9]=l=>Ne(t).event.callback(!0))},"完成"))])]),ke("div",fb,[ke("img",{src:i.value},null,8,lb),ke("span",null,ut(Ne(t).event.type),1)])])):Rr("",!0)]),_:1})],64))}}),ub=_n(cb,[["__scopeId","data-v-50197a7c"]]),db={class:"container"},hb=tn({__name:"Game",setup(e){return(t,r)=>(et(),ot("div",db,[ke("main",null,[jt(Eg),jt(Rg),jt(ub)]),ke("aside",null,[jt(Ig),jt(Mg)])]))}}),pb=_n(hb,[["__scopeId","data-v-56987a3e"]]),mb=tn({__name:"App",setup(e){const t=Of();return(r,n)=>Ne(t).ready?Ne(t).running?(et(),ua(pb,{key:1})):(et(),ua(S_,{key:2})):(et(),ua(yg,{key:0}))}}),vb=""+new URL("../tiles/spawner.webp",import.meta.url).href,_b=""+new URL("../tiles/teleport.png",import.meta.url).href,gb=""+new URL("../tiles/prison.png",import.meta.url).href,bb=""+new URL("../tiles/hospital.png",import.meta.url).href,xa=""+new URL("../players/player.1.png",import.meta.url).href,yb=""+new URL("../players/player.2.png",import.meta.url).href,xb=""+new URL("../fx/damaged.png",import.meta.url).href,Eb=""+new URL("../others/arrow.png",import.meta.url).href,Tb=""+new URL("../others/dizziness.png",import.meta.url).href;g_(mb).mount("#app");const ar=In();ar.loadTexture("tile-spawner",vb);ar.loadTexture("tile-task",Md);ar.loadTexture("tile-opportunity",Nd);ar.loadTexture("tile-destiny",Bd);ar.loadTexture("tile-punishment",kd);ar.loadTexture("tile-teleport",_b);ar.loadTexture("tile-prison",gb);ar.loadTexture("tile-hospital",bb);ar.loadTexture("player-1",xa);ar.loadTexture("player-2",yb);ar.loadTexture("player-3",xa);ar.loadTexture("player-4",xa);ar.loadTexture("player-5",xa);ar.loadTexture("player-6",xa);ar.loadTexture("fx-damaged",xb);ar.loadTexture("arrow",Eb);ar.loadTexture("dizziness",Tb);
