var Vm=Object.defineProperty;var Hm=(e,t,r)=>t in e?Vm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Pe=(e,t,r)=>Hm(e,typeof t!="symbol"?t+"":t,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function uf(e){const t=Object.create(null);for(const r of e.split(","))t[r]=1;return r=>r in t}const St={},wi=[],Qr=()=>{},zm=()=>!1,xs=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),df=e=>e.startsWith("onUpdate:"),Wt=Object.assign,hf=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},Wm=Object.prototype.hasOwnProperty,bt=(e,t)=>Wm.call(e,t),et=Array.isArray,Si=e=>Es(e)==="[object Map]",cu=e=>Es(e)==="[object Set]",ft=e=>typeof e=="function",Xt=e=>typeof e=="string",In=e=>typeof e=="symbol",Gt=e=>e!==null&&typeof e=="object",uu=e=>(Gt(e)||ft(e))&&ft(e.then)&&ft(e.catch),du=Object.prototype.toString,Es=e=>du.call(e),Xm=e=>Es(e).slice(8,-1),hu=e=>Es(e)==="[object Object]",pf=e=>Xt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,na=uf(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ts=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},Ym=/-(\w)/g,Fn=Ts(e=>e.replace(Ym,(t,r)=>r?r.toUpperCase():"")),Km=/\B([A-Z])/g,ii=Ts(e=>e.replace(Km,"-$1").toLowerCase()),pu=Ts(e=>e.charAt(0).toUpperCase()+e.slice(1)),Io=Ts(e=>e?`on${pu(e)}`:""),Rn=(e,t)=>!Object.is(e,t),ss=(e,...t)=>{for(let r=0;r<e.length;r++)e[r](...t)},mu=(e,t,r,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:r})},Yo=e=>{const t=parseFloat(e);return isNaN(t)?e:t},qm=e=>{const t=Xt(e)?Number(e):NaN;return isNaN(t)?e:t};let Ac;const As=()=>Ac||(Ac=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function va(e){if(et(e)){const t={};for(let r=0;r<e.length;r++){const n=e[r],i=Xt(n)?ev(n):va(n);if(i)for(const a in i)t[a]=i[a]}return t}else if(Xt(e)||Gt(e))return e}const Qm=/;(?![^(]*\))/g,Zm=/:([^]+)/,Jm=/\/\*[^]*?\*\//g;function ev(e){const t={};return e.replace(Jm,"").split(Qm).forEach(r=>{if(r){const n=r.split(Zm);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function ws(e){let t="";if(Xt(e))t=e;else if(et(e))for(let r=0;r<e.length;r++){const n=ws(e[r]);n&&(t+=n+" ")}else if(Gt(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}const tv="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",rv=uf(tv);function vu(e){return!!e||e===""}const _u=e=>!!(e&&e.__v_isRef===!0),pt=e=>Xt(e)?e:e==null?"":et(e)||Gt(e)&&(e.toString===du||!ft(e.toString))?_u(e)?pt(e.value):JSON.stringify(e,gu,2):String(e),gu=(e,t)=>_u(t)?gu(e,t.value):Si(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[n,i],a)=>(r[Go(n,a)+" =>"]=i,r),{})}:cu(t)?{[`Set(${t.size})`]:[...t.values()].map(r=>Go(r))}:In(t)?Go(t):Gt(t)&&!et(t)&&!hu(t)?String(t):t,Go=(e,t="")=>{var r;return In(e)?`Symbol(${(r=e.description)!=null?r:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ar;class nv{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ar,!t&&Ar&&(this.index=(Ar.scopes||(Ar.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,r;if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].pause();for(t=0,r=this.effects.length;t<r;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,r;if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].resume();for(t=0,r=this.effects.length;t<r;t++)this.effects[t].resume()}}run(t){if(this._active){const r=Ar;try{return Ar=this,t()}finally{Ar=r}}}on(){Ar=this}off(){Ar=this.parent}stop(t){if(this._active){this._active=!1;let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(this.effects.length=0,r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function iv(){return Ar}let Pt;const Mo=new WeakSet;class yu{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ar&&Ar.active&&Ar.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Mo.has(this)&&(Mo.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||xu(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,wc(this),Eu(this);const t=Pt,r=$r;Pt=this,$r=!0;try{return this.fn()}finally{Tu(this),Pt=t,$r=r,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)_f(t);this.deps=this.depsTail=void 0,wc(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Mo.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ko(this)&&this.run()}get dirty(){return Ko(this)}}let bu=0,ia,aa;function xu(e,t=!1){if(e.flags|=8,t){e.next=aa,aa=e;return}e.next=ia,ia=e}function mf(){bu++}function vf(){if(--bu>0)return;if(aa){let t=aa;for(aa=void 0;t;){const r=t.next;t.next=void 0,t.flags&=-9,t=r}}let e;for(;ia;){let t=ia;for(ia=void 0;t;){const r=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=r}}if(e)throw e}function Eu(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Tu(e){let t,r=e.depsTail,n=r;for(;n;){const i=n.prevDep;n.version===-1?(n===r&&(r=i),_f(n),av(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=i}e.deps=t,e.depsTail=r}function Ko(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Au(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Au(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===ca))return;e.globalVersion=ca;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!Ko(e)){e.flags&=-3;return}const r=Pt,n=$r;Pt=e,$r=!0;try{Eu(e);const i=e.fn(e._value);(t.version===0||Rn(i,e._value))&&(e._value=i,t.version++)}catch(i){throw t.version++,i}finally{Pt=r,$r=n,Tu(e),e.flags&=-3}}function _f(e,t=!1){const{dep:r,prevSub:n,nextSub:i}=e;if(n&&(n.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=n,e.nextSub=void 0),r.subs===e&&(r.subs=n,!n&&r.computed)){r.computed.flags&=-5;for(let a=r.computed.deps;a;a=a.nextDep)_f(a,!0)}!t&&!--r.sc&&r.map&&r.map.delete(r.key)}function av(e){const{prevDep:t,nextDep:r}=e;t&&(t.nextDep=r,e.prevDep=void 0),r&&(r.prevDep=t,e.nextDep=void 0)}let $r=!0;const wu=[];function Gn(){wu.push($r),$r=!1}function Mn(){const e=wu.pop();$r=e===void 0?!0:e}function wc(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const r=Pt;Pt=void 0;try{t()}finally{Pt=r}}}let ca=0;class sv{constructor(t,r){this.sub=t,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class gf{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Pt||!$r||Pt===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==Pt)r=this.activeLink=new sv(Pt,this),Pt.deps?(r.prevDep=Pt.depsTail,Pt.depsTail.nextDep=r,Pt.depsTail=r):Pt.deps=Pt.depsTail=r,Su(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const n=r.nextDep;n.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=n),r.prevDep=Pt.depsTail,r.nextDep=void 0,Pt.depsTail.nextDep=r,Pt.depsTail=r,Pt.deps===r&&(Pt.deps=n)}return r}trigger(t){this.version++,ca++,this.notify(t)}notify(t){mf();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{vf()}}}function Su(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)Su(n)}const r=e.dep.subs;r!==e&&(e.prevSub=r,r&&(r.nextSub=e)),e.dep.subs=e}}const qo=new WeakMap,ti=Symbol(""),Qo=Symbol(""),ua=Symbol("");function or(e,t,r){if($r&&Pt){let n=qo.get(e);n||qo.set(e,n=new Map);let i=n.get(r);i||(n.set(r,i=new gf),i.map=n,i.key=r),i.track()}}function un(e,t,r,n,i,a){const o=qo.get(e);if(!o){ca++;return}const f=h=>{h&&h.trigger()};if(mf(),t==="clear")o.forEach(f);else{const h=et(e),T=h&&pf(r);if(h&&r==="length"){const g=Number(n);o.forEach((P,$)=>{($==="length"||$===ua||!In($)&&$>=g)&&f(P)})}else switch((r!==void 0||o.has(void 0))&&f(o.get(r)),T&&f(o.get(ua)),t){case"add":h?T&&f(o.get("length")):(f(o.get(ti)),Si(e)&&f(o.get(Qo)));break;case"delete":h||(f(o.get(ti)),Si(e)&&f(o.get(Qo)));break;case"set":Si(e)&&f(o.get(ti));break}}vf()}function Ei(e){const t=gt(e);return t===e?t:(or(t,"iterate",ua),Dr(e)?t:t.map(fr))}function Ss(e){return or(e=gt(e),"iterate",ua),e}const ov={__proto__:null,[Symbol.iterator](){return No(this,Symbol.iterator,fr)},concat(...e){return Ei(this).concat(...e.map(t=>et(t)?Ei(t):t))},entries(){return No(this,"entries",e=>(e[1]=fr(e[1]),e))},every(e,t){return ln(this,"every",e,t,void 0,arguments)},filter(e,t){return ln(this,"filter",e,t,r=>r.map(fr),arguments)},find(e,t){return ln(this,"find",e,t,fr,arguments)},findIndex(e,t){return ln(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return ln(this,"findLast",e,t,fr,arguments)},findLastIndex(e,t){return ln(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return ln(this,"forEach",e,t,void 0,arguments)},includes(...e){return Bo(this,"includes",e)},indexOf(...e){return Bo(this,"indexOf",e)},join(e){return Ei(this).join(e)},lastIndexOf(...e){return Bo(this,"lastIndexOf",e)},map(e,t){return ln(this,"map",e,t,void 0,arguments)},pop(){return Ji(this,"pop")},push(...e){return Ji(this,"push",e)},reduce(e,...t){return Sc(this,"reduce",e,t)},reduceRight(e,...t){return Sc(this,"reduceRight",e,t)},shift(){return Ji(this,"shift")},some(e,t){return ln(this,"some",e,t,void 0,arguments)},splice(...e){return Ji(this,"splice",e)},toReversed(){return Ei(this).toReversed()},toSorted(e){return Ei(this).toSorted(e)},toSpliced(...e){return Ei(this).toSpliced(...e)},unshift(...e){return Ji(this,"unshift",e)},values(){return No(this,"values",fr)}};function No(e,t,r){const n=Ss(e),i=n[t]();return n!==e&&!Dr(e)&&(i._next=i.next,i.next=()=>{const a=i._next();return a.value&&(a.value=r(a.value)),a}),i}const fv=Array.prototype;function ln(e,t,r,n,i,a){const o=Ss(e),f=o!==e&&!Dr(e),h=o[t];if(h!==fv[t]){const P=h.apply(e,a);return f?fr(P):P}let T=r;o!==e&&(f?T=function(P,$){return r.call(this,fr(P),$,e)}:r.length>2&&(T=function(P,$){return r.call(this,P,$,e)}));const g=h.call(o,T,n);return f&&i?i(g):g}function Sc(e,t,r,n){const i=Ss(e);let a=r;return i!==e&&(Dr(e)?r.length>3&&(a=function(o,f,h){return r.call(this,o,f,h,e)}):a=function(o,f,h){return r.call(this,o,fr(f),h,e)}),i[t](a,...n)}function Bo(e,t,r){const n=gt(e);or(n,"iterate",ua);const i=n[t](...r);return(i===-1||i===!1)&&Ef(r[0])?(r[0]=gt(r[0]),n[t](...r)):i}function Ji(e,t,r=[]){Gn(),mf();const n=gt(e)[t].apply(e,r);return vf(),Mn(),n}const lv=uf("__proto__,__v_isRef,__isVue"),Cu=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(In));function cv(e){In(e)||(e=String(e));const t=gt(this);return or(t,"has",e),t.hasOwnProperty(e)}class Lu{constructor(t=!1,r=!1){this._isReadonly=t,this._isShallow=r}get(t,r,n){if(r==="__v_skip")return t.__v_skip;const i=this._isReadonly,a=this._isShallow;if(r==="__v_isReactive")return!i;if(r==="__v_isReadonly")return i;if(r==="__v_isShallow")return a;if(r==="__v_raw")return n===(i?a?bv:Pu:a?Fu:Ou).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const o=et(t);if(!i){let h;if(o&&(h=ov[r]))return h;if(r==="hasOwnProperty")return cv}const f=Reflect.get(t,r,cr(t)?t:n);return(In(r)?Cu.has(r):lv(r))||(i||or(t,"get",r),a)?f:cr(f)?o&&pf(r)?f:f.value:Gt(f)?i?Du(f):ai(f):f}}class Ru extends Lu{constructor(t=!1){super(!1,t)}set(t,r,n,i){let a=t[r];if(!this._isShallow){const h=ri(a);if(!Dr(n)&&!ri(n)&&(a=gt(a),n=gt(n)),!et(t)&&cr(a)&&!cr(n))return h?!1:(a.value=n,!0)}const o=et(t)&&pf(r)?Number(r)<t.length:bt(t,r),f=Reflect.set(t,r,n,cr(t)?t:i);return t===gt(i)&&(o?Rn(n,a)&&un(t,"set",r,n):un(t,"add",r,n)),f}deleteProperty(t,r){const n=bt(t,r);t[r];const i=Reflect.deleteProperty(t,r);return i&&n&&un(t,"delete",r,void 0),i}has(t,r){const n=Reflect.has(t,r);return(!In(r)||!Cu.has(r))&&or(t,"has",r),n}ownKeys(t){return or(t,"iterate",et(t)?"length":ti),Reflect.ownKeys(t)}}class uv extends Lu{constructor(t=!1){super(!0,t)}set(t,r){return!0}deleteProperty(t,r){return!0}}const dv=new Ru,hv=new uv,pv=new Ru(!0);const Zo=e=>e,ts=e=>Reflect.getPrototypeOf(e);function mv(e,t,r){return function(...n){const i=this.__v_raw,a=gt(i),o=Si(a),f=e==="entries"||e===Symbol.iterator&&o,h=e==="keys"&&o,T=i[e](...n),g=r?Zo:t?Jo:fr;return!t&&or(a,"iterate",h?Qo:ti),{next(){const{value:P,done:$}=T.next();return $?{value:P,done:$}:{value:f?[g(P[0]),g(P[1])]:g(P),done:$}},[Symbol.iterator](){return this}}}}function rs(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function vv(e,t){const r={get(i){const a=this.__v_raw,o=gt(a),f=gt(i);e||(Rn(i,f)&&or(o,"get",i),or(o,"get",f));const{has:h}=ts(o),T=t?Zo:e?Jo:fr;if(h.call(o,i))return T(a.get(i));if(h.call(o,f))return T(a.get(f));a!==o&&a.get(i)},get size(){const i=this.__v_raw;return!e&&or(gt(i),"iterate",ti),Reflect.get(i,"size",i)},has(i){const a=this.__v_raw,o=gt(a),f=gt(i);return e||(Rn(i,f)&&or(o,"has",i),or(o,"has",f)),i===f?a.has(i):a.has(i)||a.has(f)},forEach(i,a){const o=this,f=o.__v_raw,h=gt(f),T=t?Zo:e?Jo:fr;return!e&&or(h,"iterate",ti),f.forEach((g,P)=>i.call(a,T(g),T(P),o))}};return Wt(r,e?{add:rs("add"),set:rs("set"),delete:rs("delete"),clear:rs("clear")}:{add(i){!t&&!Dr(i)&&!ri(i)&&(i=gt(i));const a=gt(this);return ts(a).has.call(a,i)||(a.add(i),un(a,"add",i,i)),this},set(i,a){!t&&!Dr(a)&&!ri(a)&&(a=gt(a));const o=gt(this),{has:f,get:h}=ts(o);let T=f.call(o,i);T||(i=gt(i),T=f.call(o,i));const g=h.call(o,i);return o.set(i,a),T?Rn(a,g)&&un(o,"set",i,a):un(o,"add",i,a),this},delete(i){const a=gt(this),{has:o,get:f}=ts(a);let h=o.call(a,i);h||(i=gt(i),h=o.call(a,i)),f&&f.call(a,i);const T=a.delete(i);return h&&un(a,"delete",i,void 0),T},clear(){const i=gt(this),a=i.size!==0,o=i.clear();return a&&un(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{r[i]=mv(i,e,t)}),r}function yf(e,t){const r=vv(e,t);return(n,i,a)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(bt(r,i)&&i in n?r:n,i,a)}const _v={get:yf(!1,!1)},gv={get:yf(!1,!0)},yv={get:yf(!0,!1)};const Ou=new WeakMap,Fu=new WeakMap,Pu=new WeakMap,bv=new WeakMap;function xv(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ev(e){return e.__v_skip||!Object.isExtensible(e)?0:xv(Xm(e))}function ai(e){return ri(e)?e:xf(e,!1,dv,_v,Ou)}function bf(e){return xf(e,!1,pv,gv,Fu)}function Du(e){return xf(e,!0,hv,yv,Pu)}function xf(e,t,r,n,i){if(!Gt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=i.get(e);if(a)return a;const o=Ev(e);if(o===0)return e;const f=new Proxy(e,o===2?n:r);return i.set(e,f),f}function Ci(e){return ri(e)?Ci(e.__v_raw):!!(e&&e.__v_isReactive)}function ri(e){return!!(e&&e.__v_isReadonly)}function Dr(e){return!!(e&&e.__v_isShallow)}function Ef(e){return e?!!e.__v_raw:!1}function gt(e){const t=e&&e.__v_raw;return t?gt(t):e}function Tv(e){return!bt(e,"__v_skip")&&Object.isExtensible(e)&&mu(e,"__v_skip",!0),e}const fr=e=>Gt(e)?ai(e):e,Jo=e=>Gt(e)?Du(e):e;function cr(e){return e?e.__v_isRef===!0:!1}function Cc(e){return Iu(e,!1)}function Av(e){return Iu(e,!0)}function Iu(e,t){return cr(e)?e:new wv(e,t)}class wv{constructor(t,r){this.dep=new gf,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?t:gt(t),this._value=r?t:fr(t),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(t){const r=this._rawValue,n=this.__v_isShallow||Dr(t)||ri(t);t=n?t:gt(t),Rn(t,r)&&(this._rawValue=t,this._value=n?t:fr(t),this.dep.trigger())}}function Ne(e){return cr(e)?e.value:e}const Sv={get:(e,t,r)=>t==="__v_raw"?e:Ne(Reflect.get(e,t,r)),set:(e,t,r,n)=>{const i=e[t];return cr(i)&&!cr(r)?(i.value=r,!0):Reflect.set(e,t,r,n)}};function Gu(e){return Ci(e)?e:new Proxy(e,Sv)}class Cv{constructor(t,r,n){this.fn=t,this.setter=r,this._value=void 0,this.dep=new gf(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ca-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Pt!==this)return xu(this,!0),!0}get value(){const t=this.dep.track();return Au(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function ef(e,t,r=!1){let n,i;return ft(e)?n=e:(n=e.get,i=e.set),new Cv(n,i,r)}const ns={},cs=new WeakMap;let Jn;function Lv(e,t=!1,r=Jn){if(r){let n=cs.get(r);n||cs.set(r,n=[]),n.push(e)}}function Rv(e,t,r=St){const{immediate:n,deep:i,once:a,scheduler:o,augmentJob:f,call:h}=r,T=be=>i?be:Dr(be)||i===!1||i===0?dn(be,1):dn(be);let g,P,$,re,ue=!1,De=!1;if(cr(e)?(P=()=>e.value,ue=Dr(e)):Ci(e)?(P=()=>T(e),ue=!0):et(e)?(De=!0,ue=e.some(be=>Ci(be)||Dr(be)),P=()=>e.map(be=>{if(cr(be))return be.value;if(Ci(be))return T(be);if(ft(be))return h?h(be,2):be()})):ft(e)?t?P=h?()=>h(e,2):e:P=()=>{if($){Gn();try{$()}finally{Mn()}}const be=Jn;Jn=g;try{return h?h(e,3,[re]):e(re)}finally{Jn=be}}:P=Qr,t&&i){const be=P,Me=i===!0?1/0:i;P=()=>dn(be(),Me)}const qe=iv(),Ie=()=>{g.stop(),qe&&qe.active&&hf(qe.effects,g)};if(a&&t){const be=t;t=(...Me)=>{be(...Me),Ie()}}let Qe=De?new Array(e.length).fill(ns):ns;const $e=be=>{if(!(!(g.flags&1)||!g.dirty&&!be))if(t){const Me=g.run();if(i||ue||(De?Me.some((ze,xt)=>Rn(ze,Qe[xt])):Rn(Me,Qe))){$&&$();const ze=Jn;Jn=g;try{const xt=[Me,Qe===ns?void 0:De&&Qe[0]===ns?[]:Qe,re];h?h(t,3,xt):t(...xt),Qe=Me}finally{Jn=ze}}}else g.run()};return f&&f($e),g=new yu(P),g.scheduler=o?()=>o($e,!1):$e,re=be=>Lv(be,!1,g),$=g.onStop=()=>{const be=cs.get(g);if(be){if(h)h(be,4);else for(const Me of be)Me();cs.delete(g)}},t?n?$e(!0):Qe=g.run():o?o($e.bind(null,!0),!0):g.run(),Ie.pause=g.pause.bind(g),Ie.resume=g.resume.bind(g),Ie.stop=Ie,Ie}function dn(e,t=1/0,r){if(t<=0||!Gt(e)||e.__v_skip||(r=r||new Set,r.has(e)))return e;if(r.add(e),t--,cr(e))dn(e.value,t,r);else if(et(e))for(let n=0;n<e.length;n++)dn(e[n],t,r);else if(cu(e)||Si(e))e.forEach(n=>{dn(n,t,r)});else if(hu(e)){for(const n in e)dn(e[n],t,r);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&dn(e[n],t,r)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function _a(e,t,r,n){try{return n?e(...n):e()}catch(i){Cs(i,t,r)}}function Ur(e,t,r,n){if(ft(e)){const i=_a(e,t,r,n);return i&&uu(i)&&i.catch(a=>{Cs(a,t,r)}),i}if(et(e)){const i=[];for(let a=0;a<e.length;a++)i.push(Ur(e[a],t,r,n));return i}}function Cs(e,t,r,n=!0){const i=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||St;if(t){let f=t.parent;const h=t.proxy,T=`https://vuejs.org/error-reference/#runtime-${r}`;for(;f;){const g=f.ec;if(g){for(let P=0;P<g.length;P++)if(g[P](e,h,T)===!1)return}f=f.parent}if(a){Gn(),_a(a,null,10,[e,h,T]),Mn();return}}Ov(e,r,i,n,o)}function Ov(e,t,r,n=!0,i=!1){if(i)throw e;console.error(e)}const pr=[];let Kr=-1;const Li=[];let Sn=null,Ti=0;const Mu=Promise.resolve();let us=null;function tf(e){const t=us||Mu;return e?t.then(this?e.bind(this):e):t}function Fv(e){let t=Kr+1,r=pr.length;for(;t<r;){const n=t+r>>>1,i=pr[n],a=da(i);a<e||a===e&&i.flags&2?t=n+1:r=n}return t}function Tf(e){if(!(e.flags&1)){const t=da(e),r=pr[pr.length-1];!r||!(e.flags&2)&&t>=da(r)?pr.push(e):pr.splice(Fv(t),0,e),e.flags|=1,Nu()}}function Nu(){us||(us=Mu.then(ku))}function Pv(e){et(e)?Li.push(...e):Sn&&e.id===-1?Sn.splice(Ti+1,0,e):e.flags&1||(Li.push(e),e.flags|=1),Nu()}function Lc(e,t,r=Kr+1){for(;r<pr.length;r++){const n=pr[r];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;pr.splice(r,1),r--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Bu(e){if(Li.length){const t=[...new Set(Li)].sort((r,n)=>da(r)-da(n));if(Li.length=0,Sn){Sn.push(...t);return}for(Sn=t,Ti=0;Ti<Sn.length;Ti++){const r=Sn[Ti];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}Sn=null,Ti=0}}const da=e=>e.id==null?e.flags&2?-1:1/0:e.id;function ku(e){try{for(Kr=0;Kr<pr.length;Kr++){const t=pr[Kr];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),_a(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Kr<pr.length;Kr++){const t=pr[Kr];t&&(t.flags&=-2)}Kr=-1,pr.length=0,Bu(),us=null,(pr.length||Li.length)&&ku()}}let Sr=null,$u=null;function ds(e){const t=Sr;return Sr=e,$u=e&&e.type.__scopeId||null,t}function hs(e,t=Sr,r){if(!t||e._n)return e;const n=(...i)=>{n._d&&Nc(-1);const a=ds(t);let o;try{o=e(...i)}finally{ds(a),n._d&&Nc(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function Br(e,t){if(Sr===null)return e;const r=Ps(Sr),n=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[a,o,f,h=St]=t[i];a&&(ft(a)&&(a={mounted:a,updated:a}),a.deep&&dn(o),n.push({dir:a,instance:r,value:o,oldValue:void 0,arg:f,modifiers:h}))}return e}function qn(e,t,r,n){const i=e.dirs,a=t&&t.dirs;for(let o=0;o<i.length;o++){const f=i[o];a&&(f.oldValue=a[o].value);let h=f.dir[n];h&&(Gn(),Ur(h,r,8,[e.el,f,e,t]),Mn())}}const Dv=Symbol("_vte"),Uu=e=>e.__isTeleport,Cn=Symbol("_leaveCb"),is=Symbol("_enterCb");function ju(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return qu(()=>{e.isMounted=!0}),Zu(()=>{e.isUnmounting=!0}),e}const Pr=[Function,Array],Vu={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Pr,onEnter:Pr,onAfterEnter:Pr,onEnterCancelled:Pr,onBeforeLeave:Pr,onLeave:Pr,onAfterLeave:Pr,onLeaveCancelled:Pr,onBeforeAppear:Pr,onAppear:Pr,onAfterAppear:Pr,onAppearCancelled:Pr},Hu=e=>{const t=e.subTree;return t.component?Hu(t.component):t},Iv={name:"BaseTransition",props:Vu,setup(e,{slots:t}){const r=Lf(),n=ju();return()=>{const i=t.default&&Af(t.default(),!0);if(!i||!i.length)return;const a=zu(i),o=gt(e),{mode:f}=o;if(n.isLeaving)return ko(a);const h=Rc(a);if(!h)return ko(a);let T=ha(h,o,n,r,P=>T=P);h.type!==gr&&ni(h,T);let g=r.subTree&&Rc(r.subTree);if(g&&g.type!==gr&&!ei(h,g)&&Hu(r).type!==gr){let P=ha(g,o,n,r);if(ni(g,P),f==="out-in"&&h.type!==gr)return n.isLeaving=!0,P.afterLeave=()=>{n.isLeaving=!1,r.job.flags&8||r.update(),delete P.afterLeave,g=void 0},ko(a);f==="in-out"&&h.type!==gr?P.delayLeave=($,re,ue)=>{const De=Wu(n,g);De[String(g.key)]=g,$[Cn]=()=>{re(),$[Cn]=void 0,delete T.delayedLeave,g=void 0},T.delayedLeave=()=>{ue(),delete T.delayedLeave,g=void 0}}:g=void 0}else g&&(g=void 0);return a}}};function zu(e){let t=e[0];if(e.length>1){for(const r of e)if(r.type!==gr){t=r;break}}return t}const Gv=Iv;function Wu(e,t){const{leavingVNodes:r}=e;let n=r.get(t.type);return n||(n=Object.create(null),r.set(t.type,n)),n}function ha(e,t,r,n,i){const{appear:a,mode:o,persisted:f=!1,onBeforeEnter:h,onEnter:T,onAfterEnter:g,onEnterCancelled:P,onBeforeLeave:$,onLeave:re,onAfterLeave:ue,onLeaveCancelled:De,onBeforeAppear:qe,onAppear:Ie,onAfterAppear:Qe,onAppearCancelled:$e}=t,be=String(e.key),Me=Wu(r,e),ze=(Ve,Je)=>{Ve&&Ur(Ve,n,9,Je)},xt=(Ve,Je)=>{const ht=Je[1];ze(Ve,Je),et(Ve)?Ve.every(Oe=>Oe.length<=1)&&ht():Ve.length<=1&&ht()},Rt={mode:o,persisted:f,beforeEnter(Ve){let Je=h;if(!r.isMounted)if(a)Je=qe||h;else return;Ve[Cn]&&Ve[Cn](!0);const ht=Me[be];ht&&ei(e,ht)&&ht.el[Cn]&&ht.el[Cn](),ze(Je,[Ve])},enter(Ve){let Je=T,ht=g,Oe=P;if(!r.isMounted)if(a)Je=Ie||T,ht=Qe||g,Oe=$e||P;else return;let mt=!1;const ot=Ve[is]=Ir=>{mt||(mt=!0,Ir?ze(Oe,[Ve]):ze(ht,[Ve]),Rt.delayedLeave&&Rt.delayedLeave(),Ve[is]=void 0)};Je?xt(Je,[Ve,ot]):ot()},leave(Ve,Je){const ht=String(e.key);if(Ve[is]&&Ve[is](!0),r.isUnmounting)return Je();ze($,[Ve]);let Oe=!1;const mt=Ve[Cn]=ot=>{Oe||(Oe=!0,Je(),ot?ze(De,[Ve]):ze(ue,[Ve]),Ve[Cn]=void 0,Me[ht]===e&&delete Me[ht])};Me[ht]=e,re?xt(re,[Ve,mt]):mt()},clone(Ve){const Je=ha(Ve,t,r,n,i);return i&&i(Je),Je}};return Rt}function ko(e){if(Ls(e))return e=Pn(e),e.children=null,e}function Rc(e){if(!Ls(e))return Uu(e.type)&&e.children?zu(e.children):e;const{shapeFlag:t,children:r}=e;if(r){if(t&16)return r[0];if(t&32&&ft(r.default))return r.default()}}function ni(e,t){e.shapeFlag&6&&e.component?(e.transition=t,ni(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Af(e,t=!1,r){let n=[],i=0;for(let a=0;a<e.length;a++){let o=e[a];const f=r==null?o.key:String(r)+String(o.key!=null?o.key:a);o.type===Tt?(o.patchFlag&128&&i++,n=n.concat(Af(o.children,t,f))):(t||o.type!==gr)&&n.push(f!=null?Pn(o,{key:f}):o)}if(i>1)for(let a=0;a<n.length;a++)n[a].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function en(e,t){return ft(e)?Wt({name:e.name},t,{setup:e}):e}function Xu(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Yu(e){const t=Lf(),r=Av(null);if(t){const i=t.refs===St?t.refs={}:t.refs;Object.defineProperty(i,e,{enumerable:!0,get:()=>r.value,set:a=>r.value=a})}return r}function ps(e,t,r,n,i=!1){if(et(e)){e.forEach((ue,De)=>ps(ue,t&&(et(t)?t[De]:t),r,n,i));return}if(sa(n)&&!i){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&ps(e,t,r,n.component.subTree);return}const a=n.shapeFlag&4?Ps(n.component):n.el,o=i?null:a,{i:f,r:h}=e,T=t&&t.r,g=f.refs===St?f.refs={}:f.refs,P=f.setupState,$=gt(P),re=P===St?()=>!1:ue=>bt($,ue);if(T!=null&&T!==h&&(Xt(T)?(g[T]=null,re(T)&&(P[T]=null)):cr(T)&&(T.value=null)),ft(h))_a(h,f,12,[o,g]);else{const ue=Xt(h),De=cr(h);if(ue||De){const qe=()=>{if(e.f){const Ie=ue?re(h)?P[h]:g[h]:h.value;i?et(Ie)&&hf(Ie,a):et(Ie)?Ie.includes(a)||Ie.push(a):ue?(g[h]=[a],re(h)&&(P[h]=g[h])):(h.value=[a],e.k&&(g[e.k]=h.value))}else ue?(g[h]=o,re(h)&&(P[h]=o)):De&&(h.value=o,e.k&&(g[e.k]=o))};o?(qe.id=-1,Tr(qe,r)):qe()}}}As().requestIdleCallback;As().cancelIdleCallback;const sa=e=>!!e.type.__asyncLoader,Ls=e=>e.type.__isKeepAlive;function Mv(e,t){Ku(e,"a",t)}function Nv(e,t){Ku(e,"da",t)}function Ku(e,t,r=lr){const n=e.__wdc||(e.__wdc=()=>{let i=r;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(Rs(t,n,r),r){let i=r.parent;for(;i&&i.parent;)Ls(i.parent.vnode)&&Bv(n,t,r,i),i=i.parent}}function Bv(e,t,r,n){const i=Rs(t,e,n,!0);Ju(()=>{hf(n[t],i)},r)}function Rs(e,t,r=lr,n=!1){if(r){const i=r[e]||(r[e]=[]),a=t.__weh||(t.__weh=(...o)=>{Gn();const f=ga(r),h=Ur(t,r,e,o);return f(),Mn(),h});return n?i.unshift(a):i.push(a),a}}const mn=e=>(t,r=lr)=>{(!ma||e==="sp")&&Rs(e,(...n)=>t(...n),r)},kv=mn("bm"),qu=mn("m"),$v=mn("bu"),Qu=mn("u"),Zu=mn("bum"),Ju=mn("um"),Uv=mn("sp"),jv=mn("rtg"),Vv=mn("rtc");function Hv(e,t=lr){Rs("ec",e,t)}const zv=Symbol.for("v-ndc");function Zr(e,t,r,n){let i;const a=r,o=et(e);if(o||Xt(e)){const f=o&&Ci(e);let h=!1;f&&(h=!Dr(e),e=Ss(e)),i=new Array(e.length);for(let T=0,g=e.length;T<g;T++)i[T]=t(h?fr(e[T]):e[T],T,void 0,a)}else if(typeof e=="number"){i=new Array(e);for(let f=0;f<e;f++)i[f]=t(f+1,f,void 0,a)}else if(Gt(e))if(e[Symbol.iterator])i=Array.from(e,(f,h)=>t(f,h,void 0,a));else{const f=Object.keys(e);i=new Array(f.length);for(let h=0,T=f.length;h<T;h++){const g=f[h];i[h]=t(e[g],g,h,a)}}else i=[];return i}const rf=e=>e?yd(e)?Ps(e):rf(e.parent):null,oa=Wt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>rf(e.parent),$root:e=>rf(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>wf(e),$forceUpdate:e=>e.f||(e.f=()=>{Tf(e.update)}),$nextTick:e=>e.n||(e.n=tf.bind(e.proxy)),$watch:e=>h0.bind(e)}),$o=(e,t)=>e!==St&&!e.__isScriptSetup&&bt(e,t),Wv={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:r,setupState:n,data:i,props:a,accessCache:o,type:f,appContext:h}=e;let T;if(t[0]!=="$"){const re=o[t];if(re!==void 0)switch(re){case 1:return n[t];case 2:return i[t];case 4:return r[t];case 3:return a[t]}else{if($o(n,t))return o[t]=1,n[t];if(i!==St&&bt(i,t))return o[t]=2,i[t];if((T=e.propsOptions[0])&&bt(T,t))return o[t]=3,a[t];if(r!==St&&bt(r,t))return o[t]=4,r[t];nf&&(o[t]=0)}}const g=oa[t];let P,$;if(g)return t==="$attrs"&&or(e.attrs,"get",""),g(e);if((P=f.__cssModules)&&(P=P[t]))return P;if(r!==St&&bt(r,t))return o[t]=4,r[t];if($=h.config.globalProperties,bt($,t))return $[t]},set({_:e},t,r){const{data:n,setupState:i,ctx:a}=e;return $o(i,t)?(i[t]=r,!0):n!==St&&bt(n,t)?(n[t]=r,!0):bt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:n,appContext:i,propsOptions:a}},o){let f;return!!r[o]||e!==St&&bt(e,o)||$o(t,o)||(f=a[0])&&bt(f,o)||bt(n,o)||bt(oa,o)||bt(i.config.globalProperties,o)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:bt(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};function Oc(e){return et(e)?e.reduce((t,r)=>(t[r]=null,t),{}):e}let nf=!0;function Xv(e){const t=wf(e),r=e.proxy,n=e.ctx;nf=!1,t.beforeCreate&&Fc(t.beforeCreate,e,"bc");const{data:i,computed:a,methods:o,watch:f,provide:h,inject:T,created:g,beforeMount:P,mounted:$,beforeUpdate:re,updated:ue,activated:De,deactivated:qe,beforeDestroy:Ie,beforeUnmount:Qe,destroyed:$e,unmounted:be,render:Me,renderTracked:ze,renderTriggered:xt,errorCaptured:Rt,serverPrefetch:Ve,expose:Je,inheritAttrs:ht,components:Oe,directives:mt,filters:ot}=t;if(T&&Yv(T,n,null),o)for(const Ot in o){const At=o[Ot];ft(At)&&(n[Ot]=At.bind(r))}if(i){const Ot=i.call(r,r);Gt(Ot)&&(e.data=ai(Ot))}if(nf=!0,a)for(const Ot in a){const At=a[Ot],tn=ft(At)?At.bind(r,r):ft(At.get)?At.get.bind(r,r):Qr,rn=!ft(At)&&ft(At.set)?At.set.bind(r):Qr,jr=ya({get:tn,set:rn});Object.defineProperty(n,Ot,{enumerable:!0,configurable:!0,get:()=>jr.value,set:Rr=>jr.value=Rr})}if(f)for(const Ot in f)ed(f[Ot],n,r,Ot);if(h){const Ot=ft(h)?h.call(r):h;Reflect.ownKeys(Ot).forEach(At=>{e0(At,Ot[At])})}g&&Fc(g,e,"c");function Yt(Ot,At){et(At)?At.forEach(tn=>Ot(tn.bind(r))):At&&Ot(At.bind(r))}if(Yt(kv,P),Yt(qu,$),Yt($v,re),Yt(Qu,ue),Yt(Mv,De),Yt(Nv,qe),Yt(Hv,Rt),Yt(Vv,ze),Yt(jv,xt),Yt(Zu,Qe),Yt(Ju,be),Yt(Uv,Ve),et(Je))if(Je.length){const Ot=e.exposed||(e.exposed={});Je.forEach(At=>{Object.defineProperty(Ot,At,{get:()=>r[At],set:tn=>r[At]=tn})})}else e.exposed||(e.exposed={});Me&&e.render===Qr&&(e.render=Me),ht!=null&&(e.inheritAttrs=ht),Oe&&(e.components=Oe),mt&&(e.directives=mt),Ve&&Xu(e)}function Yv(e,t,r=Qr){et(e)&&(e=af(e));for(const n in e){const i=e[n];let a;Gt(i)?"default"in i?a=os(i.from||n,i.default,!0):a=os(i.from||n):a=os(i),cr(a)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>a.value,set:o=>a.value=o}):t[n]=a}}function Fc(e,t,r){Ur(et(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,r)}function ed(e,t,r,n){let i=n.includes(".")?pd(r,n):()=>r[n];if(Xt(e)){const a=t[e];ft(a)&&Oi(i,a)}else if(ft(e))Oi(i,e.bind(r));else if(Gt(e))if(et(e))e.forEach(a=>ed(a,t,r,n));else{const a=ft(e.handler)?e.handler.bind(r):t[e.handler];ft(a)&&Oi(i,a,e)}}function wf(e){const t=e.type,{mixins:r,extends:n}=t,{mixins:i,optionsCache:a,config:{optionMergeStrategies:o}}=e.appContext,f=a.get(t);let h;return f?h=f:!i.length&&!r&&!n?h=t:(h={},i.length&&i.forEach(T=>ms(h,T,o,!0)),ms(h,t,o)),Gt(t)&&a.set(t,h),h}function ms(e,t,r,n=!1){const{mixins:i,extends:a}=t;a&&ms(e,a,r,!0),i&&i.forEach(o=>ms(e,o,r,!0));for(const o in t)if(!(n&&o==="expose")){const f=Kv[o]||r&&r[o];e[o]=f?f(e[o],t[o]):t[o]}return e}const Kv={data:Pc,props:Dc,emits:Dc,methods:ra,computed:ra,beforeCreate:dr,created:dr,beforeMount:dr,mounted:dr,beforeUpdate:dr,updated:dr,beforeDestroy:dr,beforeUnmount:dr,destroyed:dr,unmounted:dr,activated:dr,deactivated:dr,errorCaptured:dr,serverPrefetch:dr,components:ra,directives:ra,watch:Qv,provide:Pc,inject:qv};function Pc(e,t){return t?e?function(){return Wt(ft(e)?e.call(this,this):e,ft(t)?t.call(this,this):t)}:t:e}function qv(e,t){return ra(af(e),af(t))}function af(e){if(et(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function dr(e,t){return e?[...new Set([].concat(e,t))]:t}function ra(e,t){return e?Wt(Object.create(null),e,t):t}function Dc(e,t){return e?et(e)&&et(t)?[...new Set([...e,...t])]:Wt(Object.create(null),Oc(e),Oc(t??{})):t}function Qv(e,t){if(!e)return t;if(!t)return e;const r=Wt(Object.create(null),e);for(const n in t)r[n]=dr(e[n],t[n]);return r}function td(){return{app:null,config:{isNativeTag:zm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Zv=0;function Jv(e,t){return function(n,i=null){ft(n)||(n=Wt({},n)),i!=null&&!Gt(i)&&(i=null);const a=td(),o=new WeakSet,f=[];let h=!1;const T=a.app={_uid:Zv++,_component:n,_props:i,_container:null,_context:a,_instance:null,version:I0,get config(){return a.config},set config(g){},use(g,...P){return o.has(g)||(g&&ft(g.install)?(o.add(g),g.install(T,...P)):ft(g)&&(o.add(g),g(T,...P))),T},mixin(g){return a.mixins.includes(g)||a.mixins.push(g),T},component(g,P){return P?(a.components[g]=P,T):a.components[g]},directive(g,P){return P?(a.directives[g]=P,T):a.directives[g]},mount(g,P,$){if(!h){const re=T._ceVNode||jt(n,i);return re.appContext=a,$===!0?$="svg":$===!1&&($=void 0),P&&t?t(re,g):e(re,g,$),h=!0,T._container=g,g.__vue_app__=T,Ps(re.component)}},onUnmount(g){f.push(g)},unmount(){h&&(Ur(f,T._instance,16),e(null,T._container),delete T._container.__vue_app__)},provide(g,P){return a.provides[g]=P,T},runWithContext(g){const P=Ri;Ri=T;try{return g()}finally{Ri=P}}};return T}}let Ri=null;function e0(e,t){if(lr){let r=lr.provides;const n=lr.parent&&lr.parent.provides;n===r&&(r=lr.provides=Object.create(n)),r[e]=t}}function os(e,t,r=!1){const n=lr||Sr;if(n||Ri){const i=Ri?Ri._context.provides:n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return r&&ft(t)?t.call(n&&n.proxy):t}}const rd={},nd=()=>Object.create(rd),id=e=>Object.getPrototypeOf(e)===rd;function t0(e,t,r,n=!1){const i={},a=nd();e.propsDefaults=Object.create(null),ad(e,t,i,a);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);r?e.props=n?i:bf(i):e.type.props?e.props=i:e.props=a,e.attrs=a}function r0(e,t,r,n){const{props:i,attrs:a,vnode:{patchFlag:o}}=e,f=gt(i),[h]=e.propsOptions;let T=!1;if((n||o>0)&&!(o&16)){if(o&8){const g=e.vnode.dynamicProps;for(let P=0;P<g.length;P++){let $=g[P];if(Os(e.emitsOptions,$))continue;const re=t[$];if(h)if(bt(a,$))re!==a[$]&&(a[$]=re,T=!0);else{const ue=Fn($);i[ue]=sf(h,f,ue,re,e,!1)}else re!==a[$]&&(a[$]=re,T=!0)}}}else{ad(e,t,i,a)&&(T=!0);let g;for(const P in f)(!t||!bt(t,P)&&((g=ii(P))===P||!bt(t,g)))&&(h?r&&(r[P]!==void 0||r[g]!==void 0)&&(i[P]=sf(h,f,P,void 0,e,!0)):delete i[P]);if(a!==f)for(const P in a)(!t||!bt(t,P))&&(delete a[P],T=!0)}T&&un(e.attrs,"set","")}function ad(e,t,r,n){const[i,a]=e.propsOptions;let o=!1,f;if(t)for(let h in t){if(na(h))continue;const T=t[h];let g;i&&bt(i,g=Fn(h))?!a||!a.includes(g)?r[g]=T:(f||(f={}))[g]=T:Os(e.emitsOptions,h)||(!(h in n)||T!==n[h])&&(n[h]=T,o=!0)}if(a){const h=gt(r),T=f||St;for(let g=0;g<a.length;g++){const P=a[g];r[P]=sf(i,h,P,T[P],e,!bt(T,P))}}return o}function sf(e,t,r,n,i,a){const o=e[r];if(o!=null){const f=bt(o,"default");if(f&&n===void 0){const h=o.default;if(o.type!==Function&&!o.skipFactory&&ft(h)){const{propsDefaults:T}=i;if(r in T)n=T[r];else{const g=ga(i);n=T[r]=h.call(null,t),g()}}else n=h;i.ce&&i.ce._setProp(r,n)}o[0]&&(a&&!f?n=!1:o[1]&&(n===""||n===ii(r))&&(n=!0))}return n}const n0=new WeakMap;function sd(e,t,r=!1){const n=r?n0:t.propsCache,i=n.get(e);if(i)return i;const a=e.props,o={},f=[];let h=!1;if(!ft(e)){const g=P=>{h=!0;const[$,re]=sd(P,t,!0);Wt(o,$),re&&f.push(...re)};!r&&t.mixins.length&&t.mixins.forEach(g),e.extends&&g(e.extends),e.mixins&&e.mixins.forEach(g)}if(!a&&!h)return Gt(e)&&n.set(e,wi),wi;if(et(a))for(let g=0;g<a.length;g++){const P=Fn(a[g]);Ic(P)&&(o[P]=St)}else if(a)for(const g in a){const P=Fn(g);if(Ic(P)){const $=a[g],re=o[P]=et($)||ft($)?{type:$}:Wt({},$),ue=re.type;let De=!1,qe=!0;if(et(ue))for(let Ie=0;Ie<ue.length;++Ie){const Qe=ue[Ie],$e=ft(Qe)&&Qe.name;if($e==="Boolean"){De=!0;break}else $e==="String"&&(qe=!1)}else De=ft(ue)&&ue.name==="Boolean";re[0]=De,re[1]=qe,(De||bt(re,"default"))&&f.push(P)}}const T=[o,f];return Gt(e)&&n.set(e,T),T}function Ic(e){return e[0]!=="$"&&!na(e)}const od=e=>e[0]==="_"||e==="$stable",Sf=e=>et(e)?e.map(qr):[qr(e)],i0=(e,t,r)=>{if(t._n)return t;const n=hs((...i)=>Sf(t(...i)),r);return n._c=!1,n},fd=(e,t,r)=>{const n=e._ctx;for(const i in e){if(od(i))continue;const a=e[i];if(ft(a))t[i]=i0(i,a,n);else if(a!=null){const o=Sf(a);t[i]=()=>o}}},ld=(e,t)=>{const r=Sf(t);e.slots.default=()=>r},cd=(e,t,r)=>{for(const n in t)(r||n!=="_")&&(e[n]=t[n])},a0=(e,t,r)=>{const n=e.slots=nd();if(e.vnode.shapeFlag&32){const i=t._;i?(cd(n,t,r),r&&mu(n,"_",i,!0)):fd(t,n)}else t&&ld(e,t)},s0=(e,t,r)=>{const{vnode:n,slots:i}=e;let a=!0,o=St;if(n.shapeFlag&32){const f=t._;f?r&&f===1?a=!1:cd(i,t,r):(a=!t.$stable,fd(t,i)),o=t}else t&&(ld(e,t),o={default:1});if(a)for(const f in i)!od(f)&&o[f]==null&&delete i[f]},Tr=b0;function o0(e){return f0(e)}function f0(e,t){const r=As();r.__VUE__=!0;const{insert:n,remove:i,patchProp:a,createElement:o,createText:f,createComment:h,setText:T,setElementText:g,parentNode:P,nextSibling:$,setScopeId:re=Qr,insertStaticContent:ue}=e,De=(A,R,H,le=null,ie=null,te=null,Fe=void 0,Te=null,Se=!!R.dynamicChildren)=>{if(A===R)return;A&&!ei(A,R)&&(le=si(A),Rr(A,ie,te,!0),A=null),R.patchFlag===-2&&(Se=!1,R.dynamicChildren=null);const{type:de,ref:l,shapeFlag:Ge}=R;switch(de){case Fs:qe(A,R,H,le);break;case gr:Ie(A,R,H,le);break;case Vo:A==null&&Qe(R,H,le,Fe);break;case Tt:Oe(A,R,H,le,ie,te,Fe,Te,Se);break;default:Ge&1?Me(A,R,H,le,ie,te,Fe,Te,Se):Ge&6?mt(A,R,H,le,ie,te,Fe,Te,Se):(Ge&64||Ge&128)&&de.process(A,R,H,le,ie,te,Fe,Te,Se,Bn)}l!=null&&ie&&ps(l,A&&A.ref,te,R||A,!R)},qe=(A,R,H,le)=>{if(A==null)n(R.el=f(R.children),H,le);else{const ie=R.el=A.el;R.children!==A.children&&T(ie,R.children)}},Ie=(A,R,H,le)=>{A==null?n(R.el=h(R.children||""),H,le):R.el=A.el},Qe=(A,R,H,le)=>{[A.el,A.anchor]=ue(A.children,R,H,le,A.el,A.anchor)},$e=({el:A,anchor:R},H,le)=>{let ie;for(;A&&A!==R;)ie=$(A),n(A,H,le),A=ie;n(R,H,le)},be=({el:A,anchor:R})=>{let H;for(;A&&A!==R;)H=$(A),i(A),A=H;i(R)},Me=(A,R,H,le,ie,te,Fe,Te,Se)=>{R.type==="svg"?Fe="svg":R.type==="math"&&(Fe="mathml"),A==null?ze(R,H,le,ie,te,Fe,Te,Se):Ve(A,R,ie,te,Fe,Te,Se)},ze=(A,R,H,le,ie,te,Fe,Te)=>{let Se,de;const{props:l,shapeFlag:Ge,transition:We,dirs:tt}=A;if(Se=A.el=o(A.type,te,l&&l.is,l),Ge&8?g(Se,A.children):Ge&16&&Rt(A.children,Se,null,le,ie,Uo(A,te),Fe,Te),tt&&qn(A,null,le,"created"),xt(Se,A,A.scopeId,Fe,le),l){for(const vt in l)vt!=="value"&&!na(vt)&&a(Se,vt,null,l[vt],te,le);"value"in l&&a(Se,"value",null,l.value,te),(de=l.onVnodeBeforeMount)&&Xr(de,le,A)}tt&&qn(A,null,le,"beforeMount");const ut=l0(ie,We);ut&&We.beforeEnter(Se),n(Se,R,H),((de=l&&l.onVnodeMounted)||ut||tt)&&Tr(()=>{de&&Xr(de,le,A),ut&&We.enter(Se),tt&&qn(A,null,le,"mounted")},ie)},xt=(A,R,H,le,ie)=>{if(H&&re(A,H),le)for(let te=0;te<le.length;te++)re(A,le[te]);if(ie){let te=ie.subTree;if(R===te||vd(te.type)&&(te.ssContent===R||te.ssFallback===R)){const Fe=ie.vnode;xt(A,Fe,Fe.scopeId,Fe.slotScopeIds,ie.parent)}}},Rt=(A,R,H,le,ie,te,Fe,Te,Se=0)=>{for(let de=Se;de<A.length;de++){const l=A[de]=Te?Ln(A[de]):qr(A[de]);De(null,l,R,H,le,ie,te,Fe,Te)}},Ve=(A,R,H,le,ie,te,Fe)=>{const Te=R.el=A.el;let{patchFlag:Se,dynamicChildren:de,dirs:l}=R;Se|=A.patchFlag&16;const Ge=A.props||St,We=R.props||St;let tt;if(H&&Qn(H,!1),(tt=We.onVnodeBeforeUpdate)&&Xr(tt,H,R,A),l&&qn(R,A,H,"beforeUpdate"),H&&Qn(H,!0),(Ge.innerHTML&&We.innerHTML==null||Ge.textContent&&We.textContent==null)&&g(Te,""),de?Je(A.dynamicChildren,de,Te,H,le,Uo(R,ie),te):Fe||At(A,R,Te,null,H,le,Uo(R,ie),te,!1),Se>0){if(Se&16)ht(Te,Ge,We,H,ie);else if(Se&2&&Ge.class!==We.class&&a(Te,"class",null,We.class,ie),Se&4&&a(Te,"style",Ge.style,We.style,ie),Se&8){const ut=R.dynamicProps;for(let vt=0;vt<ut.length;vt++){const _t=ut[vt],qt=Ge[_t],Qt=We[_t];(Qt!==qt||_t==="value")&&a(Te,_t,qt,Qt,ie,H)}}Se&1&&A.children!==R.children&&g(Te,R.children)}else!Fe&&de==null&&ht(Te,Ge,We,H,ie);((tt=We.onVnodeUpdated)||l)&&Tr(()=>{tt&&Xr(tt,H,R,A),l&&qn(R,A,H,"updated")},le)},Je=(A,R,H,le,ie,te,Fe)=>{for(let Te=0;Te<R.length;Te++){const Se=A[Te],de=R[Te],l=Se.el&&(Se.type===Tt||!ei(Se,de)||Se.shapeFlag&70)?P(Se.el):H;De(Se,de,l,null,le,ie,te,Fe,!0)}},ht=(A,R,H,le,ie)=>{if(R!==H){if(R!==St)for(const te in R)!na(te)&&!(te in H)&&a(A,te,R[te],null,ie,le);for(const te in H){if(na(te))continue;const Fe=H[te],Te=R[te];Fe!==Te&&te!=="value"&&a(A,te,Te,Fe,ie,le)}"value"in H&&a(A,"value",R.value,H.value,ie)}},Oe=(A,R,H,le,ie,te,Fe,Te,Se)=>{const de=R.el=A?A.el:f(""),l=R.anchor=A?A.anchor:f("");let{patchFlag:Ge,dynamicChildren:We,slotScopeIds:tt}=R;tt&&(Te=Te?Te.concat(tt):tt),A==null?(n(de,H,le),n(l,H,le),Rt(R.children||[],H,l,ie,te,Fe,Te,Se)):Ge>0&&Ge&64&&We&&A.dynamicChildren?(Je(A.dynamicChildren,We,H,ie,te,Fe,Te),(R.key!=null||ie&&R===ie.subTree)&&ud(A,R,!0)):At(A,R,H,l,ie,te,Fe,Te,Se)},mt=(A,R,H,le,ie,te,Fe,Te,Se)=>{R.slotScopeIds=Te,A==null?R.shapeFlag&512?ie.ctx.activate(R,H,le,Fe,Se):ot(R,H,le,ie,te,Fe,Se):Ir(A,R,Se)},ot=(A,R,H,le,ie,te,Fe)=>{const Te=A.component=C0(A,le,ie);if(Ls(A)&&(Te.ctx.renderer=Bn),L0(Te,!1,Fe),Te.asyncDep){if(ie&&ie.registerDep(Te,Yt,Fe),!A.el){const Se=Te.subTree=jt(gr);Ie(null,Se,R,H)}}else Yt(Te,A,R,H,ie,te,Fe)},Ir=(A,R,H)=>{const le=R.component=A.component;if(g0(A,R,H))if(le.asyncDep&&!le.asyncResolved){Ot(le,R,H);return}else le.next=R,le.update();else R.el=A.el,le.vnode=R},Yt=(A,R,H,le,ie,te,Fe)=>{const Te=()=>{if(A.isMounted){let{next:Ge,bu:We,u:tt,parent:ut,vnode:vt}=A;{const ur=dd(A);if(ur){Ge&&(Ge.el=vt.el,Ot(A,Ge,Fe)),ur.asyncDep.then(()=>{A.isUnmounted||Te()});return}}let _t=Ge,qt;Qn(A,!1),Ge?(Ge.el=vt.el,Ot(A,Ge,Fe)):Ge=vt,We&&ss(We),(qt=Ge.props&&Ge.props.onVnodeBeforeUpdate)&&Xr(qt,ut,Ge,vt),Qn(A,!0);const Qt=jo(A),yr=A.subTree;A.subTree=Qt,De(yr,Qt,P(yr.el),si(yr),A,ie,te),Ge.el=Qt.el,_t===null&&y0(A,Qt.el),tt&&Tr(tt,ie),(qt=Ge.props&&Ge.props.onVnodeUpdated)&&Tr(()=>Xr(qt,ut,Ge,vt),ie)}else{let Ge;const{el:We,props:tt}=R,{bm:ut,m:vt,parent:_t,root:qt,type:Qt}=A,yr=sa(R);if(Qn(A,!1),ut&&ss(ut),!yr&&(Ge=tt&&tt.onVnodeBeforeMount)&&Xr(Ge,_t,R),Qn(A,!0),We&&Gi){const ur=()=>{A.subTree=jo(A),Gi(We,A.subTree,A,ie,null)};yr&&Qt.__asyncHydrate?Qt.__asyncHydrate(We,A,ur):ur()}else{qt.ce&&qt.ce._injectChildStyle(Qt);const ur=A.subTree=jo(A);De(null,ur,H,le,A,ie,te),R.el=ur.el}if(vt&&Tr(vt,ie),!yr&&(Ge=tt&&tt.onVnodeMounted)){const ur=R;Tr(()=>Xr(Ge,_t,ur),ie)}(R.shapeFlag&256||_t&&sa(_t.vnode)&&_t.vnode.shapeFlag&256)&&A.a&&Tr(A.a,ie),A.isMounted=!0,R=H=le=null}};A.scope.on();const Se=A.effect=new yu(Te);A.scope.off();const de=A.update=Se.run.bind(Se),l=A.job=Se.runIfDirty.bind(Se);l.i=A,l.id=A.uid,Se.scheduler=()=>Tf(l),Qn(A,!0),de()},Ot=(A,R,H)=>{R.component=A;const le=A.vnode.props;A.vnode=R,A.next=null,r0(A,R.props,le,H),s0(A,R.children,H),Gn(),Lc(A),Mn()},At=(A,R,H,le,ie,te,Fe,Te,Se=!1)=>{const de=A&&A.children,l=A?A.shapeFlag:0,Ge=R.children,{patchFlag:We,shapeFlag:tt}=R;if(We>0){if(We&128){rn(de,Ge,H,le,ie,te,Fe,Te,Se);return}else if(We&256){tn(de,Ge,H,le,ie,te,Fe,Te,Se);return}}tt&8?(l&16&&Nn(de,ie,te),Ge!==de&&g(H,Ge)):l&16?tt&16?rn(de,Ge,H,le,ie,te,Fe,Te,Se):Nn(de,ie,te,!0):(l&8&&g(H,""),tt&16&&Rt(Ge,H,le,ie,te,Fe,Te,Se))},tn=(A,R,H,le,ie,te,Fe,Te,Se)=>{A=A||wi,R=R||wi;const de=A.length,l=R.length,Ge=Math.min(de,l);let We;for(We=0;We<Ge;We++){const tt=R[We]=Se?Ln(R[We]):qr(R[We]);De(A[We],tt,H,null,ie,te,Fe,Te,Se)}de>l?Nn(A,ie,te,!0,!1,Ge):Rt(R,H,le,ie,te,Fe,Te,Se,Ge)},rn=(A,R,H,le,ie,te,Fe,Te,Se)=>{let de=0;const l=R.length;let Ge=A.length-1,We=l-1;for(;de<=Ge&&de<=We;){const tt=A[de],ut=R[de]=Se?Ln(R[de]):qr(R[de]);if(ei(tt,ut))De(tt,ut,H,null,ie,te,Fe,Te,Se);else break;de++}for(;de<=Ge&&de<=We;){const tt=A[Ge],ut=R[We]=Se?Ln(R[We]):qr(R[We]);if(ei(tt,ut))De(tt,ut,H,null,ie,te,Fe,Te,Se);else break;Ge--,We--}if(de>Ge){if(de<=We){const tt=We+1,ut=tt<l?R[tt].el:le;for(;de<=We;)De(null,R[de]=Se?Ln(R[de]):qr(R[de]),H,ut,ie,te,Fe,Te,Se),de++}}else if(de>We)for(;de<=Ge;)Rr(A[de],ie,te,!0),de++;else{const tt=de,ut=de,vt=new Map;for(de=ut;de<=We;de++){const nr=R[de]=Se?Ln(R[de]):qr(R[de]);nr.key!=null&&vt.set(nr.key,de)}let _t,qt=0;const Qt=We-ut+1;let yr=!1,ur=0;const _n=new Array(Qt);for(de=0;de<Qt;de++)_n[de]=0;for(de=tt;de<=Ge;de++){const nr=A[de];if(qt>=Qt){Rr(nr,ie,te,!0);continue}let br;if(nr.key!=null)br=vt.get(nr.key);else for(_t=ut;_t<=We;_t++)if(_n[_t-ut]===0&&ei(nr,R[_t])){br=_t;break}br===void 0?Rr(nr,ie,te,!0):(_n[br-ut]=de+1,br>=ur?ur=br:yr=!0,De(nr,R[br],H,null,ie,te,Fe,Te,Se),qt++)}const ar=yr?c0(_n):wi;for(_t=ar.length-1,de=Qt-1;de>=0;de--){const nr=ut+de,br=R[nr],Aa=nr+1<l?R[nr+1].el:le;_n[de]===0?De(null,br,H,Aa,ie,te,Fe,Te,Se):yr&&(_t<0||de!==ar[_t]?jr(br,H,Aa,2):_t--)}}},jr=(A,R,H,le,ie=null)=>{const{el:te,type:Fe,transition:Te,children:Se,shapeFlag:de}=A;if(de&6){jr(A.component.subTree,R,H,le);return}if(de&128){A.suspense.move(R,H,le);return}if(de&64){Fe.move(A,R,H,Bn);return}if(Fe===Tt){n(te,R,H);for(let Ge=0;Ge<Se.length;Ge++)jr(Se[Ge],R,H,le);n(A.anchor,R,H);return}if(Fe===Vo){$e(A,R,H);return}if(le!==2&&de&1&&Te)if(le===0)Te.beforeEnter(te),n(te,R,H),Tr(()=>Te.enter(te),ie);else{const{leave:Ge,delayLeave:We,afterLeave:tt}=Te,ut=()=>n(te,R,H),vt=()=>{Ge(te,()=>{ut(),tt&&tt()})};We?We(te,ut,vt):vt()}else n(te,R,H)},Rr=(A,R,H,le=!1,ie=!1)=>{const{type:te,props:Fe,ref:Te,children:Se,dynamicChildren:de,shapeFlag:l,patchFlag:Ge,dirs:We,cacheIndex:tt}=A;if(Ge===-2&&(ie=!1),Te!=null&&ps(Te,null,H,A,!0),tt!=null&&(R.renderCache[tt]=void 0),l&256){R.ctx.deactivate(A);return}const ut=l&1&&We,vt=!sa(A);let _t;if(vt&&(_t=Fe&&Fe.onVnodeBeforeUnmount)&&Xr(_t,R,A),l&6)Ms(A.component,H,le);else{if(l&128){A.suspense.unmount(H,le);return}ut&&qn(A,null,R,"beforeUnmount"),l&64?A.type.remove(A,R,H,Bn,le):de&&!de.hasOnce&&(te!==Tt||Ge>0&&Ge&64)?Nn(de,R,H,!1,!0):(te===Tt&&Ge&384||!ie&&l&16)&&Nn(Se,R,H),le&&xa(A)}(vt&&(_t=Fe&&Fe.onVnodeUnmounted)||ut)&&Tr(()=>{_t&&Xr(_t,R,A),ut&&qn(A,null,R,"unmounted")},H)},xa=A=>{const{type:R,el:H,anchor:le,transition:ie}=A;if(R===Tt){Gs(H,le);return}if(R===Vo){be(A);return}const te=()=>{i(H),ie&&!ie.persisted&&ie.afterLeave&&ie.afterLeave()};if(A.shapeFlag&1&&ie&&!ie.persisted){const{leave:Fe,delayLeave:Te}=ie,Se=()=>Fe(H,te);Te?Te(A.el,te,Se):Se()}else te()},Gs=(A,R)=>{let H;for(;A!==R;)H=$(A),i(A),A=H;i(R)},Ms=(A,R,H)=>{const{bum:le,scope:ie,job:te,subTree:Fe,um:Te,m:Se,a:de}=A;Gc(Se),Gc(de),le&&ss(le),ie.stop(),te&&(te.flags|=8,Rr(Fe,A,R,H)),Te&&Tr(Te,R),Tr(()=>{A.isUnmounted=!0},R),R&&R.pendingBranch&&!R.isUnmounted&&A.asyncDep&&!A.asyncResolved&&A.suspenseId===R.pendingId&&(R.deps--,R.deps===0&&R.resolve())},Nn=(A,R,H,le=!1,ie=!1,te=0)=>{for(let Fe=te;Fe<A.length;Fe++)Rr(A[Fe],R,H,le,ie)},si=A=>{if(A.shapeFlag&6)return si(A.component.subTree);if(A.shapeFlag&128)return A.suspense.next();const R=$(A.anchor||A.el),H=R&&R[Dv];return H?$(H):R};let Ii=!1;const Ea=(A,R,H)=>{A==null?R._vnode&&Rr(R._vnode,null,null,!0):De(R._vnode||null,A,R,null,null,null,H),R._vnode=A,Ii||(Ii=!0,Lc(),Bu(),Ii=!1)},Bn={p:De,um:Rr,m:jr,r:xa,mt:ot,mc:Rt,pc:At,pbc:Je,n:si,o:e};let Ta,Gi;return{render:Ea,hydrate:Ta,createApp:Jv(Ea,Ta)}}function Uo({type:e,props:t},r){return r==="svg"&&e==="foreignObject"||r==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:r}function Qn({effect:e,job:t},r){r?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function l0(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function ud(e,t,r=!1){const n=e.children,i=t.children;if(et(n)&&et(i))for(let a=0;a<n.length;a++){const o=n[a];let f=i[a];f.shapeFlag&1&&!f.dynamicChildren&&((f.patchFlag<=0||f.patchFlag===32)&&(f=i[a]=Ln(i[a]),f.el=o.el),!r&&f.patchFlag!==-2&&ud(o,f)),f.type===Fs&&(f.el=o.el)}}function c0(e){const t=e.slice(),r=[0];let n,i,a,o,f;const h=e.length;for(n=0;n<h;n++){const T=e[n];if(T!==0){if(i=r[r.length-1],e[i]<T){t[n]=i,r.push(n);continue}for(a=0,o=r.length-1;a<o;)f=a+o>>1,e[r[f]]<T?a=f+1:o=f;T<e[r[a]]&&(a>0&&(t[n]=r[a-1]),r[a]=n)}}for(a=r.length,o=r[a-1];a-- >0;)r[a]=o,o=t[o];return r}function dd(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:dd(t)}function Gc(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const u0=Symbol.for("v-scx"),d0=()=>os(u0);function Oi(e,t,r){return hd(e,t,r)}function hd(e,t,r=St){const{immediate:n,deep:i,flush:a,once:o}=r,f=Wt({},r),h=t&&n||!t&&a!=="post";let T;if(ma){if(a==="sync"){const re=d0();T=re.__watcherHandles||(re.__watcherHandles=[])}else if(!h){const re=()=>{};return re.stop=Qr,re.resume=Qr,re.pause=Qr,re}}const g=lr;f.call=(re,ue,De)=>Ur(re,g,ue,De);let P=!1;a==="post"?f.scheduler=re=>{Tr(re,g&&g.suspense)}:a!=="sync"&&(P=!0,f.scheduler=(re,ue)=>{ue?re():Tf(re)}),f.augmentJob=re=>{t&&(re.flags|=4),P&&(re.flags|=2,g&&(re.id=g.uid,re.i=g))};const $=Rv(e,t,f);return ma&&(T?T.push($):h&&$()),$}function h0(e,t,r){const n=this.proxy,i=Xt(e)?e.includes(".")?pd(n,e):()=>n[e]:e.bind(n,n);let a;ft(t)?a=t:(a=t.handler,r=t);const o=ga(this),f=hd(i,a.bind(n),r);return o(),f}function pd(e,t){const r=t.split(".");return()=>{let n=e;for(let i=0;i<r.length&&n;i++)n=n[r[i]];return n}}const p0=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Fn(t)}Modifiers`]||e[`${ii(t)}Modifiers`];function m0(e,t,...r){if(e.isUnmounted)return;const n=e.vnode.props||St;let i=r;const a=t.startsWith("update:"),o=a&&p0(n,t.slice(7));o&&(o.trim&&(i=r.map(g=>Xt(g)?g.trim():g)),o.number&&(i=r.map(Yo)));let f,h=n[f=Io(t)]||n[f=Io(Fn(t))];!h&&a&&(h=n[f=Io(ii(t))]),h&&Ur(h,e,6,i);const T=n[f+"Once"];if(T){if(!e.emitted)e.emitted={};else if(e.emitted[f])return;e.emitted[f]=!0,Ur(T,e,6,i)}}function md(e,t,r=!1){const n=t.emitsCache,i=n.get(e);if(i!==void 0)return i;const a=e.emits;let o={},f=!1;if(!ft(e)){const h=T=>{const g=md(T,t,!0);g&&(f=!0,Wt(o,g))};!r&&t.mixins.length&&t.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}return!a&&!f?(Gt(e)&&n.set(e,null),null):(et(a)?a.forEach(h=>o[h]=null):Wt(o,a),Gt(e)&&n.set(e,o),o)}function Os(e,t){return!e||!xs(t)?!1:(t=t.slice(2).replace(/Once$/,""),bt(e,t[0].toLowerCase()+t.slice(1))||bt(e,ii(t))||bt(e,t))}function jo(e){const{type:t,vnode:r,proxy:n,withProxy:i,propsOptions:[a],slots:o,attrs:f,emit:h,render:T,renderCache:g,props:P,data:$,setupState:re,ctx:ue,inheritAttrs:De}=e,qe=ds(e);let Ie,Qe;try{if(r.shapeFlag&4){const be=i||n,Me=be;Ie=qr(T.call(Me,be,g,P,re,$,ue)),Qe=f}else{const be=t;Ie=qr(be.length>1?be(P,{attrs:f,slots:o,emit:h}):be(P,null)),Qe=t.props?f:v0(f)}}catch(be){fa.length=0,Cs(be,e,1),Ie=jt(gr)}let $e=Ie;if(Qe&&De!==!1){const be=Object.keys(Qe),{shapeFlag:Me}=$e;be.length&&Me&7&&(a&&be.some(df)&&(Qe=_0(Qe,a)),$e=Pn($e,Qe,!1,!0))}return r.dirs&&($e=Pn($e,null,!1,!0),$e.dirs=$e.dirs?$e.dirs.concat(r.dirs):r.dirs),r.transition&&ni($e,r.transition),Ie=$e,ds(qe),Ie}const v0=e=>{let t;for(const r in e)(r==="class"||r==="style"||xs(r))&&((t||(t={}))[r]=e[r]);return t},_0=(e,t)=>{const r={};for(const n in e)(!df(n)||!(n.slice(9)in t))&&(r[n]=e[n]);return r};function g0(e,t,r){const{props:n,children:i,component:a}=e,{props:o,children:f,patchFlag:h}=t,T=a.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&h>=0){if(h&1024)return!0;if(h&16)return n?Mc(n,o,T):!!o;if(h&8){const g=t.dynamicProps;for(let P=0;P<g.length;P++){const $=g[P];if(o[$]!==n[$]&&!Os(T,$))return!0}}}else return(i||f)&&(!f||!f.$stable)?!0:n===o?!1:n?o?Mc(n,o,T):!0:!!o;return!1}function Mc(e,t,r){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const a=n[i];if(t[a]!==e[a]&&!Os(r,a))return!0}return!1}function y0({vnode:e,parent:t},r){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=r,t=t.parent;else break}}const vd=e=>e.__isSuspense;function b0(e,t){t&&t.pendingBranch?et(e)?t.effects.push(...e):t.effects.push(e):Pv(e)}const Tt=Symbol.for("v-fgt"),Fs=Symbol.for("v-txt"),gr=Symbol.for("v-cmt"),Vo=Symbol.for("v-stc"),fa=[];let Cr=null;function rt(e=!1){fa.push(Cr=e?null:[])}function x0(){fa.pop(),Cr=fa[fa.length-1]||null}let pa=1;function Nc(e,t=!1){pa+=e,e<0&&Cr&&t&&(Cr.hasOnce=!0)}function _d(e){return e.dynamicChildren=pa>0?Cr||wi:null,x0(),pa>0&&Cr&&Cr.push(e),e}function lt(e,t,r,n,i,a){return _d(Xe(e,t,r,n,i,a,!0))}function la(e,t,r,n,i){return _d(jt(e,t,r,n,i,!0))}function vs(e){return e?e.__v_isVNode===!0:!1}function ei(e,t){return e.type===t.type&&e.key===t.key}const gd=({key:e})=>e??null,fs=({ref:e,ref_key:t,ref_for:r})=>(typeof e=="number"&&(e=""+e),e!=null?Xt(e)||cr(e)||ft(e)?{i:Sr,r:e,k:t,f:!!r}:e:null);function Xe(e,t=null,r=null,n=0,i=null,a=e===Tt?0:1,o=!1,f=!1){const h={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&gd(t),ref:t&&fs(t),scopeId:$u,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Sr};return f?(Cf(h,r),a&128&&e.normalize(h)):r&&(h.shapeFlag|=Xt(r)?8:16),pa>0&&!o&&Cr&&(h.patchFlag>0||a&6)&&h.patchFlag!==32&&Cr.push(h),h}const jt=E0;function E0(e,t=null,r=null,n=0,i=null,a=!1){if((!e||e===zv)&&(e=gr),vs(e)){const f=Pn(e,t,!0);return r&&Cf(f,r),pa>0&&!a&&Cr&&(f.shapeFlag&6?Cr[Cr.indexOf(e)]=f:Cr.push(f)),f.patchFlag=-2,f}if(P0(e)&&(e=e.__vccOpts),t){t=T0(t);let{class:f,style:h}=t;f&&!Xt(f)&&(t.class=ws(f)),Gt(h)&&(Ef(h)&&!et(h)&&(h=Wt({},h)),t.style=va(h))}const o=Xt(e)?1:vd(e)?128:Uu(e)?64:Gt(e)?4:ft(e)?2:0;return Xe(e,t,r,n,i,o,a,!0)}function T0(e){return e?Ef(e)||id(e)?Wt({},e):e:null}function Pn(e,t,r=!1,n=!1){const{props:i,ref:a,patchFlag:o,children:f,transition:h}=e,T=t?A0(i||{},t):i,g={__v_isVNode:!0,__v_skip:!0,type:e.type,props:T,key:T&&gd(T),ref:t&&t.ref?r&&a?et(a)?a.concat(fs(t)):[a,fs(t)]:fs(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:f,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Tt?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:h,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Pn(e.ssContent),ssFallback:e.ssFallback&&Pn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return h&&n&&ni(g,h.clone(g)),g}function It(e=" ",t=0){return jt(Fs,null,e,t)}function wr(e="",t=!1){return t?(rt(),la(gr,null,e)):jt(gr,null,e)}function qr(e){return e==null||typeof e=="boolean"?jt(gr):et(e)?jt(Tt,null,e.slice()):vs(e)?Ln(e):jt(Fs,null,String(e))}function Ln(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Pn(e)}function Cf(e,t){let r=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(et(t))r=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),Cf(e,i()),i._c&&(i._d=!0));return}else{r=32;const i=t._;!i&&!id(t)?t._ctx=Sr:i===3&&Sr&&(Sr.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ft(t)?(t={default:t,_ctx:Sr},r=32):(t=String(t),n&64?(r=16,t=[It(t)]):r=8);e.children=t,e.shapeFlag|=r}function A0(...e){const t={};for(let r=0;r<e.length;r++){const n=e[r];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=ws([t.class,n.class]));else if(i==="style")t.style=va([t.style,n.style]);else if(xs(i)){const a=t[i],o=n[i];o&&a!==o&&!(et(a)&&a.includes(o))&&(t[i]=a?[].concat(a,o):o)}else i!==""&&(t[i]=n[i])}return t}function Xr(e,t,r,n=null){Ur(e,t,7,[r,n])}const w0=td();let S0=0;function C0(e,t,r){const n=e.type,i=(t?t.appContext:e.appContext)||w0,a={uid:S0++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new nv(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:sd(n,i),emitsOptions:md(n,i),emit:null,emitted:null,propsDefaults:St,inheritAttrs:n.inheritAttrs,ctx:St,data:St,props:St,attrs:St,slots:St,refs:St,setupState:St,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=m0.bind(null,a),e.ce&&e.ce(a),a}let lr=null;const Lf=()=>lr||Sr;let _s,of;{const e=As(),t=(r,n)=>{let i;return(i=e[r])||(i=e[r]=[]),i.push(n),a=>{i.length>1?i.forEach(o=>o(a)):i[0](a)}};_s=t("__VUE_INSTANCE_SETTERS__",r=>lr=r),of=t("__VUE_SSR_SETTERS__",r=>ma=r)}const ga=e=>{const t=lr;return _s(e),e.scope.on(),()=>{e.scope.off(),_s(t)}},Bc=()=>{lr&&lr.scope.off(),_s(null)};function yd(e){return e.vnode.shapeFlag&4}let ma=!1;function L0(e,t=!1,r=!1){t&&of(t);const{props:n,children:i}=e.vnode,a=yd(e);t0(e,n,a,t),a0(e,i,r);const o=a?R0(e,t):void 0;return t&&of(!1),o}function R0(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Wv);const{setup:n}=r;if(n){Gn();const i=e.setupContext=n.length>1?F0(e):null,a=ga(e),o=_a(n,e,0,[e.props,i]),f=uu(o);if(Mn(),a(),(f||e.sp)&&!sa(e)&&Xu(e),f){if(o.then(Bc,Bc),t)return o.then(h=>{kc(e,h,t)}).catch(h=>{Cs(h,e,0)});e.asyncDep=o}else kc(e,o,t)}else bd(e,t)}function kc(e,t,r){ft(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Gt(t)&&(e.setupState=Gu(t)),bd(e,r)}let $c;function bd(e,t,r){const n=e.type;if(!e.render){if(!t&&$c&&!n.render){const i=n.template||wf(e).template;if(i){const{isCustomElement:a,compilerOptions:o}=e.appContext.config,{delimiters:f,compilerOptions:h}=n,T=Wt(Wt({isCustomElement:a,delimiters:f},o),h);n.render=$c(i,T)}}e.render=n.render||Qr}{const i=ga(e);Gn();try{Xv(e)}finally{Mn(),i()}}}const O0={get(e,t){return or(e,"get",""),e[t]}};function F0(e){const t=r=>{e.exposed=r||{}};return{attrs:new Proxy(e.attrs,O0),slots:e.slots,emit:e.emit,expose:t}}function Ps(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Gu(Tv(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in oa)return oa[r](e)},has(t,r){return r in t||r in oa}})):e.proxy}function P0(e){return ft(e)&&"__vccOpts"in e}const ya=(e,t)=>ef(e,t,ma);function D0(e,t,r){const n=arguments.length;return n===2?Gt(t)&&!et(t)?vs(t)?jt(e,null,[t]):jt(e,t):jt(e,null,t):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&vs(r)&&(r=[r]),jt(e,t,r))}const I0="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ff;const Uc=typeof window<"u"&&window.trustedTypes;if(Uc)try{ff=Uc.createPolicy("vue",{createHTML:e=>e})}catch{}const xd=ff?e=>ff.createHTML(e):e=>e,G0="http://www.w3.org/2000/svg",M0="http://www.w3.org/1998/Math/MathML",cn=typeof document<"u"?document:null,jc=cn&&cn.createElement("template"),N0={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,n)=>{const i=t==="svg"?cn.createElementNS(G0,e):t==="mathml"?cn.createElementNS(M0,e):r?cn.createElement(e,{is:r}):cn.createElement(e);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>cn.createTextNode(e),createComment:e=>cn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>cn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,r,n,i,a){const o=r?r.previousSibling:t.lastChild;if(i&&(i===a||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),r),!(i===a||!(i=i.nextSibling)););else{jc.innerHTML=xd(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const f=jc.content;if(n==="svg"||n==="mathml"){const h=f.firstChild;for(;h.firstChild;)f.appendChild(h.firstChild);f.removeChild(h)}t.insertBefore(f,r)}return[o?o.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}},An="transition",ea="animation",Pi=Symbol("_vtc"),Ed={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Td=Wt({},Vu,Ed),B0=e=>(e.displayName="Transition",e.props=Td,e),k0=B0((e,{slots:t})=>D0(Gv,Ad(e),t)),Zn=(e,t=[])=>{et(e)?e.forEach(r=>r(...t)):e&&e(...t)},Vc=e=>e?et(e)?e.some(t=>t.length>1):e.length>1:!1;function Ad(e){const t={};for(const Oe in e)Oe in Ed||(t[Oe]=e[Oe]);if(e.css===!1)return t;const{name:r="v",type:n,duration:i,enterFromClass:a=`${r}-enter-from`,enterActiveClass:o=`${r}-enter-active`,enterToClass:f=`${r}-enter-to`,appearFromClass:h=a,appearActiveClass:T=o,appearToClass:g=f,leaveFromClass:P=`${r}-leave-from`,leaveActiveClass:$=`${r}-leave-active`,leaveToClass:re=`${r}-leave-to`}=e,ue=$0(i),De=ue&&ue[0],qe=ue&&ue[1],{onBeforeEnter:Ie,onEnter:Qe,onEnterCancelled:$e,onLeave:be,onLeaveCancelled:Me,onBeforeAppear:ze=Ie,onAppear:xt=Qe,onAppearCancelled:Rt=$e}=t,Ve=(Oe,mt,ot,Ir)=>{Oe._enterCancelled=Ir,wn(Oe,mt?g:f),wn(Oe,mt?T:o),ot&&ot()},Je=(Oe,mt)=>{Oe._isLeaving=!1,wn(Oe,P),wn(Oe,re),wn(Oe,$),mt&&mt()},ht=Oe=>(mt,ot)=>{const Ir=Oe?xt:Qe,Yt=()=>Ve(mt,Oe,ot);Zn(Ir,[mt,Yt]),Hc(()=>{wn(mt,Oe?h:a),Yr(mt,Oe?g:f),Vc(Ir)||zc(mt,n,De,Yt)})};return Wt(t,{onBeforeEnter(Oe){Zn(Ie,[Oe]),Yr(Oe,a),Yr(Oe,o)},onBeforeAppear(Oe){Zn(ze,[Oe]),Yr(Oe,h),Yr(Oe,T)},onEnter:ht(!1),onAppear:ht(!0),onLeave(Oe,mt){Oe._isLeaving=!0;const ot=()=>Je(Oe,mt);Yr(Oe,P),Oe._enterCancelled?(Yr(Oe,$),lf()):(lf(),Yr(Oe,$)),Hc(()=>{Oe._isLeaving&&(wn(Oe,P),Yr(Oe,re),Vc(be)||zc(Oe,n,qe,ot))}),Zn(be,[Oe,ot])},onEnterCancelled(Oe){Ve(Oe,!1,void 0,!0),Zn($e,[Oe])},onAppearCancelled(Oe){Ve(Oe,!0,void 0,!0),Zn(Rt,[Oe])},onLeaveCancelled(Oe){Je(Oe),Zn(Me,[Oe])}})}function $0(e){if(e==null)return null;if(Gt(e))return[Ho(e.enter),Ho(e.leave)];{const t=Ho(e);return[t,t]}}function Ho(e){return qm(e)}function Yr(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.add(r)),(e[Pi]||(e[Pi]=new Set)).add(t)}function wn(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.remove(n));const r=e[Pi];r&&(r.delete(t),r.size||(e[Pi]=void 0))}function Hc(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let U0=0;function zc(e,t,r,n){const i=e._endId=++U0,a=()=>{i===e._endId&&n()};if(r!=null)return setTimeout(a,r);const{type:o,timeout:f,propCount:h}=wd(e,t);if(!o)return n();const T=o+"end";let g=0;const P=()=>{e.removeEventListener(T,$),a()},$=re=>{re.target===e&&++g>=h&&P()};setTimeout(()=>{g<h&&P()},f+1),e.addEventListener(T,$)}function wd(e,t){const r=window.getComputedStyle(e),n=ue=>(r[ue]||"").split(", "),i=n(`${An}Delay`),a=n(`${An}Duration`),o=Wc(i,a),f=n(`${ea}Delay`),h=n(`${ea}Duration`),T=Wc(f,h);let g=null,P=0,$=0;t===An?o>0&&(g=An,P=o,$=a.length):t===ea?T>0&&(g=ea,P=T,$=h.length):(P=Math.max(o,T),g=P>0?o>T?An:ea:null,$=g?g===An?a.length:h.length:0);const re=g===An&&/\b(transform|all)(,|$)/.test(n(`${An}Property`).toString());return{type:g,timeout:P,propCount:$,hasTransform:re}}function Wc(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((r,n)=>Xc(r)+Xc(e[n])))}function Xc(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function lf(){return document.body.offsetHeight}function j0(e,t,r){const n=e[Pi];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}const Yc=Symbol("_vod"),V0=Symbol("_vsh"),H0=Symbol(""),z0=/(^|;)\s*display\s*:/;function W0(e,t,r){const n=e.style,i=Xt(r);let a=!1;if(r&&!i){if(t)if(Xt(t))for(const o of t.split(";")){const f=o.slice(0,o.indexOf(":")).trim();r[f]==null&&ls(n,f,"")}else for(const o in t)r[o]==null&&ls(n,o,"");for(const o in r)o==="display"&&(a=!0),ls(n,o,r[o])}else if(i){if(t!==r){const o=n[H0];o&&(r+=";"+o),n.cssText=r,a=z0.test(r)}}else t&&e.removeAttribute("style");Yc in e&&(e[Yc]=a?n.display:"",e[V0]&&(n.display="none"))}const Kc=/\s*!important$/;function ls(e,t,r){if(et(r))r.forEach(n=>ls(e,t,n));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const n=X0(e,t);Kc.test(r)?e.setProperty(ii(n),r.replace(Kc,""),"important"):e[n]=r}}const qc=["Webkit","Moz","ms"],zo={};function X0(e,t){const r=zo[t];if(r)return r;let n=Fn(t);if(n!=="filter"&&n in e)return zo[t]=n;n=pu(n);for(let i=0;i<qc.length;i++){const a=qc[i]+n;if(a in e)return zo[t]=a}return t}const Qc="http://www.w3.org/1999/xlink";function Zc(e,t,r,n,i,a=rv(t)){n&&t.startsWith("xlink:")?r==null?e.removeAttributeNS(Qc,t.slice(6,t.length)):e.setAttributeNS(Qc,t,r):r==null||a&&!vu(r)?e.removeAttribute(t):e.setAttribute(t,a?"":In(r)?String(r):r)}function Jc(e,t,r,n,i){if(t==="innerHTML"||t==="textContent"){r!=null&&(e[t]=t==="innerHTML"?xd(r):r);return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const f=a==="OPTION"?e.getAttribute("value")||"":e.value,h=r==null?e.type==="checkbox"?"on":"":String(r);(f!==h||!("_value"in e))&&(e.value=h),r==null&&e.removeAttribute(t),e._value=r;return}let o=!1;if(r===""||r==null){const f=typeof e[t];f==="boolean"?r=vu(r):r==null&&f==="string"?(r="",o=!0):f==="number"&&(r=0,o=!0)}try{e[t]=r}catch{}o&&e.removeAttribute(i||t)}function Ai(e,t,r,n){e.addEventListener(t,r,n)}function Y0(e,t,r,n){e.removeEventListener(t,r,n)}const eu=Symbol("_vei");function K0(e,t,r,n,i=null){const a=e[eu]||(e[eu]={}),o=a[t];if(n&&o)o.value=n;else{const[f,h]=q0(t);if(n){const T=a[t]=J0(n,i);Ai(e,f,T,h)}else o&&(Y0(e,f,o,h),a[t]=void 0)}}const tu=/(?:Once|Passive|Capture)$/;function q0(e){let t;if(tu.test(e)){t={};let n;for(;n=e.match(tu);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ii(e.slice(2)),t]}let Wo=0;const Q0=Promise.resolve(),Z0=()=>Wo||(Q0.then(()=>Wo=0),Wo=Date.now());function J0(e,t){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;Ur(e_(n,r.value),t,5,[n])};return r.value=e,r.attached=Z0(),r}function e_(e,t){if(et(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const ru=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,t_=(e,t,r,n,i,a)=>{const o=i==="svg";t==="class"?j0(e,n,o):t==="style"?W0(e,r,n):xs(t)?df(t)||K0(e,t,r,n,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):r_(e,t,n,o))?(Jc(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Zc(e,t,n,o,a,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Xt(n))?Jc(e,Fn(t),n,a,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),Zc(e,t,n,o))};function r_(e,t,r,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&ru(t)&&ft(r));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return ru(t)&&Xt(r)?!1:t in e}const Sd=new WeakMap,Cd=new WeakMap,gs=Symbol("_moveCb"),nu=Symbol("_enterCb"),n_=e=>(delete e.props.mode,e),i_=n_({name:"TransitionGroup",props:Wt({},Td,{tag:String,moveClass:String}),setup(e,{slots:t}){const r=Lf(),n=ju();let i,a;return Qu(()=>{if(!i.length)return;const o=e.moveClass||`${e.name||"v"}-move`;if(!f_(i[0].el,r.vnode.el,o))return;i.forEach(a_),i.forEach(s_);const f=i.filter(o_);lf(),f.forEach(h=>{const T=h.el,g=T.style;Yr(T,o),g.transform=g.webkitTransform=g.transitionDuration="";const P=T[gs]=$=>{$&&$.target!==T||(!$||/transform$/.test($.propertyName))&&(T.removeEventListener("transitionend",P),T[gs]=null,wn(T,o))};T.addEventListener("transitionend",P)})}),()=>{const o=gt(e),f=Ad(o);let h=o.tag||Tt;if(i=[],a)for(let T=0;T<a.length;T++){const g=a[T];g.el&&g.el instanceof Element&&(i.push(g),ni(g,ha(g,f,n,r)),Sd.set(g,g.el.getBoundingClientRect()))}a=t.default?Af(t.default()):[];for(let T=0;T<a.length;T++){const g=a[T];g.key!=null&&ni(g,ha(g,f,n,r))}return jt(h,null,a)}}}),Ld=i_;function a_(e){const t=e.el;t[gs]&&t[gs](),t[nu]&&t[nu]()}function s_(e){Cd.set(e,e.el.getBoundingClientRect())}function o_(e){const t=Sd.get(e),r=Cd.get(e),n=t.left-r.left,i=t.top-r.top;if(n||i){const a=e.el.style;return a.transform=a.webkitTransform=`translate(${n}px,${i}px)`,a.transitionDuration="0s",e}}function f_(e,t,r){const n=e.cloneNode(),i=e[Pi];i&&i.forEach(f=>{f.split(/\s+/).forEach(h=>h&&n.classList.remove(h))}),r.split(/\s+/).forEach(f=>f&&n.classList.add(f)),n.style.display="none";const a=t.nodeType===1?t:t.parentNode;a.appendChild(n);const{hasTransform:o}=wd(n);return a.removeChild(n),o}const iu=e=>{const t=e.props["onUpdate:modelValue"]||!1;return et(t)?r=>ss(t,r):t};function l_(e){e.target.composing=!0}function au(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Xo=Symbol("_assign"),kr={created(e,{modifiers:{lazy:t,trim:r,number:n}},i){e[Xo]=iu(i);const a=n||i.props&&i.props.type==="number";Ai(e,t?"change":"input",o=>{if(o.target.composing)return;let f=e.value;r&&(f=f.trim()),a&&(f=Yo(f)),e[Xo](f)}),r&&Ai(e,"change",()=>{e.value=e.value.trim()}),t||(Ai(e,"compositionstart",l_),Ai(e,"compositionend",au),Ai(e,"change",au))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:r,modifiers:{lazy:n,trim:i,number:a}},o){if(e[Xo]=iu(o),e.composing)return;const f=(a||e.type==="number")&&!/^0\d/.test(e.value)?Yo(e.value):e.value,h=t??"";f!==h&&(document.activeElement===e&&e.type!=="range"&&(n&&t===r||i&&e.value.trim()===h)||(e.value=h))}},c_=["ctrl","shift","alt","meta"],u_={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>c_.some(r=>e[`${r}Key`]&&!t.includes(r))},Rd=(e,t)=>{const r=e._withMods||(e._withMods={}),n=t.join(".");return r[n]||(r[n]=(i,...a)=>{for(let o=0;o<t.length;o++){const f=u_[t[o]];if(f&&f(i,t))return}return e(i,...a)})},d_=Wt({patchProp:t_},N0);let su;function h_(){return su||(su=o0(d_))}const p_=(...e)=>{const t=h_().createApp(...e),{mount:r}=t;return t.mount=n=>{const i=v_(n);if(!i)return;const a=t._component;!ft(a)&&!a.render&&!a.template&&(a.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=r(i,!1,m_(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function m_(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function v_(e){return Xt(e)?document.querySelector(e):e}const Dn=()=>__,__=bf(new class{constructor(){Pe(this,"textures",new Map);Pe(this,"sounds",new Map);Pe(this,"loadings",0);Pe(this,"logs",[])}log(t){this.logs.push(t)}loadTexture(t,r){this.log(`Loading texture "${t}" from "${r}"`);const n=new Image;n.src=r,this.loadings++,n.onload=async()=>{this.log(`Texture "${t}" loaded`),this.textures.set(t,n),this.loadings--}}loadSound(t,r){this.log(`Loading sound "${t}" from "${r}"`);const n=new Audio(r);this.loadings++,n.oncanplaythrough=()=>{this.log(`Sound "${t}" loaded`),this.sounds.set(t,n),this.loadings--}}getTexture(t){return this.textures.get(t)}getSound(t){return this.sounds.get(t)}dropTexture(t){this.textures.has(t)&&this.textures.delete(t)}isFinished(){return this.loadings===0}}),Lt=()=>g_,g_=ai(new class{constructor(){Pe(this,"players",new Map);Pe(this,"steps");Pe(this,"plunder");Pe(this,"inning",0);Pe(this,"winner");Pe(this,"victoryScore",1e3);Pe(this,"quantity",0);Pe(this,"messages",new class{constructor(){Pe(this,"inner",new Map);Pe(this,"counter",0)}push(r,n=5e3){const i=this.counter++;return this.inner.set(i,r),n!==0&&setTimeout(()=>this.inner.delete(i),n),i}remove(r){this.inner.delete(r)}length(){return this.inner.size}toArray(){return Array.from(this.inner.values())}});Pe(this,"playersLabel",[]);Pe(this,"event");Pe(this,"traps",[])}setEvent(t,r,n,i=!1){return new Promise(a=>{const[o,f,h]=n;this.event={type:r,title:o,hasFail:i,description:f.trim().replaceAll(`
`,"<br>"),callback:async T=>{this.event=void 0,await h(t,T),a()}}})}withoutPlayer(t){return Array.from(this.players.values()).filter(r=>r!==t)}}),y_={class:"player"},b_=en({__name:"GameOver",setup(e){const t=Lt(),r=ya(()=>Array.from(t.players.values()));return(n,i)=>(rt(),lt(Tt,null,[i[0]||(i[0]=Xe("h1",null,"遊戲結束",-1)),It(" 最終贏家是... 第 "+pt(Ne(t).winner.id)+" 組！ ",1),(rt(!0),lt(Tt,null,Zr(r.value.toSorted((a,o)=>o.score-a.score),a=>(rt(),lt("div",y_,[Xe("h3",null,[It("第 "+pt(a.id)+" 組 ",1),Xe("i",null,pt(a===Ne(t).winner?"👑":"👻"),1)]),Xe("span",null,"分數: "+pt(a.score),1)]))),256))],64))}}),vn=(e,t)=>{const r=e.__vccOpts||e;for(const[n,i]of t)r[n]=i;return r},x_=vn(b_,[["__scopeId","data-v-7819b9bd"]]);function ys(e){let t=e.length;for(;t!=0;){let r=Math.floor(Math.random()*t);t--,[e[t],e[r]]=[e[r],e[t]]}}const Ds=e=>e[Math.floor(Math.random()*e.length)],E_=()=>[["吃好吃滿",`組內每個人都要裝滿半碗，並在1分鐘吃完。

成功 +80分
失敗 -20分`,(e,t)=>e.score+=t?80:-20],["喝好喝滿",`組內每個人都要裝滿兩杯飲料，並在30秒喝完。

成功 +50分
失敗 -20分`,(e,t)=>e.score+=t?50:-20],["記憶力比拚",`記住隊內至少三個人的名字並說出。

成功 +80分
失敗 -20分`,(e,t)=>e.score+=t?80:-20],["記憶力比拚",`播放歌曲，記住該段歌詞並唱出。

成功 +100分
失敗 -20分`,(e,t)=>e.score+=t?100:-20],["四不像",`團體做出指定團體動作，在1分鐘內完成。

成功 +50分
失敗 -20分`,(e,t)=>e.score+=t?50:-20],["有你真好",`找一位其他隊伍的人 (不可重複) 拍照，1分鐘內完成。

成功 +60分
失敗 -50分`,(e,t)=>e.score+=t?60:-50],["聖誕你不知",`回答聖誕節冷知識

聖誕老人住哪裡? (國家)
<span class="hide">芬蘭 羅瓦涅米</span>

成功 +50分
失敗 -20分`,(e,t)=>e.score+=t?50:-20],["聖誕你不知",`回答聖誕節冷知識

聖誕老人的馴鹿是公還是母?
<span class="hide">母的</span>

成功 +50分
失敗 -20分`,(e,t)=>e.score+=t?50:-20],["擠眉弄眼",`隊內互相使用便條紙貼在對方臉上某個部位，只能使用臉部肌肉把便條紙拿下，1分鐘內完成。

成功 +80分
失敗 -40分`,(e,t)=>e.score+=t?80:-40],["支援前線",`拿到主持人要求物品及數量，回到原位，1分鐘內完成。

成功 +60分
失敗 -20分`,(e,t)=>e.score+=t?60:-20],["比手劃腳",`指定一位並背對所有人，其他人提示直到猜到題目，3分鐘內完成。

成功 +80分
失敗 -40分`,(e,t)=>e.score+=t?80:-40],["誰的腳腳最靈活",`每位組員接力用腳夾裝有豆子的杯子依序傳遞，最後數量占1/4者成功。

成功 +80分
失敗 -20分`,(e,t)=>e.score+=t?80:-20],["誰是花栗鼠",`每位組員跟著簡易節拍唸出繞口令，1分鐘內完成。

成功 +60分
失敗 -20分`,(e,t)=>e.score+=t?60:-20],["Just dance",`玩家須在無音樂時跳出"APT"副歌舞蹈 或 freestyle 滿一分鐘即成功。

成功 +60分
失敗 -20分`,(e,t)=>e.score+=t?60:-20],["歌王大道",`玩家須唱出一首歌滿一分鐘即成功。

成功 +50分
失敗 -20分`,(e,t)=>e.score+=t?50:-20],["你畫我猜",`每位組員接力畫出題目，使猜題者猜，2分鐘內答對2題即成功。

成功 +50分
失敗 -20分`,(e,t)=>e.score+=t?50:-20],["屁屁超人",`玩家想出一句話，並依序用屁股寫出各個字，其餘玩家猜出即成功。

成功 +60分
失敗 -20分`,(e,t)=>e.score+=t?60:-20],["誰是老鼠屎",`玩家站成一排，利用頭或臉部把物品傳遞給下一個人，中途無掉落，2分鐘內完成即成功。

成功 +80分
失敗 -20分`,(e,t)=>e.score+=t?80:-20],["有你真好",`找一位工作人員 (不可重複) 拍照，1分鐘內完成。

成功 +60分
失敗 -40分`,(e,t)=>e.score+=t?60:-40]],T_=()=>Ds(E_());let as=class{constructor(){Pe(this,"callback");Pe(this,"accept",[]);Pe(this,"receive",!1);Pe(this,"text","")}async input(t,r=[]){return this.receive=!0,this.text=t,new Promise(n=>{this.accept=r,this.callback=n})}resolve(t){if(!this.callback)throw new Error("No callback");this.callback(t),this.callback=void 0,this.receive=!1,this.text="",this.accept=[]}};const mr=()=>A_;let A_=ai(new class{constructor(){Pe(this,"next",new as);Pe(this,"move",new as);Pe(this,"confirm",new as);Pe(this,"players",new as)}wait(t){return new Promise(r=>setTimeout(r,t))}});var Et=(e=>(e.UP="up",e.RIGHT="right",e.DOWN="down",e.LEFT="left",e))(Et||{}),hr=(e=>(e[e.Empty=0]="Empty",e[e.Spawner=1]="Spawner",e[e.Task=2]="Task",e[e.Opportunity=3]="Opportunity",e[e.Destiny=4]="Destiny",e[e.Punishment=5]="Punishment",e[e.Teleport=6]="Teleport",e[e.Prison=7]="Prison",e[e.Hospital=8]="Hospital",e))(hr||{});class On{constructor(t,r){Pe(this,"width");Pe(this,"height");Pe(this,"tiles");Pe(this,"flatTiles");Pe(this,"teleports",[]);Pe(this,"spawners",[]);Pe(this,"prisons",[]);Pe(this,"hospitals",[]);Pe(this,"punishments",[]);this.spawnPointDirections=r,this.tiles=t,this.width=t[0].length,this.height=t.length,this.flatTiles=this.tiles.flat();for(const[n,i]of this.flatTiles.entries())switch(i){case 6:{this.teleports.push(this.indexFromFlat(n));break}case 1:{this.spawners.push(this.indexFromFlat(n));break}case 5:{this.punishments.push(this.indexFromFlat(n));break}case 7:{this.prisons.push(this.indexFromFlat(n));break}case 8:{this.hospitals.push(this.indexFromFlat(n));break}}}getTile(t,r){return this.flatTiles[r*this.width+t]}indexFromFlat(t){const r=t%this.width,n=Math.floor(t/this.width);return[r,n]}indexFromPosition(t){const[r,n]=t;return n*this.width+r}spawnPoints(){const t=this.spawners;if(this.spawnPointDirections.length!==t.length){console.group("Spawner count not match directions"),console.log(`Directions: ${t.length}`),console.log(`Spawn Points: ${this.spawnPointDirections.length}`),console.group("Spawners: ");for(const n of t){const i=Array.from(this.nextPosition(n).keys());console.log(`Spawner: ${n}, Accepts: ${i}`)}throw console.groupEnd(),console.groupEnd(),new Error("spawner count not match directions")}return this.spawnPointDirections.map((n,i)=>[t[i],n])}nextPosition(t,r){const n=new Map([[Et.UP,[0,-1]],[Et.RIGHT,[1,0]],[Et.DOWN,[0,1]],[Et.LEFT,[-1,0]]]),i={[Et.UP]:Et.DOWN,[Et.RIGHT]:Et.LEFT,[Et.DOWN]:Et.UP,[Et.LEFT]:Et.RIGHT}[r],a=new Map;for(const[o,f]of n.entries()){if(o===i)continue;const h=t[0]+f[0],T=t[1]+f[1];h<0||T<0||h>=this.width||T>=this.height||this.getTile(h,T)===0||a.set(o,f)}return a}static tileColor(t){return{0:"black",1:"green",2:"blue",3:"yellow",4:"orange",5:"red",6:"purple",7:"gray",8:"white"}[t]}static tileText(t){return{0:"空地",1:"出生點",2:"任務",3:"機會",4:"命運",5:"懲罰",6:"傳送門",7:"監獄",8:"醫院"}[t]}static tileImage(t){const r=Dn();if(t===0)return;const n="tile-"+{1:"spawner",2:"task",3:"opportunity",4:"destiny",5:"punishment",6:"teleport",7:"prison",8:"hospital"}[t];return r.getTexture(n)}static stringToTile(t){const r={空:0,出:1,任:2,機:3,命:4,懲:5,傳:6,監:7,醫:8}[t];if(r===void 0)throw new Error("Invalid tile");return r}}Pe(On,"TILE_SIZE",64);const Lr=()=>C_,w_=`
出任機傳命出命任機傳出
命空空空懲空命空空空懲
機空空空傳空機空空空傳
機空空空傳空機空空空傳
傳監醫任命任傳監醫任懲
出空空空命空傳空空空出
命任機傳命機命任機傳命
命空空空懲空命空空空懲
機空空空傳空機空空空傳
命空空空懲空命空空空懲
出監醫任命出傳監醫任出
`.trim(),S_=[Et.RIGHT,Et.RIGHT,Et.DOWN,Et.UP,Et.DOWN,Et.UP,Et.LEFT,Et.LEFT],C_=new On(w_.split(`
`).map(e=>e.split("").map(On.stringToTile)),S_),L_=()=>[["暴風雪","全部人受到 1 點傷害",e=>{const t=Lt();for(const r of t.players.values())r.damage(1)}],["掉錢包","遺失 25% 分數 (最高 100, 最低 20)",e=>{const t=Math.min(100,Math.max(20,Math.floor(e.score*.25)));e.score-=t}],["刑事拘留","傳送並關入監獄",async e=>{const r=Lr().prisons;let n=1/0,i=r[0];for(const a of r){const o=e.position.x-a[0],f=e.position.y-a[1],h=o*o+f*f;h<n&&(n=h,i=a)}await e.teleport(i),await e.trigger(hr.Prison),await mr().wait(500)}],["大流感","全部玩家傳送至醫院，使所有人降低至3點血",async e=>{const t=Lt(),n=Lr().hospitals,i=n[Math.floor(Math.random()*n.length)];for(const a of t.players.values())a.teleport(i),a.health=Math.min(3,a.health);await mr().wait(500)}],["海克斯科技","全部人互相傳送",async e=>{const t=Lt(),r=Array.from(t.players.values()),n=r.map(i=>[i.position.x,i.position.y]);ys(n);for(const i in r){const a=r[i],o=n[i];a.teleport(o)}await mr().wait(500)}],["大聖人","向所有分享自己的金錢，但也分享給自己",e=>{const t=Lt(),r=t.players.size,n=Math.floor(e.score/r);for(const i of t.players.values())e.score-=n,i.score+=n}],["監獄超收","全部玩家傳送到監獄",async e=>{const t=Lt(),n=Lr().prisons,i=n[Math.floor(Math.random()*n.length)];for(const a of t.players.values())a.teleport(i),a.trigger(hr.Prison);await mr().wait(500)}],["最後的晚餐","全部人承受不足致命的傷害。(除非剩下1滴血)",e=>{const t=Lt();for(const r of t.players.values()){const n=Math.max(1,Math.floor(Math.random()*r.health));r.damage(n)}}],["雪球大戰","隨機攻擊玩家",async e=>{const r=Lt().withoutPlayer(e),n=r[Math.floor(Math.random()*r.length)];await e.attack(n,!0)}],["平安夜","全部人回復至滿血",e=>{const t=Lt();for(const r of t.players.values())r.health=Fi}],["聖誕狂歡曲","全部人下次移動時獲得雙倍骰子",e=>{const t=Lt();for(const r of t.players.values())r.doubleStep++}],["北極探險","玩家前進到最近的懲罰格接受懲罰",async e=>{const r=Lr().punishments;let n=r[0],i=1/0;for(const a of r){const o=Math.abs(e.position.x-a[0])+Math.abs(e.position.y-a[1]);o<i&&(i=o,n=a)}await e.teleport(n),await e.trigger(hr.Punishment)}],["金錢危機","須支付5%分數給其餘玩家",e=>{const t=Lt(),r=Math.floor(e.score*.05);for(const n of t.players.values())n!==e&&(e.score-=r,n.score+=r)}]],R_=()=>Ds(L_()),O_=()=>[["致命節奏","重骰，繼續前進。",async e=>{const t=Lt();t.steps=Math.floor(Math.random()*6)+1,e.doubleStep&&(t.steps+=Math.floor(Math.random()*6)+1,e.doubleStep--),await mr().next.input("繼續行動")}],["量子科技","與隨機一名玩家交換位置。",async e=>{const r=Lt().withoutPlayer(e),n=r[Math.floor(Math.random()*r.length)],i=n.position.clone();n.teleportPosition(e.position),await e.teleportPosition(i)}],["背刺","移動至分數最高(不含自己)一位玩家並攻擊他。",async e=>{const r=Lt().withoutPlayer(e),n=r.reduce((i,a)=>a.score>i.score?a:i,r[0]);await e.teleportPosition(n.position),await e.attack(n,!0)}],["共同富裕","與分數最高者，平分分數。(本身為最高時，與最低分者平分)",e=>{const r=Lt().withoutPlayer(e),n=r.reduce((f,h)=>h.score>f.score?h:f,r[0]),i=r.reduce((f,h)=>h.score<f.score?h:f,r[0]),a=e.score>=n.score?i:n,o=e.score+a.score;e.score=Math.floor(o/2),a.score=o-e.score}],["聖誕交換禮物","選擇一位玩家，接受懲罰。",async e=>{const t=Lt();(await mr().players.input("選擇一位玩家",t.withoutPlayer(e))).trigger(hr.Punishment)}],["聖誕禮物","獲得 30 分、回復一點生命值。",e=>{e.score+=30,e.health+=1}],["聖誕禮物","扣至1點生命值、獲得 60% 分數 (最高 300 分，最低 100 分)",e=>{e.health=1;let t=Math.floor(e.score*.6);t=Math.max(100,Math.min(t,300)),e.score+=t}],["聖誕夜","除你以外所有人暈眩一回合",e=>{Lt().withoutPlayer(e).forEach(n=>n.dizziness++)}]],F_=()=>Ds(O_()),P_=()=>[["懲罰1","扣除 20 分",e=>e.score-=20]],D_=()=>Ds(P_()),Od=()=>I_,I_=ai(new class{constructor(){Pe(this,"inner",new Map);Pe(this,"counter",0)}effect(t,r=1e3){const n=this.counter++;this.inner.set(n,t),setTimeout(()=>this.inner.delete(n),r)}sound(t){const n=Dn().getSound(t);if(!n)throw new Error("Sound not found");return n.currentTime=0,n.play(),n}check(t,r){return t===r.name}});var G_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function M_(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Fd={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(G_,function(){var r=function(s){return s instanceof Uint8Array||s instanceof Uint16Array||s instanceof Uint32Array||s instanceof Int8Array||s instanceof Int16Array||s instanceof Int32Array||s instanceof Float32Array||s instanceof Float64Array||s instanceof Uint8ClampedArray},n=function(s,u){for(var _=Object.keys(u),G=0;G<_.length;++G)s[_[G]]=u[_[G]];return s},i=`
`;function a(s){return typeof atob<"u"?atob(s):"base64:"+s}function o(s){var u=new Error("(regl) "+s);throw console.error(u),u}function f(s,u){s||o(u)}function h(s){return s?": "+s:""}function T(s,u,_){s in u||o("unknown parameter ("+s+")"+h(_)+". possible values: "+Object.keys(u).join())}function g(s,u){r(s)||o("invalid parameter type"+h(u)+". must be a typed array")}function P(s,u){switch(u){case"number":return typeof s=="number";case"object":return typeof s=="object";case"string":return typeof s=="string";case"boolean":return typeof s=="boolean";case"function":return typeof s=="function";case"undefined":return typeof s>"u";case"symbol":return typeof s=="symbol"}}function $(s,u,_){P(s,u)||o("invalid parameter type"+h(_)+". expected "+u+", got "+typeof s)}function re(s,u){s>=0&&(s|0)===s||o("invalid parameter type, ("+s+")"+h(u)+". must be a nonnegative integer")}function ue(s,u,_){u.indexOf(s)<0&&o("invalid value"+h(_)+". must be one of: "+u)}var De=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function qe(s){Object.keys(s).forEach(function(u){De.indexOf(u)<0&&o('invalid regl constructor argument "'+u+'". must be one of '+De)})}function Ie(s,u){for(s=s+"";s.length<u;)s=" "+s;return s}function Qe(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function $e(s,u){this.number=s,this.line=u,this.errors=[]}function be(s,u,_){this.file=s,this.line=u,this.message=_}function Me(){var s=new Error,u=(s.stack||s).toString(),_=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(u);if(_)return _[1];var G=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(u);return G?G[1]:"unknown"}function ze(){var s=new Error,u=(s.stack||s).toString(),_=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(u);if(_)return _[1];var G=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(u);return G?G[1]:"unknown"}function xt(s,u){var _=s.split(`
`),G=1,U=0,I={unknown:new Qe,0:new Qe};I.unknown.name=I[0].name=u||Me(),I.unknown.lines.push(new $e(0,""));for(var B=0;B<_.length;++B){var X=_[B],W=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(X);if(W)switch(W[1]){case"line":var Z=/(\d+)(\s+\d+)?/.exec(W[2]);Z&&(G=Z[1]|0,Z[2]&&(U=Z[2]|0,U in I||(I[U]=new Qe)));break;case"define":var ee=/SHADER_NAME(_B64)?\s+(.*)$/.exec(W[2]);ee&&(I[U].name=ee[1]?a(ee[2]):ee[2]);break}I[U].lines.push(new $e(G++,X))}return Object.keys(I).forEach(function(J){var oe=I[J];oe.lines.forEach(function(Y){oe.index[Y.number]=Y})}),I}function Rt(s){var u=[];return s.split(`
`).forEach(function(_){if(!(_.length<5)){var G=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(_);G?u.push(new be(G[1]|0,G[2]|0,G[3].trim())):_.length>0&&u.push(new be("unknown",0,_))}}),u}function Ve(s,u){u.forEach(function(_){var G=s[_.file];if(G){var U=G.index[_.line];if(U){U.errors.push(_),G.hasErrors=!0;return}}s.unknown.hasErrors=!0,s.unknown.lines[0].errors.push(_)})}function Je(s,u,_,G,U){if(!s.getShaderParameter(u,s.COMPILE_STATUS)){var I=s.getShaderInfoLog(u),B=G===s.FRAGMENT_SHADER?"fragment":"vertex";Ot(_,"string",B+" shader source must be a string",U);var X=xt(_,U),W=Rt(I);Ve(X,W),Object.keys(X).forEach(function(Z){var ee=X[Z];if(!ee.hasErrors)return;var J=[""],oe=[""];function Y(Q,C){J.push(Q),oe.push(C||"")}Y("file number "+Z+": "+ee.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),ee.lines.forEach(function(Q){if(Q.errors.length>0){Y(Ie(Q.number,4)+"|  ","background-color:yellow; font-weight:bold"),Y(Q.line+i,"color:red; background-color:yellow; font-weight:bold");var C=0;Q.errors.forEach(function(N){var q=N.message,ye=/^\s*'(.*)'\s*:\s*(.*)$/.exec(q);if(ye){var z=ye[1];switch(q=ye[2],z){case"assign":z="=";break}C=Math.max(Q.line.indexOf(z,C),0)}else C=0;Y(Ie("| ",6)),Y(Ie("^^^",C+3)+i,"font-weight:bold"),Y(Ie("| ",6)),Y(q+i,"font-weight:bold")}),Y(Ie("| ",6)+i)}else Y(Ie(Q.number,4)+"|  "),Y(Q.line+i,"color:red")}),typeof document<"u"&&!window.chrome?(oe[0]=J.join("%c"),console.log.apply(console,oe)):console.log(J.join(""))}),f.raise("Error compiling "+B+" shader, "+X[0].name)}}function ht(s,u,_,G,U){if(!s.getProgramParameter(u,s.LINK_STATUS)){var I=s.getProgramInfoLog(u),B=xt(_,U),X=xt(G,U),W='Error linking program with vertex shader, "'+X[0].name+'", and fragment shader "'+B[0].name+'"';typeof document<"u"?console.log("%c"+W+i+"%c"+I,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(W+i+I),f.raise(W)}}function Oe(s){s._commandRef=Me()}function mt(s,u,_,G){Oe(s);function U(W){return W?G.id(W):0}s._fragId=U(s.static.frag),s._vertId=U(s.static.vert);function I(W,Z){Object.keys(Z).forEach(function(ee){W[G.id(ee)]=!0})}var B=s._uniformSet={};I(B,u.static),I(B,u.dynamic);var X=s._attributeSet={};I(X,_.static),I(X,_.dynamic),s._hasCount="count"in s.static||"count"in s.dynamic||"elements"in s.static||"elements"in s.dynamic}function ot(s,u){var _=ze();o(s+" in command "+(u||Me())+(_==="unknown"?"":" called from "+_))}function Ir(s,u,_){s||ot(u,_||Me())}function Yt(s,u,_,G){s in u||ot("unknown parameter ("+s+")"+h(_)+". possible values: "+Object.keys(u).join(),G||Me())}function Ot(s,u,_,G){P(s,u)||ot("invalid parameter type"+h(_)+". expected "+u+", got "+typeof s,G||Me())}function At(s){s()}function tn(s,u,_){s.texture?ue(s.texture._texture.internalformat,u,"unsupported texture format for attachment"):ue(s.renderbuffer._renderbuffer.format,_,"unsupported renderbuffer format for attachment")}var rn=33071,jr=9728,Rr=9984,xa=9985,Gs=9986,Ms=9987,Nn=5120,si=5121,Ii=5122,Ea=5123,Bn=5124,Ta=5125,Gi=5126,A=32819,R=32820,H=33635,le=34042,ie=36193,te={};te[Nn]=te[si]=1,te[Ii]=te[Ea]=te[ie]=te[H]=te[A]=te[R]=2,te[Bn]=te[Ta]=te[Gi]=te[le]=4;function Fe(s,u){return s===R||s===A||s===H?2:s===le?4:te[s]*u}function Te(s){return!(s&s-1)&&!!s}function Se(s,u,_){var G,U=u.width,I=u.height,B=u.channels;f(U>0&&U<=_.maxTextureSize&&I>0&&I<=_.maxTextureSize,"invalid texture shape"),(s.wrapS!==rn||s.wrapT!==rn)&&f(Te(U)&&Te(I),"incompatible wrap mode for texture, both width and height must be power of 2"),u.mipmask===1?U!==1&&I!==1&&f(s.minFilter!==Rr&&s.minFilter!==Gs&&s.minFilter!==xa&&s.minFilter!==Ms,"min filter requires mipmap"):(f(Te(U)&&Te(I),"texture must be a square power of 2 to support mipmapping"),f(u.mipmask===(U<<1)-1,"missing or incomplete mipmap data")),u.type===Gi&&(_.extensions.indexOf("oes_texture_float_linear")<0&&f(s.minFilter===jr&&s.magFilter===jr,"filter not supported, must enable oes_texture_float_linear"),f(!s.genMipmaps,"mipmap generation not supported with float textures"));var X=u.images;for(G=0;G<16;++G)if(X[G]){var W=U>>G,Z=I>>G;f(u.mipmask&1<<G,"missing mipmap data");var ee=X[G];if(f(ee.width===W&&ee.height===Z,"invalid shape for mip images"),f(ee.format===u.format&&ee.internalformat===u.internalformat&&ee.type===u.type,"incompatible type for mip image"),!ee.compressed)if(ee.data){var J=Math.ceil(Fe(ee.type,B)*W/ee.unpackAlignment)*ee.unpackAlignment;f(ee.data.byteLength===J*Z,"invalid data for image, buffer size is inconsistent with image format")}else ee.element||ee.copy}else s.genMipmaps||f((u.mipmask&1<<G)===0,"extra mipmap data");u.compressed&&f(!s.genMipmaps,"mipmap generation for compressed images not supported")}function de(s,u,_,G){var U=s.width,I=s.height,B=s.channels;f(U>0&&U<=G.maxTextureSize&&I>0&&I<=G.maxTextureSize,"invalid texture shape"),f(U===I,"cube map must be square"),f(u.wrapS===rn&&u.wrapT===rn,"wrap mode not supported by cube map");for(var X=0;X<_.length;++X){var W=_[X];f(W.width===U&&W.height===I,"inconsistent cube map face shape"),u.genMipmaps&&(f(!W.compressed,"can not generate mipmap for compressed textures"),f(W.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Z=W.images,ee=0;ee<16;++ee){var J=Z[ee];if(J){var oe=U>>ee,Y=I>>ee;f(W.mipmask&1<<ee,"missing mipmap data"),f(J.width===oe&&J.height===Y,"invalid shape for mip images"),f(J.format===s.format&&J.internalformat===s.internalformat&&J.type===s.type,"incompatible type for mip image"),J.compressed||(J.data?f(J.data.byteLength===oe*Y*Math.max(Fe(J.type,B),J.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):J.element||J.copy)}}}}var l=n(f,{optional:At,raise:o,commandRaise:ot,command:Ir,parameter:T,commandParameter:Yt,constructor:qe,type:$,commandType:Ot,isTypedArray:g,nni:re,oneOf:ue,shaderError:Je,linkError:ht,callSite:ze,saveCommandRef:Oe,saveDrawInfo:mt,framebufferFormat:tn,guessCommand:Me,texture2D:Se,textureCube:de}),Ge=0,We=0,tt=5,ut=6;function vt(s,u){this.id=Ge++,this.type=s,this.data=u}function _t(s){return s.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function qt(s){if(s.length===0)return[];var u=s.charAt(0),_=s.charAt(s.length-1);if(s.length>1&&u===_&&(u==='"'||u==="'"))return['"'+_t(s.substr(1,s.length-2))+'"'];var G=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(s);if(G)return qt(s.substr(0,G.index)).concat(qt(G[1])).concat(qt(s.substr(G.index+G[0].length)));var U=s.split(".");if(U.length===1)return['"'+_t(s)+'"'];for(var I=[],B=0;B<U.length;++B)I=I.concat(qt(U[B]));return I}function Qt(s){return"["+qt(s).join("][")+"]"}function yr(s,u){return new vt(s,Qt(u+""))}function ur(s){return typeof s=="function"&&!s._reglType||s instanceof vt}function _n(s,u){if(typeof s=="function")return new vt(We,s);if(typeof s=="number"||typeof s=="boolean")return new vt(tt,s);if(Array.isArray(s))return new vt(ut,s.map(function(_,G){return _n(_,u+"["+G+"]")}));if(s instanceof vt)return s;l(!1,"invalid option type in uniform "+u)}var ar={DynamicVariable:vt,define:yr,isDynamic:ur,unbox:_n,accessor:Qt},nr={next:typeof requestAnimationFrame=="function"?function(s){return requestAnimationFrame(s)}:function(s){return setTimeout(s,16)},cancel:typeof cancelAnimationFrame=="function"?function(s){return cancelAnimationFrame(s)}:clearTimeout},br=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Aa(){var s={"":0},u=[""];return{id:function(_){var G=s[_];return G||(G=s[_]=u.length,u.push(_),G)},str:function(_){return u[_]}}}function Md(s,u,_){var G=document.createElement("canvas");n(G.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),s.appendChild(G),s===document.body&&(G.style.position="absolute",n(s.style,{margin:0,padding:0}));function U(){var X=window.innerWidth,W=window.innerHeight;if(s!==document.body){var Z=G.getBoundingClientRect();X=Z.right-Z.left,W=Z.bottom-Z.top}G.width=_*X,G.height=_*W}var I;s!==document.body&&typeof ResizeObserver=="function"?(I=new ResizeObserver(function(){setTimeout(U)}),I.observe(s)):window.addEventListener("resize",U,!1);function B(){I?I.disconnect():window.removeEventListener("resize",U),s.removeChild(G)}return U(),{canvas:G,onDestroy:B}}function Nd(s,u){function _(G){try{return s.getContext(G,u)}catch{return null}}return _("webgl")||_("experimental-webgl")||_("webgl-experimental")}function Bd(s){return typeof s.nodeName=="string"&&typeof s.appendChild=="function"&&typeof s.getBoundingClientRect=="function"}function kd(s){return typeof s.drawArrays=="function"||typeof s.drawElements=="function"}function Of(s){return typeof s=="string"?s.split():(l(Array.isArray(s),"invalid extension array"),s)}function Ff(s){return typeof s=="string"?(l(typeof document<"u","not supported outside of DOM"),document.querySelector(s)):s}function $d(s){var u=s||{},_,G,U,I,B={},X=[],W=[],Z=typeof window>"u"?1:window.devicePixelRatio,ee=!1,J=function(Q){Q&&l.raise(Q)},oe=function(){};if(typeof u=="string"?(l(typeof document<"u","selector queries only supported in DOM environments"),_=document.querySelector(u),l(_,"invalid query string for element")):typeof u=="object"?Bd(u)?_=u:kd(u)?(I=u,U=I.canvas):(l.constructor(u),"gl"in u?I=u.gl:"canvas"in u?U=Ff(u.canvas):"container"in u&&(G=Ff(u.container)),"attributes"in u&&(B=u.attributes,l.type(B,"object","invalid context attributes")),"extensions"in u&&(X=Of(u.extensions)),"optionalExtensions"in u&&(W=Of(u.optionalExtensions)),"onDone"in u&&(l.type(u.onDone,"function","invalid or missing onDone callback"),J=u.onDone),"profile"in u&&(ee=!!u.profile),"pixelRatio"in u&&(Z=+u.pixelRatio,l(Z>0,"invalid pixel ratio"))):l.raise("invalid arguments to regl"),_&&(_.nodeName.toLowerCase()==="canvas"?U=_:G=_),!I){if(!U){l(typeof document<"u","must manually specify webgl context outside of DOM environments");var Y=Md(G||document.body,J,Z);if(!Y)return null;U=Y.canvas,oe=Y.onDestroy}B.premultipliedAlpha===void 0&&(B.premultipliedAlpha=!0),I=Nd(U,B)}return I?{gl:I,canvas:U,container:G,extensions:X,optionalExtensions:W,pixelRatio:Z,profile:ee,onDone:J,onDestroy:oe}:(oe(),J("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Ud(s,u){var _={};function G(B){l.type(B,"string","extension name must be string");var X=B.toLowerCase(),W;try{W=_[X]=s.getExtension(X)}catch{}return!!W}for(var U=0;U<u.extensions.length;++U){var I=u.extensions[U];if(!G(I))return u.onDestroy(),u.onDone('"'+I+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return u.optionalExtensions.forEach(G),{extensions:_,restore:function(){Object.keys(_).forEach(function(B){if(_[B]&&!G(B))throw new Error("(regl): error restoring extension "+B)})}}}function xr(s,u){for(var _=Array(s),G=0;G<s;++G)_[G]=u(G);return _}var jd=5120,Vd=5121,Hd=5122,zd=5123,Wd=5124,Xd=5125,Yd=5126;function Kd(s){for(var u=16;u<=1<<28;u*=16)if(s<=u)return u;return 0}function Pf(s){var u,_;return u=(s>65535)<<4,s>>>=u,_=(s>255)<<3,s>>>=_,u|=_,_=(s>15)<<2,s>>>=_,u|=_,_=(s>3)<<1,s>>>=_,u|=_,u|s>>1}function Df(){var s=xr(8,function(){return[]});function u(I){var B=Kd(I),X=s[Pf(B)>>2];return X.length>0?X.pop():new ArrayBuffer(B)}function _(I){s[Pf(I.byteLength)>>2].push(I)}function G(I,B){var X=null;switch(I){case jd:X=new Int8Array(u(B),0,B);break;case Vd:X=new Uint8Array(u(B),0,B);break;case Hd:X=new Int16Array(u(2*B),0,B);break;case zd:X=new Uint16Array(u(2*B),0,B);break;case Wd:X=new Int32Array(u(4*B),0,B);break;case Xd:X=new Uint32Array(u(4*B),0,B);break;case Yd:X=new Float32Array(u(4*B),0,B);break;default:return null}return X.length!==B?X.subarray(0,B):X}function U(I){_(I.buffer)}return{alloc:u,free:_,allocType:G,freeType:U}}var kt=Df();kt.zero=Df();var qd=3408,Qd=3410,Zd=3411,Jd=3412,eh=3413,th=3414,rh=3415,nh=33901,ih=33902,ah=3379,sh=3386,oh=34921,fh=36347,lh=36348,ch=35661,uh=35660,dh=34930,hh=36349,ph=34076,mh=34024,vh=7936,_h=7937,gh=7938,yh=35724,bh=34047,xh=36063,Eh=34852,wa=3553,If=34067,Th=34069,Ah=33984,Mi=6408,Ns=5126,Gf=5121,Bs=36160,wh=36053,Sh=36064,Ch=16384,Lh=function(s,u){var _=1;u.ext_texture_filter_anisotropic&&(_=s.getParameter(bh));var G=1,U=1;u.webgl_draw_buffers&&(G=s.getParameter(Eh),U=s.getParameter(xh));var I=!!u.oes_texture_float;if(I){var B=s.createTexture();s.bindTexture(wa,B),s.texImage2D(wa,0,Mi,1,1,0,Mi,Ns,null);var X=s.createFramebuffer();if(s.bindFramebuffer(Bs,X),s.framebufferTexture2D(Bs,Sh,wa,B,0),s.bindTexture(wa,null),s.checkFramebufferStatus(Bs)!==wh)I=!1;else{s.viewport(0,0,1,1),s.clearColor(1,0,0,1),s.clear(Ch);var W=kt.allocType(Ns,4);s.readPixels(0,0,1,1,Mi,Ns,W),s.getError()?I=!1:(s.deleteFramebuffer(X),s.deleteTexture(B),I=W[0]===1),kt.freeType(W)}}var Z=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),ee=!0;if(!Z){var J=s.createTexture(),oe=kt.allocType(Gf,36);s.activeTexture(Ah),s.bindTexture(If,J),s.texImage2D(Th,0,Mi,3,3,0,Mi,Gf,oe),kt.freeType(oe),s.bindTexture(If,null),s.deleteTexture(J),ee=!s.getError()}return{colorBits:[s.getParameter(Qd),s.getParameter(Zd),s.getParameter(Jd),s.getParameter(eh)],depthBits:s.getParameter(th),stencilBits:s.getParameter(rh),subpixelBits:s.getParameter(qd),extensions:Object.keys(u).filter(function(Y){return!!u[Y]}),maxAnisotropic:_,maxDrawbuffers:G,maxColorAttachments:U,pointSizeDims:s.getParameter(nh),lineWidthDims:s.getParameter(ih),maxViewportDims:s.getParameter(sh),maxCombinedTextureUnits:s.getParameter(ch),maxCubeMapSize:s.getParameter(ph),maxRenderbufferSize:s.getParameter(mh),maxTextureUnits:s.getParameter(dh),maxTextureSize:s.getParameter(ah),maxAttributes:s.getParameter(oh),maxVertexUniforms:s.getParameter(fh),maxVertexTextureUnits:s.getParameter(uh),maxVaryingVectors:s.getParameter(lh),maxFragmentUniforms:s.getParameter(hh),glsl:s.getParameter(yh),renderer:s.getParameter(_h),vendor:s.getParameter(vh),version:s.getParameter(gh),readFloat:I,npotTextureCube:ee}};function Gr(s){return!!s&&typeof s=="object"&&Array.isArray(s.shape)&&Array.isArray(s.stride)&&typeof s.offset=="number"&&s.shape.length===s.stride.length&&(Array.isArray(s.data)||r(s.data))}var Er=function(s){return Object.keys(s).map(function(u){return s[u]})},Sa={shape:Ph,flatten:Fh};function Rh(s,u,_){for(var G=0;G<u;++G)_[G]=s[G]}function Oh(s,u,_,G){for(var U=0,I=0;I<u;++I)for(var B=s[I],X=0;X<_;++X)G[U++]=B[X]}function Mf(s,u,_,G,U,I){for(var B=I,X=0;X<u;++X)for(var W=s[X],Z=0;Z<_;++Z)for(var ee=W[Z],J=0;J<G;++J)U[B++]=ee[J]}function Nf(s,u,_,G,U){for(var I=1,B=_+1;B<u.length;++B)I*=u[B];var X=u[_];if(u.length-_===4){var W=u[_+1],Z=u[_+2],ee=u[_+3];for(B=0;B<X;++B)Mf(s[B],W,Z,ee,G,U),U+=I}else for(B=0;B<X;++B)Nf(s[B],u,_+1,G,U),U+=I}function Fh(s,u,_,G){var U=1;if(u.length)for(var I=0;I<u.length;++I)U*=u[I];else U=0;var B=G||kt.allocType(_,U);switch(u.length){case 0:break;case 1:Rh(s,u[0],B);break;case 2:Oh(s,u[0],u[1],B);break;case 3:Mf(s,u[0],u[1],u[2],B,0);break;default:Nf(s,u,0,B,0)}return B}function Ph(s){for(var u=[],_=s;_.length;_=_[0])u.push(_.length);return u}var ks={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Dh=5120,Ih=5122,Gh=5124,Mh=5121,Nh=5123,Bh=5125,kh=5126,$h=5126,kn={int8:Dh,int16:Ih,int32:Gh,uint8:Mh,uint16:Nh,uint32:Bh,float:kh,float32:$h},Uh=35048,jh=35040,Ca={dynamic:Uh,stream:jh,static:35044},$s=Sa.flatten,Bf=Sa.shape,kf=35044,Vh=35040,Us=5121,js=5126,gn=[];gn[5120]=1,gn[5122]=2,gn[5124]=4,gn[5121]=1,gn[5123]=2,gn[5125]=4,gn[5126]=4;function La(s){return ks[Object.prototype.toString.call(s)]|0}function $f(s,u){for(var _=0;_<u.length;++_)s[_]=u[_]}function Uf(s,u,_,G,U,I,B){for(var X=0,W=0;W<_;++W)for(var Z=0;Z<G;++Z)s[X++]=u[U*W+I*Z+B]}function Hh(s,u,_,G){var U=0,I={};function B(C){this.id=U++,this.buffer=s.createBuffer(),this.type=C,this.usage=kf,this.byteLength=0,this.dimension=1,this.dtype=Us,this.persistentData=null,_.profile&&(this.stats={size:0})}B.prototype.bind=function(){s.bindBuffer(this.type,this.buffer)},B.prototype.destroy=function(){oe(this)};var X=[];function W(C,N){var q=X.pop();return q||(q=new B(C)),q.bind(),J(q,N,Vh,0,1,!1),q}function Z(C){X.push(C)}function ee(C,N,q){C.byteLength=N.byteLength,s.bufferData(C.type,N,q)}function J(C,N,q,ye,z,_e){var pe;if(C.usage=q,Array.isArray(N)){if(C.dtype=ye||js,N.length>0){var Be;if(Array.isArray(N[0])){pe=Bf(N);for(var j=1,k=1;k<pe.length;++k)j*=pe[k];C.dimension=j,Be=$s(N,pe,C.dtype),ee(C,Be,q),_e?C.persistentData=Be:kt.freeType(Be)}else if(typeof N[0]=="number"){C.dimension=z;var Ae=kt.allocType(C.dtype,N.length);$f(Ae,N),ee(C,Ae,q),_e?C.persistentData=Ae:kt.freeType(Ae)}else r(N[0])?(C.dimension=N[0].length,C.dtype=ye||La(N[0])||js,Be=$s(N,[N.length,N[0].length],C.dtype),ee(C,Be,q),_e?C.persistentData=Be:kt.freeType(Be)):l.raise("invalid buffer data")}}else if(r(N))C.dtype=ye||La(N),C.dimension=z,ee(C,N,q),_e&&(C.persistentData=new Uint8Array(new Uint8Array(N.buffer)));else if(Gr(N)){pe=N.shape;var fe=N.stride,K=N.offset,ce=0,he=0,Ke=0,He=0;pe.length===1?(ce=pe[0],he=1,Ke=fe[0],He=0):pe.length===2?(ce=pe[0],he=pe[1],Ke=fe[0],He=fe[1]):l.raise("invalid shape"),C.dtype=ye||La(N.data)||js,C.dimension=he;var me=kt.allocType(C.dtype,ce*he);Uf(me,N.data,ce,he,Ke,He,K),ee(C,me,q),_e?C.persistentData=me:kt.freeType(me)}else N instanceof ArrayBuffer?(C.dtype=Us,C.dimension=z,ee(C,N,q),_e&&(C.persistentData=new Uint8Array(new Uint8Array(N)))):l.raise("invalid buffer data")}function oe(C){u.bufferCount--,G(C);var N=C.buffer;l(N,"buffer must not be deleted already"),s.deleteBuffer(N),C.buffer=null,delete I[C.id]}function Y(C,N,q,ye){u.bufferCount++;var z=new B(N);I[z.id]=z;function _e(j){var k=kf,Ae=null,fe=0,K=0,ce=1;return Array.isArray(j)||r(j)||Gr(j)||j instanceof ArrayBuffer?Ae=j:typeof j=="number"?fe=j|0:j&&(l.type(j,"object","buffer arguments must be an object, a number or an array"),"data"in j&&(l(Ae===null||Array.isArray(Ae)||r(Ae)||Gr(Ae),"invalid data for buffer"),Ae=j.data),"usage"in j&&(l.parameter(j.usage,Ca,"invalid buffer usage"),k=Ca[j.usage]),"type"in j&&(l.parameter(j.type,kn,"invalid buffer type"),K=kn[j.type]),"dimension"in j&&(l.type(j.dimension,"number","invalid dimension"),ce=j.dimension|0),"length"in j&&(l.nni(fe,"buffer length must be a nonnegative integer"),fe=j.length|0)),z.bind(),Ae?J(z,Ae,k,K,ce,ye):(fe&&s.bufferData(z.type,fe,k),z.dtype=K||Us,z.usage=k,z.dimension=ce,z.byteLength=fe),_.profile&&(z.stats.size=z.byteLength*gn[z.dtype]),_e}function pe(j,k){l(k+j.byteLength<=z.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+j.byteLength+" starting from offset "+k+" to a buffer of size "+z.byteLength),s.bufferSubData(z.type,k,j)}function Be(j,k){var Ae=(k||0)|0,fe;if(z.bind(),r(j)||j instanceof ArrayBuffer)pe(j,Ae);else if(Array.isArray(j)){if(j.length>0)if(typeof j[0]=="number"){var K=kt.allocType(z.dtype,j.length);$f(K,j),pe(K,Ae),kt.freeType(K)}else if(Array.isArray(j[0])||r(j[0])){fe=Bf(j);var ce=$s(j,fe,z.dtype);pe(ce,Ae),kt.freeType(ce)}else l.raise("invalid buffer data")}else if(Gr(j)){fe=j.shape;var he=j.stride,Ke=0,He=0,me=0,ge=0;fe.length===1?(Ke=fe[0],He=1,me=he[0],ge=0):fe.length===2?(Ke=fe[0],He=fe[1],me=he[0],ge=he[1]):l.raise("invalid shape");var Ue=Array.isArray(j.data)?z.dtype:La(j.data),Ye=kt.allocType(Ue,Ke*He);Uf(Ye,j.data,Ke,He,me,ge,j.offset),pe(Ye,Ae),kt.freeType(Ye)}else l.raise("invalid data for buffer subdata");return _e}return q||_e(C),_e._reglType="buffer",_e._buffer=z,_e.subdata=Be,_.profile&&(_e.stats=z.stats),_e.destroy=function(){oe(z)},_e}function Q(){Er(I).forEach(function(C){C.buffer=s.createBuffer(),s.bindBuffer(C.type,C.buffer),s.bufferData(C.type,C.persistentData||C.byteLength,C.usage)})}return _.profile&&(u.getTotalBufferSize=function(){var C=0;return Object.keys(I).forEach(function(N){C+=I[N].stats.size}),C}),{create:Y,createStream:W,destroyStream:Z,clear:function(){Er(I).forEach(oe),X.forEach(oe)},getBuffer:function(C){return C&&C._buffer instanceof B?C._buffer:null},restore:Q,_initBuffer:J}}var zh=0,Wh=0,Xh=1,Yh=1,Kh=4,qh=4,yn={points:zh,point:Wh,lines:Xh,line:Yh,triangles:Kh,triangle:qh,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Qh=0,Zh=1,Ni=4,Jh=5120,oi=5121,jf=5122,fi=5123,Vf=5124,$n=5125,Vs=34963,ep=35040,tp=35044;function rp(s,u,_,G){var U={},I=0,B={uint8:oi,uint16:fi};u.oes_element_index_uint&&(B.uint32=$n);function X(Q){this.id=I++,U[this.id]=this,this.buffer=Q,this.primType=Ni,this.vertCount=0,this.type=0}X.prototype.bind=function(){this.buffer.bind()};var W=[];function Z(Q){var C=W.pop();return C||(C=new X(_.create(null,Vs,!0,!1)._buffer)),J(C,Q,ep,-1,-1,0,0),C}function ee(Q){W.push(Q)}function J(Q,C,N,q,ye,z,_e){Q.buffer.bind();var pe;if(C){var Be=_e;!_e&&(!r(C)||Gr(C)&&!r(C.data))&&(Be=u.oes_element_index_uint?$n:fi),_._initBuffer(Q.buffer,C,N,Be,3)}else s.bufferData(Vs,z,N),Q.buffer.dtype=pe||oi,Q.buffer.usage=N,Q.buffer.dimension=3,Q.buffer.byteLength=z;if(pe=_e,!_e){switch(Q.buffer.dtype){case oi:case Jh:pe=oi;break;case fi:case jf:pe=fi;break;case $n:case Vf:pe=$n;break;default:l.raise("unsupported type for element array")}Q.buffer.dtype=pe}Q.type=pe,l(pe!==$n||!!u.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var j=ye;j<0&&(j=Q.buffer.byteLength,pe===fi?j>>=1:pe===$n&&(j>>=2)),Q.vertCount=j;var k=q;if(q<0){k=Ni;var Ae=Q.buffer.dimension;Ae===1&&(k=Qh),Ae===2&&(k=Zh),Ae===3&&(k=Ni)}Q.primType=k}function oe(Q){G.elementsCount--,l(Q.buffer!==null,"must not double destroy elements"),delete U[Q.id],Q.buffer.destroy(),Q.buffer=null}function Y(Q,C){var N=_.create(null,Vs,!0),q=new X(N._buffer);G.elementsCount++;function ye(z){if(!z)N(),q.primType=Ni,q.vertCount=0,q.type=oi;else if(typeof z=="number")N(z),q.primType=Ni,q.vertCount=z|0,q.type=oi;else{var _e=null,pe=tp,Be=-1,j=-1,k=0,Ae=0;Array.isArray(z)||r(z)||Gr(z)?_e=z:(l.type(z,"object","invalid arguments for elements"),"data"in z&&(_e=z.data,l(Array.isArray(_e)||r(_e)||Gr(_e),"invalid data for element buffer")),"usage"in z&&(l.parameter(z.usage,Ca,"invalid element buffer usage"),pe=Ca[z.usage]),"primitive"in z&&(l.parameter(z.primitive,yn,"invalid element buffer primitive"),Be=yn[z.primitive]),"count"in z&&(l(typeof z.count=="number"&&z.count>=0,"invalid vertex count for elements"),j=z.count|0),"type"in z&&(l.parameter(z.type,B,"invalid buffer type"),Ae=B[z.type]),"length"in z?k=z.length|0:(k=j,Ae===fi||Ae===jf?k*=2:(Ae===$n||Ae===Vf)&&(k*=4))),J(q,_e,pe,Be,j,k,Ae)}return ye}return ye(Q),ye._reglType="elements",ye._elements=q,ye.subdata=function(z,_e){return N.subdata(z,_e),ye},ye.destroy=function(){oe(q)},ye}return{create:Y,createStream:Z,destroyStream:ee,getElements:function(Q){return typeof Q=="function"&&Q._elements instanceof X?Q._elements:null},clear:function(){Er(U).forEach(oe)}}}var Hf=new Float32Array(1),np=new Uint32Array(Hf.buffer),ip=5123;function zf(s){for(var u=kt.allocType(ip,s.length),_=0;_<s.length;++_)if(isNaN(s[_]))u[_]=65535;else if(s[_]===1/0)u[_]=31744;else if(s[_]===-1/0)u[_]=64512;else{Hf[0]=s[_];var G=np[0],U=G>>>31<<15,I=(G<<1>>>24)-127,B=G>>13&1023;if(I<-24)u[_]=U;else if(I<-14){var X=-14-I;u[_]=U+(B+1024>>X)}else I>15?u[_]=U+31744:u[_]=U+(I+15<<10)+B}return u}function Mt(s){return Array.isArray(s)||r(s)}var Wf=function(s){return!(s&s-1)&&!!s},ap=34467,Vr=3553,Hs=34067,Ra=34069,Un=6408,zs=6406,Oa=6407,Bi=6409,Fa=6410,Xf=32854,Ws=32855,Yf=36194,sp=32819,op=32820,fp=33635,lp=34042,Xs=6402,Pa=34041,Ys=35904,Ks=35906,li=36193,qs=33776,Qs=33777,Zs=33778,Js=33779,Kf=35986,qf=35987,Qf=34798,Zf=35840,Jf=35841,el=35842,tl=35843,rl=36196,ci=5121,eo=5123,to=5125,ki=5126,cp=10242,up=10243,dp=10497,ro=33071,hp=33648,pp=10240,mp=10241,no=9728,vp=9729,io=9984,nl=9985,il=9986,ao=9987,_p=33170,Da=4352,gp=4353,yp=4354,bp=34046,xp=3317,Ep=37440,Tp=37441,Ap=37443,al=37444,$i=33984,wp=[io,il,nl,ao],Ia=[0,Bi,Fa,Oa,Un],Or={};Or[Bi]=Or[zs]=Or[Xs]=1,Or[Pa]=Or[Fa]=2,Or[Oa]=Or[Ys]=3,Or[Un]=Or[Ks]=4;function ui(s){return"[object "+s+"]"}var sl=ui("HTMLCanvasElement"),ol=ui("OffscreenCanvas"),fl=ui("CanvasRenderingContext2D"),ll=ui("ImageBitmap"),cl=ui("HTMLImageElement"),ul=ui("HTMLVideoElement"),Sp=Object.keys(ks).concat([sl,ol,fl,ll,cl,ul]),di=[];di[ci]=1,di[ki]=4,di[li]=2,di[eo]=2,di[to]=4;var er=[];er[Xf]=2,er[Ws]=2,er[Yf]=2,er[Pa]=4,er[qs]=.5,er[Qs]=.5,er[Zs]=1,er[Js]=1,er[Kf]=.5,er[qf]=1,er[Qf]=1,er[Zf]=.5,er[Jf]=.25,er[el]=.5,er[tl]=.25,er[rl]=.5;function dl(s){return Array.isArray(s)&&(s.length===0||typeof s[0]=="number")}function hl(s){if(!Array.isArray(s))return!1;var u=s.length;return!(u===0||!Mt(s[0]))}function jn(s){return Object.prototype.toString.call(s)}function pl(s){return jn(s)===sl}function ml(s){return jn(s)===ol}function Cp(s){return jn(s)===fl}function Lp(s){return jn(s)===ll}function Rp(s){return jn(s)===cl}function Op(s){return jn(s)===ul}function so(s){if(!s)return!1;var u=jn(s);return Sp.indexOf(u)>=0?!0:dl(s)||hl(s)||Gr(s)}function vl(s){return ks[Object.prototype.toString.call(s)]|0}function Fp(s,u){var _=u.length;switch(s.type){case ci:case eo:case to:case ki:var G=kt.allocType(s.type,_);G.set(u),s.data=G;break;case li:s.data=zf(u);break;default:l.raise("unsupported texture type, must specify a typed array")}}function _l(s,u){return kt.allocType(s.type===li?ki:s.type,u)}function gl(s,u){s.type===li?(s.data=zf(u),kt.freeType(u)):s.data=u}function Pp(s,u,_,G,U,I){for(var B=s.width,X=s.height,W=s.channels,Z=B*X*W,ee=_l(s,Z),J=0,oe=0;oe<X;++oe)for(var Y=0;Y<B;++Y)for(var Q=0;Q<W;++Q)ee[J++]=u[_*Y+G*oe+U*Q+I];gl(s,ee)}function Ga(s,u,_,G,U,I){var B;if(typeof er[s]<"u"?B=er[s]:B=Or[s]*di[u],I&&(B*=6),U){for(var X=0,W=_;W>=1;)X+=B*W*W,W/=2;return X}else return B*_*G}function Dp(s,u,_,G,U,I,B){var X={"don't care":Da,"dont care":Da,nice:yp,fast:gp},W={repeat:dp,clamp:ro,mirror:hp},Z={nearest:no,linear:vp},ee=n({mipmap:ao,"nearest mipmap nearest":io,"linear mipmap nearest":nl,"nearest mipmap linear":il,"linear mipmap linear":ao},Z),J={none:0,browser:al},oe={uint8:ci,rgba4:sp,rgb565:fp,"rgb5 a1":op},Y={alpha:zs,luminance:Bi,"luminance alpha":Fa,rgb:Oa,rgba:Un,rgba4:Xf,"rgb5 a1":Ws,rgb565:Yf},Q={};u.ext_srgb&&(Y.srgb=Ys,Y.srgba=Ks),u.oes_texture_float&&(oe.float32=oe.float=ki),u.oes_texture_half_float&&(oe.float16=oe["half float"]=li),u.webgl_depth_texture&&(n(Y,{depth:Xs,"depth stencil":Pa}),n(oe,{uint16:eo,uint32:to,"depth stencil":lp})),u.webgl_compressed_texture_s3tc&&n(Q,{"rgb s3tc dxt1":qs,"rgba s3tc dxt1":Qs,"rgba s3tc dxt3":Zs,"rgba s3tc dxt5":Js}),u.webgl_compressed_texture_atc&&n(Q,{"rgb atc":Kf,"rgba atc explicit alpha":qf,"rgba atc interpolated alpha":Qf}),u.webgl_compressed_texture_pvrtc&&n(Q,{"rgb pvrtc 4bppv1":Zf,"rgb pvrtc 2bppv1":Jf,"rgba pvrtc 4bppv1":el,"rgba pvrtc 2bppv1":tl}),u.webgl_compressed_texture_etc1&&(Q["rgb etc1"]=rl);var C=Array.prototype.slice.call(s.getParameter(ap));Object.keys(Q).forEach(function(v){var M=Q[v];C.indexOf(M)>=0&&(Y[v]=M)});var N=Object.keys(Y);_.textureFormats=N;var q=[];Object.keys(Y).forEach(function(v){var M=Y[v];q[M]=v});var ye=[];Object.keys(oe).forEach(function(v){var M=oe[v];ye[M]=v});var z=[];Object.keys(Z).forEach(function(v){var M=Z[v];z[M]=v});var _e=[];Object.keys(ee).forEach(function(v){var M=ee[v];_e[M]=v});var pe=[];Object.keys(W).forEach(function(v){var M=W[v];pe[M]=v});var Be=N.reduce(function(v,M){var D=Y[M];return D===Bi||D===zs||D===Bi||D===Fa||D===Xs||D===Pa||u.ext_srgb&&(D===Ys||D===Ks)?v[D]=D:D===Ws||M.indexOf("rgba")>=0?v[D]=Un:v[D]=Oa,v},{});function j(){this.internalformat=Un,this.format=Un,this.type=ci,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=al,this.width=0,this.height=0,this.channels=0}function k(v,M){v.internalformat=M.internalformat,v.format=M.format,v.type=M.type,v.compressed=M.compressed,v.premultiplyAlpha=M.premultiplyAlpha,v.flipY=M.flipY,v.unpackAlignment=M.unpackAlignment,v.colorSpace=M.colorSpace,v.width=M.width,v.height=M.height,v.channels=M.channels}function Ae(v,M){if(!(typeof M!="object"||!M)){if("premultiplyAlpha"in M&&(l.type(M.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),v.premultiplyAlpha=M.premultiplyAlpha),"flipY"in M&&(l.type(M.flipY,"boolean","invalid texture flip"),v.flipY=M.flipY),"alignment"in M&&(l.oneOf(M.alignment,[1,2,4,8],"invalid texture unpack alignment"),v.unpackAlignment=M.alignment),"colorSpace"in M&&(l.parameter(M.colorSpace,J,"invalid colorSpace"),v.colorSpace=J[M.colorSpace]),"type"in M){var D=M.type;l(u.oes_texture_float||!(D==="float"||D==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),l(u.oes_texture_half_float||!(D==="half float"||D==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),l(u.webgl_depth_texture||!(D==="uint16"||D==="uint32"||D==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),l.parameter(D,oe,"invalid texture type"),v.type=oe[D]}var Ee=v.width,nt=v.height,p=v.channels,c=!1;"shape"in M?(l(Array.isArray(M.shape)&&M.shape.length>=2,"shape must be an array"),Ee=M.shape[0],nt=M.shape[1],M.shape.length===3&&(p=M.shape[2],l(p>0&&p<=4,"invalid number of channels"),c=!0),l(Ee>=0&&Ee<=_.maxTextureSize,"invalid width"),l(nt>=0&&nt<=_.maxTextureSize,"invalid height")):("radius"in M&&(Ee=nt=M.radius,l(Ee>=0&&Ee<=_.maxTextureSize,"invalid radius")),"width"in M&&(Ee=M.width,l(Ee>=0&&Ee<=_.maxTextureSize,"invalid width")),"height"in M&&(nt=M.height,l(nt>=0&&nt<=_.maxTextureSize,"invalid height")),"channels"in M&&(p=M.channels,l(p>0&&p<=4,"invalid number of channels"),c=!0)),v.width=Ee|0,v.height=nt|0,v.channels=p|0;var b=!1;if("format"in M){var S=M.format;l(u.webgl_depth_texture||!(S==="depth"||S==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),l.parameter(S,Y,"invalid texture format");var O=v.internalformat=Y[S];v.format=Be[O],S in oe&&("type"in M||(v.type=oe[S])),S in Q&&(v.compressed=!0),b=!0}!c&&b?v.channels=Or[v.format]:c&&!b?v.channels!==Ia[v.format]&&(v.format=v.internalformat=Ia[v.channels]):b&&c&&l(v.channels===Or[v.format],"number of channels inconsistent with specified format")}}function fe(v){s.pixelStorei(Ep,v.flipY),s.pixelStorei(Tp,v.premultiplyAlpha),s.pixelStorei(Ap,v.colorSpace),s.pixelStorei(xp,v.unpackAlignment)}function K(){j.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function ce(v,M){var D=null;if(so(M)?D=M:M&&(l.type(M,"object","invalid pixel data type"),Ae(v,M),"x"in M&&(v.xOffset=M.x|0),"y"in M&&(v.yOffset=M.y|0),so(M.data)&&(D=M.data)),l(!v.compressed||D instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),M.copy){l(!D,"can not specify copy and data field for the same texture");var Ee=U.viewportWidth,nt=U.viewportHeight;v.width=v.width||Ee-v.xOffset,v.height=v.height||nt-v.yOffset,v.needsCopy=!0,l(v.xOffset>=0&&v.xOffset<Ee&&v.yOffset>=0&&v.yOffset<nt&&v.width>0&&v.width<=Ee&&v.height>0&&v.height<=nt,"copy texture read out of bounds")}else if(!D)v.width=v.width||1,v.height=v.height||1,v.channels=v.channels||4;else if(r(D))v.channels=v.channels||4,v.data=D,!("type"in M)&&v.type===ci&&(v.type=vl(D));else if(dl(D))v.channels=v.channels||4,Fp(v,D),v.alignment=1,v.needsFree=!0;else if(Gr(D)){var p=D.data;!Array.isArray(p)&&v.type===ci&&(v.type=vl(p));var c=D.shape,b=D.stride,S,O,E,x,w,d;c.length===3?(E=c[2],d=b[2]):(l(c.length===2,"invalid ndarray pixel data, must be 2 or 3D"),E=1,d=1),S=c[0],O=c[1],x=b[0],w=b[1],v.alignment=1,v.width=S,v.height=O,v.channels=E,v.format=v.internalformat=Ia[E],v.needsFree=!0,Pp(v,p,x,w,d,D.offset)}else if(pl(D)||ml(D)||Cp(D))pl(D)||ml(D)?v.element=D:v.element=D.canvas,v.width=v.element.width,v.height=v.element.height,v.channels=4;else if(Lp(D))v.element=D,v.width=D.width,v.height=D.height,v.channels=4;else if(Rp(D))v.element=D,v.width=D.naturalWidth,v.height=D.naturalHeight,v.channels=4;else if(Op(D))v.element=D,v.width=D.videoWidth,v.height=D.videoHeight,v.channels=4;else if(hl(D)){var y=v.width||D[0].length,m=v.height||D.length,L=v.channels;Mt(D[0][0])?L=L||D[0][0].length:L=L||1;for(var F=Sa.shape(D),V=1,ae=0;ae<F.length;++ae)V*=F[ae];var se=_l(v,V);Sa.flatten(D,F,"",se),gl(v,se),v.alignment=1,v.width=y,v.height=m,v.channels=L,v.format=v.internalformat=Ia[L],v.needsFree=!0}v.type===ki?l(_.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):v.type===li&&l(_.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function he(v,M,D){var Ee=v.element,nt=v.data,p=v.internalformat,c=v.format,b=v.type,S=v.width,O=v.height;fe(v),Ee?s.texImage2D(M,D,c,c,b,Ee):v.compressed?s.compressedTexImage2D(M,D,p,S,O,0,nt):v.needsCopy?(G(),s.copyTexImage2D(M,D,c,v.xOffset,v.yOffset,S,O,0)):s.texImage2D(M,D,c,S,O,0,c,b,nt||null)}function Ke(v,M,D,Ee,nt){var p=v.element,c=v.data,b=v.internalformat,S=v.format,O=v.type,E=v.width,x=v.height;fe(v),p?s.texSubImage2D(M,nt,D,Ee,S,O,p):v.compressed?s.compressedTexSubImage2D(M,nt,D,Ee,b,E,x,c):v.needsCopy?(G(),s.copyTexSubImage2D(M,nt,D,Ee,v.xOffset,v.yOffset,E,x)):s.texSubImage2D(M,nt,D,Ee,E,x,S,O,c)}var He=[];function me(){return He.pop()||new K}function ge(v){v.needsFree&&kt.freeType(v.data),K.call(v),He.push(v)}function Ue(){j.call(this),this.genMipmaps=!1,this.mipmapHint=Da,this.mipmask=0,this.images=Array(16)}function Ye(v,M,D){var Ee=v.images[0]=me();v.mipmask=1,Ee.width=v.width=M,Ee.height=v.height=D,Ee.channels=v.channels=4}function it(v,M){var D=null;if(so(M))D=v.images[0]=me(),k(D,v),ce(D,M),v.mipmask=1;else if(Ae(v,M),Array.isArray(M.mipmap))for(var Ee=M.mipmap,nt=0;nt<Ee.length;++nt)D=v.images[nt]=me(),k(D,v),D.width>>=nt,D.height>>=nt,ce(D,Ee[nt]),v.mipmask|=1<<nt;else D=v.images[0]=me(),k(D,v),ce(D,M),v.mipmask=1;k(v,v.images[0]),v.compressed&&(v.internalformat===qs||v.internalformat===Qs||v.internalformat===Zs||v.internalformat===Js)&&l(v.width%4===0&&v.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Ft(v,M){for(var D=v.images,Ee=0;Ee<D.length;++Ee){if(!D[Ee])return;he(D[Ee],M,Ee)}}var Dt=[];function st(){var v=Dt.pop()||new Ue;j.call(v),v.mipmask=0;for(var M=0;M<16;++M)v.images[M]=null;return v}function Vt(v){for(var M=v.images,D=0;D<M.length;++D)M[D]&&ge(M[D]),M[D]=null;Dt.push(v)}function wt(){this.minFilter=no,this.magFilter=no,this.wrapS=ro,this.wrapT=ro,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Da}function Ut(v,M){if("min"in M){var D=M.min;l.parameter(D,ee),v.minFilter=ee[D],wp.indexOf(v.minFilter)>=0&&!("faces"in M)&&(v.genMipmaps=!0)}if("mag"in M){var Ee=M.mag;l.parameter(Ee,Z),v.magFilter=Z[Ee]}var nt=v.wrapS,p=v.wrapT;if("wrap"in M){var c=M.wrap;typeof c=="string"?(l.parameter(c,W),nt=p=W[c]):Array.isArray(c)&&(l.parameter(c[0],W),l.parameter(c[1],W),nt=W[c[0]],p=W[c[1]])}else{if("wrapS"in M){var b=M.wrapS;l.parameter(b,W),nt=W[b]}if("wrapT"in M){var S=M.wrapT;l.parameter(S,W),p=W[S]}}if(v.wrapS=nt,v.wrapT=p,"anisotropic"in M){var O=M.anisotropic;l(typeof O=="number"&&O>=1&&O<=_.maxAnisotropic,"aniso samples must be between 1 and "),v.anisotropic=M.anisotropic}if("mipmap"in M){var E=!1;switch(typeof M.mipmap){case"string":l.parameter(M.mipmap,X,"invalid mipmap hint"),v.mipmapHint=X[M.mipmap],v.genMipmaps=!0,E=!0;break;case"boolean":E=v.genMipmaps=M.mipmap;break;case"object":l(Array.isArray(M.mipmap),"invalid mipmap type"),v.genMipmaps=!1,E=!0;break;default:l.raise("invalid mipmap type")}E&&!("min"in M)&&(v.minFilter=io)}}function Ht(v,M){s.texParameteri(M,mp,v.minFilter),s.texParameteri(M,pp,v.magFilter),s.texParameteri(M,cp,v.wrapS),s.texParameteri(M,up,v.wrapT),u.ext_texture_filter_anisotropic&&s.texParameteri(M,bp,v.anisotropic),v.genMipmaps&&(s.hint(_p,v.mipmapHint),s.generateMipmap(M))}var zt=0,Zt={},tr=_.maxTextureUnits,Nt=Array(tr).map(function(){return null});function Ze(v){j.call(this),this.mipmask=0,this.internalformat=Un,this.id=zt++,this.refCount=1,this.target=v,this.texture=s.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new wt,B.profile&&(this.stats={size:0})}function rr(v){s.activeTexture($i),s.bindTexture(v.target,v.texture)}function dt(){var v=Nt[0];v?s.bindTexture(v.target,v.texture):s.bindTexture(Vr,null)}function ke(v){var M=v.texture;l(M,"must not double destroy texture");var D=v.unit,Ee=v.target;D>=0&&(s.activeTexture($i+D),s.bindTexture(Ee,null),Nt[D]=null),s.deleteTexture(M),v.texture=null,v.params=null,v.pixels=null,v.refCount=0,delete Zt[v.id],I.textureCount--}n(Ze.prototype,{bind:function(){var v=this;v.bindCount+=1;var M=v.unit;if(M<0){for(var D=0;D<tr;++D){var Ee=Nt[D];if(Ee){if(Ee.bindCount>0)continue;Ee.unit=-1}Nt[D]=v,M=D;break}M>=tr&&l.raise("insufficient number of texture units"),B.profile&&I.maxTextureUnits<M+1&&(I.maxTextureUnits=M+1),v.unit=M,s.activeTexture($i+M),s.bindTexture(v.target,v.texture)}return M},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&ke(this)}});function at(v,M){var D=new Ze(Vr);Zt[D.id]=D,I.textureCount++;function Ee(c,b){var S=D.texInfo;wt.call(S);var O=st();return typeof c=="number"?typeof b=="number"?Ye(O,c|0,b|0):Ye(O,c|0,c|0):c?(l.type(c,"object","invalid arguments to regl.texture"),Ut(S,c),it(O,c)):Ye(O,1,1),S.genMipmaps&&(O.mipmask=(O.width<<1)-1),D.mipmask=O.mipmask,k(D,O),l.texture2D(S,O,_),D.internalformat=O.internalformat,Ee.width=O.width,Ee.height=O.height,rr(D),Ft(O,Vr),Ht(S,Vr),dt(),Vt(O),B.profile&&(D.stats.size=Ga(D.internalformat,D.type,O.width,O.height,S.genMipmaps,!1)),Ee.format=q[D.internalformat],Ee.type=ye[D.type],Ee.mag=z[S.magFilter],Ee.min=_e[S.minFilter],Ee.wrapS=pe[S.wrapS],Ee.wrapT=pe[S.wrapT],Ee}function nt(c,b,S,O){l(!!c,"must specify image data");var E=b|0,x=S|0,w=O|0,d=me();return k(d,D),d.width=0,d.height=0,ce(d,c),d.width=d.width||(D.width>>w)-E,d.height=d.height||(D.height>>w)-x,l(D.type===d.type&&D.format===d.format&&D.internalformat===d.internalformat,"incompatible format for texture.subimage"),l(E>=0&&x>=0&&E+d.width<=D.width&&x+d.height<=D.height,"texture.subimage write out of bounds"),l(D.mipmask&1<<w,"missing mipmap data"),l(d.data||d.element||d.needsCopy,"missing image data"),rr(D),Ke(d,Vr,E,x,w),dt(),ge(d),Ee}function p(c,b){var S=c|0,O=b|0||S;if(S===D.width&&O===D.height)return Ee;Ee.width=D.width=S,Ee.height=D.height=O,rr(D);for(var E=0;D.mipmask>>E;++E){var x=S>>E,w=O>>E;if(!x||!w)break;s.texImage2D(Vr,E,D.format,x,w,0,D.format,D.type,null)}return dt(),B.profile&&(D.stats.size=Ga(D.internalformat,D.type,S,O,!1,!1)),Ee}return Ee(v,M),Ee.subimage=nt,Ee.resize=p,Ee._reglType="texture2d",Ee._texture=D,B.profile&&(Ee.stats=D.stats),Ee.destroy=function(){D.decRef()},Ee}function ct(v,M,D,Ee,nt,p){var c=new Ze(Hs);Zt[c.id]=c,I.cubeCount++;var b=new Array(6);function S(x,w,d,y,m,L){var F,V=c.texInfo;for(wt.call(V),F=0;F<6;++F)b[F]=st();if(typeof x=="number"||!x){var ae=x|0||1;for(F=0;F<6;++F)Ye(b[F],ae,ae)}else if(typeof x=="object")if(w)it(b[0],x),it(b[1],w),it(b[2],d),it(b[3],y),it(b[4],m),it(b[5],L);else if(Ut(V,x),Ae(c,x),"faces"in x){var se=x.faces;for(l(Array.isArray(se)&&se.length===6,"cube faces must be a length 6 array"),F=0;F<6;++F)l(typeof se[F]=="object"&&!!se[F],"invalid input for cube map face"),k(b[F],c),it(b[F],se[F])}else for(F=0;F<6;++F)it(b[F],x);else l.raise("invalid arguments to cube map");for(k(c,b[0]),l.optional(function(){_.npotTextureCube||l(Wf(c.width)&&Wf(c.height),"your browser does not support non power or two texture dimensions")}),V.genMipmaps?c.mipmask=(b[0].width<<1)-1:c.mipmask=b[0].mipmask,l.textureCube(c,V,b,_),c.internalformat=b[0].internalformat,S.width=b[0].width,S.height=b[0].height,rr(c),F=0;F<6;++F)Ft(b[F],Ra+F);for(Ht(V,Hs),dt(),B.profile&&(c.stats.size=Ga(c.internalformat,c.type,S.width,S.height,V.genMipmaps,!0)),S.format=q[c.internalformat],S.type=ye[c.type],S.mag=z[V.magFilter],S.min=_e[V.minFilter],S.wrapS=pe[V.wrapS],S.wrapT=pe[V.wrapT],F=0;F<6;++F)Vt(b[F]);return S}function O(x,w,d,y,m){l(!!w,"must specify image data"),l(typeof x=="number"&&x===(x|0)&&x>=0&&x<6,"invalid face");var L=d|0,F=y|0,V=m|0,ae=me();return k(ae,c),ae.width=0,ae.height=0,ce(ae,w),ae.width=ae.width||(c.width>>V)-L,ae.height=ae.height||(c.height>>V)-F,l(c.type===ae.type&&c.format===ae.format&&c.internalformat===ae.internalformat,"incompatible format for texture.subimage"),l(L>=0&&F>=0&&L+ae.width<=c.width&&F+ae.height<=c.height,"texture.subimage write out of bounds"),l(c.mipmask&1<<V,"missing mipmap data"),l(ae.data||ae.element||ae.needsCopy,"missing image data"),rr(c),Ke(ae,Ra+x,L,F,V),dt(),ge(ae),S}function E(x){var w=x|0;if(w!==c.width){S.width=c.width=w,S.height=c.height=w,rr(c);for(var d=0;d<6;++d)for(var y=0;c.mipmask>>y;++y)s.texImage2D(Ra+d,y,c.format,w>>y,w>>y,0,c.format,c.type,null);return dt(),B.profile&&(c.stats.size=Ga(c.internalformat,c.type,S.width,S.height,!1,!0)),S}}return S(v,M,D,Ee,nt,p),S.subimage=O,S.resize=E,S._reglType="textureCube",S._texture=c,B.profile&&(S.stats=c.stats),S.destroy=function(){c.decRef()},S}function Bt(){for(var v=0;v<tr;++v)s.activeTexture($i+v),s.bindTexture(Vr,null),Nt[v]=null;Er(Zt).forEach(ke),I.cubeCount=0,I.textureCount=0}B.profile&&(I.getTotalTextureSize=function(){var v=0;return Object.keys(Zt).forEach(function(M){v+=Zt[M].stats.size}),v});function zr(){for(var v=0;v<tr;++v){var M=Nt[v];M&&(M.bindCount=0,M.unit=-1,Nt[v]=null)}Er(Zt).forEach(function(D){D.texture=s.createTexture(),s.bindTexture(D.target,D.texture);for(var Ee=0;Ee<32;++Ee)if(D.mipmask&1<<Ee)if(D.target===Vr)s.texImage2D(Vr,Ee,D.internalformat,D.width>>Ee,D.height>>Ee,0,D.internalformat,D.type,null);else for(var nt=0;nt<6;++nt)s.texImage2D(Ra+nt,Ee,D.internalformat,D.width>>Ee,D.height>>Ee,0,D.internalformat,D.type,null);Ht(D.texInfo,D.target)})}function Kn(){for(var v=0;v<tr;++v){var M=Nt[v];M&&(M.bindCount=0,M.unit=-1,Nt[v]=null),s.activeTexture($i+v),s.bindTexture(Vr,null),s.bindTexture(Hs,null)}}return{create2D:at,createCube:ct,clear:Bt,getTexture:function(v){return null},restore:zr,refresh:Kn}}var bn=36161,Ma=32854,yl=32855,bl=36194,xl=33189,El=36168,Tl=34041,Al=35907,wl=34836,Sl=34842,Cl=34843,Mr=[];Mr[Ma]=2,Mr[yl]=2,Mr[bl]=2,Mr[xl]=2,Mr[El]=1,Mr[Tl]=4,Mr[Al]=4,Mr[wl]=16,Mr[Sl]=8,Mr[Cl]=6;function Ll(s,u,_){return Mr[s]*u*_}var Ip=function(s,u,_,G,U){var I={rgba4:Ma,rgb565:bl,"rgb5 a1":yl,depth:xl,stencil:El,"depth stencil":Tl};u.ext_srgb&&(I.srgba=Al),u.ext_color_buffer_half_float&&(I.rgba16f=Sl,I.rgb16f=Cl),u.webgl_color_buffer_float&&(I.rgba32f=wl);var B=[];Object.keys(I).forEach(function(Y){var Q=I[Y];B[Q]=Y});var X=0,W={};function Z(Y){this.id=X++,this.refCount=1,this.renderbuffer=Y,this.format=Ma,this.width=0,this.height=0,U.profile&&(this.stats={size:0})}Z.prototype.decRef=function(){--this.refCount<=0&&ee(this)};function ee(Y){var Q=Y.renderbuffer;l(Q,"must not double destroy renderbuffer"),s.bindRenderbuffer(bn,null),s.deleteRenderbuffer(Q),Y.renderbuffer=null,Y.refCount=0,delete W[Y.id],G.renderbufferCount--}function J(Y,Q){var C=new Z(s.createRenderbuffer());W[C.id]=C,G.renderbufferCount++;function N(ye,z){var _e=0,pe=0,Be=Ma;if(typeof ye=="object"&&ye){var j=ye;if("shape"in j){var k=j.shape;l(Array.isArray(k)&&k.length>=2,"invalid renderbuffer shape"),_e=k[0]|0,pe=k[1]|0}else"radius"in j&&(_e=pe=j.radius|0),"width"in j&&(_e=j.width|0),"height"in j&&(pe=j.height|0);"format"in j&&(l.parameter(j.format,I,"invalid renderbuffer format"),Be=I[j.format])}else typeof ye=="number"?(_e=ye|0,typeof z=="number"?pe=z|0:pe=_e):ye?l.raise("invalid arguments to renderbuffer constructor"):_e=pe=1;if(l(_e>0&&pe>0&&_e<=_.maxRenderbufferSize&&pe<=_.maxRenderbufferSize,"invalid renderbuffer size"),!(_e===C.width&&pe===C.height&&Be===C.format))return N.width=C.width=_e,N.height=C.height=pe,C.format=Be,s.bindRenderbuffer(bn,C.renderbuffer),s.renderbufferStorage(bn,Be,_e,pe),l(s.getError()===0,"invalid render buffer format"),U.profile&&(C.stats.size=Ll(C.format,C.width,C.height)),N.format=B[C.format],N}function q(ye,z){var _e=ye|0,pe=z|0||_e;return _e===C.width&&pe===C.height||(l(_e>0&&pe>0&&_e<=_.maxRenderbufferSize&&pe<=_.maxRenderbufferSize,"invalid renderbuffer size"),N.width=C.width=_e,N.height=C.height=pe,s.bindRenderbuffer(bn,C.renderbuffer),s.renderbufferStorage(bn,C.format,_e,pe),l(s.getError()===0,"invalid render buffer format"),U.profile&&(C.stats.size=Ll(C.format,C.width,C.height))),N}return N(Y,Q),N.resize=q,N._reglType="renderbuffer",N._renderbuffer=C,U.profile&&(N.stats=C.stats),N.destroy=function(){C.decRef()},N}U.profile&&(G.getTotalRenderbufferSize=function(){var Y=0;return Object.keys(W).forEach(function(Q){Y+=W[Q].stats.size}),Y});function oe(){Er(W).forEach(function(Y){Y.renderbuffer=s.createRenderbuffer(),s.bindRenderbuffer(bn,Y.renderbuffer),s.renderbufferStorage(bn,Y.format,Y.width,Y.height)}),s.bindRenderbuffer(bn,null)}return{create:J,clear:function(){Er(W).forEach(ee)},restore:oe}},nn=36160,oo=36161,Vn=3553,Na=34069,Rl=36064,Ol=36096,Fl=36128,Pl=33306,Dl=36053,Gp=36054,Mp=36055,Np=36057,Bp=36061,kp=36193,$p=5121,Up=5126,Il=6407,Gl=6408,jp=6402,Vp=[Il,Gl],fo=[];fo[Gl]=4,fo[Il]=3;var Ba=[];Ba[$p]=1,Ba[Up]=4,Ba[kp]=2;var Hp=32854,zp=32855,Wp=36194,Xp=33189,Yp=36168,Ml=34041,Kp=35907,qp=34836,Qp=34842,Zp=34843,Jp=[Hp,zp,Wp,Kp,Qp,Zp,qp],hi={};hi[Dl]="complete",hi[Gp]="incomplete attachment",hi[Np]="incomplete dimensions",hi[Mp]="incomplete, missing attachment",hi[Bp]="unsupported";function em(s,u,_,G,U,I){var B={cur:null,next:null,dirty:!1,setFBO:null},X=["rgba"],W=["rgba4","rgb565","rgb5 a1"];u.ext_srgb&&W.push("srgba"),u.ext_color_buffer_half_float&&W.push("rgba16f","rgb16f"),u.webgl_color_buffer_float&&W.push("rgba32f");var Z=["uint8"];u.oes_texture_half_float&&Z.push("half float","float16"),u.oes_texture_float&&Z.push("float","float32");function ee(K,ce,he){this.target=K,this.texture=ce,this.renderbuffer=he;var Ke=0,He=0;ce?(Ke=ce.width,He=ce.height):he&&(Ke=he.width,He=he.height),this.width=Ke,this.height=He}function J(K){K&&(K.texture&&K.texture._texture.decRef(),K.renderbuffer&&K.renderbuffer._renderbuffer.decRef())}function oe(K,ce,he){if(K)if(K.texture){var Ke=K.texture._texture,He=Math.max(1,Ke.width),me=Math.max(1,Ke.height);l(He===ce&&me===he,"inconsistent width/height for supplied texture"),Ke.refCount+=1}else{var ge=K.renderbuffer._renderbuffer;l(ge.width===ce&&ge.height===he,"inconsistent width/height for renderbuffer"),ge.refCount+=1}}function Y(K,ce){ce&&(ce.texture?s.framebufferTexture2D(nn,K,ce.target,ce.texture._texture.texture,0):s.framebufferRenderbuffer(nn,K,oo,ce.renderbuffer._renderbuffer.renderbuffer))}function Q(K){var ce=Vn,he=null,Ke=null,He=K;typeof K=="object"&&(He=K.data,"target"in K&&(ce=K.target|0)),l.type(He,"function","invalid attachment data");var me=He._reglType;return me==="texture2d"?(he=He,l(ce===Vn)):me==="textureCube"?(he=He,l(ce>=Na&&ce<Na+6,"invalid cube map target")):me==="renderbuffer"?(Ke=He,ce=oo):l.raise("invalid regl object for attachment"),new ee(ce,he,Ke)}function C(K,ce,he,Ke,He){if(he){var me=G.create2D({width:K,height:ce,format:Ke,type:He});return me._texture.refCount=0,new ee(Vn,me,null)}else{var ge=U.create({width:K,height:ce,format:Ke});return ge._renderbuffer.refCount=0,new ee(oo,null,ge)}}function N(K){return K&&(K.texture||K.renderbuffer)}function q(K,ce,he){K&&(K.texture?K.texture.resize(ce,he):K.renderbuffer&&K.renderbuffer.resize(ce,he),K.width=ce,K.height=he)}var ye=0,z={};function _e(){this.id=ye++,z[this.id]=this,this.framebuffer=s.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function pe(K){K.colorAttachments.forEach(J),J(K.depthAttachment),J(K.stencilAttachment),J(K.depthStencilAttachment)}function Be(K){var ce=K.framebuffer;l(ce,"must not double destroy framebuffer"),s.deleteFramebuffer(ce),K.framebuffer=null,I.framebufferCount--,delete z[K.id]}function j(K){var ce;s.bindFramebuffer(nn,K.framebuffer);var he=K.colorAttachments;for(ce=0;ce<he.length;++ce)Y(Rl+ce,he[ce]);for(ce=he.length;ce<_.maxColorAttachments;++ce)s.framebufferTexture2D(nn,Rl+ce,Vn,null,0);s.framebufferTexture2D(nn,Pl,Vn,null,0),s.framebufferTexture2D(nn,Ol,Vn,null,0),s.framebufferTexture2D(nn,Fl,Vn,null,0),Y(Ol,K.depthAttachment),Y(Fl,K.stencilAttachment),Y(Pl,K.depthStencilAttachment);var Ke=s.checkFramebufferStatus(nn);!s.isContextLost()&&Ke!==Dl&&l.raise("framebuffer configuration not supported, status = "+hi[Ke]),s.bindFramebuffer(nn,B.next?B.next.framebuffer:null),B.cur=B.next,s.getError()}function k(K,ce){var he=new _e;I.framebufferCount++;function Ke(me,ge){var Ue;l(B.next!==he,"can not update framebuffer which is currently in use");var Ye=0,it=0,Ft=!0,Dt=!0,st=null,Vt=!0,wt="rgba",Ut="uint8",Ht=1,zt=null,Zt=null,tr=null,Nt=!1;if(typeof me=="number")Ye=me|0,it=ge|0||Ye;else if(!me)Ye=it=1;else{l.type(me,"object","invalid arguments for framebuffer");var Ze=me;if("shape"in Ze){var rr=Ze.shape;l(Array.isArray(rr)&&rr.length>=2,"invalid shape for framebuffer"),Ye=rr[0],it=rr[1]}else"radius"in Ze&&(Ye=it=Ze.radius),"width"in Ze&&(Ye=Ze.width),"height"in Ze&&(it=Ze.height);("color"in Ze||"colors"in Ze)&&(st=Ze.color||Ze.colors,Array.isArray(st)&&l(st.length===1||u.webgl_draw_buffers,"multiple render targets not supported")),st||("colorCount"in Ze&&(Ht=Ze.colorCount|0,l(Ht>0,"invalid color buffer count")),"colorTexture"in Ze&&(Vt=!!Ze.colorTexture,wt="rgba4"),"colorType"in Ze&&(Ut=Ze.colorType,Vt?(l(u.oes_texture_float||!(Ut==="float"||Ut==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),l(u.oes_texture_half_float||!(Ut==="half float"||Ut==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Ut==="half float"||Ut==="float16"?(l(u.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),wt="rgba16f"):(Ut==="float"||Ut==="float32")&&(l(u.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),wt="rgba32f"),l.oneOf(Ut,Z,"invalid color type")),"colorFormat"in Ze&&(wt=Ze.colorFormat,X.indexOf(wt)>=0?Vt=!0:W.indexOf(wt)>=0?Vt=!1:l.optional(function(){Vt?l.oneOf(Ze.colorFormat,X,"invalid color format for texture"):l.oneOf(Ze.colorFormat,W,"invalid color format for renderbuffer")}))),("depthTexture"in Ze||"depthStencilTexture"in Ze)&&(Nt=!!(Ze.depthTexture||Ze.depthStencilTexture),l(!Nt||u.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Ze&&(typeof Ze.depth=="boolean"?Ft=Ze.depth:(zt=Ze.depth,Dt=!1)),"stencil"in Ze&&(typeof Ze.stencil=="boolean"?Dt=Ze.stencil:(Zt=Ze.stencil,Ft=!1)),"depthStencil"in Ze&&(typeof Ze.depthStencil=="boolean"?Ft=Dt=Ze.depthStencil:(tr=Ze.depthStencil,Ft=!1,Dt=!1))}var dt=null,ke=null,at=null,ct=null;if(Array.isArray(st))dt=st.map(Q);else if(st)dt=[Q(st)];else for(dt=new Array(Ht),Ue=0;Ue<Ht;++Ue)dt[Ue]=C(Ye,it,Vt,wt,Ut);l(u.webgl_draw_buffers||dt.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),l(dt.length<=_.maxColorAttachments,"too many color attachments, not supported"),Ye=Ye||dt[0].width,it=it||dt[0].height,zt?ke=Q(zt):Ft&&!Dt&&(ke=C(Ye,it,Nt,"depth","uint32")),Zt?at=Q(Zt):Dt&&!Ft&&(at=C(Ye,it,!1,"stencil","uint8")),tr?ct=Q(tr):!zt&&!Zt&&Dt&&Ft&&(ct=C(Ye,it,Nt,"depth stencil","depth stencil")),l(!!zt+!!Zt+!!tr<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var Bt=null;for(Ue=0;Ue<dt.length;++Ue)if(oe(dt[Ue],Ye,it),l(!dt[Ue]||dt[Ue].texture&&Vp.indexOf(dt[Ue].texture._texture.format)>=0||dt[Ue].renderbuffer&&Jp.indexOf(dt[Ue].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+Ue+" is invalid"),dt[Ue]&&dt[Ue].texture){var zr=fo[dt[Ue].texture._texture.format]*Ba[dt[Ue].texture._texture.type];Bt===null?Bt=zr:l(Bt===zr,"all color attachments much have the same number of bits per pixel.")}return oe(ke,Ye,it),l(!ke||ke.texture&&ke.texture._texture.format===jp||ke.renderbuffer&&ke.renderbuffer._renderbuffer.format===Xp,"invalid depth attachment for framebuffer object"),oe(at,Ye,it),l(!at||at.renderbuffer&&at.renderbuffer._renderbuffer.format===Yp,"invalid stencil attachment for framebuffer object"),oe(ct,Ye,it),l(!ct||ct.texture&&ct.texture._texture.format===Ml||ct.renderbuffer&&ct.renderbuffer._renderbuffer.format===Ml,"invalid depth-stencil attachment for framebuffer object"),pe(he),he.width=Ye,he.height=it,he.colorAttachments=dt,he.depthAttachment=ke,he.stencilAttachment=at,he.depthStencilAttachment=ct,Ke.color=dt.map(N),Ke.depth=N(ke),Ke.stencil=N(at),Ke.depthStencil=N(ct),Ke.width=he.width,Ke.height=he.height,j(he),Ke}function He(me,ge){l(B.next!==he,"can not resize a framebuffer which is currently in use");var Ue=Math.max(me|0,1),Ye=Math.max(ge|0||Ue,1);if(Ue===he.width&&Ye===he.height)return Ke;for(var it=he.colorAttachments,Ft=0;Ft<it.length;++Ft)q(it[Ft],Ue,Ye);return q(he.depthAttachment,Ue,Ye),q(he.stencilAttachment,Ue,Ye),q(he.depthStencilAttachment,Ue,Ye),he.width=Ke.width=Ue,he.height=Ke.height=Ye,j(he),Ke}return Ke(K,ce),n(Ke,{resize:He,_reglType:"framebuffer",_framebuffer:he,destroy:function(){Be(he),pe(he)},use:function(me){B.setFBO({framebuffer:Ke},me)}})}function Ae(K){var ce=Array(6);function he(He){var me;l(ce.indexOf(B.next)<0,"can not update framebuffer which is currently in use");var ge={color:null},Ue=0,Ye=null,it="rgba",Ft="uint8",Dt=1;if(typeof He=="number")Ue=He|0;else if(!He)Ue=1;else{l.type(He,"object","invalid arguments for framebuffer");var st=He;if("shape"in st){var Vt=st.shape;l(Array.isArray(Vt)&&Vt.length>=2,"invalid shape for framebuffer"),l(Vt[0]===Vt[1],"cube framebuffer must be square"),Ue=Vt[0]}else"radius"in st&&(Ue=st.radius|0),"width"in st?(Ue=st.width|0,"height"in st&&l(st.height===Ue,"must be square")):"height"in st&&(Ue=st.height|0);("color"in st||"colors"in st)&&(Ye=st.color||st.colors,Array.isArray(Ye)&&l(Ye.length===1||u.webgl_draw_buffers,"multiple render targets not supported")),Ye||("colorCount"in st&&(Dt=st.colorCount|0,l(Dt>0,"invalid color buffer count")),"colorType"in st&&(l.oneOf(st.colorType,Z,"invalid color type"),Ft=st.colorType),"colorFormat"in st&&(it=st.colorFormat,l.oneOf(st.colorFormat,X,"invalid color format for texture"))),"depth"in st&&(ge.depth=st.depth),"stencil"in st&&(ge.stencil=st.stencil),"depthStencil"in st&&(ge.depthStencil=st.depthStencil)}var wt;if(Ye)if(Array.isArray(Ye))for(wt=[],me=0;me<Ye.length;++me)wt[me]=Ye[me];else wt=[Ye];else{wt=Array(Dt);var Ut={radius:Ue,format:it,type:Ft};for(me=0;me<Dt;++me)wt[me]=G.createCube(Ut)}for(ge.color=Array(wt.length),me=0;me<wt.length;++me){var Ht=wt[me];l(typeof Ht=="function"&&Ht._reglType==="textureCube","invalid cube map"),Ue=Ue||Ht.width,l(Ht.width===Ue&&Ht.height===Ue,"invalid cube map shape"),ge.color[me]={target:Na,data:wt[me]}}for(me=0;me<6;++me){for(var zt=0;zt<wt.length;++zt)ge.color[zt].target=Na+me;me>0&&(ge.depth=ce[0].depth,ge.stencil=ce[0].stencil,ge.depthStencil=ce[0].depthStencil),ce[me]?ce[me](ge):ce[me]=k(ge)}return n(he,{width:Ue,height:Ue,color:wt})}function Ke(He){var me,ge=He|0;if(l(ge>0&&ge<=_.maxCubeMapSize,"invalid radius for cube fbo"),ge===he.width)return he;var Ue=he.color;for(me=0;me<Ue.length;++me)Ue[me].resize(ge);for(me=0;me<6;++me)ce[me].resize(ge);return he.width=he.height=ge,he}return he(K),n(he,{faces:ce,resize:Ke,_reglType:"framebufferCube",destroy:function(){ce.forEach(function(He){He.destroy()})}})}function fe(){B.cur=null,B.next=null,B.dirty=!0,Er(z).forEach(function(K){K.framebuffer=s.createFramebuffer(),j(K)})}return n(B,{getFramebuffer:function(K){if(typeof K=="function"&&K._reglType==="framebuffer"){var ce=K._framebuffer;if(ce instanceof _e)return ce}return null},create:k,createCube:Ae,clear:function(){Er(z).forEach(Be)},restore:fe})}var tm=5126,Nl=34962,ka=34963,Bl=["attributes","elements","offset","count","primitive","instances"];function lo(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=tm,this.offset=0,this.stride=0,this.divisor=0}function rm(s,u,_,G,U,I,B){for(var X=_.maxAttributes,W=new Array(X),Z=0;Z<X;++Z)W[Z]=new lo;var ee=0,J={},oe={Record:lo,scope:{},state:W,currentVAO:null,targetVAO:null,restore:Q()?pe:function(){},createVAO:Be,getVAO:N,destroyBuffer:Y,setVAO:Q()?q:ye,clear:Q()?z:function(){}};function Y(j){for(var k=0;k<W.length;++k){var Ae=W[k];Ae.buffer===j&&(s.disableVertexAttribArray(k),Ae.buffer=null)}}function Q(){return u.oes_vertex_array_object}function C(){return u.angle_instanced_arrays}function N(j){return typeof j=="function"&&j._vao?j._vao:null}function q(j){if(j!==oe.currentVAO){var k=Q();j?k.bindVertexArrayOES(j.vao):k.bindVertexArrayOES(null),oe.currentVAO=j}}function ye(j){if(j!==oe.currentVAO){if(j)j.bindAttrs();else{for(var k=C(),Ae=0;Ae<W.length;++Ae){var fe=W[Ae];fe.buffer?(s.enableVertexAttribArray(Ae),fe.buffer.bind(),s.vertexAttribPointer(Ae,fe.size,fe.type,fe.normalized,fe.stride,fe.offfset),k&&fe.divisor&&k.vertexAttribDivisorANGLE(Ae,fe.divisor)):(s.disableVertexAttribArray(Ae),s.vertexAttrib4f(Ae,fe.x,fe.y,fe.z,fe.w))}B.elements?s.bindBuffer(ka,B.elements.buffer.buffer):s.bindBuffer(ka,null)}oe.currentVAO=j}}function z(){Er(J).forEach(function(j){j.destroy()})}function _e(){this.id=++ee,this.attributes=[],this.elements=null,this.ownsElements=!1,this.count=0,this.offset=0,this.instances=-1,this.primitive=4;var j=Q();j?this.vao=j.createVertexArrayOES():this.vao=null,J[this.id]=this,this.buffers=[]}_e.prototype.bindAttrs=function(){for(var j=C(),k=this.attributes,Ae=0;Ae<k.length;++Ae){var fe=k[Ae];fe.buffer?(s.enableVertexAttribArray(Ae),s.bindBuffer(Nl,fe.buffer.buffer),s.vertexAttribPointer(Ae,fe.size,fe.type,fe.normalized,fe.stride,fe.offset),j&&fe.divisor&&j.vertexAttribDivisorANGLE(Ae,fe.divisor)):(s.disableVertexAttribArray(Ae),s.vertexAttrib4f(Ae,fe.x,fe.y,fe.z,fe.w))}for(var K=k.length;K<X;++K)s.disableVertexAttribArray(K);var ce=I.getElements(this.elements);ce?s.bindBuffer(ka,ce.buffer.buffer):s.bindBuffer(ka,null)},_e.prototype.refresh=function(){var j=Q();j&&(j.bindVertexArrayOES(this.vao),this.bindAttrs(),oe.currentVAO=null,j.bindVertexArrayOES(null))},_e.prototype.destroy=function(){if(this.vao){var j=Q();this===oe.currentVAO&&(oe.currentVAO=null,j.bindVertexArrayOES(null)),j.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),J[this.id]&&(delete J[this.id],G.vaoCount-=1)};function pe(){var j=Q();j&&Er(J).forEach(function(k){k.refresh()})}function Be(j){var k=new _e;G.vaoCount+=1;function Ae(fe){var K;if(Array.isArray(fe))K=fe,k.elements&&k.ownsElements&&k.elements.destroy(),k.elements=null,k.ownsElements=!1,k.offset=0,k.count=0,k.instances=-1,k.primitive=4;else{if(l(typeof fe=="object","invalid arguments for create vao"),l("attributes"in fe,"must specify attributes for vao"),fe.elements){var ce=fe.elements;k.ownsElements?typeof ce=="function"&&ce._reglType==="elements"?(k.elements.destroy(),k.ownsElements=!1):(k.elements(ce),k.ownsElements=!1):I.getElements(fe.elements)?(k.elements=fe.elements,k.ownsElements=!1):(k.elements=I.create(fe.elements),k.ownsElements=!0)}else k.elements=null,k.ownsElements=!1;K=fe.attributes,k.offset=0,k.count=-1,k.instances=-1,k.primitive=4,k.elements&&(k.count=k.elements._elements.vertCount,k.primitive=k.elements._elements.primType),"offset"in fe&&(k.offset=fe.offset|0),"count"in fe&&(k.count=fe.count|0),"instances"in fe&&(k.instances=fe.instances|0),"primitive"in fe&&(l(fe.primitive in yn,"bad primitive type: "+fe.primitive),k.primitive=yn[fe.primitive]),l.optional(()=>{for(var Ft=Object.keys(fe),Dt=0;Dt<Ft.length;++Dt)l(Bl.indexOf(Ft[Dt])>=0,'invalid option for vao: "'+Ft[Dt]+'" valid options are '+Bl)}),l(Array.isArray(K),"attributes must be an array")}l(K.length<X,"too many attributes"),l(K.length>0,"must specify at least one attribute");var he={},Ke=k.attributes;Ke.length=K.length;for(var He=0;He<K.length;++He){var me=K[He],ge=Ke[He]=new lo,Ue=me.data||me;if(Array.isArray(Ue)||r(Ue)||Gr(Ue)){var Ye;k.buffers[He]&&(Ye=k.buffers[He],r(Ue)&&Ye._buffer.byteLength>=Ue.byteLength?Ye.subdata(Ue):(Ye.destroy(),k.buffers[He]=null)),k.buffers[He]||(Ye=k.buffers[He]=U.create(me,Nl,!1,!0)),ge.buffer=U.getBuffer(Ye),ge.size=ge.buffer.dimension|0,ge.normalized=!1,ge.type=ge.buffer.dtype,ge.offset=0,ge.stride=0,ge.divisor=0,ge.state=1,he[He]=1}else U.getBuffer(me)?(ge.buffer=U.getBuffer(me),ge.size=ge.buffer.dimension|0,ge.normalized=!1,ge.type=ge.buffer.dtype,ge.offset=0,ge.stride=0,ge.divisor=0,ge.state=1):U.getBuffer(me.buffer)?(ge.buffer=U.getBuffer(me.buffer),ge.size=(+me.size||ge.buffer.dimension)|0,ge.normalized=!!me.normalized||!1,"type"in me?(l.parameter(me.type,kn,"invalid buffer type"),ge.type=kn[me.type]):ge.type=ge.buffer.dtype,ge.offset=(me.offset||0)|0,ge.stride=(me.stride||0)|0,ge.divisor=(me.divisor||0)|0,ge.state=1,l(ge.size>=1&&ge.size<=4,"size must be between 1 and 4"),l(ge.offset>=0,"invalid offset"),l(ge.stride>=0&&ge.stride<=255,"stride must be between 0 and 255"),l(ge.divisor>=0,"divisor must be positive"),l(!ge.divisor||!!u.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in me?(l(He>0,"first attribute must not be a constant"),ge.x=+me.x||0,ge.y=+me.y||0,ge.z=+me.z||0,ge.w=+me.w||0,ge.state=2):l(!1,"invalid attribute spec for location "+He)}for(var it=0;it<k.buffers.length;++it)!he[it]&&k.buffers[it]&&(k.buffers[it].destroy(),k.buffers[it]=null);return k.refresh(),Ae}return Ae.destroy=function(){for(var fe=0;fe<k.buffers.length;++fe)k.buffers[fe]&&k.buffers[fe].destroy();k.buffers.length=0,k.ownsElements&&(k.elements.destroy(),k.elements=null,k.ownsElements=!1),k.destroy()},Ae._vao=k,Ae._reglType="vao",Ae(j)}return oe}var kl=35632,nm=35633,im=35718,am=35721;function sm(s,u,_,G){var U={},I={};function B(C,N,q,ye){this.name=C,this.id=N,this.location=q,this.info=ye}function X(C,N){for(var q=0;q<C.length;++q)if(C[q].id===N.id){C[q].location=N.location;return}C.push(N)}function W(C,N,q){var ye=C===kl?U:I,z=ye[N];if(!z){var _e=u.str(N);z=s.createShader(C),s.shaderSource(z,_e),s.compileShader(z),l.shaderError(s,z,_e,C,q),ye[N]=z}return z}var Z={},ee=[],J=0;function oe(C,N){this.id=J++,this.fragId=C,this.vertId=N,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,G.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Y(C,N,q){var ye,z,_e=W(kl,C.fragId),pe=W(nm,C.vertId),Be=C.program=s.createProgram();if(s.attachShader(Be,_e),s.attachShader(Be,pe),q)for(ye=0;ye<q.length;++ye){var j=q[ye];s.bindAttribLocation(Be,j[0],j[1])}s.linkProgram(Be),l.linkError(s,Be,u.str(C.fragId),u.str(C.vertId),N);var k=s.getProgramParameter(Be,im);G.profile&&(C.stats.uniformsCount=k);var Ae=C.uniforms;for(ye=0;ye<k;++ye)if(z=s.getActiveUniform(Be,ye),z)if(z.size>1)for(var fe=0;fe<z.size;++fe){var K=z.name.replace("[0]","["+fe+"]");X(Ae,new B(K,u.id(K),s.getUniformLocation(Be,K),z))}else X(Ae,new B(z.name,u.id(z.name),s.getUniformLocation(Be,z.name),z));var ce=s.getProgramParameter(Be,am);G.profile&&(C.stats.attributesCount=ce);var he=C.attributes;for(ye=0;ye<ce;++ye)z=s.getActiveAttrib(Be,ye),z&&X(he,new B(z.name,u.id(z.name),s.getAttribLocation(Be,z.name),z))}G.profile&&(_.getMaxUniformsCount=function(){var C=0;return ee.forEach(function(N){N.stats.uniformsCount>C&&(C=N.stats.uniformsCount)}),C},_.getMaxAttributesCount=function(){var C=0;return ee.forEach(function(N){N.stats.attributesCount>C&&(C=N.stats.attributesCount)}),C});function Q(){U={},I={};for(var C=0;C<ee.length;++C)Y(ee[C],null,ee[C].attributes.map(function(N){return[N.location,N.name]}))}return{clear:function(){var C=s.deleteShader.bind(s);Er(U).forEach(C),U={},Er(I).forEach(C),I={},ee.forEach(function(N){s.deleteProgram(N.program)}),ee.length=0,Z={},_.shaderCount=0},program:function(C,N,q,ye){l.command(C>=0,"missing vertex shader",q),l.command(N>=0,"missing fragment shader",q);var z=Z[N];z||(z=Z[N]={});var _e=z[C];if(_e&&(_e.refCount++,!ye))return _e;var pe=new oe(N,C);return _.shaderCount++,Y(pe,q,ye),_e||(z[C]=pe),ee.push(pe),n(pe,{destroy:function(){if(pe.refCount--,pe.refCount<=0){s.deleteProgram(pe.program);var Be=ee.indexOf(pe);ee.splice(Be,1),_.shaderCount--}z[pe.vertId].refCount<=0&&(s.deleteShader(I[pe.vertId]),delete I[pe.vertId],delete Z[pe.fragId][pe.vertId]),Object.keys(Z[pe.fragId]).length||(s.deleteShader(U[pe.fragId]),delete U[pe.fragId],delete Z[pe.fragId])}})},restore:Q,shader:W,frag:-1,vert:-1}}var om=6408,Ui=5121,fm=3333,$a=5126;function lm(s,u,_,G,U,I,B){function X(ee){var J;u.next===null?(l(U.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),J=Ui):(l(u.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),J=u.next.colorAttachments[0].texture._texture.type,l.optional(function(){I.oes_texture_float?(l(J===Ui||J===$a,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),J===$a&&l(B.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):l(J===Ui,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var oe=0,Y=0,Q=G.framebufferWidth,C=G.framebufferHeight,N=null;r(ee)?N=ee:ee&&(l.type(ee,"object","invalid arguments to regl.read()"),oe=ee.x|0,Y=ee.y|0,l(oe>=0&&oe<G.framebufferWidth,"invalid x offset for regl.read"),l(Y>=0&&Y<G.framebufferHeight,"invalid y offset for regl.read"),Q=(ee.width||G.framebufferWidth-oe)|0,C=(ee.height||G.framebufferHeight-Y)|0,N=ee.data||null),N&&(J===Ui?l(N instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):J===$a&&l(N instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),l(Q>0&&Q+oe<=G.framebufferWidth,"invalid width for read pixels"),l(C>0&&C+Y<=G.framebufferHeight,"invalid height for read pixels"),_();var q=Q*C*4;return N||(J===Ui?N=new Uint8Array(q):J===$a&&(N=N||new Float32Array(q))),l.isTypedArray(N,"data buffer for regl.read() must be a typedarray"),l(N.byteLength>=q,"data buffer for regl.read() too small"),s.pixelStorei(fm,4),s.readPixels(oe,Y,Q,C,om,J,N),N}function W(ee){var J;return u.setFBO({framebuffer:ee.framebuffer},function(){J=X(ee)}),J}function Z(ee){return!ee||!("framebuffer"in ee)?X(ee):W(ee)}return Z}function pi(s){return Array.prototype.slice.call(s)}function mi(s){return pi(s).join("")}function cm(){var s=0,u=[],_=[];function G(J){for(var oe=0;oe<_.length;++oe)if(_[oe]===J)return u[oe];var Y="g"+s++;return u.push(Y),_.push(J),Y}function U(){var J=[];function oe(){J.push.apply(J,pi(arguments))}var Y=[];function Q(){var C="v"+s++;return Y.push(C),arguments.length>0&&(J.push(C,"="),J.push.apply(J,pi(arguments)),J.push(";")),C}return n(oe,{def:Q,toString:function(){return mi([Y.length>0?"var "+Y.join(",")+";":"",mi(J)])}})}function I(){var J=U(),oe=U(),Y=J.toString,Q=oe.toString;function C(N,q){oe(N,q,"=",J.def(N,q),";")}return n(function(){J.apply(J,pi(arguments))},{def:J.def,entry:J,exit:oe,save:C,set:function(N,q,ye){C(N,q),J(N,q,"=",ye,";")},toString:function(){return Y()+Q()}})}function B(){var J=mi(arguments),oe=I(),Y=I(),Q=oe.toString,C=Y.toString;return n(oe,{then:function(){return oe.apply(oe,pi(arguments)),this},else:function(){return Y.apply(Y,pi(arguments)),this},toString:function(){var N=C();return N&&(N="else{"+N+"}"),mi(["if(",J,"){",Q(),"}",N])}})}var X=U(),W={};function Z(J,oe){var Y=[];function Q(){var z="a"+Y.length;return Y.push(z),z}oe=oe||0;for(var C=0;C<oe;++C)Q();var N=I(),q=N.toString,ye=W[J]=n(N,{arg:Q,toString:function(){return mi(["function(",Y.join(),"){",q(),"}"])}});return ye}function ee(){var J=['"use strict";',X,"return {"];Object.keys(W).forEach(function(Q){J.push('"',Q,'":',W[Q].toString(),",")}),J.push("}");var oe=mi(J).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Y=Function.apply(null,u.concat(oe));return Y.apply(null,_)}return{global:X,link:G,block:U,proc:Z,scope:I,cond:B,compile:ee}}var vi="xyzw".split(""),$l=5121,_i=1,co=2,uo=0,ho=1,po=2,mo=3,Ua=4,Ul=5,jl=6,Vl="dither",Hl="blend.enable",zl="blend.color",vo="blend.equation",_o="blend.func",Wl="depth.enable",Xl="depth.func",Yl="depth.range",Kl="depth.mask",go="colorMask",ql="cull.enable",Ql="cull.face",yo="frontFace",bo="lineWidth",Zl="polygonOffset.enable",xo="polygonOffset.offset",Jl="sample.alpha",ec="sample.enable",Eo="sample.coverage",tc="stencil.enable",rc="stencil.mask",To="stencil.func",Ao="stencil.opFront",ji="stencil.opBack",nc="scissor.enable",ja="scissor.box",an="viewport",Vi="profile",Hn="framebuffer",Hi="vert",zi="frag",zn="elements",Wn="primitive",Xn="count",Va="offset",Ha="instances",Wi="vao",wo="Width",So="Height",gi=Hn+wo,yi=Hn+So,um=an+wo,dm=an+So,ic="drawingBuffer",ac=ic+wo,sc=ic+So,hm=[_o,vo,To,Ao,ji,Eo,an,ja,xo],bi=34962,Co=34963,pm=35632,mm=35633,oc=3553,vm=34067,_m=2884,gm=3042,ym=3024,bm=2960,xm=2929,Em=3089,Tm=32823,Am=32926,wm=32928,Lo=5126,za=35664,Wa=35665,Xa=35666,Ro=5124,Ya=35667,Ka=35668,qa=35669,Oo=35670,Qa=35671,Za=35672,Ja=35673,Xi=35674,Yi=35675,Ki=35676,qi=35678,Qi=35680,Fo=4,Zi=1028,Yn=1029,fc=2304,Po=2305,Sm=32775,Cm=32776,Lm=519,xn=7680,lc=0,cc=1,uc=32774,Rm=513,dc=36160,Om=36064,Hr={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},hc=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],xi={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},En={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},pc={frag:pm,vert:mm},Do={cw:fc,ccw:Po};function es(s){return Array.isArray(s)||r(s)||Gr(s)}function mc(s){return s.sort(function(u,_){return u===an?-1:_===an?1:u<_?-1:1})}function Kt(s,u,_,G){this.thisDep=s,this.contextDep=u,this.propDep=_,this.append=G}function Tn(s){return s&&!(s.thisDep||s.contextDep||s.propDep)}function $t(s){return new Kt(!1,!1,!1,s)}function vr(s,u){var _=s.type;if(_===uo){var G=s.data.length;return new Kt(!0,G>=1,G>=2,u)}else if(_===Ua){var U=s.data;return new Kt(U.thisDep,U.contextDep,U.propDep,u)}else{if(_===Ul)return new Kt(!1,!1,!1,u);if(_===jl){for(var I=!1,B=!1,X=!1,W=0;W<s.data.length;++W){var Z=s.data[W];if(Z.type===ho)X=!0;else if(Z.type===po)B=!0;else if(Z.type===mo)I=!0;else if(Z.type===uo){I=!0;var ee=Z.data;ee>=1&&(B=!0),ee>=2&&(X=!0)}else Z.type===Ua&&(I=I||Z.data.thisDep,B=B||Z.data.contextDep,X=X||Z.data.propDep)}return new Kt(I,B,X,u)}else return new Kt(_===mo,_===po,_===ho,u)}}var vc=new Kt(!1,!1,!1,function(){});function Fm(s,u,_,G,U,I,B,X,W,Z,ee,J,oe,Y,Q){var C=Z.Record,N={add:32774,subtract:32778,"reverse subtract":32779};_.ext_blend_minmax&&(N.min=Sm,N.max=Cm);var q=_.angle_instanced_arrays,ye=_.webgl_draw_buffers,z=_.oes_vertex_array_object,_e={dirty:!0,profile:Q.profile},pe={},Be=[],j={},k={};function Ae(p){return p.replace(".","_")}function fe(p,c,b){var S=Ae(p);Be.push(p),pe[S]=_e[S]=!!b,j[S]=c}function K(p,c,b){var S=Ae(p);Be.push(p),Array.isArray(b)?(_e[S]=b.slice(),pe[S]=b.slice()):_e[S]=pe[S]=b,k[S]=c}fe(Vl,ym),fe(Hl,gm),K(zl,"blendColor",[0,0,0,0]),K(vo,"blendEquationSeparate",[uc,uc]),K(_o,"blendFuncSeparate",[cc,lc,cc,lc]),fe(Wl,xm,!0),K(Xl,"depthFunc",Rm),K(Yl,"depthRange",[0,1]),K(Kl,"depthMask",!0),K(go,go,[!0,!0,!0,!0]),fe(ql,_m),K(Ql,"cullFace",Yn),K(yo,yo,Po),K(bo,bo,1),fe(Zl,Tm),K(xo,"polygonOffset",[0,0]),fe(Jl,Am),fe(ec,wm),K(Eo,"sampleCoverage",[1,!1]),fe(tc,bm),K(rc,"stencilMask",-1),K(To,"stencilFunc",[Lm,0,-1]),K(Ao,"stencilOpSeparate",[Zi,xn,xn,xn]),K(ji,"stencilOpSeparate",[Yn,xn,xn,xn]),fe(nc,Em),K(ja,"scissor",[0,0,s.drawingBufferWidth,s.drawingBufferHeight]),K(an,an,[0,0,s.drawingBufferWidth,s.drawingBufferHeight]);var ce={gl:s,context:oe,strings:u,next:pe,current:_e,draw:J,elements:I,buffer:U,shader:ee,attributes:Z.state,vao:Z,uniforms:W,framebuffer:X,extensions:_,timer:Y,isBufferArgs:es},he={primTypes:yn,compareFuncs:xi,blendFuncs:Hr,blendEquations:N,stencilOps:En,glTypes:kn,orientationType:Do};l.optional(function(){ce.isArrayLike=Mt}),ye&&(he.backBuffer=[Yn],he.drawBuffer=xr(G.maxDrawbuffers,function(p){return p===0?[0]:xr(p,function(c){return Om+c})}));var Ke=0;function He(){var p=cm(),c=p.link,b=p.global;p.id=Ke++,p.batchId="0";var S=c(ce),O=p.shared={props:"a0"};Object.keys(ce).forEach(function(y){O[y]=b.def(S,".",y)}),l.optional(function(){p.CHECK=c(l),p.commandStr=l.guessCommand(),p.command=c(p.commandStr),p.assert=function(y,m,L){y("if(!(",m,"))",this.CHECK,".commandRaise(",c(L),",",this.command,");")},he.invalidBlendCombinations=hc});var E=p.next={},x=p.current={};Object.keys(k).forEach(function(y){Array.isArray(_e[y])&&(E[y]=b.def(O.next,".",y),x[y]=b.def(O.current,".",y))});var w=p.constants={};Object.keys(he).forEach(function(y){w[y]=b.def(JSON.stringify(he[y]))}),p.invoke=function(y,m){switch(m.type){case uo:var L=["this",O.context,O.props,p.batchId];return y.def(c(m.data),".call(",L.slice(0,Math.max(m.data.length+1,4)),")");case ho:return y.def(O.props,m.data);case po:return y.def(O.context,m.data);case mo:return y.def("this",m.data);case Ua:return m.data.append(p,y),m.data.ref;case Ul:return m.data.toString();case jl:return m.data.map(function(F){return p.invoke(y,F)})}},p.attribCache={};var d={};return p.scopeAttrib=function(y){var m=u.id(y);if(m in d)return d[m];var L=Z.scope[m];L||(L=Z.scope[m]=new C);var F=d[m]=c(L);return F},p}function me(p){var c=p.static,b=p.dynamic,S;if(Vi in c){var O=!!c[Vi];S=$t(function(x,w){return O}),S.enable=O}else if(Vi in b){var E=b[Vi];S=vr(E,function(x,w){return x.invoke(w,E)})}return S}function ge(p,c){var b=p.static,S=p.dynamic;if(Hn in b){var O=b[Hn];return O?(O=X.getFramebuffer(O),l.command(O,"invalid framebuffer object"),$t(function(x,w){var d=x.link(O),y=x.shared;w.set(y.framebuffer,".next",d);var m=y.context;return w.set(m,"."+gi,d+".width"),w.set(m,"."+yi,d+".height"),d})):$t(function(x,w){var d=x.shared;w.set(d.framebuffer,".next","null");var y=d.context;return w.set(y,"."+gi,y+"."+ac),w.set(y,"."+yi,y+"."+sc),"null"})}else if(Hn in S){var E=S[Hn];return vr(E,function(x,w){var d=x.invoke(w,E),y=x.shared,m=y.framebuffer,L=w.def(m,".getFramebuffer(",d,")");l.optional(function(){x.assert(w,"!"+d+"||"+L,"invalid framebuffer object")}),w.set(m,".next",L);var F=y.context;return w.set(F,"."+gi,L+"?"+L+".width:"+F+"."+ac),w.set(F,"."+yi,L+"?"+L+".height:"+F+"."+sc),L})}else return null}function Ue(p,c,b){var S=p.static,O=p.dynamic;function E(d){if(d in S){var y=S[d];l.commandType(y,"object","invalid "+d,b.commandStr);var m=!0,L=y.x|0,F=y.y|0,V,ae;return"width"in y?(V=y.width|0,l.command(V>=0,"invalid "+d,b.commandStr)):m=!1,"height"in y?(ae=y.height|0,l.command(ae>=0,"invalid "+d,b.commandStr)):m=!1,new Kt(!m&&c&&c.thisDep,!m&&c&&c.contextDep,!m&&c&&c.propDep,function(ne,Le){var xe=ne.shared.context,we=V;"width"in y||(we=Le.def(xe,".",gi,"-",L));var Ce=ae;return"height"in y||(Ce=Le.def(xe,".",yi,"-",F)),[L,F,we,Ce]})}else if(d in O){var se=O[d],ve=vr(se,function(ne,Le){var xe=ne.invoke(Le,se);l.optional(function(){ne.assert(Le,xe+"&&typeof "+xe+'==="object"',"invalid "+d)});var we=ne.shared.context,Ce=Le.def(xe,".x|0"),Re=Le.def(xe,".y|0"),je=Le.def('"width" in ',xe,"?",xe,".width|0:","(",we,".",gi,"-",Ce,")"),yt=Le.def('"height" in ',xe,"?",xe,".height|0:","(",we,".",yi,"-",Re,")");return l.optional(function(){ne.assert(Le,je+">=0&&"+yt+">=0","invalid "+d)}),[Ce,Re,je,yt]});return c&&(ve.thisDep=ve.thisDep||c.thisDep,ve.contextDep=ve.contextDep||c.contextDep,ve.propDep=ve.propDep||c.propDep),ve}else return c?new Kt(c.thisDep,c.contextDep,c.propDep,function(ne,Le){var xe=ne.shared.context;return[0,0,Le.def(xe,".",gi),Le.def(xe,".",yi)]}):null}var x=E(an);if(x){var w=x;x=new Kt(x.thisDep,x.contextDep,x.propDep,function(d,y){var m=w.append(d,y),L=d.shared.context;return y.set(L,"."+um,m[2]),y.set(L,"."+dm,m[3]),m})}return{viewport:x,scissor_box:E(ja)}}function Ye(p,c){var b=p.static,S=typeof b[zi]=="string"&&typeof b[Hi]=="string";if(S){if(Object.keys(c.dynamic).length>0)return null;var O=c.static,E=Object.keys(O);if(E.length>0&&typeof O[E[0]]=="number"){for(var x=[],w=0;w<E.length;++w)l(typeof O[E[w]]=="number","must specify all vertex attribute locations when using vaos"),x.push([O[E[w]]|0,E[w]]);return x}}return null}function it(p,c,b){var S=p.static,O=p.dynamic;function E(m){if(m in S){var L=u.id(S[m]);l.optional(function(){ee.shader(pc[m],L,l.guessCommand())});var F=$t(function(){return L});return F.id=L,F}else if(m in O){var V=O[m];return vr(V,function(ae,se){var ve=ae.invoke(se,V),ne=se.def(ae.shared.strings,".id(",ve,")");return l.optional(function(){se(ae.shared.shader,".shader(",pc[m],",",ne,",",ae.command,");")}),ne})}return null}var x=E(zi),w=E(Hi),d=null,y;return Tn(x)&&Tn(w)?(d=ee.program(w.id,x.id,null,b),y=$t(function(m,L){return m.link(d)})):y=new Kt(x&&x.thisDep||w&&w.thisDep,x&&x.contextDep||w&&w.contextDep,x&&x.propDep||w&&w.propDep,function(m,L){var F=m.shared.shader,V;x?V=x.append(m,L):V=L.def(F,".",zi);var ae;w?ae=w.append(m,L):ae=L.def(F,".",Hi);var se=F+".program("+ae+","+V;return l.optional(function(){se+=","+m.command}),L.def(se+")")}),{frag:x,vert:w,progVar:y,program:d}}function Ft(p,c){var b=p.static,S=p.dynamic,O={},E=!1;function x(){if(Wi in b){var Le=b[Wi];return Le!==null&&Z.getVAO(Le)===null&&(Le=Z.createVAO(Le)),E=!0,O.vao=Le,$t(function(we){var Ce=Z.getVAO(Le);return Ce?we.link(Ce):"null"})}else if(Wi in S){E=!0;var xe=S[Wi];return vr(xe,function(we,Ce){var Re=we.invoke(Ce,xe);return Ce.def(we.shared.vao+".getVAO("+Re+")")})}return null}var w=x(),d=!1;function y(){if(zn in b){var Le=b[zn];if(O.elements=Le,es(Le)){var xe=O.elements=I.create(Le,!0);Le=I.getElements(xe),d=!0}else Le&&(Le=I.getElements(Le),d=!0,l.command(Le,"invalid elements",c.commandStr));var we=$t(function(Re,je){if(Le){var yt=Re.link(Le);return Re.ELEMENTS=yt,yt}return Re.ELEMENTS=null,null});return we.value=Le,we}else if(zn in S){d=!0;var Ce=S[zn];return vr(Ce,function(Re,je){var yt=Re.shared,Jt=yt.isBufferArgs,sn=yt.elements,on=Re.invoke(je,Ce),fn=je.def("null"),sr=je.def(Jt,"(",on,")"),Wr=Re.cond(sr).then(fn,"=",sn,".createStream(",on,");").else(fn,"=",sn,".getElements(",on,");");return l.optional(function(){Re.assert(Wr.else,"!"+on+"||"+fn,"invalid elements")}),je.entry(Wr),je.exit(Re.cond(sr).then(sn,".destroyStream(",fn,");")),Re.ELEMENTS=fn,fn})}else if(E)return new Kt(w.thisDep,w.contextDep,w.propDep,function(Re,je){return je.def(Re.shared.vao+".currentVAO?"+Re.shared.elements+".getElements("+Re.shared.vao+".currentVAO.elements):null")});return null}var m=y();function L(){if(Wn in b){var Le=b[Wn];return O.primitive=Le,l.commandParameter(Le,yn,"invalid primitve",c.commandStr),$t(function(we,Ce){return yn[Le]})}else if(Wn in S){var xe=S[Wn];return vr(xe,function(we,Ce){var Re=we.constants.primTypes,je=we.invoke(Ce,xe);return l.optional(function(){we.assert(Ce,je+" in "+Re,"invalid primitive, must be one of "+Object.keys(yn))}),Ce.def(Re,"[",je,"]")})}else{if(d)return Tn(m)?m.value?$t(function(we,Ce){return Ce.def(we.ELEMENTS,".primType")}):$t(function(){return Fo}):new Kt(m.thisDep,m.contextDep,m.propDep,function(we,Ce){var Re=we.ELEMENTS;return Ce.def(Re,"?",Re,".primType:",Fo)});if(E)return new Kt(w.thisDep,w.contextDep,w.propDep,function(we,Ce){return Ce.def(we.shared.vao+".currentVAO?"+we.shared.vao+".currentVAO.primitive:"+Fo)})}return null}function F(Le,xe){if(Le in b){var we=b[Le]|0;return xe?O.offset=we:O.instances=we,l.command(!xe||we>=0,"invalid "+Le,c.commandStr),$t(function(Re,je){return xe&&(Re.OFFSET=we),we})}else if(Le in S){var Ce=S[Le];return vr(Ce,function(Re,je){var yt=Re.invoke(je,Ce);return xe&&(Re.OFFSET=yt,l.optional(function(){Re.assert(je,yt+">=0","invalid "+Le)})),yt})}else if(xe){if(d)return $t(function(Re,je){return Re.OFFSET=0,0});if(E)return new Kt(w.thisDep,w.contextDep,w.propDep,function(Re,je){return je.def(Re.shared.vao+".currentVAO?"+Re.shared.vao+".currentVAO.offset:0")})}else if(E)return new Kt(w.thisDep,w.contextDep,w.propDep,function(Re,je){return je.def(Re.shared.vao+".currentVAO?"+Re.shared.vao+".currentVAO.instances:-1")});return null}var V=F(Va,!0);function ae(){if(Xn in b){var Le=b[Xn]|0;return O.count=Le,l.command(typeof Le=="number"&&Le>=0,"invalid vertex count",c.commandStr),$t(function(){return Le})}else if(Xn in S){var xe=S[Xn];return vr(xe,function(je,yt){var Jt=je.invoke(yt,xe);return l.optional(function(){je.assert(yt,"typeof "+Jt+'==="number"&&'+Jt+">=0&&"+Jt+"===("+Jt+"|0)","invalid vertex count")}),Jt})}else if(d)if(Tn(m)){if(m)return V?new Kt(V.thisDep,V.contextDep,V.propDep,function(je,yt){var Jt=yt.def(je.ELEMENTS,".vertCount-",je.OFFSET);return l.optional(function(){je.assert(yt,Jt+">=0","invalid vertex offset/element buffer too small")}),Jt}):$t(function(je,yt){return yt.def(je.ELEMENTS,".vertCount")});var we=$t(function(){return-1});return l.optional(function(){we.MISSING=!0}),we}else{var Ce=new Kt(m.thisDep||V.thisDep,m.contextDep||V.contextDep,m.propDep||V.propDep,function(je,yt){var Jt=je.ELEMENTS;return je.OFFSET?yt.def(Jt,"?",Jt,".vertCount-",je.OFFSET,":-1"):yt.def(Jt,"?",Jt,".vertCount:-1")});return l.optional(function(){Ce.DYNAMIC=!0}),Ce}else if(E){var Re=new Kt(w.thisDep,w.contextDep,w.propDep,function(je,yt){return yt.def(je.shared.vao,".currentVAO?",je.shared.vao,".currentVAO.count:-1")});return Re}return null}var se=L(),ve=ae(),ne=F(Ha,!1);return{elements:m,primitive:se,count:ve,instances:ne,offset:V,vao:w,vaoActive:E,elementsActive:d,static:O}}function Dt(p,c){var b=p.static,S=p.dynamic,O={};return Be.forEach(function(E){var x=Ae(E);function w(d,y){if(E in b){var m=d(b[E]);O[x]=$t(function(){return m})}else if(E in S){var L=S[E];O[x]=vr(L,function(F,V){return y(F,V,F.invoke(V,L))})}}switch(E){case ql:case Hl:case Vl:case tc:case Wl:case nc:case Zl:case Jl:case ec:case Kl:return w(function(d){return l.commandType(d,"boolean",E,c.commandStr),d},function(d,y,m){return l.optional(function(){d.assert(y,"typeof "+m+'==="boolean"',"invalid flag "+E,d.commandStr)}),m});case Xl:return w(function(d){return l.commandParameter(d,xi,"invalid "+E,c.commandStr),xi[d]},function(d,y,m){var L=d.constants.compareFuncs;return l.optional(function(){d.assert(y,m+" in "+L,"invalid "+E+", must be one of "+Object.keys(xi))}),y.def(L,"[",m,"]")});case Yl:return w(function(d){return l.command(Mt(d)&&d.length===2&&typeof d[0]=="number"&&typeof d[1]=="number"&&d[0]<=d[1],"depth range is 2d array",c.commandStr),d},function(d,y,m){l.optional(function(){d.assert(y,d.shared.isArrayLike+"("+m+")&&"+m+".length===2&&typeof "+m+'[0]==="number"&&typeof '+m+'[1]==="number"&&'+m+"[0]<="+m+"[1]","depth range must be a 2d array")});var L=y.def("+",m,"[0]"),F=y.def("+",m,"[1]");return[L,F]});case _o:return w(function(d){l.commandType(d,"object","blend.func",c.commandStr);var y="srcRGB"in d?d.srcRGB:d.src,m="srcAlpha"in d?d.srcAlpha:d.src,L="dstRGB"in d?d.dstRGB:d.dst,F="dstAlpha"in d?d.dstAlpha:d.dst;return l.commandParameter(y,Hr,x+".srcRGB",c.commandStr),l.commandParameter(m,Hr,x+".srcAlpha",c.commandStr),l.commandParameter(L,Hr,x+".dstRGB",c.commandStr),l.commandParameter(F,Hr,x+".dstAlpha",c.commandStr),l.command(hc.indexOf(y+", "+L)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+y+", "+L+")",c.commandStr),[Hr[y],Hr[L],Hr[m],Hr[F]]},function(d,y,m){var L=d.constants.blendFuncs;l.optional(function(){d.assert(y,m+"&&typeof "+m+'==="object"',"invalid blend func, must be an object")});function F(xe,we){var Ce=y.def('"',xe,we,'" in ',m,"?",m,".",xe,we,":",m,".",xe);return l.optional(function(){d.assert(y,Ce+" in "+L,"invalid "+E+"."+xe+we+", must be one of "+Object.keys(Hr))}),Ce}var V=F("src","RGB"),ae=F("dst","RGB");l.optional(function(){var xe=d.constants.invalidBlendCombinations;d.assert(y,xe+".indexOf("+V+'+", "+'+ae+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var se=y.def(L,"[",V,"]"),ve=y.def(L,"[",F("src","Alpha"),"]"),ne=y.def(L,"[",ae,"]"),Le=y.def(L,"[",F("dst","Alpha"),"]");return[se,ne,ve,Le]});case vo:return w(function(d){if(typeof d=="string")return l.commandParameter(d,N,"invalid "+E,c.commandStr),[N[d],N[d]];if(typeof d=="object")return l.commandParameter(d.rgb,N,E+".rgb",c.commandStr),l.commandParameter(d.alpha,N,E+".alpha",c.commandStr),[N[d.rgb],N[d.alpha]];l.commandRaise("invalid blend.equation",c.commandStr)},function(d,y,m){var L=d.constants.blendEquations,F=y.def(),V=y.def(),ae=d.cond("typeof ",m,'==="string"');return l.optional(function(){function se(ve,ne,Le){d.assert(ve,Le+" in "+L,"invalid "+ne+", must be one of "+Object.keys(N))}se(ae.then,E,m),d.assert(ae.else,m+"&&typeof "+m+'==="object"',"invalid "+E),se(ae.else,E+".rgb",m+".rgb"),se(ae.else,E+".alpha",m+".alpha")}),ae.then(F,"=",V,"=",L,"[",m,"];"),ae.else(F,"=",L,"[",m,".rgb];",V,"=",L,"[",m,".alpha];"),y(ae),[F,V]});case zl:return w(function(d){return l.command(Mt(d)&&d.length===4,"blend.color must be a 4d array",c.commandStr),xr(4,function(y){return+d[y]})},function(d,y,m){return l.optional(function(){d.assert(y,d.shared.isArrayLike+"("+m+")&&"+m+".length===4","blend.color must be a 4d array")}),xr(4,function(L){return y.def("+",m,"[",L,"]")})});case rc:return w(function(d){return l.commandType(d,"number",x,c.commandStr),d|0},function(d,y,m){return l.optional(function(){d.assert(y,"typeof "+m+'==="number"',"invalid stencil.mask")}),y.def(m,"|0")});case To:return w(function(d){l.commandType(d,"object",x,c.commandStr);var y=d.cmp||"keep",m=d.ref||0,L="mask"in d?d.mask:-1;return l.commandParameter(y,xi,E+".cmp",c.commandStr),l.commandType(m,"number",E+".ref",c.commandStr),l.commandType(L,"number",E+".mask",c.commandStr),[xi[y],m,L]},function(d,y,m){var L=d.constants.compareFuncs;l.optional(function(){function se(){d.assert(y,Array.prototype.join.call(arguments,""),"invalid stencil.func")}se(m+"&&typeof ",m,'==="object"'),se('!("cmp" in ',m,")||(",m,".cmp in ",L,")")});var F=y.def('"cmp" in ',m,"?",L,"[",m,".cmp]",":",xn),V=y.def(m,".ref|0"),ae=y.def('"mask" in ',m,"?",m,".mask|0:-1");return[F,V,ae]});case Ao:case ji:return w(function(d){l.commandType(d,"object",x,c.commandStr);var y=d.fail||"keep",m=d.zfail||"keep",L=d.zpass||"keep";return l.commandParameter(y,En,E+".fail",c.commandStr),l.commandParameter(m,En,E+".zfail",c.commandStr),l.commandParameter(L,En,E+".zpass",c.commandStr),[E===ji?Yn:Zi,En[y],En[m],En[L]]},function(d,y,m){var L=d.constants.stencilOps;l.optional(function(){d.assert(y,m+"&&typeof "+m+'==="object"',"invalid "+E)});function F(V){return l.optional(function(){d.assert(y,'!("'+V+'" in '+m+")||("+m+"."+V+" in "+L+")","invalid "+E+"."+V+", must be one of "+Object.keys(En))}),y.def('"',V,'" in ',m,"?",L,"[",m,".",V,"]:",xn)}return[E===ji?Yn:Zi,F("fail"),F("zfail"),F("zpass")]});case xo:return w(function(d){l.commandType(d,"object",x,c.commandStr);var y=d.factor|0,m=d.units|0;return l.commandType(y,"number",x+".factor",c.commandStr),l.commandType(m,"number",x+".units",c.commandStr),[y,m]},function(d,y,m){l.optional(function(){d.assert(y,m+"&&typeof "+m+'==="object"',"invalid "+E)});var L=y.def(m,".factor|0"),F=y.def(m,".units|0");return[L,F]});case Ql:return w(function(d){var y=0;return d==="front"?y=Zi:d==="back"&&(y=Yn),l.command(!!y,x,c.commandStr),y},function(d,y,m){return l.optional(function(){d.assert(y,m+'==="front"||'+m+'==="back"',"invalid cull.face")}),y.def(m,'==="front"?',Zi,":",Yn)});case bo:return w(function(d){return l.command(typeof d=="number"&&d>=G.lineWidthDims[0]&&d<=G.lineWidthDims[1],"invalid line width, must be a positive number between "+G.lineWidthDims[0]+" and "+G.lineWidthDims[1],c.commandStr),d},function(d,y,m){return l.optional(function(){d.assert(y,"typeof "+m+'==="number"&&'+m+">="+G.lineWidthDims[0]+"&&"+m+"<="+G.lineWidthDims[1],"invalid line width")}),m});case yo:return w(function(d){return l.commandParameter(d,Do,x,c.commandStr),Do[d]},function(d,y,m){return l.optional(function(){d.assert(y,m+'==="cw"||'+m+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),y.def(m+'==="cw"?'+fc+":"+Po)});case go:return w(function(d){return l.command(Mt(d)&&d.length===4,"color.mask must be length 4 array",c.commandStr),d.map(function(y){return!!y})},function(d,y,m){return l.optional(function(){d.assert(y,d.shared.isArrayLike+"("+m+")&&"+m+".length===4","invalid color.mask")}),xr(4,function(L){return"!!"+m+"["+L+"]"})});case Eo:return w(function(d){l.command(typeof d=="object"&&d,x,c.commandStr);var y="value"in d?d.value:1,m=!!d.invert;return l.command(typeof y=="number"&&y>=0&&y<=1,"sample.coverage.value must be a number between 0 and 1",c.commandStr),[y,m]},function(d,y,m){l.optional(function(){d.assert(y,m+"&&typeof "+m+'==="object"',"invalid sample.coverage")});var L=y.def('"value" in ',m,"?+",m,".value:1"),F=y.def("!!",m,".invert");return[L,F]})}}),O}function st(p,c){var b=p.static,S=p.dynamic,O={};return Object.keys(b).forEach(function(E){var x=b[E],w;if(typeof x=="number"||typeof x=="boolean")w=$t(function(){return x});else if(typeof x=="function"){var d=x._reglType;d==="texture2d"||d==="textureCube"?w=$t(function(y){return y.link(x)}):d==="framebuffer"||d==="framebufferCube"?(l.command(x.color.length>0,'missing color attachment for framebuffer sent to uniform "'+E+'"',c.commandStr),w=$t(function(y){return y.link(x.color[0])})):l.commandRaise('invalid data for uniform "'+E+'"',c.commandStr)}else Mt(x)?w=$t(function(y){var m=y.global.def("[",xr(x.length,function(L){return l.command(typeof x[L]=="number"||typeof x[L]=="boolean","invalid uniform "+E,y.commandStr),x[L]}),"]");return m}):l.commandRaise('invalid or missing data for uniform "'+E+'"',c.commandStr);w.value=x,O[E]=w}),Object.keys(S).forEach(function(E){var x=S[E];O[E]=vr(x,function(w,d){return w.invoke(d,x)})}),O}function Vt(p,c){var b=p.static,S=p.dynamic,O={};return Object.keys(b).forEach(function(E){var x=b[E],w=u.id(E),d=new C;if(es(x))d.state=_i,d.buffer=U.getBuffer(U.create(x,bi,!1,!0)),d.type=0;else{var y=U.getBuffer(x);if(y)d.state=_i,d.buffer=y,d.type=0;else if(l.command(typeof x=="object"&&x,"invalid data for attribute "+E,c.commandStr),"constant"in x){var m=x.constant;d.buffer="null",d.state=co,typeof m=="number"?d.x=m:(l.command(Mt(m)&&m.length>0&&m.length<=4,"invalid constant for attribute "+E,c.commandStr),vi.forEach(function(ne,Le){Le<m.length&&(d[ne]=m[Le])}))}else{es(x.buffer)?y=U.getBuffer(U.create(x.buffer,bi,!1,!0)):y=U.getBuffer(x.buffer),l.command(!!y,'missing buffer for attribute "'+E+'"',c.commandStr);var L=x.offset|0;l.command(L>=0,'invalid offset for attribute "'+E+'"',c.commandStr);var F=x.stride|0;l.command(F>=0&&F<256,'invalid stride for attribute "'+E+'", must be integer betweeen [0, 255]',c.commandStr);var V=x.size|0;l.command(!("size"in x)||V>0&&V<=4,'invalid size for attribute "'+E+'", must be 1,2,3,4',c.commandStr);var ae=!!x.normalized,se=0;"type"in x&&(l.commandParameter(x.type,kn,"invalid type for attribute "+E,c.commandStr),se=kn[x.type]);var ve=x.divisor|0;l.optional(function(){"divisor"in x&&(l.command(ve===0||q,'cannot specify divisor for attribute "'+E+'", instancing not supported',c.commandStr),l.command(ve>=0,'invalid divisor for attribute "'+E+'"',c.commandStr));var ne=c.commandStr,Le=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(x).forEach(function(xe){l.command(Le.indexOf(xe)>=0,'unknown parameter "'+xe+'" for attribute pointer "'+E+'" (valid parameters are '+Le+")",ne)})}),d.buffer=y,d.state=_i,d.size=V,d.normalized=ae,d.type=se||y.dtype,d.offset=L,d.stride=F,d.divisor=ve}}O[E]=$t(function(ne,Le){var xe=ne.attribCache;if(w in xe)return xe[w];var we={isStream:!1};return Object.keys(d).forEach(function(Ce){we[Ce]=d[Ce]}),d.buffer&&(we.buffer=ne.link(d.buffer),we.type=we.type||we.buffer+".dtype"),xe[w]=we,we})}),Object.keys(S).forEach(function(E){var x=S[E];function w(d,y){var m=d.invoke(y,x),L=d.shared,F=d.constants,V=L.isBufferArgs,ae=L.buffer;l.optional(function(){d.assert(y,m+"&&(typeof "+m+'==="object"||typeof '+m+'==="function")&&('+V+"("+m+")||"+ae+".getBuffer("+m+")||"+ae+".getBuffer("+m+".buffer)||"+V+"("+m+'.buffer)||("constant" in '+m+"&&(typeof "+m+'.constant==="number"||'+L.isArrayLike+"("+m+".constant))))",'invalid dynamic attribute "'+E+'"')});var se={isStream:y.def(!1)},ve=new C;ve.state=_i,Object.keys(ve).forEach(function(we){se[we]=y.def(""+ve[we])});var ne=se.buffer,Le=se.type;y("if(",V,"(",m,")){",se.isStream,"=true;",ne,"=",ae,".createStream(",bi,",",m,");",Le,"=",ne,".dtype;","}else{",ne,"=",ae,".getBuffer(",m,");","if(",ne,"){",Le,"=",ne,".dtype;",'}else if("constant" in ',m,"){",se.state,"=",co,";","if(typeof "+m+'.constant === "number"){',se[vi[0]],"=",m,".constant;",vi.slice(1).map(function(we){return se[we]}).join("="),"=0;","}else{",vi.map(function(we,Ce){return se[we]+"="+m+".constant.length>"+Ce+"?"+m+".constant["+Ce+"]:0;"}).join(""),"}}else{","if(",V,"(",m,".buffer)){",ne,"=",ae,".createStream(",bi,",",m,".buffer);","}else{",ne,"=",ae,".getBuffer(",m,".buffer);","}",Le,'="type" in ',m,"?",F.glTypes,"[",m,".type]:",ne,".dtype;",se.normalized,"=!!",m,".normalized;");function xe(we){y(se[we],"=",m,".",we,"|0;")}return xe("size"),xe("offset"),xe("stride"),xe("divisor"),y("}}"),y.exit("if(",se.isStream,"){",ae,".destroyStream(",ne,");","}"),se}O[E]=vr(x,w)}),O}function wt(p){var c=p.static,b=p.dynamic,S={};return Object.keys(c).forEach(function(O){var E=c[O];S[O]=$t(function(x,w){return typeof E=="number"||typeof E=="boolean"?""+E:x.link(E)})}),Object.keys(b).forEach(function(O){var E=b[O];S[O]=vr(E,function(x,w){return x.invoke(w,E)})}),S}function Ut(p,c,b,S,O){var E=p.static,x=p.dynamic;l.optional(function(){var xe=[Hn,Hi,zi,zn,Wn,Va,Xn,Ha,Vi,Wi].concat(Be);function we(Ce){Object.keys(Ce).forEach(function(Re){l.command(xe.indexOf(Re)>=0,'unknown parameter "'+Re+'"',O.commandStr)})}we(E),we(x)});var w=Ye(p,c),d=ge(p),y=Ue(p,d,O),m=Ft(p,O),L=Dt(p,O),F=it(p,O,w);function V(xe){var we=y[xe];we&&(L[xe]=we)}V(an),V(Ae(ja));var ae=Object.keys(L).length>0,se={framebuffer:d,draw:m,shader:F,state:L,dirty:ae,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(se.profile=me(p),se.uniforms=st(b,O),se.drawVAO=se.scopeVAO=m.vao,!se.drawVAO&&F.program&&!w&&_.angle_instanced_arrays&&m.static.elements){var ve=!0,ne=F.program.attributes.map(function(xe){var we=c.static[xe];return ve=ve&&!!we,we});if(ve&&ne.length>0){var Le=Z.getVAO(Z.createVAO({attributes:ne,elements:m.static.elements}));se.drawVAO=new Kt(null,null,null,function(xe,we){return xe.link(Le)}),se.useVAO=!0}}return w?se.useVAO=!0:se.attributes=Vt(c,O),se.context=wt(S),se}function Ht(p,c,b){var S=p.shared,O=S.context,E=p.scope();Object.keys(b).forEach(function(x){c.save(O,"."+x);var w=b[x],d=w.append(p,c);Array.isArray(d)?E(O,".",x,"=[",d.join(),"];"):E(O,".",x,"=",d,";")}),c(E)}function zt(p,c,b,S){var O=p.shared,E=O.gl,x=O.framebuffer,w;ye&&(w=c.def(O.extensions,".webgl_draw_buffers"));var d=p.constants,y=d.drawBuffer,m=d.backBuffer,L;b?L=b.append(p,c):L=c.def(x,".next"),S||c("if(",L,"!==",x,".cur){"),c("if(",L,"){",E,".bindFramebuffer(",dc,",",L,".framebuffer);"),ye&&c(w,".drawBuffersWEBGL(",y,"[",L,".colorAttachments.length]);"),c("}else{",E,".bindFramebuffer(",dc,",null);"),ye&&c(w,".drawBuffersWEBGL(",m,");"),c("}",x,".cur=",L,";"),S||c("}")}function Zt(p,c,b){var S=p.shared,O=S.gl,E=p.current,x=p.next,w=S.current,d=S.next,y=p.cond(w,".dirty");Be.forEach(function(m){var L=Ae(m);if(!(L in b.state)){var F,V;if(L in x){F=x[L],V=E[L];var ae=xr(_e[L].length,function(ve){return y.def(F,"[",ve,"]")});y(p.cond(ae.map(function(ve,ne){return ve+"!=="+V+"["+ne+"]"}).join("||")).then(O,".",k[L],"(",ae,");",ae.map(function(ve,ne){return V+"["+ne+"]="+ve}).join(";"),";"))}else{F=y.def(d,".",L);var se=p.cond(F,"!==",w,".",L);y(se),L in j?se(p.cond(F).then(O,".enable(",j[L],");").else(O,".disable(",j[L],");"),w,".",L,"=",F,";"):se(O,".",k[L],"(",F,");",w,".",L,"=",F,";")}}}),Object.keys(b.state).length===0&&y(w,".dirty=false;"),c(y)}function tr(p,c,b,S){var O=p.shared,E=p.current,x=O.current,w=O.gl;mc(Object.keys(b)).forEach(function(d){var y=b[d];if(!(S&&!S(y))){var m=y.append(p,c);if(j[d]){var L=j[d];Tn(y)?m?c(w,".enable(",L,");"):c(w,".disable(",L,");"):c(p.cond(m).then(w,".enable(",L,");").else(w,".disable(",L,");")),c(x,".",d,"=",m,";")}else if(Mt(m)){var F=E[d];c(w,".",k[d],"(",m,");",m.map(function(V,ae){return F+"["+ae+"]="+V}).join(";"),";")}else c(w,".",k[d],"(",m,");",x,".",d,"=",m,";")}})}function Nt(p,c){q&&(p.instancing=c.def(p.shared.extensions,".angle_instanced_arrays"))}function Ze(p,c,b,S,O){var E=p.shared,x=p.stats,w=E.current,d=E.timer,y=b.profile;function m(){return typeof performance>"u"?"Date.now()":"performance.now()"}var L,F;function V(xe){L=c.def(),xe(L,"=",m(),";"),typeof O=="string"?xe(x,".count+=",O,";"):xe(x,".count++;"),Y&&(S?(F=c.def(),xe(F,"=",d,".getNumPendingQueries();")):xe(d,".beginQuery(",x,");"))}function ae(xe){xe(x,".cpuTime+=",m(),"-",L,";"),Y&&(S?xe(d,".pushScopeStats(",F,",",d,".getNumPendingQueries(),",x,");"):xe(d,".endQuery();"))}function se(xe){var we=c.def(w,".profile");c(w,".profile=",xe,";"),c.exit(w,".profile=",we,";")}var ve;if(y){if(Tn(y)){y.enable?(V(c),ae(c.exit),se("true")):se("false");return}ve=y.append(p,c),se(ve)}else ve=c.def(w,".profile");var ne=p.block();V(ne),c("if(",ve,"){",ne,"}");var Le=p.block();ae(Le),c.exit("if(",ve,"){",Le,"}")}function rr(p,c,b,S,O){var E=p.shared;function x(d){switch(d){case za:case Ya:case Qa:return 2;case Wa:case Ka:case Za:return 3;case Xa:case qa:case Ja:return 4;default:return 1}}function w(d,y,m){var L=E.gl,F=c.def(d,".location"),V=c.def(E.attributes,"[",F,"]"),ae=m.state,se=m.buffer,ve=[m.x,m.y,m.z,m.w],ne=["buffer","normalized","offset","stride"];function Le(){c("if(!",V,".buffer){",L,".enableVertexAttribArray(",F,");}");var we=m.type,Ce;if(m.size?Ce=c.def(m.size,"||",y):Ce=y,c("if(",V,".type!==",we,"||",V,".size!==",Ce,"||",ne.map(function(je){return V+"."+je+"!=="+m[je]}).join("||"),"){",L,".bindBuffer(",bi,",",se,".buffer);",L,".vertexAttribPointer(",[F,Ce,we,m.normalized,m.stride,m.offset],");",V,".type=",we,";",V,".size=",Ce,";",ne.map(function(je){return V+"."+je+"="+m[je]+";"}).join(""),"}"),q){var Re=m.divisor;c("if(",V,".divisor!==",Re,"){",p.instancing,".vertexAttribDivisorANGLE(",[F,Re],");",V,".divisor=",Re,";}")}}function xe(){c("if(",V,".buffer){",L,".disableVertexAttribArray(",F,");",V,".buffer=null;","}if(",vi.map(function(we,Ce){return V+"."+we+"!=="+ve[Ce]}).join("||"),"){",L,".vertexAttrib4f(",F,",",ve,");",vi.map(function(we,Ce){return V+"."+we+"="+ve[Ce]+";"}).join(""),"}")}ae===_i?Le():ae===co?xe():(c("if(",ae,"===",_i,"){"),Le(),c("}else{"),xe(),c("}"))}S.forEach(function(d){var y=d.name,m=b.attributes[y],L;if(m){if(!O(m))return;L=m.append(p,c)}else{if(!O(vc))return;var F=p.scopeAttrib(y);l.optional(function(){p.assert(c,F+".state","missing attribute "+y)}),L={},Object.keys(new C).forEach(function(V){L[V]=c.def(F,".",V)})}w(p.link(d),x(d.info.type),L)})}function dt(p,c,b,S,O,E){for(var x=p.shared,w=x.gl,d,y=0;y<S.length;++y){var m=S[y],L=m.name,F=m.info.type,V=b.uniforms[L],ae=p.link(m),se=ae+".location",ve;if(V){if(!O(V))continue;if(Tn(V)){var ne=V.value;if(l.command(ne!==null&&typeof ne<"u",'missing uniform "'+L+'"',p.commandStr),F===qi||F===Qi){l.command(typeof ne=="function"&&(F===qi&&(ne._reglType==="texture2d"||ne._reglType==="framebuffer")||F===Qi&&(ne._reglType==="textureCube"||ne._reglType==="framebufferCube")),"invalid texture for uniform "+L,p.commandStr);var Le=p.link(ne._texture||ne.color[0]._texture);c(w,".uniform1i(",se,",",Le+".bind());"),c.exit(Le,".unbind();")}else if(F===Xi||F===Yi||F===Ki){l.optional(function(){l.command(Mt(ne),"invalid matrix for uniform "+L,p.commandStr),l.command(F===Xi&&ne.length===4||F===Yi&&ne.length===9||F===Ki&&ne.length===16,"invalid length for matrix uniform "+L,p.commandStr)});var xe=p.global.def("new Float32Array(["+Array.prototype.slice.call(ne)+"])"),we=2;F===Yi?we=3:F===Ki&&(we=4),c(w,".uniformMatrix",we,"fv(",se,",false,",xe,");")}else{switch(F){case Lo:l.commandType(ne,"number","uniform "+L,p.commandStr),d="1f";break;case za:l.command(Mt(ne)&&ne.length===2,"uniform "+L,p.commandStr),d="2f";break;case Wa:l.command(Mt(ne)&&ne.length===3,"uniform "+L,p.commandStr),d="3f";break;case Xa:l.command(Mt(ne)&&ne.length===4,"uniform "+L,p.commandStr),d="4f";break;case Oo:l.commandType(ne,"boolean","uniform "+L,p.commandStr),d="1i";break;case Ro:l.commandType(ne,"number","uniform "+L,p.commandStr),d="1i";break;case Qa:l.command(Mt(ne)&&ne.length===2,"uniform "+L,p.commandStr),d="2i";break;case Ya:l.command(Mt(ne)&&ne.length===2,"uniform "+L,p.commandStr),d="2i";break;case Za:l.command(Mt(ne)&&ne.length===3,"uniform "+L,p.commandStr),d="3i";break;case Ka:l.command(Mt(ne)&&ne.length===3,"uniform "+L,p.commandStr),d="3i";break;case Ja:l.command(Mt(ne)&&ne.length===4,"uniform "+L,p.commandStr),d="4i";break;case qa:l.command(Mt(ne)&&ne.length===4,"uniform "+L,p.commandStr),d="4i";break}c(w,".uniform",d,"(",se,",",Mt(ne)?Array.prototype.slice.call(ne):ne,");")}continue}else ve=V.append(p,c)}else{if(!O(vc))continue;ve=c.def(x.uniforms,"[",u.id(L),"]")}F===qi?(l(!Array.isArray(ve),"must specify a scalar prop for textures"),c("if(",ve,"&&",ve,'._reglType==="framebuffer"){',ve,"=",ve,".color[0];","}")):F===Qi&&(l(!Array.isArray(ve),"must specify a scalar prop for cube maps"),c("if(",ve,"&&",ve,'._reglType==="framebufferCube"){',ve,"=",ve,".color[0];","}")),l.optional(function(){function sr(Nr,Tc){p.assert(c,Nr,'bad data or missing for uniform "'+L+'".  '+Tc)}function Wr(Nr){l(!Array.isArray(ve),"must not specify an array type for uniform"),sr("typeof "+ve+'==="'+Nr+'"',"invalid type, expected "+Nr)}function Fr(Nr,Tc){Array.isArray(ve)?l(ve.length===Nr,"must have length "+Nr):sr(x.isArrayLike+"("+ve+")&&"+ve+".length==="+Nr,"invalid vector, should have length "+Nr,p.commandStr)}function Ec(Nr){l(!Array.isArray(ve),"must not specify a value type"),sr("typeof "+ve+'==="function"&&'+ve+'._reglType==="texture'+(Nr===oc?"2d":"Cube")+'"',"invalid texture type",p.commandStr)}switch(F){case Ro:Wr("number");break;case Ya:Fr(2);break;case Ka:Fr(3);break;case qa:Fr(4);break;case Lo:Wr("number");break;case za:Fr(2);break;case Wa:Fr(3);break;case Xa:Fr(4);break;case Oo:Wr("boolean");break;case Qa:Fr(2);break;case Za:Fr(3);break;case Ja:Fr(4);break;case Xi:Fr(4);break;case Yi:Fr(9);break;case Ki:Fr(16);break;case qi:Ec(oc);break;case Qi:Ec(vm);break}});var Ce=1;switch(F){case qi:case Qi:var Re=c.def(ve,"._texture");c(w,".uniform1i(",se,",",Re,".bind());"),c.exit(Re,".unbind();");continue;case Ro:case Oo:d="1i";break;case Ya:case Qa:d="2i",Ce=2;break;case Ka:case Za:d="3i",Ce=3;break;case qa:case Ja:d="4i",Ce=4;break;case Lo:d="1f";break;case za:d="2f",Ce=2;break;case Wa:d="3f",Ce=3;break;case Xa:d="4f",Ce=4;break;case Xi:d="Matrix2fv";break;case Yi:d="Matrix3fv";break;case Ki:d="Matrix4fv";break}if(d.charAt(0)==="M"){c(w,".uniform",d,"(",se,",");var je=Math.pow(F-Xi+2,2),yt=p.global.def("new Float32Array(",je,")");Array.isArray(ve)?c("false,(",xr(je,function(sr){return yt+"["+sr+"]="+ve[sr]}),",",yt,")"):c("false,(Array.isArray(",ve,")||",ve," instanceof Float32Array)?",ve,":(",xr(je,function(sr){return yt+"["+sr+"]="+ve+"["+sr+"]"}),",",yt,")"),c(");")}else if(Ce>1){for(var Jt=[],sn=[],on=0;on<Ce;++on)Array.isArray(ve)?sn.push(ve[on]):sn.push(c.def(ve+"["+on+"]")),E&&Jt.push(c.def());E&&c("if(!",p.batchId,"||",Jt.map(function(sr,Wr){return sr+"!=="+sn[Wr]}).join("||"),"){",Jt.map(function(sr,Wr){return sr+"="+sn[Wr]+";"}).join("")),c(w,".uniform",d,"(",se,",",sn.join(","),");"),E&&c("}")}else{if(l(!Array.isArray(ve),"uniform value must not be an array"),E){var fn=c.def();c("if(!",p.batchId,"||",fn,"!==",ve,"){",fn,"=",ve,";")}c(w,".uniform",d,"(",se,",",ve,");"),E&&c("}")}}}function ke(p,c,b,S){var O=p.shared,E=O.gl,x=O.draw,w=S.draw;function d(){var Ce=w.elements,Re,je=c;return Ce?((Ce.contextDep&&S.contextDynamic||Ce.propDep)&&(je=b),Re=Ce.append(p,je),w.elementsActive&&je("if("+Re+")"+E+".bindBuffer("+Co+","+Re+".buffer.buffer);")):(Re=je.def(),je(Re,"=",x,".",zn,";","if(",Re,"){",E,".bindBuffer(",Co,",",Re,".buffer.buffer);}","else if(",O.vao,".currentVAO){",Re,"=",p.shared.elements+".getElements("+O.vao,".currentVAO.elements);",z?"":"if("+Re+")"+E+".bindBuffer("+Co+","+Re+".buffer.buffer);","}")),Re}function y(){var Ce=w.count,Re,je=c;return Ce?((Ce.contextDep&&S.contextDynamic||Ce.propDep)&&(je=b),Re=Ce.append(p,je),l.optional(function(){Ce.MISSING&&p.assert(c,"false","missing vertex count"),Ce.DYNAMIC&&p.assert(je,Re+">=0","missing vertex count")})):(Re=je.def(x,".",Xn),l.optional(function(){p.assert(je,Re+">=0","missing vertex count")})),Re}var m=d();function L(Ce){var Re=w[Ce];return Re?Re.contextDep&&S.contextDynamic||Re.propDep?Re.append(p,b):Re.append(p,c):c.def(x,".",Ce)}var F=L(Wn),V=L(Va),ae=y();if(typeof ae=="number"){if(ae===0)return}else b("if(",ae,"){"),b.exit("}");var se,ve;q&&(se=L(Ha),ve=p.instancing);var ne=m+".type",Le=w.elements&&Tn(w.elements)&&!w.vaoActive;function xe(){function Ce(){b(ve,".drawElementsInstancedANGLE(",[F,ae,ne,V+"<<(("+ne+"-"+$l+")>>1)",se],");")}function Re(){b(ve,".drawArraysInstancedANGLE(",[F,V,ae,se],");")}m&&m!=="null"?Le?Ce():(b("if(",m,"){"),Ce(),b("}else{"),Re(),b("}")):Re()}function we(){function Ce(){b(E+".drawElements("+[F,ae,ne,V+"<<(("+ne+"-"+$l+")>>1)"]+");")}function Re(){b(E+".drawArrays("+[F,V,ae]+");")}m&&m!=="null"?Le?Ce():(b("if(",m,"){"),Ce(),b("}else{"),Re(),b("}")):Re()}q&&(typeof se!="number"||se>=0)?typeof se=="string"?(b("if(",se,">0){"),xe(),b("}else if(",se,"<0){"),we(),b("}")):xe():we()}function at(p,c,b,S,O){var E=He(),x=E.proc("body",O);return l.optional(function(){E.commandStr=c.commandStr,E.command=E.link(c.commandStr)}),q&&(E.instancing=x.def(E.shared.extensions,".angle_instanced_arrays")),p(E,x,b,S),E.compile().body}function ct(p,c,b,S){Nt(p,c),b.useVAO?b.drawVAO?c(p.shared.vao,".setVAO(",b.drawVAO.append(p,c),");"):c(p.shared.vao,".setVAO(",p.shared.vao,".targetVAO);"):(c(p.shared.vao,".setVAO(null);"),rr(p,c,b,S.attributes,function(){return!0})),dt(p,c,b,S.uniforms,function(){return!0},!1),ke(p,c,c,b)}function Bt(p,c){var b=p.proc("draw",1);Nt(p,b),Ht(p,b,c.context),zt(p,b,c.framebuffer),Zt(p,b,c),tr(p,b,c.state),Ze(p,b,c,!1,!0);var S=c.shader.progVar.append(p,b);if(b(p.shared.gl,".useProgram(",S,".program);"),c.shader.program)ct(p,b,c,c.shader.program);else{b(p.shared.vao,".setVAO(null);");var O=p.global.def("{}"),E=b.def(S,".id"),x=b.def(O,"[",E,"]");b(p.cond(x).then(x,".call(this,a0);").else(x,"=",O,"[",E,"]=",p.link(function(w){return at(ct,p,c,w,1)}),"(",S,");",x,".call(this,a0);"))}Object.keys(c.state).length>0&&b(p.shared.current,".dirty=true;"),p.shared.vao&&b(p.shared.vao,".setVAO(null);")}function zr(p,c,b,S){p.batchId="a1",Nt(p,c);function O(){return!0}rr(p,c,b,S.attributes,O),dt(p,c,b,S.uniforms,O,!1),ke(p,c,c,b)}function Kn(p,c,b,S){Nt(p,c);var O=b.contextDep,E=c.def(),x="a0",w="a1",d=c.def();p.shared.props=d,p.batchId=E;var y=p.scope(),m=p.scope();c(y.entry,"for(",E,"=0;",E,"<",w,";++",E,"){",d,"=",x,"[",E,"];",m,"}",y.exit);function L(ne){return ne.contextDep&&O||ne.propDep}function F(ne){return!L(ne)}if(b.needsContext&&Ht(p,m,b.context),b.needsFramebuffer&&zt(p,m,b.framebuffer),tr(p,m,b.state,L),b.profile&&L(b.profile)&&Ze(p,m,b,!1,!0),S)b.useVAO?b.drawVAO?L(b.drawVAO)?m(p.shared.vao,".setVAO(",b.drawVAO.append(p,m),");"):y(p.shared.vao,".setVAO(",b.drawVAO.append(p,y),");"):y(p.shared.vao,".setVAO(",p.shared.vao,".targetVAO);"):(y(p.shared.vao,".setVAO(null);"),rr(p,y,b,S.attributes,F),rr(p,m,b,S.attributes,L)),dt(p,y,b,S.uniforms,F,!1),dt(p,m,b,S.uniforms,L,!0),ke(p,y,m,b);else{var V=p.global.def("{}"),ae=b.shader.progVar.append(p,m),se=m.def(ae,".id"),ve=m.def(V,"[",se,"]");m(p.shared.gl,".useProgram(",ae,".program);","if(!",ve,"){",ve,"=",V,"[",se,"]=",p.link(function(ne){return at(zr,p,b,ne,2)}),"(",ae,");}",ve,".call(this,a0[",E,"],",E,");")}}function v(p,c){var b=p.proc("batch",2);p.batchId="0",Nt(p,b);var S=!1,O=!0;Object.keys(c.context).forEach(function(V){S=S||c.context[V].propDep}),S||(Ht(p,b,c.context),O=!1);var E=c.framebuffer,x=!1;E?(E.propDep?S=x=!0:E.contextDep&&S&&(x=!0),x||zt(p,b,E)):zt(p,b,null),c.state.viewport&&c.state.viewport.propDep&&(S=!0);function w(V){return V.contextDep&&S||V.propDep}Zt(p,b,c),tr(p,b,c.state,function(V){return!w(V)}),(!c.profile||!w(c.profile))&&Ze(p,b,c,!1,"a1"),c.contextDep=S,c.needsContext=O,c.needsFramebuffer=x;var d=c.shader.progVar;if(d.contextDep&&S||d.propDep)Kn(p,b,c,null);else{var y=d.append(p,b);if(b(p.shared.gl,".useProgram(",y,".program);"),c.shader.program)Kn(p,b,c,c.shader.program);else{b(p.shared.vao,".setVAO(null);");var m=p.global.def("{}"),L=b.def(y,".id"),F=b.def(m,"[",L,"]");b(p.cond(F).then(F,".call(this,a0,a1);").else(F,"=",m,"[",L,"]=",p.link(function(V){return at(Kn,p,c,V,2)}),"(",y,");",F,".call(this,a0,a1);"))}}Object.keys(c.state).length>0&&b(p.shared.current,".dirty=true;"),p.shared.vao&&b(p.shared.vao,".setVAO(null);")}function M(p,c){var b=p.proc("scope",3);p.batchId="a2";var S=p.shared,O=S.current;Ht(p,b,c.context),c.framebuffer&&c.framebuffer.append(p,b),mc(Object.keys(c.state)).forEach(function(x){var w=c.state[x],d=w.append(p,b);Mt(d)?d.forEach(function(y,m){b.set(p.next[x],"["+m+"]",y)}):b.set(S.next,"."+x,d)}),Ze(p,b,c,!0,!0),[zn,Va,Xn,Ha,Wn].forEach(function(x){var w=c.draw[x];w&&b.set(S.draw,"."+x,""+w.append(p,b))}),Object.keys(c.uniforms).forEach(function(x){var w=c.uniforms[x].append(p,b);Array.isArray(w)&&(w="["+w.join()+"]"),b.set(S.uniforms,"["+u.id(x)+"]",w)}),Object.keys(c.attributes).forEach(function(x){var w=c.attributes[x].append(p,b),d=p.scopeAttrib(x);Object.keys(new C).forEach(function(y){b.set(d,"."+y,w[y])})}),c.scopeVAO&&b.set(S.vao,".targetVAO",c.scopeVAO.append(p,b));function E(x){var w=c.shader[x];w&&b.set(S.shader,"."+x,w.append(p,b))}E(Hi),E(zi),Object.keys(c.state).length>0&&(b(O,".dirty=true;"),b.exit(O,".dirty=true;")),b("a1(",p.shared.context,",a0,",p.batchId,");")}function D(p){if(!(typeof p!="object"||Mt(p))){for(var c=Object.keys(p),b=0;b<c.length;++b)if(ar.isDynamic(p[c[b]]))return!0;return!1}}function Ee(p,c,b){var S=c.static[b];if(!S||!D(S))return;var O=p.global,E=Object.keys(S),x=!1,w=!1,d=!1,y=p.global.def("{}");E.forEach(function(L){var F=S[L];if(ar.isDynamic(F)){typeof F=="function"&&(F=S[L]=ar.unbox(F));var V=vr(F,null);x=x||V.thisDep,d=d||V.propDep,w=w||V.contextDep}else{switch(O(y,".",L,"="),typeof F){case"number":O(F);break;case"string":O('"',F,'"');break;case"object":Array.isArray(F)&&O("[",F.join(),"]");break;default:O(p.link(F));break}O(";")}});function m(L,F){E.forEach(function(V){var ae=S[V];if(ar.isDynamic(ae)){var se=L.invoke(F,ae);F(y,".",V,"=",se,";")}})}c.dynamic[b]=new ar.DynamicVariable(Ua,{thisDep:x,contextDep:w,propDep:d,ref:y,append:m}),delete c.static[b]}function nt(p,c,b,S,O){var E=He();E.stats=E.link(O),Object.keys(c.static).forEach(function(w){Ee(E,c,w)}),hm.forEach(function(w){Ee(E,p,w)});var x=Ut(p,c,b,S,E);return Bt(E,x),M(E,x),v(E,x),n(E.compile(),{destroy:function(){x.shader.program.destroy()}})}return{next:pe,current:_e,procs:function(){var p=He(),c=p.proc("poll"),b=p.proc("refresh"),S=p.block();c(S),b(S);var O=p.shared,E=O.gl,x=O.next,w=O.current;S(w,".dirty=false;"),zt(p,c),zt(p,b,null,!0);var d;q&&(d=p.link(q)),_.oes_vertex_array_object&&b(p.link(_.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var y=0;y<G.maxAttributes;++y){var m=b.def(O.attributes,"[",y,"]"),L=p.cond(m,".buffer");L.then(E,".enableVertexAttribArray(",y,");",E,".bindBuffer(",bi,",",m,".buffer.buffer);",E,".vertexAttribPointer(",y,",",m,".size,",m,".type,",m,".normalized,",m,".stride,",m,".offset);").else(E,".disableVertexAttribArray(",y,");",E,".vertexAttrib4f(",y,",",m,".x,",m,".y,",m,".z,",m,".w);",m,".buffer=null;"),b(L),q&&b(d,".vertexAttribDivisorANGLE(",y,",",m,".divisor);")}return b(p.shared.vao,".currentVAO=null;",p.shared.vao,".setVAO(",p.shared.vao,".targetVAO);"),Object.keys(j).forEach(function(F){var V=j[F],ae=S.def(x,".",F),se=p.block();se("if(",ae,"){",E,".enable(",V,")}else{",E,".disable(",V,")}",w,".",F,"=",ae,";"),b(se),c("if(",ae,"!==",w,".",F,"){",se,"}")}),Object.keys(k).forEach(function(F){var V=k[F],ae=_e[F],se,ve,ne=p.block();if(ne(E,".",V,"("),Mt(ae)){var Le=ae.length;se=p.global.def(x,".",F),ve=p.global.def(w,".",F),ne(xr(Le,function(xe){return se+"["+xe+"]"}),");",xr(Le,function(xe){return ve+"["+xe+"]="+se+"["+xe+"];"}).join("")),c("if(",xr(Le,function(xe){return se+"["+xe+"]!=="+ve+"["+xe+"]"}).join("||"),"){",ne,"}")}else se=S.def(x,".",F),ve=S.def(w,".",F),ne(se,");",w,".",F,"=",se,";"),c("if(",se,"!==",ve,"){",ne,"}");b(ne)}),p.compile()}(),compile:nt}}function Pm(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Dm=34918,Im=34919,_c=35007,Gm=function(s,u){if(!u.ext_disjoint_timer_query)return null;var _=[];function G(){return _.pop()||u.ext_disjoint_timer_query.createQueryEXT()}function U(q){_.push(q)}var I=[];function B(q){var ye=G();u.ext_disjoint_timer_query.beginQueryEXT(_c,ye),I.push(ye),Y(I.length-1,I.length,q)}function X(){u.ext_disjoint_timer_query.endQueryEXT(_c)}function W(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Z=[];function ee(){return Z.pop()||new W}function J(q){Z.push(q)}var oe=[];function Y(q,ye,z){var _e=ee();_e.startQueryIndex=q,_e.endQueryIndex=ye,_e.sum=0,_e.stats=z,oe.push(_e)}var Q=[],C=[];function N(){var q,ye,z=I.length;if(z!==0){C.length=Math.max(C.length,z+1),Q.length=Math.max(Q.length,z+1),Q[0]=0,C[0]=0;var _e=0;for(q=0,ye=0;ye<I.length;++ye){var pe=I[ye];u.ext_disjoint_timer_query.getQueryObjectEXT(pe,Im)?(_e+=u.ext_disjoint_timer_query.getQueryObjectEXT(pe,Dm),U(pe)):I[q++]=pe,Q[ye+1]=_e,C[ye+1]=q}for(I.length=q,q=0,ye=0;ye<oe.length;++ye){var Be=oe[ye],j=Be.startQueryIndex,k=Be.endQueryIndex;Be.sum+=Q[k]-Q[j];var Ae=C[j],fe=C[k];fe===Ae?(Be.stats.gpuTime+=Be.sum/1e6,J(Be)):(Be.startQueryIndex=Ae,Be.endQueryIndex=fe,oe[q++]=Be)}oe.length=q}}return{beginQuery:B,endQuery:X,pushScopeStats:Y,update:N,getNumPendingQueries:function(){return I.length},clear:function(){_.push.apply(_,I);for(var q=0;q<_.length;q++)u.ext_disjoint_timer_query.deleteQueryEXT(_[q]);I.length=0,_.length=0},restore:function(){I.length=0,_.length=0}}},Mm=16384,Nm=256,Bm=1024,km=34962,gc="webglcontextlost",yc="webglcontextrestored",bc=1,$m=2,Um=3;function xc(s,u){for(var _=0;_<s.length;++_)if(s[_]===u)return _;return-1}function jm(s){var u=$d(s);if(!u)return null;var _=u.gl,G=_.getContextAttributes(),U=_.isContextLost(),I=Ud(_,u);if(!I)return null;var B=Aa(),X=Pm(),W=I.extensions,Z=Gm(_,W),ee=br(),J=_.drawingBufferWidth,oe=_.drawingBufferHeight,Y={tick:0,time:0,viewportWidth:J,viewportHeight:oe,framebufferWidth:J,framebufferHeight:oe,drawingBufferWidth:J,drawingBufferHeight:oe,pixelRatio:u.pixelRatio},Q={},C={elements:null,primitive:4,count:-1,offset:0,instances:-1},N=Lh(_,W),q=Hh(_,X,u,_e),ye=rp(_,W,q,X),z=rm(_,W,N,X,q,ye,C);function _e(ke){return z.destroyBuffer(ke)}var pe=sm(_,B,X,u),Be=Dp(_,W,N,function(){Ae.procs.poll()},Y,X,u),j=Ip(_,W,N,X,u),k=em(_,W,N,Be,j,X),Ae=Fm(_,B,W,N,q,ye,Be,k,Q,z,pe,C,Y,Z,u),fe=lm(_,k,Ae.procs.poll,Y,G,W,N),K=Ae.next,ce=_.canvas,he=[],Ke=[],He=[],me=[u.onDestroy],ge=null;function Ue(){if(he.length===0){Z&&Z.update(),ge=null;return}ge=nr.next(Ue),tr();for(var ke=he.length-1;ke>=0;--ke){var at=he[ke];at&&at(Y,null,0)}_.flush(),Z&&Z.update()}function Ye(){!ge&&he.length>0&&(ge=nr.next(Ue))}function it(){ge&&(nr.cancel(Ue),ge=null)}function Ft(ke){ke.preventDefault(),U=!0,it(),Ke.forEach(function(at){at()})}function Dt(ke){_.getError(),U=!1,I.restore(),pe.restore(),q.restore(),Be.restore(),j.restore(),k.restore(),z.restore(),Z&&Z.restore(),Ae.procs.refresh(),Ye(),He.forEach(function(at){at()})}ce&&(ce.addEventListener(gc,Ft,!1),ce.addEventListener(yc,Dt,!1));function st(){he.length=0,it(),ce&&(ce.removeEventListener(gc,Ft),ce.removeEventListener(yc,Dt)),pe.clear(),k.clear(),j.clear(),z.clear(),Be.clear(),ye.clear(),q.clear(),Z&&Z.clear(),me.forEach(function(ke){ke()})}function Vt(ke){l(!!ke,"invalid args to regl({...})"),l.type(ke,"object","invalid args to regl({...})");function at(O){var E=n({},O);delete E.uniforms,delete E.attributes,delete E.context,delete E.vao,"stencil"in E&&E.stencil.op&&(E.stencil.opBack=E.stencil.opFront=E.stencil.op,delete E.stencil.op);function x(w){if(w in E){var d=E[w];delete E[w],Object.keys(d).forEach(function(y){E[w+"."+y]=d[y]})}}return x("blend"),x("depth"),x("cull"),x("stencil"),x("polygonOffset"),x("scissor"),x("sample"),"vao"in O&&(E.vao=O.vao),E}function ct(O,E){var x={},w={};return Object.keys(O).forEach(function(d){var y=O[d];if(ar.isDynamic(y)){w[d]=ar.unbox(y,d);return}else if(E&&Array.isArray(y)){for(var m=0;m<y.length;++m)if(ar.isDynamic(y[m])){w[d]=ar.unbox(y,d);return}}x[d]=y}),{dynamic:w,static:x}}var Bt=ct(ke.context||{},!0),zr=ct(ke.uniforms||{},!0),Kn=ct(ke.attributes||{},!1),v=ct(at(ke),!1),M={gpuTime:0,cpuTime:0,count:0},D=Ae.compile(v,Kn,zr,Bt,M),Ee=D.draw,nt=D.batch,p=D.scope,c=[];function b(O){for(;c.length<O;)c.push(null);return c}function S(O,E){var x;if(U&&l.raise("context lost"),typeof O=="function")return p.call(this,null,O,0);if(typeof E=="function")if(typeof O=="number")for(x=0;x<O;++x)p.call(this,null,E,x);else if(Array.isArray(O))for(x=0;x<O.length;++x)p.call(this,O[x],E,x);else return p.call(this,O,E,0);else if(typeof O=="number"){if(O>0)return nt.call(this,b(O|0),O|0)}else if(Array.isArray(O)){if(O.length)return nt.call(this,O,O.length)}else return Ee.call(this,O)}return n(S,{stats:M,destroy:function(){D.destroy()}})}var wt=k.setFBO=Vt({framebuffer:ar.define.call(null,bc,"framebuffer")});function Ut(ke,at){var ct=0;Ae.procs.poll();var Bt=at.color;Bt&&(_.clearColor(+Bt[0]||0,+Bt[1]||0,+Bt[2]||0,+Bt[3]||0),ct|=Mm),"depth"in at&&(_.clearDepth(+at.depth),ct|=Nm),"stencil"in at&&(_.clearStencil(at.stencil|0),ct|=Bm),l(!!ct,"called regl.clear with no buffer specified"),_.clear(ct)}function Ht(ke){if(l(typeof ke=="object"&&ke,"regl.clear() takes an object as input"),"framebuffer"in ke)if(ke.framebuffer&&ke.framebuffer_reglType==="framebufferCube")for(var at=0;at<6;++at)wt(n({framebuffer:ke.framebuffer.faces[at]},ke),Ut);else wt(ke,Ut);else Ut(null,ke)}function zt(ke){l.type(ke,"function","regl.frame() callback must be a function"),he.push(ke);function at(){var ct=xc(he,ke);l(ct>=0,"cannot cancel a frame twice");function Bt(){var zr=xc(he,Bt);he[zr]=he[he.length-1],he.length-=1,he.length<=0&&it()}he[ct]=Bt}return Ye(),{cancel:at}}function Zt(){var ke=K.viewport,at=K.scissor_box;ke[0]=ke[1]=at[0]=at[1]=0,Y.viewportWidth=Y.framebufferWidth=Y.drawingBufferWidth=ke[2]=at[2]=_.drawingBufferWidth,Y.viewportHeight=Y.framebufferHeight=Y.drawingBufferHeight=ke[3]=at[3]=_.drawingBufferHeight}function tr(){Y.tick+=1,Y.time=Ze(),Zt(),Ae.procs.poll()}function Nt(){Be.refresh(),Zt(),Ae.procs.refresh(),Z&&Z.update()}function Ze(){return(br()-ee)/1e3}Nt();function rr(ke,at){l.type(at,"function","listener callback must be a function");var ct;switch(ke){case"frame":return zt(at);case"lost":ct=Ke;break;case"restore":ct=He;break;case"destroy":ct=me;break;default:l.raise("invalid event, must be one of frame,lost,restore,destroy")}return ct.push(at),{cancel:function(){for(var Bt=0;Bt<ct.length;++Bt)if(ct[Bt]===at){ct[Bt]=ct[ct.length-1],ct.pop();return}}}}var dt=n(Vt,{clear:Ht,prop:ar.define.bind(null,bc),context:ar.define.bind(null,$m),this:ar.define.bind(null,Um),draw:Vt({}),buffer:function(ke){return q.create(ke,km,!1,!1)},elements:function(ke){return ye.create(ke,!1)},texture:Be.create2D,cube:Be.createCube,renderbuffer:j.create,framebuffer:k.create,framebufferCube:k.createCube,vao:z.createVAO,attributes:G,frame:zt,on:rr,limits:N,hasExtension:function(ke){return N.extensions.indexOf(ke.toLowerCase())>=0},read:fe,destroy:st,_gl:_,_refresh:Nt,poll:function(){tr(),Z&&Z.update()},now:Ze,stats:X});return u.onDone(null,dt),dt}return jm})})(Fd);var N_=Fd.exports;const B_=M_(N_),Ct=ai({enabled:!1,x:0,y:0,z:0,angleX:0,angleY:0,angleZ:0,scaleX:1,scaleY:1,scaleZ:1});class Is{constructor(t,r){Pe(this,"x");Pe(this,"y");Pe(this,"current",[0,0]);Pe(this,"transition");this.x=t,this.y=r,this.current=[t,r]}set(t,r,n=0){const i=this.x,a=this.y;this.x=t,this.y=r,n===0?(this.current=[t,r],this.transition=void 0):(this.current=[i,a],this.transition={from:[i,a],target:[t,r],duration:[0,n]})}move(t,r,n=0){this.set(this.x+t,this.y+r,n)}tick(t){if(!this.transition)return;const r=this.transition;if(r.duration[0]+=t,r.duration[0]>=r.duration[1])this.current=r.target,this.transition=void 0;else{const n=r.duration[0]/r.duration[1],i=-(Math.cos(Math.PI*n)-1)/2,a=r.from[0]+(r.target[0]-r.from[0])*i,o=r.from[1]+(r.target[1]-r.from[1])*i;this.current=[a,o]}}distance(t){return Math.sqrt((this.x-t.x)**2+(this.y-t.y)**2)}equals(t){return this.x===t.x&&this.y===t.y}clone(){return Object.assign(Object.create(Object.getPrototypeOf(this)),this)}static from(t){return new Is(t[0],t[1])}}var Di=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function hn(){var e=new Di(16);return Di!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function ta(e){var t=new Di(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function k_(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],f=t[5],h=t[6],T=t[7],g=t[8],P=t[9],$=t[10],re=t[11],ue=t[12],De=t[13],qe=t[14],Ie=t[15],Qe=r*f-n*o,$e=r*h-i*o,be=r*T-a*o,Me=n*h-i*f,ze=n*T-a*f,xt=i*T-a*h,Rt=g*De-P*ue,Ve=g*qe-$*ue,Je=g*Ie-re*ue,ht=P*qe-$*De,Oe=P*Ie-re*De,mt=$*Ie-re*qe,ot=Qe*mt-$e*Oe+be*ht+Me*Je-ze*Ve+xt*Rt;return ot?(ot=1/ot,e[0]=(f*mt-h*Oe+T*ht)*ot,e[1]=(i*Oe-n*mt-a*ht)*ot,e[2]=(De*xt-qe*ze+Ie*Me)*ot,e[3]=($*ze-P*xt-re*Me)*ot,e[4]=(h*Je-o*mt-T*Ve)*ot,e[5]=(r*mt-i*Je+a*Ve)*ot,e[6]=(qe*be-ue*xt-Ie*$e)*ot,e[7]=(g*xt-$*be+re*$e)*ot,e[8]=(o*Oe-f*Je+T*Rt)*ot,e[9]=(n*Je-r*Oe-a*Rt)*ot,e[10]=(ue*ze-De*be+Ie*Qe)*ot,e[11]=(P*be-g*ze-re*Qe)*ot,e[12]=(f*Ve-o*ht-h*Rt)*ot,e[13]=(r*ht-n*Ve+i*Rt)*ot,e[14]=(De*$e-ue*Me-qe*Qe)*ot,e[15]=(g*Me-P*$e+$*Qe)*ot,e):null}function $_(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],f=t[4],h=t[5],T=t[6],g=t[7],P=t[8],$=t[9],re=t[10],ue=t[11],De=t[12],qe=t[13],Ie=t[14],Qe=t[15],$e=r[0],be=r[1],Me=r[2],ze=r[3];return e[0]=$e*n+be*f+Me*P+ze*De,e[1]=$e*i+be*h+Me*$+ze*qe,e[2]=$e*a+be*T+Me*re+ze*Ie,e[3]=$e*o+be*g+Me*ue+ze*Qe,$e=r[4],be=r[5],Me=r[6],ze=r[7],e[4]=$e*n+be*f+Me*P+ze*De,e[5]=$e*i+be*h+Me*$+ze*qe,e[6]=$e*a+be*T+Me*re+ze*Ie,e[7]=$e*o+be*g+Me*ue+ze*Qe,$e=r[8],be=r[9],Me=r[10],ze=r[11],e[8]=$e*n+be*f+Me*P+ze*De,e[9]=$e*i+be*h+Me*$+ze*qe,e[10]=$e*a+be*T+Me*re+ze*Ie,e[11]=$e*o+be*g+Me*ue+ze*Qe,$e=r[12],be=r[13],Me=r[14],ze=r[15],e[12]=$e*n+be*f+Me*P+ze*De,e[13]=$e*i+be*h+Me*$+ze*qe,e[14]=$e*a+be*T+Me*re+ze*Ie,e[15]=$e*o+be*g+Me*ue+ze*Qe,e}function _r(e,t,r){var n=r[0],i=r[1],a=r[2],o,f,h,T,g,P,$,re,ue,De,qe,Ie;return t===e?(e[12]=t[0]*n+t[4]*i+t[8]*a+t[12],e[13]=t[1]*n+t[5]*i+t[9]*a+t[13],e[14]=t[2]*n+t[6]*i+t[10]*a+t[14],e[15]=t[3]*n+t[7]*i+t[11]*a+t[15]):(o=t[0],f=t[1],h=t[2],T=t[3],g=t[4],P=t[5],$=t[6],re=t[7],ue=t[8],De=t[9],qe=t[10],Ie=t[11],e[0]=o,e[1]=f,e[2]=h,e[3]=T,e[4]=g,e[5]=P,e[6]=$,e[7]=re,e[8]=ue,e[9]=De,e[10]=qe,e[11]=Ie,e[12]=o*n+g*i+ue*a+t[12],e[13]=f*n+P*i+De*a+t[13],e[14]=h*n+$*i+qe*a+t[14],e[15]=T*n+re*i+Ie*a+t[15]),e}function pn(e,t,r){var n=r[0],i=r[1],a=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function bs(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[4],o=t[5],f=t[6],h=t[7],T=t[8],g=t[9],P=t[10],$=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+T*n,e[5]=o*i+g*n,e[6]=f*i+P*n,e[7]=h*i+$*n,e[8]=T*i-a*n,e[9]=g*i-o*n,e[10]=P*i-f*n,e[11]=$*i-h*n,e}function U_(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[0],o=t[1],f=t[2],h=t[3],T=t[8],g=t[9],P=t[10],$=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-T*n,e[1]=o*i-g*n,e[2]=f*i-P*n,e[3]=h*i-$*n,e[8]=a*n+T*i,e[9]=o*n+g*i,e[10]=f*n+P*i,e[11]=h*n+$*i,e}function Pd(e,t,r){var n=Math.sin(r),i=Math.cos(r),a=t[0],o=t[1],f=t[2],h=t[3],T=t[4],g=t[5],P=t[6],$=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+T*n,e[1]=o*i+g*n,e[2]=f*i+P*n,e[3]=h*i+$*n,e[4]=T*i-a*n,e[5]=g*i-o*n,e[6]=P*i-f*n,e[7]=$*i-h*n,e}function j_(e,t,r,n,i){var a=1/Math.tan(t/2),o;return e[0]=a/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0?(o=1/(n-i),e[10]=(i+n)*o,e[14]=2*i*n*o):(e[10]=-1,e[14]=-2*n),e}var V_=j_;function Dd(){var e=new Di(4);return Di!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function cf(e,t,r,n){var i=new Di(4);return i[0]=e,i[1]=t,i[2]=r,i[3]=n,i}function H_(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*a+r[12]*o,e[1]=r[1]*n+r[5]*i+r[9]*a+r[13]*o,e[2]=r[2]*n+r[6]*i+r[10]*a+r[14]*o,e[3]=r[3]*n+r[7]*i+r[11]*a+r[15]*o,e}(function(){var e=Dd();return function(t,r,n,i,a,o){var f,h;for(r||(r=4),n||(n=0),i?h=Math.min(i*r+n,t.length):h=t.length,f=n;f<h;f+=r)e[0]=t[f],e[1]=t[f+1],e[2]=t[f+2],e[3]=t[f+3],a(e,e,o),t[f]=e[0],t[f+1]=e[1],t[f+2]=e[2],t[f+3]=e[3];return t}})();class z_{constructor(t){Pe(this,"drawPlayerCommand");Pe(this,"drawPlayerShadowCommand");Pe(this,"playerTextures",new Map);Pe(this,"textures",new Map);const r=t.ctx,n=a=>r.prop(a);this.drawPlayerCommand=r({vert:ou,frag:W_,uniforms:{u_projection:n("u_projection"),u_texture:n("u_texture")},attributes:{a_position:r.buffer([[-1,-1],[1,-1],[1,1],[-1,1]]),a_uv:r.buffer([[0,0],[1,0],[1,1],[0,1]])},elements:r.elements([[2,1,0],[0,3,2]]),blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:1,dstRGB:"one minus src alpha",dstAlpha:1},equation:{rgb:"add",alpha:"add"}}});const i=a=>r.prop(a);this.drawPlayerShadowCommand=r({vert:ou,frag:X_,uniforms:{u_projection:i("u_projection")},attributes:{a_position:r.buffer([[-1,-1],[1,-1],[1,1],[-1,1]]),a_uv:r.buffer([[0,0],[1,0],[1,1],[0,1]])},elements:r.elements([[2,1,0],[0,3,2]]),blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:1,dstRGB:"one minus src alpha",dstAlpha:1},equation:{rgb:"add",alpha:"add"}}})}draw(t,r,n){const i=Lr(),a=Lt(),o=ue=>[[0,0,0],[.2,0,-.2],[-.2,0,.2],[.2,0,.2],[-.2,0,-.2]][ue]??[0,0,0],f=[],h=[],T=[],g=[],P=this.getTexture("dizziness"),$=this.getTexture("arrow"),re=new Map;for(const ue of a.players.values()){ue.position.tick(n);const[De,qe]=ue.position.current,Ie=ta(r);if(!ue.position.transition){const Ve=i.indexFromPosition([ue.position.x,ue.position.y]),Je=re.get(Ve)??0;re.set(Ve,Je+1),_r(Ie,Ie,o(Je))}const Qe=this.getPlayerTexture(ue.id);if(!Qe)continue;const $e=Qe.height/Qe.width;_r(Ie,Ie,[De,0,qe]);const be=ta(Ie),Me=.4*$e;if(_r(be,be,[0,Me,0]),pn(be,be,[.4,-Me,1]),f.push({u_projection:be,u_texture:Qe}),P&&ue.dizziness){const Ve=ta(Ie);_r(Ve,Ve,[0,2*Me,.1]),pn(Ve,Ve,[.25,-.25,1]),h.push({u_projection:Ve,u_texture:P})}if($){let Ve=[ue.direction];if(ue.active){const Je=mr().move.accept;Je.length&&(Ve=Je)}for(const Je of Ve){const ht={[Et.UP]:0,[Et.RIGHT]:1,[Et.DOWN]:2,[Et.LEFT]:3}[Je],Oe=ta(Ie),mt=Math.sin(ht*Math.PI/2)*.5,ot=-Math.cos(ht*Math.PI/2)*.5;_r(Oe,Oe,[mt,.1,ot]),pn(Oe,Oe,[.25,1,.25]),bs(Oe,Oe,Math.PI/2),Pd(Oe,Oe,ht*Math.PI/2),h.push({u_projection:Oe,u_texture:$})}}const ze=ta(Ie);_r(ze,ze,[0,.01,0]),bs(ze,ze,Math.PI/2),pn(ze,ze,[.4,.2,1]),T.push({u_projection:ze});const xt=t.projectPoint([De,2*Me,qe],r),Rt=`${ue.id}`;g.push([Rt,xt])}this.drawPlayerCommand(f),this.drawPlayerShadowCommand(T),this.drawPlayerCommand(h),a.playersLabel=g}getTexture(t){let r=this.textures.get(t);if(r===void 0){const n=Dn().getTexture(t);if(r=Jr().ctx.texture(n),!r)return;this.textures.set(t,r)}return r}getPlayerTexture(t){let r=this.playerTextures.get(t);if(r===void 0){const n=`player-${t}`,i=Dn().getTexture(n);if(r=Jr().ctx.texture(i),!r)return;this.textures.set(n,r)}return r}}const ou=`
precision mediump float;
attribute vec2 a_position;
attribute vec2 a_uv;

uniform mat4 u_projection;

varying vec2 uv;

void main() {
  uv = a_uv;
  gl_Position = u_projection * vec4(a_position, 0, 1);
}
`,W_=`
precision mediump float;
uniform sampler2D u_texture;

varying vec2 uv;

void main() {
  vec4 color = texture2D(u_texture, uv);
  if (color.a < 0.1) discard;
  gl_FragColor = color;
}
`,X_=`
precision mediump float;

varying vec2 uv;

void main() {
  float distance_to_center = distance(uv, vec2(0.5));
  if (distance_to_center > 0.5) discard;
  gl_FragColor = vec4(0.1, 0.1, 0.1, 0.8);
}
`;class Y_{constructor(t){Pe(this,"fbo");Pe(this,"width");Pe(this,"height");Pe(this,"changed",!0);Pe(this,"updateMapCommand");Pe(this,"mapCommand");Pe(this,"undergroundCommand");Pe(this,"skyCommand");Pe(this,"textures",new Map);const r=t.ctx,n=Lr(),i=(this.width=n.width)*On.TILE_SIZE,a=(this.height=n.height)*On.TILE_SIZE;this.fbo=r.framebuffer({width:i,height:a});const o=T=>r.prop(T);this.updateMapCommand=r({vert:fu,frag:lu,framebuffer:this.fbo,uniforms:{u_projection:o("u_projection"),u_texture:o("u_texture")},attributes:{a_position:r.buffer([[-1,-1],[1,-1],[1,1],[-1,1]]),a_uv:r.buffer([[0,0],[1,0],[1,1],[0,1]])},elements:r.elements([[2,1,0],[0,3,2]]),blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"src alpha",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}}});const f=T=>r.prop(T);this.mapCommand=r({vert:fu,frag:lu,uniforms:{u_projection:f("u_projection"),u_texture:f("u_texture")},attributes:{a_position:r.buffer([[-1,1],[1,1],[1,-1],[-1,-1]]),a_uv:r.buffer([[0,0],[1,0],[1,1],[0,1]])},elements:r.elements([[2,1,0],[0,3,2]]),blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"src alpha",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}}});const h=T=>r.prop(T);this.undergroundCommand=r({vert:K_,frag:q_,uniforms:{u_projection:h("u_projection"),u_color:cf(.4609375,.640625,.2890625,1)},attributes:{a_position:r.buffer([[-1,1,-1],[1,1,-1],[1,1,1],[-1,1,1],[-1,-1,1],[1,-1,1],[1,1,1],[-1,1,1],[-1,-1,-1],[-1,1,-1],[-1,1,1],[-1,-1,1],[1,-1,-1],[1,-1,1],[1,1,1],[1,1,-1]])},elements:r.elements([[2,1,0],[0,3,2],[6,5,4],[4,7,6],[10,9,8],[8,11,10],[14,13,12],[12,15,14]]),blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"src alpha",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}}}),this.skyCommand=r({vert:Q_,frag:Z_,uniforms:{u_projection:h("u_projection"),u_color:cf(.4921875,.8359375,.8515625,1)},attributes:{a_position:r.buffer([[-1,-1],[1,-1],[1,1],[-1,1]])},elements:r.elements([[2,1,0],[0,3,2]]),blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:"src alpha",dstRGB:"one minus src alpha",dstAlpha:"one minus src alpha"}}})}draw(t,r){const n=Lr();if(this.changed){t.ctx.clear({depth:1,color:[0,0,0,0],framebuffer:this.fbo});const g=[];for(const P in n.flatTiles){const $=n.flatTiles[P],re=this.getTexture($);if(!re)continue;const ue=hn(),[De,qe]=n.indexFromFlat(parseInt(P));_r(ue,ue,[-1,1,0]),pn(ue,ue,[1/n.width,-1/n.height,0]),_r(ue,ue,[De*2+1,qe*2+1,0]),g.push({u_projection:ue,u_texture:re})}this.updateMapCommand(g),this.changed=!1}const i=Math.floor(n.width/2),a=Math.floor(n.height/2),o=hn();_r(o,r,[i,-.01,a]),pn(o,o,[n.width/2+.5,5,n.height/2+.5]),_r(o,o,[0,-1,0]),this.undergroundCommand({u_projection:o});const f=hn();_r(f,r,[i,25,a-10]),pn(f,f,[100,100,1]),this.skyCommand({u_projection:f});const h=hn();_r(h,r,[i,0,a]),bs(h,h,Math.PI/2),pn(h,h,[this.width/2,this.height/2,1]),this.mapCommand({u_projection:h,u_texture:this.fbo})}getTexture(t){let r=this.textures.get(t);if(r===void 0){const n=On.tileImage(t);if(!n||(r=Jr().ctx.texture(n),!r))return;this.textures.set(t,r)}return r}}const fu=`
precision mediump float;
attribute vec2 a_position;
attribute vec2 a_uv;

uniform mat4 u_projection;

varying vec2 uv;

void main() {
  uv = a_uv;
  gl_Position = u_projection * vec4(a_position, 0, 1);
}
`,lu=`
precision mediump float;
uniform sampler2D u_texture;

varying vec2 uv;

void main() {
  gl_FragColor = texture2D(u_texture, uv);
}
`,K_=`
precision mediump float;
attribute vec3 a_position;

uniform mat4 u_projection;

varying float height;
void main() {
  height = a_position.y;
  gl_Position = u_projection * vec4(a_position, 1);
}
`,q_=`
precision mediump float;
uniform vec4 u_color;

varying float height;
void main() {
  gl_FragColor = u_color * height;
  if (height < 0.995) {
    gl_FragColor -= vec4(0.1, 0.1, 0.1, 0);
  }
}
`,Q_=`
precision mediump float;
attribute vec2 a_position;

uniform mat4 u_projection;

void main() {
  gl_Position = u_projection * vec4(a_position, 0, 1);
}
`,Z_=`
precision mediump float;
uniform vec4 u_color;

void main() {
  gl_FragColor = u_color;
}
`;class J_{constructor(t){Pe(this,"damagedCommand");Pe(this,"textures",new Map);const r=t.ctx,n=i=>r.prop(i);this.damagedCommand=r({vert:eg,frag:tg,uniforms:{u_projection:n("u_projection"),u_direction:n("u_direction"),u_texture:n("u_texture"),u_time:n("u_time")},attributes:{a_position:r.buffer([[-1,-1],[1,-1],[1,1],[-1,1]]),a_uv:r.buffer([[0,0],[1,0],[1,1],[0,1]])},elements:r.elements([[2,1,0],[0,3,2]]),blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:1,dstRGB:"one minus src alpha",dstAlpha:1},equation:{rgb:"add",alpha:"add"}}})}draw(t,r,n){const i=Od(),a=[];for(const o of i.inner.values())if(i.check("damaged",o)){o.time+=n;const f=this.getTexture("fx-damaged");if(!f)continue;const[h,T]=o.position,g=hn();_r(g,r,[h,.5,T+.1]),pn(g,g,[.2,-.2,1]),a.push({u_time:o.time,u_direction:o.direction,u_projection:g,u_texture:f})}this.damagedCommand(a)}getTexture(t){let r=this.textures.get(t);if(r===void 0){const n=Dn().getTexture(t);if(r=Jr().ctx.texture(n),!r)return;this.textures.set(t,r)}return r}}const eg=`
precision mediump float;
attribute vec2 a_position;
attribute vec2 a_uv;

uniform mat4 u_projection;
uniform vec2 u_direction;
uniform float u_time;

varying vec2 uv;

void main() {
  uv = a_uv;
  vec2 move = u_direction * u_time / 800.0 * 2.0;
  gl_Position = u_projection * vec4(a_position - move, 0, 1);
}
`,tg=`
precision mediump float;
uniform sampler2D u_texture;
uniform float u_time;

varying vec2 uv;

void main() {
  float t = u_time / 800.0;
  vec4 color = texture2D(u_texture, uv);
  gl_FragColor = vec4(color.rgb, color.a * (1.0 - t));
}
`,Jr=()=>Id,rg=e=>Id=new ng(e);let Id;class ng{constructor(t){Pe(this,"canvas");Pe(this,"ctx");Pe(this,"viewport",600);Pe(this,"paused",!0);Pe(this,"position",new Is(0,0));Pe(this,"aspect",NaN);Pe(this,"width",NaN);Pe(this,"height",NaN);Pe(this,"backgroundRender");Pe(this,"playersRender");Pe(this,"fxRender");this.canvas=t,this.ctx=B_({pixelRatio:1,canvas:t}),this.backgroundRender=new Y_(this),this.playersRender=new z_(this),this.fxRender=new J_(this),this.resize(),window.addEventListener("resize",this.resize.bind(this))}start(){const t=this.paused;this.paused=!1,t&&this.draw()}stop(){this.paused=!0}draw(t=Date.now()){if(this.paused)return;const r=Date.now(),n=r-t;this.position.tick(n);const i=n<=1e3/60;if(requestAnimationFrame(()=>this.draw(i?t:r)),i)return;this.ctx.poll(),this.clear();const f=V_(hn(),Math.PI/3,this.aspect,1,1e4),h=hn(),T=5,g=30*Math.PI/180,P=T*Math.sin(g),$=T*Math.cos(g),re=.8,[ue,De]=this.position.current;_r(h,h,[Ct.x+ue,Ct.y+re+P,Ct.z+De+$]),bs(h,h,Ct.angleX*Math.PI/180-g),U_(h,h,Ct.angleY*Math.PI/180),Pd(h,h,Ct.angleZ*Math.PI/180);const qe=k_(hn(),h),Ie=$_(hn(),f,qe);this.backgroundRender.draw(this,Ie),this.playersRender.draw(this,Ie,n),this.fxRender.draw(this,Ie,n)}clear(){this.ctx.clear({color:[0,0,0,1],depth:1})}resize(){let{width:t,height:r}=this.canvas.getBoundingClientRect();const n=window.devicePixelRatio;this.canvas.height=r*n,this.canvas.width=t*n,this.aspect=t/r,this.height=r,this.width=t}projectPoint(t,r){const n=cf(t[0],t[1],t[2],1),i=H_(Dd(),n,r);return[(i[0]/i[3]+1)*.5*this.width,(1-i[1]/i[3])*.5*this.height]}}const Fi=6,ig=.6;class ag{constructor(t,r,n,i,a){Pe(this,"active",!1);Pe(this,"health",Fi);Pe(this,"dizziness",0);Pe(this,"fixedDirection",!0);Pe(this,"doubleStep",0);this.id=t,this.score=r,this.color=n,this.position=i,this.direction=a}async walk(){const r=Lr().nextPosition([this.position.x,this.position.y],this.direction);if(r.size===0)throw new Error("No moves available");const n=mr();this.fixedDirection?this.fixedDirection=!1:this.direction=r.size===1?r.keys().next().value:await n.move.input("選擇方向",Array.from(r.keys()));const i=r.get(this.direction);this.position.set(this.position.x+i[0],this.position.y+i[1],200);const a=Jr();a.position=this.position.clone(),await n.wait(200)}async trigger(t){const r=Lr(),n=Lt();t??(t=r.getTile(this.position.x,this.position.y)),console.group(`玩家 ${this.id} 抵達 ${On.tileText(t)}`);const i={[hr.Spawner]:async()=>{console.log("獲得 100 分"),n.messages.push(`玩家 ${this.id} 獲得 100 分`),this.score+=100,n.victoryScore<=this.score&&(console.log("獲勝"),n.messages.push(`玩家 ${this.id} 獲勝`),n.winner=this,Rf().running=!1)},[hr.Task]:async()=>{const a=T_();console.log(`獲得任務 ${a[0]}`),n.messages.push(`玩家 ${this.id} 獲得任務 ${a[0]}`),await n.setEvent(this,"任務",a,!0)},[hr.Opportunity]:async()=>{const a=F_();console.log(`獲得機會 ${a[0]}`),n.messages.push(`玩家 ${this.id} 獲得機會 ${a[0]}`),await n.setEvent(this,"機會",a)},[hr.Destiny]:async()=>{const a=R_();console.log(`獲得命運 ${a[0]}`),n.messages.push(`玩家 ${this.id} 獲得命運 ${a[0]}`),await n.setEvent(this,"命運",a)},[hr.Punishment]:async()=>{const a=D_();console.log(`獲得懲罰 ${a[0]}`),n.messages.push(`玩家 ${this.id} 獲得懲罰 ${a[0]}`),await n.setEvent(this,"懲罰",a)},[hr.Teleport]:async()=>{const a=mr();if(!await a.confirm.input("是否傳送"))return;const o=r.teleports.filter(h=>h[0]!==this.position.x&&h[1]!==this.position.y);ys(o);const f=o.pop();console.log(`傳送至 ${f}`),n.messages.push(`玩家 ${this.id} 傳送至 ${f}`),await this.teleport(f),await a.wait(500)},[hr.Prison]:async()=>{console.log("被關 1 回合"),n.messages.push(`玩家 ${this.id} 被關 1 回合`),this.dizziness++},[hr.Hospital]:async()=>{console.log("被治療 1 回合"),n.messages.push(`玩家 ${this.id} 被治療 1 回合`),this.health=Fi,this.dizziness++},[hr.Empty](){throw new Error("Unreachable")}}[t];await i(),console.groupEnd()}async attack(t,r=!1){const n=Lr(),i=Lt();if(n.getTile(this.position.x,this.position.y)===hr.Hospital){console.log(`玩家 ${this.id} 在醫院，無法攻擊`),i.messages.push(`玩家 ${this.id} 在醫院，無法攻擊`);return}const a=mr();if(!r&&!await a.confirm.input(`是否攻擊玩家 ${t.id}`)){console.log(`玩家 ${this.id} 放棄攻擊`),i.messages.push(`玩家 ${this.id} 放棄攻擊`);return}console.group(`玩家 ${this.id} 與玩家 ${t.id} 對戰`);const o=Math.floor(Math.random()*6)+1;i.plunder={target:t.id,damage:o},await a.next.input("進行攻擊"),i.plunder=void 0,await t.damage(o,this),console.groupEnd()}async damage(t,r){console.log(`玩家 ${this.id} 受到 ${t} 點傷害`);const n=Lt();n.messages.push(`玩家 ${this.id} 受到 ${t} 點傷害`),this.health-=t;const i=Od();let[a,o]=this.position.current;for(let f=0;f<t;f++){const h=Math.random()*Math.PI*2;i.effect({name:"damaged",position:[a,o],direction:[Math.sin(h),Math.cos(h)],time:0},800)}if(this.health>0){await mr().wait(1e3);return}if(console.log(`玩家 ${this.id} 被擊倒`),n.messages.push(`玩家 ${this.id} 被擊倒`),this.health=Fi,this.dizziness=1,r){const f=Math.floor(this.score*ig);console.log(`玩家 ${r.id} 獲得 ${f} 分`),n.messages.push(`玩家 ${r.id} 掠奪了 ${f} 分`),this.score-=f,r.score+=f}else{const f=Math.floor(this.score*.2);console.log(`玩家 ${this.id} 掉落 ${f} 分`),n.messages.push(`玩家 ${this.id} 掉落了 ${f} 分`),this.score-=f}await mr().wait(1e3)}async teleport(t){const r=Lr(),n=this.active;this.position.set(t[0],t[1],200),n&&(Jr().position=this.position.clone());const i=Array.from(r.nextPosition([t[0],t[1]]).keys());ys(i),this.direction=i.pop(),this.fixedDirection=!0,n&&await mr().wait(200)}teleportPosition(t){return this.teleport([t.x,t.y])}status(){return this.dizziness?"dizziness":"normal"}}const Rf=()=>sg,sg=bf(new class{constructor(){Pe(this,"ready",!1);Pe(this,"running",!1)}async setup(){console.info("初始化遊戲");const t=Lt(),r=Lr();console.info("初始化玩家");const n=r.spawnPoints(),i=["#8650a6","#56ae6c","#b84c7d","#ac9c3d","#6881d8","#ba543d"];if(n.length<t.quantity)throw new Error("Not enough spawners");ys(n);let a;for(let f=0;f<t.quantity;f++){const h=n.pop();f===0&&(a=h[0]);const T=Is.from(h[0]),g=h[1],P=new ag(f+1,100,i[f],T,g);t.players.set(f,P)}console.info("初始化渲染器");const o=Jr();o.start(),o.position.set(a[0],a[1])}async run(){const t=Lt(),r=Jr(),n=mr();t.inning++,console.group(`第 ${t.inning} 回合`);const i=t.players;for(const a of i.values()){a.active=!0;const o=a.position.x,f=a.position.y;if(r.position.set(o,f,a.position.distance(r.position)*50),a.dizziness){console.info(`玩家 ${a.id} 眩暈中`),t.messages.push(`玩家 ${a.id} 眩暈中`),await n.wait(1e3),a.active=!1,a.dizziness--;continue}for(t.steps=Math.floor(Math.random()*6)+1,a.doubleStep&&(t.steps+=Math.floor(Math.random()*6)+1,a.doubleStep--),await n.next.input("開始回合");t.steps>0;){await a.walk(),t.steps--;const h=t.traps;for(const T of h){const g=a.position,P=T[0]===g.x,$=T[1]===g.y;!P||!$||await T[2](a)}for(const T of i.values())a!==T&&a.position.equals(T.position)&&await a.attack(T);t.steps===0&&await a.trigger()}t.steps=void 0,await n.wait(500),a.active=!1}console.groupEnd(),this.running&&tf(()=>this.run())}async init(t){console.info("初始化狀態"),this.ready=!0,this.running=!0;const r=Lt();r.quantity=t,tf(async()=>{await this.setup(),await this.run()})}async stop(){this.running=!1,this.ready=!1,Jr().stop()}}),og={class:"loader"},fg={class:"progress"},lg=["max","value"],cg={key:0},ug={key:1,class:"log"},dg=en({__name:"Loader",setup(e){const t=Dn(),r=ef(()=>t.textures.size+t.sounds.size+t.loadings),n=ef(()=>r.value-t.loadings);return(i,a)=>(rt(),lt("div",og,[Xe("span",fg,[It(pt(Ne(n))+" / "+pt(Ne(r))+" ",1),Xe("progress",{max:Ne(r),value:Ne(n)},null,8,lg)]),Ne(t).isFinished()?(rt(),lt("p",cg,"Loading Completed")):(rt(),lt("div",ug,[(rt(!0),lt(Tt,null,Zr(Ne(t).logs.toReversed(),(o,f)=>(rt(),lt("span",{key:f},pt(o),1))),128))]))]))}}),hg=vn(dg,[["__scopeId","data-v-d03c34ba"]]),pg={key:0,class:"error"},mg=en({__name:"Start",setup(e){const t=Cc(2),r=Rf(),n=Dn(),i=()=>{if(t.value<2||t.value>8){a.value="The quantity must be between 2 and 8";return}if(!n.isFinished()){a.value="The game is not ready yet";return}r.init(t.value)},a=Cc("");return(o,f)=>(rt(),lt(Tt,null,[Xe("form",{onSubmit:Rd(i,["prevent"])},[f[2]||(f[2]=Xe("h1",null,"Monopoly",-1)),Xe("label",null,[f[1]||(f[1]=Xe("span",null,"Quantity: ",-1)),Br(Xe("input",{type:"number",min:"2",max:"8","onUpdate:modelValue":f[0]||(f[0]=h=>t.value=h)},null,512),[[kr,t.value]])]),f[3]||(f[3]=Xe("button",{class:"confirm"},"Start",-1)),a.value?(rt(),lt("span",pg,"Warring: "+pt(a.value),1)):wr("",!0)],32),jt(hg)],64))}}),vg=vn(mg,[["__scopeId","data-v-2c58ce02"]]),_g=en({__name:"Canvas",setup(e){const t=Yu("canvas");return Oi(t,r=>{const n=Jr();n&&n.stop(),r&&rg(r)}),(r,n)=>(rt(),lt("canvas",{class:"canvas",ref_key:"canvas",ref:t},null,512))}}),gg=vn(_g,[["__scopeId","data-v-368ef003"]]),yg={class:"popup"},bg={class:"input"},xg=["disabled","onClick"],Eg=["onClick"],Tg=["onClick"],Ag=en({__name:"Input",setup(e){const t=mr(),r=t.next,n=t.move,i=t.confirm,a=t.players;function o(g,P){return g.length===0?!0:g.includes(P)}const f=[[Et.UP,"⇑"],[Et.DOWN,"⇓"],[Et.LEFT,"⇐"],[Et.RIGHT,"⇒"]],h=[[!0,"接受"],[!1,"拒絕"]],T=ya(()=>Array.from(a.accept).map(g=>[g,`第${g.id}組`]));return(g,P)=>(rt(),lt(Tt,null,[Xe("div",yg,pt(Ne(r).text)+" "+pt(Ne(n).text)+" "+pt(Ne(i).text),1),Xe("div",bg,[Ne(r).receive?(rt(),lt("button",{key:0,onClick:P[0]||(P[0]=$=>Ne(r).resolve())},"下一步")):wr("",!0),Ne(n).receive?(rt(),lt(Tt,{key:1},Zr(f,([$,re])=>Xe("button",{disabled:!o(Ne(n).accept,$),onClick:ue=>Ne(n).resolve($)},pt(re),9,xg)),64)):wr("",!0),Ne(i).receive?(rt(),lt(Tt,{key:2},Zr(h,([$,re])=>(rt(),lt(Tt,null,[o(Ne(i).accept,$)?(rt(),lt("button",{key:0,onClick:ue=>Ne(i).resolve($)},pt(re),9,Eg)):wr("",!0)],64))),64)):wr("",!0),Ne(a).receive?(rt(!0),lt(Tt,{key:3},Zr(T.value,([$,re])=>(rt(),lt(Tt,null,[o(Ne(a).accept,$)?(rt(),lt("button",{key:0,onClick:ue=>Ne(a).resolve($)},pt(re),9,Tg)):wr("",!0)],64))),256)):wr("",!0)])],64))}}),wg=vn(Ag,[["__scopeId","data-v-1abf05a1"]]),Sg={key:0},Cg={key:1},Lg={class:"info"},Rg=en({__name:"Ranking",setup(e){const t=Lt(),r=ya(()=>Array.from(t.players.values()));return(n,i)=>(rt(),la(Ld,{name:"list",tag:"div",class:"list"},{default:hs(()=>[(rt(!0),lt(Tt,null,Zr(r.value.toSorted((a,o)=>o.score-a.score),(a,o)=>(rt(),lt("div",{class:ws(["player",{active:a.active}]),key:a.id},[Xe("h3",null,[It("第 "+pt(a.id)+" 組 ",1),o===0?(rt(),lt("i",Sg,"👑")):wr("",!0),a.dizziness?(rt(),lt("i",Cg,"💫")):wr("",!0)]),Xe("div",Lg,[Xe("span",null,"分數: "+pt(a.score),1)]),Xe("span",null,[(rt(!0),lt(Tt,null,Zr(Ne(Fi),f=>(rt(),lt(Tt,null,[It(pt(f<=a.health?"❤️":"🤍"),1)],64))),256))])],2))),128))]),_:1}))}}),Og=vn(Rg,[["__scopeId","data-v-63b475c4"]]),Fg=en({__name:"Minimap",setup(e){const t=Lr();let r=null,n=null;const i=Yu("canvas");Oi(i,T=>{if(n=null,!T)return;n=T.getContext("2d"),g(T,n),window.addEventListener("resize",g.bind(null,T,n));function g(P,$){let{width:re,height:ue}=P.getBoundingClientRect();const De=window.devicePixelRatio||1,qe=P.width=re*De,Ie=P.height=ue*De,Qe=qe/t.width,$e=Ie/t.height;$.setTransform(Qe,0,0,$e,0,0);const be=new OffscreenCanvas(qe,Ie),Me=be.getContext("2d");Me.setTransform(Qe,0,0,$e,0,0);for(const[ze,xt]of t.flatTiles.entries()){const[Rt,Ve]=t.indexFromFlat(ze),Je=On.tileImage(xt);Je&&Me.drawImage(Je,0,0,Je.width,Je.height,Rt,Ve,1,1)}r=be.transferToImageBitmap(),h()}});const a=Lt();Oi(a,()=>requestAnimationFrame(h));const o=ya(()=>t.width/t.height);let f=NaN;function h(T=0){if(!n||T===f)return;f=T;const g=t.width,P=t.height;n.clearRect(0,0,g,P),n.drawImage(r,0,0,g,P),n.font="0.8px sans-serif",n.textAlign="center",n.textBaseline="hanging";for(const $ of a.players.values()){const re=$.position,ue=re.current[0]+.1,De=re.current[1]+.1,qe=$.color;n.fillStyle=qe,n.beginPath(),n.roundRect(ue,De,.8,.8,.1),n.fill(),n.fillStyle="#fff",n.fillText($.id.toString(),ue+.4,De+.1)}}return(T,g)=>(rt(),lt("canvas",{class:"minimap",ref_key:"canvas",ref:i,style:va({aspectRatio:o.value}),onContextmenu:g[0]||(g[0]=Rd(P=>Ne(Ct).enabled=!Ne(Ct).enabled,["right","prevent"]))},null,36))}}),Pg=vn(Fg,[["__scopeId","data-v-cf41e93e"]]),Gd=""+new URL("../tiles/destiny.png",import.meta.url).href,Dg={class:"popup-group"},Ig={key:0,class:"popup center"},Gg={key:1,class:"popup center"},Mg={key:0,class:"popup debug"},Ng={open:""},Bg={open:""},kg=["onUpdate:modelValue","max"],$g=["onUpdate:modelValue"],Ug=["onUpdate:modelValue"],jg={open:""},Vg={key:0,class:"popup event"},Hg={class:"face front"},zg=["innerHTML"],Wg={class:"btns"},Xg=en({__name:"Popup",setup(e){const t=Lt();function r(i){const[a,o]=i;return{left:`${a}px`,top:`${o}px`}}function n(i){return i.toFixed(2)}return(i,a)=>(rt(),lt(Tt,null,[Xe("div",Dg,[Ne(t).plunder?(rt(),lt("div",Ig," 對 第"+pt(Ne(t).plunder.target)+"組 造成 "+pt(Ne(t).plunder.damage)+" 點 傷害 ",1)):Ne(t).steps!==void 0?(rt(),lt("div",Gg,pt(Ne(t).steps)+" 步 ",1)):wr("",!0),jt(Ld,{tag:"div",name:"list",class:"popup messages"},{default:hs(()=>[(rt(!0),lt(Tt,null,Zr(Ne(t).messages.toArray(),o=>(rt(),lt("div",{key:o,class:"message"},pt(o),1))),128))]),_:1}),(rt(!0),lt(Tt,null,Zr(Ne(t).playersLabel,([o,f])=>(rt(),lt("div",{style:va(r(f)),class:"popup label"}," 第 "+pt(o)+" 組 ",5))),256))]),Ne(Ct).enabled?(rt(),lt("div",Mg,[Xe("details",Ng,[a[11]||(a[11]=Xe("summary",null,"Current",-1)),Xe("span",null,[a[10]||(a[10]=It("Step: ")),Ne(t).steps!==void 0?Br((rt(),lt("input",{key:0,type:"range","onUpdate:modelValue":a[0]||(a[0]=o=>Ne(t).steps=o),max:32,min:0},null,512)),[[kr,Ne(t).steps,void 0,{number:!0}]]):wr("",!0),It(pt(Ne(t).steps??"Undefined"),1)])]),(rt(!0),lt(Tt,null,Zr(Ne(t).players.values(),o=>(rt(),lt("details",Bg,[Xe("summary",null,"Player "+pt(o.id),1),Xe("span",null,[a[12]||(a[12]=It("Health: ")),Br(Xe("input",{type:"range","onUpdate:modelValue":f=>o.health=f,max:Ne(Fi),min:"0"},null,8,kg),[[kr,o.health,void 0,{number:!0}]]),It(" "+pt(o.health),1)]),Xe("span",null,[a[13]||(a[13]=It("Dizziness: ")),Br(Xe("input",{type:"range","onUpdate:modelValue":f=>o.dizziness=f,max:"10",min:"0"},null,8,$g),[[kr,o.dizziness,void 0,{number:!0}]]),It(" "+pt(o.dizziness),1)]),Xe("span",null,[a[14]||(a[14]=It("Score: ")),Br(Xe("input",{type:"number","onUpdate:modelValue":f=>o.score=f,max:"10",min:"0"},null,8,Ug),[[kr,o.score,void 0,{number:!0}]])])]))),256)),Xe("details",jg,[a[21]||(a[21]=Xe("summary",null,"View",-1)),Xe("span",null,[a[15]||(a[15]=It("X:")),Br(Xe("input",{type:"range","onUpdate:modelValue":a[1]||(a[1]=o=>Ne(Ct).x=o),max:10,min:-10,step:"0.5"},null,512),[[kr,Ne(Ct).x,void 0,{number:!0}]]),It(pt(n(Ne(Ct).x)),1)]),Xe("span",null,[a[16]||(a[16]=It("Y:")),Br(Xe("input",{type:"range","onUpdate:modelValue":a[2]||(a[2]=o=>Ne(Ct).y=o),max:10,min:-10,step:"0.5"},null,512),[[kr,Ne(Ct).y,void 0,{number:!0}]]),It(pt(n(Ne(Ct).y)),1)]),Xe("span",null,[a[17]||(a[17]=It("Z:")),Br(Xe("input",{type:"range","onUpdate:modelValue":a[3]||(a[3]=o=>Ne(Ct).z=o),max:10,min:-10,step:"0.5"},null,512),[[kr,Ne(Ct).z,void 0,{number:!0}]]),It(pt(n(Ne(Ct).z)),1)]),Xe("span",null,[a[18]||(a[18]=It("AngleX: ")),Br(Xe("input",{type:"range","onUpdate:modelValue":a[4]||(a[4]=o=>Ne(Ct).angleX=o),max:180,min:-180},null,512),[[kr,Ne(Ct).angleX,void 0,{number:!0}]]),It(pt(n(Ne(Ct).angleX)),1)]),Xe("span",null,[a[19]||(a[19]=It("AngleY: ")),Br(Xe("input",{type:"range","onUpdate:modelValue":a[5]||(a[5]=o=>Ne(Ct).angleY=o),max:180,min:-180},null,512),[[kr,Ne(Ct).angleY,void 0,{number:!0}]]),It(pt(n(Ne(Ct).angleY)),1)]),Xe("span",null,[a[20]||(a[20]=It("AngleZ: ")),Br(Xe("input",{type:"range","onUpdate:modelValue":a[6]||(a[6]=o=>Ne(Ct).angleZ=o),max:180,min:-180},null,512),[[kr,Ne(Ct).angleZ,void 0,{number:!0}]]),It(pt(n(Ne(Ct).angleZ)),1)])])])):wr("",!0),jt(k0,{name:"event"},{default:hs(()=>[Ne(t).event?(rt(),lt("div",Vg,[Xe("div",Hg,[Xe("h1",null,pt(Ne(t).event.type),1),Xe("h2",null,pt(Ne(t).event.title),1),Xe("p",{innerHTML:Ne(t).event.description},null,8,zg),Xe("div",Wg,[Ne(t).event.hasFail?(rt(),lt(Tt,{key:0},[Xe("button",{onClick:a[7]||(a[7]=o=>Ne(t).event.callback(!0))},"成功"),Xe("button",{onClick:a[8]||(a[8]=o=>Ne(t).event.callback(!1))},"失敗")],64)):(rt(),lt("button",{key:1,onClick:a[9]||(a[9]=o=>Ne(t).event.callback(!0))},"完成"))])]),a[22]||(a[22]=Xe("div",{class:"face back"},[Xe("img",{src:Gd})],-1))])):wr("",!0)]),_:1})],64))}}),Yg=vn(Xg,[["__scopeId","data-v-24fb9642"]]),Kg={class:"container"},qg=en({__name:"Game",setup(e){return(t,r)=>(rt(),lt("div",Kg,[Xe("main",null,[jt(gg),jt(wg),jt(Yg)]),Xe("aside",null,[jt(Og),jt(Pg)])]))}}),Qg=vn(qg,[["__scopeId","data-v-56987a3e"]]),Zg=en({__name:"App",setup(e){const t=Rf();return(r,n)=>Ne(t).ready?Ne(t).running?(rt(),la(Qg,{key:1})):(rt(),la(x_,{key:2})):(rt(),la(vg,{key:0}))}}),Jg=""+new URL("../tiles/spawner.webp",import.meta.url).href,ey=""+new URL("../tiles/task.png",import.meta.url).href,ty=""+new URL("../tiles/opportunity.png",import.meta.url).href,ry=""+new URL("../tiles/punishment.png",import.meta.url).href,ny=""+new URL("../tiles/teleport.png",import.meta.url).href,iy=""+new URL("../tiles/prison.png",import.meta.url).href,ay=""+new URL("../tiles/hospital.png",import.meta.url).href,ba=""+new URL("../players/player.1.png",import.meta.url).href,sy=""+new URL("../players/player.2.png",import.meta.url).href,oy=""+new URL("../fx/damaged.png",import.meta.url).href,fy=""+new URL("../others/arrow.png",import.meta.url).href,ly=""+new URL("../others/dizziness.png",import.meta.url).href;p_(Zg).mount("#app");const ir=Dn();ir.loadTexture("tile-spawner",Jg);ir.loadTexture("tile-task",ey);ir.loadTexture("tile-opportunity",ty);ir.loadTexture("tile-destiny",Gd);ir.loadTexture("tile-punishment",ry);ir.loadTexture("tile-teleport",ny);ir.loadTexture("tile-prison",iy);ir.loadTexture("tile-hospital",ay);ir.loadTexture("player-1",ba);ir.loadTexture("player-2",sy);ir.loadTexture("player-3",ba);ir.loadTexture("player-4",ba);ir.loadTexture("player-5",ba);ir.loadTexture("player-6",ba);ir.loadTexture("fx-damaged",oy);ir.loadTexture("arrow",fy);ir.loadTexture("dizziness",ly);
